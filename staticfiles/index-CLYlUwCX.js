var Es=Object.defineProperty;var js=(et,_e,tt)=>_e in et?Es(et,_e,{enumerable:!0,configurable:!0,writable:!0,value:tt}):et[_e]=tt;var rs=(et,_e,tt)=>js(et,typeof _e!="symbol"?_e+"":_e,tt);function _mergeNamespaces(et,_e){for(var tt=0;tt<_e.length;tt++){const st=_e[tt];if(typeof st!="string"&&!Array.isArray(st)){for(const rt in st)if(rt!=="default"&&!(rt in et)){const nt=Object.getOwnPropertyDescriptor(st,rt);nt&&Object.defineProperty(et,rt,nt.get?nt:{enumerable:!0,get:()=>st[rt]})}}}return Object.freeze(Object.defineProperty(et,Symbol.toStringTag,{value:"Module"}))}(function(){const _e=document.createElement("link").relList;if(_e&&_e.supports&&_e.supports("modulepreload"))return;for(const rt of document.querySelectorAll('link[rel="modulepreload"]'))st(rt);new MutationObserver(rt=>{for(const nt of rt)if(nt.type==="childList")for(const it of nt.addedNodes)it.tagName==="LINK"&&it.rel==="modulepreload"&&st(it)}).observe(document,{childList:!0,subtree:!0});function tt(rt){const nt={};return rt.integrity&&(nt.integrity=rt.integrity),rt.referrerPolicy&&(nt.referrerPolicy=rt.referrerPolicy),rt.crossOrigin==="use-credentials"?nt.credentials="include":rt.crossOrigin==="anonymous"?nt.credentials="omit":nt.credentials="same-origin",nt}function st(rt){if(rt.ep)return;rt.ep=!0;const nt=tt(rt);fetch(rt.href,nt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(et){return et&&et.__esModule&&Object.prototype.hasOwnProperty.call(et,"default")?et.default:et}function getAugmentedNamespace(et){if(et.__esModule)return et;var _e=et.default;if(typeof _e=="function"){var tt=function st(){return this instanceof st?Reflect.construct(_e,arguments,this.constructor):_e.apply(this,arguments)};tt.prototype=_e.prototype}else tt={};return Object.defineProperty(tt,"__esModule",{value:!0}),Object.keys(et).forEach(function(st){var rt=Object.getOwnPropertyDescriptor(et,st);Object.defineProperty(tt,st,rt.get?rt:{enumerable:!0,get:function(){return et[st]}})}),tt}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$2(et){return et===null||typeof et!="object"?null:(et=z$1&&et[z$1]||et["@@iterator"],typeof et=="function"?et:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$2={};function E$1(et,_e,tt){this.props=et,this.context=_e,this.refs=D$2,this.updater=tt||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(et,_e){if(typeof et!="object"&&typeof et!="function"&&et!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,et,_e,"setState")};E$1.prototype.forceUpdate=function(et){this.updater.enqueueForceUpdate(this,et,"forceUpdate")};function F$1(){}F$1.prototype=E$1.prototype;function G$2(et,_e,tt){this.props=et,this.context=_e,this.refs=D$2,this.updater=tt||B$1}var H$1=G$2.prototype=new F$1;H$1.constructor=G$2;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(et,_e,tt){var st,rt={},nt=null,it=null;if(_e!=null)for(st in _e.ref!==void 0&&(it=_e.ref),_e.key!==void 0&&(nt=""+_e.key),_e)J$1.call(_e,st)&&!L$1.hasOwnProperty(st)&&(rt[st]=_e[st]);var ot=arguments.length-2;if(ot===1)rt.children=tt;else if(1<ot){for(var at=Array(ot),lt=0;lt<ot;lt++)at[lt]=arguments[lt+2];rt.children=at}if(et&&et.defaultProps)for(st in ot=et.defaultProps,ot)rt[st]===void 0&&(rt[st]=ot[st]);return{$$typeof:l$2,type:et,key:nt,ref:it,props:rt,_owner:K$1.current}}function N$1(et,_e){return{$$typeof:l$2,type:et.type,key:_e,ref:et.ref,props:et.props,_owner:et._owner}}function O$2(et){return typeof et=="object"&&et!==null&&et.$$typeof===l$2}function escape(et){var _e={"=":"=0",":":"=2"};return"$"+et.replace(/[=:]/g,function(tt){return _e[tt]})}var P$2=/\/+/g;function Q$2(et,_e){return typeof et=="object"&&et!==null&&et.key!=null?escape(""+et.key):_e.toString(36)}function R$1(et,_e,tt,st,rt){var nt=typeof et;(nt==="undefined"||nt==="boolean")&&(et=null);var it=!1;if(et===null)it=!0;else switch(nt){case"string":case"number":it=!0;break;case"object":switch(et.$$typeof){case l$2:case n$3:it=!0}}if(it)return it=et,rt=rt(it),et=st===""?"."+Q$2(it,0):st,I$2(rt)?(tt="",et!=null&&(tt=et.replace(P$2,"$&/")+"/"),R$1(rt,_e,tt,"",function(lt){return lt})):rt!=null&&(O$2(rt)&&(rt=N$1(rt,tt+(!rt.key||it&&it.key===rt.key?"":(""+rt.key).replace(P$2,"$&/")+"/")+et)),_e.push(rt)),1;if(it=0,st=st===""?".":st+":",I$2(et))for(var ot=0;ot<et.length;ot++){nt=et[ot];var at=st+Q$2(nt,ot);it+=R$1(nt,_e,tt,at,rt)}else if(at=A$2(et),typeof at=="function")for(et=at.call(et),ot=0;!(nt=et.next()).done;)nt=nt.value,at=st+Q$2(nt,ot++),it+=R$1(nt,_e,tt,at,rt);else if(nt==="object")throw _e=String(et),Error("Objects are not valid as a React child (found: "+(_e==="[object Object]"?"object with keys {"+Object.keys(et).join(", ")+"}":_e)+"). If you meant to render a collection of children, use an array instead.");return it}function S$2(et,_e,tt){if(et==null)return et;var st=[],rt=0;return R$1(et,st,"","",function(nt){return _e.call(tt,nt,rt++)}),st}function T$2(et){if(et._status===-1){var _e=et._result;_e=_e(),_e.then(function(tt){(et._status===0||et._status===-1)&&(et._status=1,et._result=tt)},function(tt){(et._status===0||et._status===-1)&&(et._status=2,et._result=tt)}),et._status===-1&&(et._status=0,et._result=_e)}if(et._status===1)return et._result.default;throw et._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$1};function X$3(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(et,_e,tt){S$2(et,function(){_e.apply(this,arguments)},tt)},count:function(et){var _e=0;return S$2(et,function(){_e++}),_e},toArray:function(et){return S$2(et,function(_e){return _e})||[]},only:function(et){if(!O$2(et))throw Error("React.Children.only expected to receive a single React element child.");return et}};react_production_min.Component=E$1;react_production_min.Fragment=p$3;react_production_min.Profiler=r;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$3;react_production_min.cloneElement=function(et,_e,tt){if(et==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+et+".");var st=C$1({},et.props),rt=et.key,nt=et.ref,it=et._owner;if(_e!=null){if(_e.ref!==void 0&&(nt=_e.ref,it=K$1.current),_e.key!==void 0&&(rt=""+_e.key),et.type&&et.type.defaultProps)var ot=et.type.defaultProps;for(at in _e)J$1.call(_e,at)&&!L$1.hasOwnProperty(at)&&(st[at]=_e[at]===void 0&&ot!==void 0?ot[at]:_e[at])}var at=arguments.length-2;if(at===1)st.children=tt;else if(1<at){ot=Array(at);for(var lt=0;lt<at;lt++)ot[lt]=arguments[lt+2];st.children=ot}return{$$typeof:l$2,type:et.type,key:rt,ref:nt,props:st,_owner:it}};react_production_min.createContext=function(et){return et={$$typeof:u$2,_currentValue:et,_currentValue2:et,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},et.Provider={$$typeof:t$1,_context:et},et.Consumer=et};react_production_min.createElement=M$2;react_production_min.createFactory=function(et){var _e=M$2.bind(null,et);return _e.type=et,_e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(et){return{$$typeof:v$2,render:et}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(et){return{$$typeof:y,_payload:{_status:-1,_result:et},_init:T$2}};react_production_min.memo=function(et,_e){return{$$typeof:x,type:et,compare:_e===void 0?null:_e}};react_production_min.startTransition=function(et){var _e=V$2.transition;V$2.transition={};try{et()}finally{V$2.transition=_e}};react_production_min.unstable_act=X$3;react_production_min.useCallback=function(et,_e){return U$2.current.useCallback(et,_e)};react_production_min.useContext=function(et){return U$2.current.useContext(et)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(et){return U$2.current.useDeferredValue(et)};react_production_min.useEffect=function(et,_e){return U$2.current.useEffect(et,_e)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(et,_e,tt){return U$2.current.useImperativeHandle(et,_e,tt)};react_production_min.useInsertionEffect=function(et,_e){return U$2.current.useInsertionEffect(et,_e)};react_production_min.useLayoutEffect=function(et,_e){return U$2.current.useLayoutEffect(et,_e)};react_production_min.useMemo=function(et,_e){return U$2.current.useMemo(et,_e)};react_production_min.useReducer=function(et,_e,tt){return U$2.current.useReducer(et,_e,tt)};react_production_min.useRef=function(et){return U$2.current.useRef(et)};react_production_min.useState=function(et){return U$2.current.useState(et)};react_production_min.useSyncExternalStore=function(et,_e,tt){return U$2.current.useSyncExternalStore(et,_e,tt)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$2=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q(et,_e,tt){var st,rt={},nt=null,it=null;tt!==void 0&&(nt=""+tt),_e.key!==void 0&&(nt=""+_e.key),_e.ref!==void 0&&(it=_e.ref);for(st in _e)m$2.call(_e,st)&&!p$2.hasOwnProperty(st)&&(rt[st]=_e[st]);if(et&&et.defaultProps)for(st in _e=et.defaultProps,_e)rt[st]===void 0&&(rt[st]=_e[st]);return{$$typeof:k,type:et,key:nt,ref:it,props:rt,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(et){function _e(wt,Tt){var Bt=wt.length;wt.push(Tt);e:for(;0<Bt;){var Wt=Bt-1>>>1,Mt=wt[Wt];if(0<rt(Mt,Tt))wt[Wt]=Tt,wt[Bt]=Mt,Bt=Wt;else break e}}function tt(wt){return wt.length===0?null:wt[0]}function st(wt){if(wt.length===0)return null;var Tt=wt[0],Bt=wt.pop();if(Bt!==Tt){wt[0]=Bt;e:for(var Wt=0,Mt=wt.length,qt=Mt>>>1;Wt<qt;){var es=2*(Wt+1)-1,Ot=wt[es],It=es+1,zt=wt[It];if(0>rt(Ot,Bt))It<Mt&&0>rt(zt,Ot)?(wt[Wt]=zt,wt[It]=Bt,Wt=It):(wt[Wt]=Ot,wt[es]=Bt,Wt=es);else if(It<Mt&&0>rt(zt,Bt))wt[Wt]=zt,wt[It]=Bt,Wt=It;else break e}}return Tt}function rt(wt,Tt){var Bt=wt.sortIndex-Tt.sortIndex;return Bt!==0?Bt:wt.id-Tt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var nt=performance;et.unstable_now=function(){return nt.now()}}else{var it=Date,ot=it.now();et.unstable_now=function(){return it.now()-ot}}var at=[],lt=[],ct=1,ut=null,dt=3,ht=!1,pt=!1,mt=!1,gt=typeof setTimeout=="function"?setTimeout:null,ft=typeof clearTimeout=="function"?clearTimeout:null,xt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function yt(wt){for(var Tt=tt(lt);Tt!==null;){if(Tt.callback===null)st(lt);else if(Tt.startTime<=wt)st(lt),Tt.sortIndex=Tt.expirationTime,_e(at,Tt);else break;Tt=tt(lt)}}function bt(wt){if(mt=!1,yt(wt),!pt)if(tt(at)!==null)pt=!0,Jt(jt);else{var Tt=tt(lt);Tt!==null&&Yt(bt,Tt.startTime-wt)}}function jt(wt,Tt){pt=!1,mt&&(mt=!1,ft(vt),vt=-1),ht=!0;var Bt=dt;try{for(yt(Tt),ut=tt(at);ut!==null&&(!(ut.expirationTime>Tt)||wt&&!$t());){var Wt=ut.callback;if(typeof Wt=="function"){ut.callback=null,dt=ut.priorityLevel;var Mt=Wt(ut.expirationTime<=Tt);Tt=et.unstable_now(),typeof Mt=="function"?ut.callback=Mt:ut===tt(at)&&st(at),yt(Tt)}else st(at);ut=tt(at)}if(ut!==null)var qt=!0;else{var es=tt(lt);es!==null&&Yt(bt,es.startTime-Tt),qt=!1}return qt}finally{ut=null,dt=Bt,ht=!1}}var Ct=!1,St=null,vt=-1,Et=5,Rt=-1;function $t(){return!(et.unstable_now()-Rt<Et)}function At(){if(St!==null){var wt=et.unstable_now();Rt=wt;var Tt=!0;try{Tt=St(!0,wt)}finally{Tt?Xt():(Ct=!1,St=null)}}else Ct=!1}var Xt;if(typeof xt=="function")Xt=function(){xt(At)};else if(typeof MessageChannel<"u"){var kt=new MessageChannel,Zt=kt.port2;kt.port1.onmessage=At,Xt=function(){Zt.postMessage(null)}}else Xt=function(){gt(At,0)};function Jt(wt){St=wt,Ct||(Ct=!0,Xt())}function Yt(wt,Tt){vt=gt(function(){wt(et.unstable_now())},Tt)}et.unstable_IdlePriority=5,et.unstable_ImmediatePriority=1,et.unstable_LowPriority=4,et.unstable_NormalPriority=3,et.unstable_Profiling=null,et.unstable_UserBlockingPriority=2,et.unstable_cancelCallback=function(wt){wt.callback=null},et.unstable_continueExecution=function(){pt||ht||(pt=!0,Jt(jt))},et.unstable_forceFrameRate=function(wt){0>wt||125<wt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Et=0<wt?Math.floor(1e3/wt):5},et.unstable_getCurrentPriorityLevel=function(){return dt},et.unstable_getFirstCallbackNode=function(){return tt(at)},et.unstable_next=function(wt){switch(dt){case 1:case 2:case 3:var Tt=3;break;default:Tt=dt}var Bt=dt;dt=Tt;try{return wt()}finally{dt=Bt}},et.unstable_pauseExecution=function(){},et.unstable_requestPaint=function(){},et.unstable_runWithPriority=function(wt,Tt){switch(wt){case 1:case 2:case 3:case 4:case 5:break;default:wt=3}var Bt=dt;dt=wt;try{return Tt()}finally{dt=Bt}},et.unstable_scheduleCallback=function(wt,Tt,Bt){var Wt=et.unstable_now();switch(typeof Bt=="object"&&Bt!==null?(Bt=Bt.delay,Bt=typeof Bt=="number"&&0<Bt?Wt+Bt:Wt):Bt=Wt,wt){case 1:var Mt=-1;break;case 2:Mt=250;break;case 5:Mt=1073741823;break;case 4:Mt=1e4;break;default:Mt=5e3}return Mt=Bt+Mt,wt={id:ct++,callback:Tt,priorityLevel:wt,startTime:Bt,expirationTime:Mt,sortIndex:-1},Bt>Wt?(wt.sortIndex=Bt,_e(lt,wt),tt(at)===null&&wt===tt(lt)&&(mt?(ft(vt),vt=-1):mt=!0,Yt(bt,Bt-Wt))):(wt.sortIndex=Mt,_e(at,wt),pt||ht||(pt=!0,Jt(jt))),wt},et.unstable_shouldYield=$t,et.unstable_wrapCallback=function(wt){var Tt=dt;return function(){var Bt=dt;dt=Tt;try{return wt.apply(this,arguments)}finally{dt=Bt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(et){for(var _e="https://reactjs.org/docs/error-decoder.html?invariant="+et,tt=1;tt<arguments.length;tt++)_e+="&args[]="+encodeURIComponent(arguments[tt]);return"Minified React error #"+et+"; visit "+_e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(et,_e){ha(et,_e),ha(et+"Capture",_e)}function ha(et,_e){for(ea[et]=_e,et=0;et<_e.length;et++)da.add(_e[et])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(et){return ja.call(ma,et)?!0:ja.call(la,et)?!1:ka.test(et)?ma[et]=!0:(la[et]=!0,!1)}function pa(et,_e,tt,st){if(tt!==null&&tt.type===0)return!1;switch(typeof _e){case"function":case"symbol":return!0;case"boolean":return st?!1:tt!==null?!tt.acceptsBooleans:(et=et.toLowerCase().slice(0,5),et!=="data-"&&et!=="aria-");default:return!1}}function qa(et,_e,tt,st){if(_e===null||typeof _e>"u"||pa(et,_e,tt,st))return!0;if(st)return!1;if(tt!==null)switch(tt.type){case 3:return!_e;case 4:return _e===!1;case 5:return isNaN(_e);case 6:return isNaN(_e)||1>_e}return!1}function v$1(et,_e,tt,st,rt,nt,it){this.acceptsBooleans=_e===2||_e===3||_e===4,this.attributeName=st,this.attributeNamespace=rt,this.mustUseProperty=tt,this.propertyName=et,this.type=_e,this.sanitizeURL=nt,this.removeEmptyString=it}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(et){z[et]=new v$1(et,0,!1,et,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(et){var _e=et[0];z[_e]=new v$1(_e,1,!1,et[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(et){z[et]=new v$1(et,2,!1,et.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(et){z[et]=new v$1(et,2,!1,et,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(et){z[et]=new v$1(et,3,!1,et.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(et){z[et]=new v$1(et,3,!0,et,null,!1,!1)});["capture","download"].forEach(function(et){z[et]=new v$1(et,4,!1,et,null,!1,!1)});["cols","rows","size","span"].forEach(function(et){z[et]=new v$1(et,6,!1,et,null,!1,!1)});["rowSpan","start"].forEach(function(et){z[et]=new v$1(et,5,!1,et.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(et){return et[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(et){var _e=et.replace(ra,sa);z[_e]=new v$1(_e,1,!1,et,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(et){var _e=et.replace(ra,sa);z[_e]=new v$1(_e,1,!1,et,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(et){var _e=et.replace(ra,sa);z[_e]=new v$1(_e,1,!1,et,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(et){z[et]=new v$1(et,1,!1,et.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(et){z[et]=new v$1(et,1,!1,et.toLowerCase(),null,!0,!0)});function ta(et,_e,tt,st){var rt=z.hasOwnProperty(_e)?z[_e]:null;(rt!==null?rt.type!==0:st||!(2<_e.length)||_e[0]!=="o"&&_e[0]!=="O"||_e[1]!=="n"&&_e[1]!=="N")&&(qa(_e,tt,rt,st)&&(tt=null),st||rt===null?oa(_e)&&(tt===null?et.removeAttribute(_e):et.setAttribute(_e,""+tt)):rt.mustUseProperty?et[rt.propertyName]=tt===null?rt.type===3?!1:"":tt:(_e=rt.attributeName,st=rt.attributeNamespace,tt===null?et.removeAttribute(_e):(rt=rt.type,tt=rt===3||rt===4&&tt===!0?"":""+tt,st?et.setAttributeNS(st,_e,tt):et.setAttribute(_e,tt))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(et){return et===null||typeof et!="object"?null:(et=Ja&&et[Ja]||et["@@iterator"],typeof et=="function"?et:null)}var A$1=Object.assign,La;function Ma(et){if(La===void 0)try{throw Error()}catch(tt){var _e=tt.stack.trim().match(/\n( *(at )?)/);La=_e&&_e[1]||""}return`
`+La+et}var Na=!1;function Oa(et,_e){if(!et||Na)return"";Na=!0;var tt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_e)if(_e=function(){throw Error()},Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(lt){var st=lt}Reflect.construct(et,[],_e)}else{try{_e.call()}catch(lt){st=lt}et.call(_e.prototype)}else{try{throw Error()}catch(lt){st=lt}et()}}catch(lt){if(lt&&st&&typeof lt.stack=="string"){for(var rt=lt.stack.split(`
`),nt=st.stack.split(`
`),it=rt.length-1,ot=nt.length-1;1<=it&&0<=ot&&rt[it]!==nt[ot];)ot--;for(;1<=it&&0<=ot;it--,ot--)if(rt[it]!==nt[ot]){if(it!==1||ot!==1)do if(it--,ot--,0>ot||rt[it]!==nt[ot]){var at=`
`+rt[it].replace(" at new "," at ");return et.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",et.displayName)),at}while(1<=it&&0<=ot);break}}}finally{Na=!1,Error.prepareStackTrace=tt}return(et=et?et.displayName||et.name:"")?Ma(et):""}function Pa(et){switch(et.tag){case 5:return Ma(et.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return et=Oa(et.type,!1),et;case 11:return et=Oa(et.type.render,!1),et;case 1:return et=Oa(et.type,!0),et;default:return""}}function Qa(et){if(et==null)return null;if(typeof et=="function")return et.displayName||et.name||null;if(typeof et=="string")return et;switch(et){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof et=="object")switch(et.$$typeof){case Ca:return(et.displayName||"Context")+".Consumer";case Ba:return(et._context.displayName||"Context")+".Provider";case Da:var _e=et.render;return et=et.displayName,et||(et=_e.displayName||_e.name||"",et=et!==""?"ForwardRef("+et+")":"ForwardRef"),et;case Ga:return _e=et.displayName||null,_e!==null?_e:Qa(et.type)||"Memo";case Ha:_e=et._payload,et=et._init;try{return Qa(et(_e))}catch{}}return null}function Ra(et){var _e=et.type;switch(et.tag){case 24:return"Cache";case 9:return(_e.displayName||"Context")+".Consumer";case 10:return(_e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return et=_e.render,et=et.displayName||et.name||"",_e.displayName||(et!==""?"ForwardRef("+et+")":"ForwardRef");case 7:return"Fragment";case 5:return _e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_e);case 8:return _e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e}return null}function Sa(et){switch(typeof et){case"boolean":case"number":case"string":case"undefined":return et;case"object":return et;default:return""}}function Ta(et){var _e=et.type;return(et=et.nodeName)&&et.toLowerCase()==="input"&&(_e==="checkbox"||_e==="radio")}function Ua(et){var _e=Ta(et)?"checked":"value",tt=Object.getOwnPropertyDescriptor(et.constructor.prototype,_e),st=""+et[_e];if(!et.hasOwnProperty(_e)&&typeof tt<"u"&&typeof tt.get=="function"&&typeof tt.set=="function"){var rt=tt.get,nt=tt.set;return Object.defineProperty(et,_e,{configurable:!0,get:function(){return rt.call(this)},set:function(it){st=""+it,nt.call(this,it)}}),Object.defineProperty(et,_e,{enumerable:tt.enumerable}),{getValue:function(){return st},setValue:function(it){st=""+it},stopTracking:function(){et._valueTracker=null,delete et[_e]}}}}function Va(et){et._valueTracker||(et._valueTracker=Ua(et))}function Wa(et){if(!et)return!1;var _e=et._valueTracker;if(!_e)return!0;var tt=_e.getValue(),st="";return et&&(st=Ta(et)?et.checked?"true":"false":et.value),et=st,et!==tt?(_e.setValue(et),!0):!1}function Xa(et){if(et=et||(typeof document<"u"?document:void 0),typeof et>"u")return null;try{return et.activeElement||et.body}catch{return et.body}}function Ya(et,_e){var tt=_e.checked;return A$1({},_e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:tt??et._wrapperState.initialChecked})}function Za(et,_e){var tt=_e.defaultValue==null?"":_e.defaultValue,st=_e.checked!=null?_e.checked:_e.defaultChecked;tt=Sa(_e.value!=null?_e.value:tt),et._wrapperState={initialChecked:st,initialValue:tt,controlled:_e.type==="checkbox"||_e.type==="radio"?_e.checked!=null:_e.value!=null}}function ab(et,_e){_e=_e.checked,_e!=null&&ta(et,"checked",_e,!1)}function bb(et,_e){ab(et,_e);var tt=Sa(_e.value),st=_e.type;if(tt!=null)st==="number"?(tt===0&&et.value===""||et.value!=tt)&&(et.value=""+tt):et.value!==""+tt&&(et.value=""+tt);else if(st==="submit"||st==="reset"){et.removeAttribute("value");return}_e.hasOwnProperty("value")?cb(et,_e.type,tt):_e.hasOwnProperty("defaultValue")&&cb(et,_e.type,Sa(_e.defaultValue)),_e.checked==null&&_e.defaultChecked!=null&&(et.defaultChecked=!!_e.defaultChecked)}function db(et,_e,tt){if(_e.hasOwnProperty("value")||_e.hasOwnProperty("defaultValue")){var st=_e.type;if(!(st!=="submit"&&st!=="reset"||_e.value!==void 0&&_e.value!==null))return;_e=""+et._wrapperState.initialValue,tt||_e===et.value||(et.value=_e),et.defaultValue=_e}tt=et.name,tt!==""&&(et.name=""),et.defaultChecked=!!et._wrapperState.initialChecked,tt!==""&&(et.name=tt)}function cb(et,_e,tt){(_e!=="number"||Xa(et.ownerDocument)!==et)&&(tt==null?et.defaultValue=""+et._wrapperState.initialValue:et.defaultValue!==""+tt&&(et.defaultValue=""+tt))}var eb=Array.isArray;function fb(et,_e,tt,st){if(et=et.options,_e){_e={};for(var rt=0;rt<tt.length;rt++)_e["$"+tt[rt]]=!0;for(tt=0;tt<et.length;tt++)rt=_e.hasOwnProperty("$"+et[tt].value),et[tt].selected!==rt&&(et[tt].selected=rt),rt&&st&&(et[tt].defaultSelected=!0)}else{for(tt=""+Sa(tt),_e=null,rt=0;rt<et.length;rt++){if(et[rt].value===tt){et[rt].selected=!0,st&&(et[rt].defaultSelected=!0);return}_e!==null||et[rt].disabled||(_e=et[rt])}_e!==null&&(_e.selected=!0)}}function gb(et,_e){if(_e.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},_e,{value:void 0,defaultValue:void 0,children:""+et._wrapperState.initialValue})}function hb(et,_e){var tt=_e.value;if(tt==null){if(tt=_e.children,_e=_e.defaultValue,tt!=null){if(_e!=null)throw Error(p$1(92));if(eb(tt)){if(1<tt.length)throw Error(p$1(93));tt=tt[0]}_e=tt}_e==null&&(_e=""),tt=_e}et._wrapperState={initialValue:Sa(tt)}}function ib(et,_e){var tt=Sa(_e.value),st=Sa(_e.defaultValue);tt!=null&&(tt=""+tt,tt!==et.value&&(et.value=tt),_e.defaultValue==null&&et.defaultValue!==tt&&(et.defaultValue=tt)),st!=null&&(et.defaultValue=""+st)}function jb(et){var _e=et.textContent;_e===et._wrapperState.initialValue&&_e!==""&&_e!==null&&(et.value=_e)}function kb(et){switch(et){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(et,_e){return et==null||et==="http://www.w3.org/1999/xhtml"?kb(_e):et==="http://www.w3.org/2000/svg"&&_e==="foreignObject"?"http://www.w3.org/1999/xhtml":et}var mb,nb=function(et){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_e,tt,st,rt){MSApp.execUnsafeLocalFunction(function(){return et(_e,tt,st,rt)})}:et}(function(et,_e){if(et.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in et)et.innerHTML=_e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_e.valueOf().toString()+"</svg>",_e=mb.firstChild;et.firstChild;)et.removeChild(et.firstChild);for(;_e.firstChild;)et.appendChild(_e.firstChild)}});function ob(et,_e){if(_e){var tt=et.firstChild;if(tt&&tt===et.lastChild&&tt.nodeType===3){tt.nodeValue=_e;return}}et.textContent=_e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(et){qb.forEach(function(_e){_e=_e+et.charAt(0).toUpperCase()+et.substring(1),pb[_e]=pb[et]})});function rb(et,_e,tt){return _e==null||typeof _e=="boolean"||_e===""?"":tt||typeof _e!="number"||_e===0||pb.hasOwnProperty(et)&&pb[et]?(""+_e).trim():_e+"px"}function sb(et,_e){et=et.style;for(var tt in _e)if(_e.hasOwnProperty(tt)){var st=tt.indexOf("--")===0,rt=rb(tt,_e[tt],st);tt==="float"&&(tt="cssFloat"),st?et.setProperty(tt,rt):et[tt]=rt}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(et,_e){if(_e){if(tb[et]&&(_e.children!=null||_e.dangerouslySetInnerHTML!=null))throw Error(p$1(137,et));if(_e.dangerouslySetInnerHTML!=null){if(_e.children!=null)throw Error(p$1(60));if(typeof _e.dangerouslySetInnerHTML!="object"||!("__html"in _e.dangerouslySetInnerHTML))throw Error(p$1(61))}if(_e.style!=null&&typeof _e.style!="object")throw Error(p$1(62))}}function vb(et,_e){if(et.indexOf("-")===-1)return typeof _e.is=="string";switch(et){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(et){return et=et.target||et.srcElement||window,et.correspondingUseElement&&(et=et.correspondingUseElement),et.nodeType===3?et.parentNode:et}var yb=null,zb=null,Ab=null;function Bb(et){if(et=Cb(et)){if(typeof yb!="function")throw Error(p$1(280));var _e=et.stateNode;_e&&(_e=Db(_e),yb(et.stateNode,et.type,_e))}}function Eb(et){zb?Ab?Ab.push(et):Ab=[et]:zb=et}function Fb(){if(zb){var et=zb,_e=Ab;if(Ab=zb=null,Bb(et),_e)for(et=0;et<_e.length;et++)Bb(_e[et])}}function Gb(et,_e){return et(_e)}function Hb(){}var Ib=!1;function Jb(et,_e,tt){if(Ib)return et(_e,tt);Ib=!0;try{return Gb(et,_e,tt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(et,_e){var tt=et.stateNode;if(tt===null)return null;var st=Db(tt);if(st===null)return null;tt=st[_e];e:switch(_e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(st=!st.disabled)||(et=et.type,st=!(et==="button"||et==="input"||et==="select"||et==="textarea")),et=!st;break e;default:et=!1}if(et)return null;if(tt&&typeof tt!="function")throw Error(p$1(231,_e,typeof tt));return tt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(et,_e,tt,st,rt,nt,it,ot,at){var lt=Array.prototype.slice.call(arguments,3);try{_e.apply(tt,lt)}catch(ct){this.onError(ct)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(et){Ob=!0,Pb=et}};function Tb(et,_e,tt,st,rt,nt,it,ot,at){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(et,_e,tt,st,rt,nt,it,ot,at){if(Tb.apply(this,arguments),Ob){if(Ob){var lt=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=lt)}}function Vb(et){var _e=et,tt=et;if(et.alternate)for(;_e.return;)_e=_e.return;else{et=_e;do _e=et,_e.flags&4098&&(tt=_e.return),et=_e.return;while(et)}return _e.tag===3?tt:null}function Wb(et){if(et.tag===13){var _e=et.memoizedState;if(_e===null&&(et=et.alternate,et!==null&&(_e=et.memoizedState)),_e!==null)return _e.dehydrated}return null}function Xb(et){if(Vb(et)!==et)throw Error(p$1(188))}function Yb(et){var _e=et.alternate;if(!_e){if(_e=Vb(et),_e===null)throw Error(p$1(188));return _e!==et?null:et}for(var tt=et,st=_e;;){var rt=tt.return;if(rt===null)break;var nt=rt.alternate;if(nt===null){if(st=rt.return,st!==null){tt=st;continue}break}if(rt.child===nt.child){for(nt=rt.child;nt;){if(nt===tt)return Xb(rt),et;if(nt===st)return Xb(rt),_e;nt=nt.sibling}throw Error(p$1(188))}if(tt.return!==st.return)tt=rt,st=nt;else{for(var it=!1,ot=rt.child;ot;){if(ot===tt){it=!0,tt=rt,st=nt;break}if(ot===st){it=!0,st=rt,tt=nt;break}ot=ot.sibling}if(!it){for(ot=nt.child;ot;){if(ot===tt){it=!0,tt=nt,st=rt;break}if(ot===st){it=!0,st=nt,tt=rt;break}ot=ot.sibling}if(!it)throw Error(p$1(189))}}if(tt.alternate!==st)throw Error(p$1(190))}if(tt.tag!==3)throw Error(p$1(188));return tt.stateNode.current===tt?et:_e}function Zb(et){return et=Yb(et),et!==null?$b(et):null}function $b(et){if(et.tag===5||et.tag===6)return et;for(et=et.child;et!==null;){var _e=$b(et);if(_e!==null)return _e;et=et.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(et){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,et,void 0,(et.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(et){return et>>>=0,et===0?32:31-(pc(et)/qc|0)|0}var rc=64,sc=4194304;function tc(et){switch(et&-et){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return et&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return et&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return et}}function uc(et,_e){var tt=et.pendingLanes;if(tt===0)return 0;var st=0,rt=et.suspendedLanes,nt=et.pingedLanes,it=tt&268435455;if(it!==0){var ot=it&~rt;ot!==0?st=tc(ot):(nt&=it,nt!==0&&(st=tc(nt)))}else it=tt&~rt,it!==0?st=tc(it):nt!==0&&(st=tc(nt));if(st===0)return 0;if(_e!==0&&_e!==st&&!(_e&rt)&&(rt=st&-st,nt=_e&-_e,rt>=nt||rt===16&&(nt&4194240)!==0))return _e;if(st&4&&(st|=tt&16),_e=et.entangledLanes,_e!==0)for(et=et.entanglements,_e&=st;0<_e;)tt=31-oc(_e),rt=1<<tt,st|=et[tt],_e&=~rt;return st}function vc(et,_e){switch(et){case 1:case 2:case 4:return _e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(et,_e){for(var tt=et.suspendedLanes,st=et.pingedLanes,rt=et.expirationTimes,nt=et.pendingLanes;0<nt;){var it=31-oc(nt),ot=1<<it,at=rt[it];at===-1?(!(ot&tt)||ot&st)&&(rt[it]=vc(ot,_e)):at<=_e&&(et.expiredLanes|=ot),nt&=~ot}}function xc(et){return et=et.pendingLanes&-1073741825,et!==0?et:et&1073741824?1073741824:0}function yc(){var et=rc;return rc<<=1,!(rc&4194240)&&(rc=64),et}function zc(et){for(var _e=[],tt=0;31>tt;tt++)_e.push(et);return _e}function Ac(et,_e,tt){et.pendingLanes|=_e,_e!==536870912&&(et.suspendedLanes=0,et.pingedLanes=0),et=et.eventTimes,_e=31-oc(_e),et[_e]=tt}function Bc(et,_e){var tt=et.pendingLanes&~_e;et.pendingLanes=_e,et.suspendedLanes=0,et.pingedLanes=0,et.expiredLanes&=_e,et.mutableReadLanes&=_e,et.entangledLanes&=_e,_e=et.entanglements;var st=et.eventTimes;for(et=et.expirationTimes;0<tt;){var rt=31-oc(tt),nt=1<<rt;_e[rt]=0,st[rt]=-1,et[rt]=-1,tt&=~nt}}function Cc(et,_e){var tt=et.entangledLanes|=_e;for(et=et.entanglements;tt;){var st=31-oc(tt),rt=1<<st;rt&_e|et[st]&_e&&(et[st]|=_e),tt&=~rt}}var C=0;function Dc(et){return et&=-et,1<et?4<et?et&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(et,_e){switch(et){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_e.pointerId)}}function Tc(et,_e,tt,st,rt,nt){return et===null||et.nativeEvent!==nt?(et={blockedOn:_e,domEventName:tt,eventSystemFlags:st,nativeEvent:nt,targetContainers:[rt]},_e!==null&&(_e=Cb(_e),_e!==null&&Fc(_e)),et):(et.eventSystemFlags|=st,_e=et.targetContainers,rt!==null&&_e.indexOf(rt)===-1&&_e.push(rt),et)}function Uc(et,_e,tt,st,rt){switch(_e){case"focusin":return Lc=Tc(Lc,et,_e,tt,st,rt),!0;case"dragenter":return Mc=Tc(Mc,et,_e,tt,st,rt),!0;case"mouseover":return Nc=Tc(Nc,et,_e,tt,st,rt),!0;case"pointerover":var nt=rt.pointerId;return Oc.set(nt,Tc(Oc.get(nt)||null,et,_e,tt,st,rt)),!0;case"gotpointercapture":return nt=rt.pointerId,Pc.set(nt,Tc(Pc.get(nt)||null,et,_e,tt,st,rt)),!0}return!1}function Vc(et){var _e=Wc(et.target);if(_e!==null){var tt=Vb(_e);if(tt!==null){if(_e=tt.tag,_e===13){if(_e=Wb(tt),_e!==null){et.blockedOn=_e,Ic(et.priority,function(){Gc(tt)});return}}else if(_e===3&&tt.stateNode.current.memoizedState.isDehydrated){et.blockedOn=tt.tag===3?tt.stateNode.containerInfo:null;return}}}et.blockedOn=null}function Xc(et){if(et.blockedOn!==null)return!1;for(var _e=et.targetContainers;0<_e.length;){var tt=Yc(et.domEventName,et.eventSystemFlags,_e[0],et.nativeEvent);if(tt===null){tt=et.nativeEvent;var st=new tt.constructor(tt.type,tt);wb=st,tt.target.dispatchEvent(st),wb=null}else return _e=Cb(tt),_e!==null&&Fc(_e),et.blockedOn=tt,!1;_e.shift()}return!0}function Zc(et,_e,tt){Xc(et)&&tt.delete(_e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(et,_e){et.blockedOn===_e&&(et.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(et){function _e(rt){return ad(rt,et)}if(0<Kc.length){ad(Kc[0],et);for(var tt=1;tt<Kc.length;tt++){var st=Kc[tt];st.blockedOn===et&&(st.blockedOn=null)}}for(Lc!==null&&ad(Lc,et),Mc!==null&&ad(Mc,et),Nc!==null&&ad(Nc,et),Oc.forEach(_e),Pc.forEach(_e),tt=0;tt<Qc.length;tt++)st=Qc[tt],st.blockedOn===et&&(st.blockedOn=null);for(;0<Qc.length&&(tt=Qc[0],tt.blockedOn===null);)Vc(tt),tt.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(et,_e,tt,st){var rt=C,nt=cd.transition;cd.transition=null;try{C=1,fd(et,_e,tt,st)}finally{C=rt,cd.transition=nt}}function gd(et,_e,tt,st){var rt=C,nt=cd.transition;cd.transition=null;try{C=4,fd(et,_e,tt,st)}finally{C=rt,cd.transition=nt}}function fd(et,_e,tt,st){if(dd){var rt=Yc(et,_e,tt,st);if(rt===null)hd(et,_e,st,id,tt),Sc(et,st);else if(Uc(rt,et,_e,tt,st))st.stopPropagation();else if(Sc(et,st),_e&4&&-1<Rc.indexOf(et)){for(;rt!==null;){var nt=Cb(rt);if(nt!==null&&Ec(nt),nt=Yc(et,_e,tt,st),nt===null&&hd(et,_e,st,id,tt),nt===rt)break;rt=nt}rt!==null&&st.stopPropagation()}else hd(et,_e,st,null,tt)}}var id=null;function Yc(et,_e,tt,st){if(id=null,et=xb(st),et=Wc(et),et!==null)if(_e=Vb(et),_e===null)et=null;else if(tt=_e.tag,tt===13){if(et=Wb(_e),et!==null)return et;et=null}else if(tt===3){if(_e.stateNode.current.memoizedState.isDehydrated)return _e.tag===3?_e.stateNode.containerInfo:null;et=null}else _e!==et&&(et=null);return id=et,null}function jd(et){switch(et){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var et,_e=ld,tt=_e.length,st,rt="value"in kd?kd.value:kd.textContent,nt=rt.length;for(et=0;et<tt&&_e[et]===rt[et];et++);var it=tt-et;for(st=1;st<=it&&_e[tt-st]===rt[nt-st];st++);return md=rt.slice(et,1<st?1-st:void 0)}function od(et){var _e=et.keyCode;return"charCode"in et?(et=et.charCode,et===0&&_e===13&&(et=13)):et=_e,et===10&&(et=13),32<=et||et===13?et:0}function pd(){return!0}function qd(){return!1}function rd(et){function _e(tt,st,rt,nt,it){this._reactName=tt,this._targetInst=rt,this.type=st,this.nativeEvent=nt,this.target=it,this.currentTarget=null;for(var ot in et)et.hasOwnProperty(ot)&&(tt=et[ot],this[ot]=tt?tt(nt):nt[ot]);return this.isDefaultPrevented=(nt.defaultPrevented!=null?nt.defaultPrevented:nt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(_e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var tt=this.nativeEvent;tt&&(tt.preventDefault?tt.preventDefault():typeof tt.returnValue!="unknown"&&(tt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var tt=this.nativeEvent;tt&&(tt.stopPropagation?tt.stopPropagation():typeof tt.cancelBubble!="unknown"&&(tt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(et){return et.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(et){return et.relatedTarget===void 0?et.fromElement===et.srcElement?et.toElement:et.fromElement:et.relatedTarget},movementX:function(et){return"movementX"in et?et.movementX:(et!==yd&&(yd&&et.type==="mousemove"?(wd=et.screenX-yd.screenX,xd=et.screenY-yd.screenY):xd=wd=0,yd=et),wd)},movementY:function(et){return"movementY"in et?et.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(et){return"clipboardData"in et?et.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(et){var _e=this.nativeEvent;return _e.getModifierState?_e.getModifierState(et):(et=Od[et])?!!_e[et]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(et){if(et.key){var _e=Md[et.key]||et.key;if(_e!=="Unidentified")return _e}return et.type==="keypress"?(et=od(et),et===13?"Enter":String.fromCharCode(et)):et.type==="keydown"||et.type==="keyup"?Nd[et.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(et){return et.type==="keypress"?od(et):0},keyCode:function(et){return et.type==="keydown"||et.type==="keyup"?et.keyCode:0},which:function(et){return et.type==="keypress"?od(et):et.type==="keydown"||et.type==="keyup"?et.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(et){return"deltaX"in et?et.deltaX:"wheelDeltaX"in et?-et.wheelDeltaX:0},deltaY:function(et){return"deltaY"in et?et.deltaY:"wheelDeltaY"in et?-et.wheelDeltaY:"wheelDelta"in et?-et.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$1=!1;function ge$1(et,_e){switch(et){case"keyup":return $d.indexOf(_e.keyCode)!==-1;case"keydown":return _e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(et){return et=et.detail,typeof et=="object"&&"data"in et?et.data:null}var ie=!1;function je(et,_e){switch(et){case"compositionend":return he$1(_e);case"keypress":return _e.which!==32?null:(fe$1=!0,ee$1);case"textInput":return et=_e.data,et===ee$1&&fe$1?null:et;default:return null}}function ke(et,_e){if(ie)return et==="compositionend"||!ae&&ge$1(et,_e)?(et=nd(),md=ld=kd=null,ie=!1,et):null;switch(et){case"paste":return null;case"keypress":if(!(_e.ctrlKey||_e.altKey||_e.metaKey)||_e.ctrlKey&&_e.altKey){if(_e.char&&1<_e.char.length)return _e.char;if(_e.which)return String.fromCharCode(_e.which)}return null;case"compositionend":return de$1&&_e.locale!=="ko"?null:_e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(et){var _e=et&&et.nodeName&&et.nodeName.toLowerCase();return _e==="input"?!!le$1[et.type]:_e==="textarea"}function ne$1(et,_e,tt,st){Eb(st),_e=oe$1(_e,"onChange"),0<_e.length&&(tt=new td("onChange","change",null,tt,st),et.push({event:tt,listeners:_e}))}var pe$1=null,qe=null;function re$1(et){se$1(et,0)}function te(et){var _e=ue$1(et);if(Wa(_e))return et}function ve$1(et,_e){if(et==="change")return _e}var we=!1;if(ia){var xe$1;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$1=typeof ze.oninput=="function"}xe$1=ye$1}else xe$1=!1;we=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(et){if(et.propertyName==="value"&&te(qe)){var _e=[];ne$1(_e,qe,et,xb(et)),Jb(re$1,_e)}}function Ce(et,_e,tt){et==="focusin"?(Ae$1(),pe$1=_e,qe=tt,pe$1.attachEvent("onpropertychange",Be)):et==="focusout"&&Ae$1()}function De(et){if(et==="selectionchange"||et==="keyup"||et==="keydown")return te(qe)}function Ee$1(et,_e){if(et==="click")return te(_e)}function Fe(et,_e){if(et==="input"||et==="change")return te(_e)}function Ge(et,_e){return et===_e&&(et!==0||1/et===1/_e)||et!==et&&_e!==_e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie$1(et,_e){if(He(et,_e))return!0;if(typeof et!="object"||et===null||typeof _e!="object"||_e===null)return!1;var tt=Object.keys(et),st=Object.keys(_e);if(tt.length!==st.length)return!1;for(st=0;st<tt.length;st++){var rt=tt[st];if(!ja.call(_e,rt)||!He(et[rt],_e[rt]))return!1}return!0}function Je(et){for(;et&&et.firstChild;)et=et.firstChild;return et}function Ke(et,_e){var tt=Je(et);et=0;for(var st;tt;){if(tt.nodeType===3){if(st=et+tt.textContent.length,et<=_e&&st>=_e)return{node:tt,offset:_e-et};et=st}e:{for(;tt;){if(tt.nextSibling){tt=tt.nextSibling;break e}tt=tt.parentNode}tt=void 0}tt=Je(tt)}}function Le(et,_e){return et&&_e?et===_e?!0:et&&et.nodeType===3?!1:_e&&_e.nodeType===3?Le(et,_e.parentNode):"contains"in et?et.contains(_e):et.compareDocumentPosition?!!(et.compareDocumentPosition(_e)&16):!1:!1}function Me(){for(var et=window,_e=Xa();_e instanceof et.HTMLIFrameElement;){try{var tt=typeof _e.contentWindow.location.href=="string"}catch{tt=!1}if(tt)et=_e.contentWindow;else break;_e=Xa(et.document)}return _e}function Ne(et){var _e=et&&et.nodeName&&et.nodeName.toLowerCase();return _e&&(_e==="input"&&(et.type==="text"||et.type==="search"||et.type==="tel"||et.type==="url"||et.type==="password")||_e==="textarea"||et.contentEditable==="true")}function Oe(et){var _e=Me(),tt=et.focusedElem,st=et.selectionRange;if(_e!==tt&&tt&&tt.ownerDocument&&Le(tt.ownerDocument.documentElement,tt)){if(st!==null&&Ne(tt)){if(_e=st.start,et=st.end,et===void 0&&(et=_e),"selectionStart"in tt)tt.selectionStart=_e,tt.selectionEnd=Math.min(et,tt.value.length);else if(et=(_e=tt.ownerDocument||document)&&_e.defaultView||window,et.getSelection){et=et.getSelection();var rt=tt.textContent.length,nt=Math.min(st.start,rt);st=st.end===void 0?nt:Math.min(st.end,rt),!et.extend&&nt>st&&(rt=st,st=nt,nt=rt),rt=Ke(tt,nt);var it=Ke(tt,st);rt&&it&&(et.rangeCount!==1||et.anchorNode!==rt.node||et.anchorOffset!==rt.offset||et.focusNode!==it.node||et.focusOffset!==it.offset)&&(_e=_e.createRange(),_e.setStart(rt.node,rt.offset),et.removeAllRanges(),nt>st?(et.addRange(_e),et.extend(it.node,it.offset)):(_e.setEnd(it.node,it.offset),et.addRange(_e)))}}for(_e=[],et=tt;et=et.parentNode;)et.nodeType===1&&_e.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof tt.focus=="function"&&tt.focus(),tt=0;tt<_e.length;tt++)et=_e[tt],et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$1=null,Se$1=null,Te$1=!1;function Ue(et,_e,tt){var st=tt.window===tt?tt.document:tt.nodeType===9?tt:tt.ownerDocument;Te$1||Qe==null||Qe!==Xa(st)||(st=Qe,"selectionStart"in st&&Ne(st)?st={start:st.selectionStart,end:st.selectionEnd}:(st=(st.ownerDocument&&st.ownerDocument.defaultView||window).getSelection(),st={anchorNode:st.anchorNode,anchorOffset:st.anchorOffset,focusNode:st.focusNode,focusOffset:st.focusOffset}),Se$1&&Ie$1(Se$1,st)||(Se$1=st,st=oe$1(Re$1,"onSelect"),0<st.length&&(_e=new td("onSelect","select",null,_e,tt),et.push({event:_e,listeners:st}),_e.target=Qe)))}function Ve(et,_e){var tt={};return tt[et.toLowerCase()]=_e.toLowerCase(),tt["Webkit"+et]="webkit"+_e,tt["Moz"+et]="moz"+_e,tt}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(et){if(Xe[et])return Xe[et];if(!We[et])return et;var _e=We[et],tt;for(tt in _e)if(_e.hasOwnProperty(tt)&&tt in Ye)return Xe[et]=_e[tt];return et}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(et,_e){df.set(et,_e),fa(_e,[et])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(et,_e,tt){var st=et.type||"unknown-event";et.currentTarget=tt,Ub(st,_e,void 0,et),et.currentTarget=null}function se$1(et,_e){_e=(_e&4)!==0;for(var tt=0;tt<et.length;tt++){var st=et[tt],rt=st.event;st=st.listeners;e:{var nt=void 0;if(_e)for(var it=st.length-1;0<=it;it--){var ot=st[it],at=ot.instance,lt=ot.currentTarget;if(ot=ot.listener,at!==nt&&rt.isPropagationStopped())break e;nf(rt,ot,lt),nt=at}else for(it=0;it<st.length;it++){if(ot=st[it],at=ot.instance,lt=ot.currentTarget,ot=ot.listener,at!==nt&&rt.isPropagationStopped())break e;nf(rt,ot,lt),nt=at}}}if(Qb)throw et=Rb,Qb=!1,Rb=null,et}function D$1(et,_e){var tt=_e[of];tt===void 0&&(tt=_e[of]=new Set);var st=et+"__bubble";tt.has(st)||(pf(_e,et,2,!1),tt.add(st))}function qf(et,_e,tt){var st=0;_e&&(st|=4),pf(tt,et,st,_e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(et){if(!et[rf]){et[rf]=!0,da.forEach(function(tt){tt!=="selectionchange"&&(mf.has(tt)||qf(tt,!1,et),qf(tt,!0,et))});var _e=et.nodeType===9?et:et.ownerDocument;_e===null||_e[rf]||(_e[rf]=!0,qf("selectionchange",!1,_e))}}function pf(et,_e,tt,st){switch(jd(_e)){case 1:var rt=ed;break;case 4:rt=gd;break;default:rt=fd}tt=rt.bind(null,_e,tt,et),rt=void 0,!Lb||_e!=="touchstart"&&_e!=="touchmove"&&_e!=="wheel"||(rt=!0),st?rt!==void 0?et.addEventListener(_e,tt,{capture:!0,passive:rt}):et.addEventListener(_e,tt,!0):rt!==void 0?et.addEventListener(_e,tt,{passive:rt}):et.addEventListener(_e,tt,!1)}function hd(et,_e,tt,st,rt){var nt=st;if(!(_e&1)&&!(_e&2)&&st!==null)e:for(;;){if(st===null)return;var it=st.tag;if(it===3||it===4){var ot=st.stateNode.containerInfo;if(ot===rt||ot.nodeType===8&&ot.parentNode===rt)break;if(it===4)for(it=st.return;it!==null;){var at=it.tag;if((at===3||at===4)&&(at=it.stateNode.containerInfo,at===rt||at.nodeType===8&&at.parentNode===rt))return;it=it.return}for(;ot!==null;){if(it=Wc(ot),it===null)return;if(at=it.tag,at===5||at===6){st=nt=it;continue e}ot=ot.parentNode}}st=st.return}Jb(function(){var lt=nt,ct=xb(tt),ut=[];e:{var dt=df.get(et);if(dt!==void 0){var ht=td,pt=et;switch(et){case"keypress":if(od(tt)===0)break e;case"keydown":case"keyup":ht=Rd;break;case"focusin":pt="focus",ht=Fd;break;case"focusout":pt="blur",ht=Fd;break;case"beforeblur":case"afterblur":ht=Fd;break;case"click":if(tt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=Vd;break;case $e:case af:case bf:ht=Hd;break;case cf:ht=Xd;break;case"scroll":ht=vd;break;case"wheel":ht=Zd;break;case"copy":case"cut":case"paste":ht=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=Td}var mt=(_e&4)!==0,gt=!mt&&et==="scroll",ft=mt?dt!==null?dt+"Capture":null:dt;mt=[];for(var xt=lt,yt;xt!==null;){yt=xt;var bt=yt.stateNode;if(yt.tag===5&&bt!==null&&(yt=bt,ft!==null&&(bt=Kb(xt,ft),bt!=null&&mt.push(tf(xt,bt,yt)))),gt)break;xt=xt.return}0<mt.length&&(dt=new ht(dt,pt,null,tt,ct),ut.push({event:dt,listeners:mt}))}}if(!(_e&7)){e:{if(dt=et==="mouseover"||et==="pointerover",ht=et==="mouseout"||et==="pointerout",dt&&tt!==wb&&(pt=tt.relatedTarget||tt.fromElement)&&(Wc(pt)||pt[uf]))break e;if((ht||dt)&&(dt=ct.window===ct?ct:(dt=ct.ownerDocument)?dt.defaultView||dt.parentWindow:window,ht?(pt=tt.relatedTarget||tt.toElement,ht=lt,pt=pt?Wc(pt):null,pt!==null&&(gt=Vb(pt),pt!==gt||pt.tag!==5&&pt.tag!==6)&&(pt=null)):(ht=null,pt=lt),ht!==pt)){if(mt=Bd,bt="onMouseLeave",ft="onMouseEnter",xt="mouse",(et==="pointerout"||et==="pointerover")&&(mt=Td,bt="onPointerLeave",ft="onPointerEnter",xt="pointer"),gt=ht==null?dt:ue$1(ht),yt=pt==null?dt:ue$1(pt),dt=new mt(bt,xt+"leave",ht,tt,ct),dt.target=gt,dt.relatedTarget=yt,bt=null,Wc(ct)===lt&&(mt=new mt(ft,xt+"enter",pt,tt,ct),mt.target=yt,mt.relatedTarget=gt,bt=mt),gt=bt,ht&&pt)t:{for(mt=ht,ft=pt,xt=0,yt=mt;yt;yt=vf(yt))xt++;for(yt=0,bt=ft;bt;bt=vf(bt))yt++;for(;0<xt-yt;)mt=vf(mt),xt--;for(;0<yt-xt;)ft=vf(ft),yt--;for(;xt--;){if(mt===ft||ft!==null&&mt===ft.alternate)break t;mt=vf(mt),ft=vf(ft)}mt=null}else mt=null;ht!==null&&wf(ut,dt,ht,mt,!1),pt!==null&&gt!==null&&wf(ut,gt,pt,mt,!0)}}e:{if(dt=lt?ue$1(lt):window,ht=dt.nodeName&&dt.nodeName.toLowerCase(),ht==="select"||ht==="input"&&dt.type==="file")var jt=ve$1;else if(me(dt))if(we)jt=Fe;else{jt=De;var Ct=Ce}else(ht=dt.nodeName)&&ht.toLowerCase()==="input"&&(dt.type==="checkbox"||dt.type==="radio")&&(jt=Ee$1);if(jt&&(jt=jt(et,lt))){ne$1(ut,jt,tt,ct);break e}Ct&&Ct(et,dt,lt),et==="focusout"&&(Ct=dt._wrapperState)&&Ct.controlled&&dt.type==="number"&&cb(dt,"number",dt.value)}switch(Ct=lt?ue$1(lt):window,et){case"focusin":(me(Ct)||Ct.contentEditable==="true")&&(Qe=Ct,Re$1=lt,Se$1=null);break;case"focusout":Se$1=Re$1=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue(ut,tt,ct);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ut,tt,ct)}var St;if(ae)e:{switch(et){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else ie?ge$1(et,tt)&&(vt="onCompositionEnd"):et==="keydown"&&tt.keyCode===229&&(vt="onCompositionStart");vt&&(de$1&&tt.locale!=="ko"&&(ie||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&ie&&(St=nd()):(kd=ct,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Ct=oe$1(lt,vt),0<Ct.length&&(vt=new Ld(vt,et,null,tt,ct),ut.push({event:vt,listeners:Ct}),St?vt.data=St:(St=he$1(tt),St!==null&&(vt.data=St)))),(St=ce?je(et,tt):ke(et,tt))&&(lt=oe$1(lt,"onBeforeInput"),0<lt.length&&(ct=new Ld("onBeforeInput","beforeinput",null,tt,ct),ut.push({event:ct,listeners:lt}),ct.data=St))}se$1(ut,_e)})}function tf(et,_e,tt){return{instance:et,listener:_e,currentTarget:tt}}function oe$1(et,_e){for(var tt=_e+"Capture",st=[];et!==null;){var rt=et,nt=rt.stateNode;rt.tag===5&&nt!==null&&(rt=nt,nt=Kb(et,tt),nt!=null&&st.unshift(tf(et,nt,rt)),nt=Kb(et,_e),nt!=null&&st.push(tf(et,nt,rt))),et=et.return}return st}function vf(et){if(et===null)return null;do et=et.return;while(et&&et.tag!==5);return et||null}function wf(et,_e,tt,st,rt){for(var nt=_e._reactName,it=[];tt!==null&&tt!==st;){var ot=tt,at=ot.alternate,lt=ot.stateNode;if(at!==null&&at===st)break;ot.tag===5&&lt!==null&&(ot=lt,rt?(at=Kb(tt,nt),at!=null&&it.unshift(tf(tt,at,ot))):rt||(at=Kb(tt,nt),at!=null&&it.push(tf(tt,at,ot)))),tt=tt.return}it.length!==0&&et.push({event:_e,listeners:it})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(et){return(typeof et=="string"?et:""+et).replace(xf,`
`).replace(yf,"")}function Af(et,_e,tt){if(_e=zf(_e),zf(et)!==_e&&tt)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(et,_e){return et==="textarea"||et==="noscript"||typeof _e.children=="string"||typeof _e.children=="number"||typeof _e.dangerouslySetInnerHTML=="object"&&_e.dangerouslySetInnerHTML!==null&&_e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(et){return Hf.resolve(null).then(et).catch(If)}:Ff;function If(et){setTimeout(function(){throw et})}function Kf(et,_e){var tt=_e,st=0;do{var rt=tt.nextSibling;if(et.removeChild(tt),rt&&rt.nodeType===8)if(tt=rt.data,tt==="/$"){if(st===0){et.removeChild(rt),bd(_e);return}st--}else tt!=="$"&&tt!=="$?"&&tt!=="$!"||st++;tt=rt}while(tt);bd(_e)}function Lf(et){for(;et!=null;et=et.nextSibling){var _e=et.nodeType;if(_e===1||_e===3)break;if(_e===8){if(_e=et.data,_e==="$"||_e==="$!"||_e==="$?")break;if(_e==="/$")return null}}return et}function Mf(et){et=et.previousSibling;for(var _e=0;et;){if(et.nodeType===8){var tt=et.data;if(tt==="$"||tt==="$!"||tt==="$?"){if(_e===0)return et;_e--}else tt==="/$"&&_e++}et=et.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(et){var _e=et[Of];if(_e)return _e;for(var tt=et.parentNode;tt;){if(_e=tt[uf]||tt[Of]){if(tt=_e.alternate,_e.child!==null||tt!==null&&tt.child!==null)for(et=Mf(et);et!==null;){if(tt=et[Of])return tt;et=Mf(et)}return _e}et=tt,tt=et.parentNode}return null}function Cb(et){return et=et[Of]||et[uf],!et||et.tag!==5&&et.tag!==6&&et.tag!==13&&et.tag!==3?null:et}function ue$1(et){if(et.tag===5||et.tag===6)return et.stateNode;throw Error(p$1(33))}function Db(et){return et[Pf]||null}var Sf=[],Tf=-1;function Uf(et){return{current:et}}function E(et){0>Tf||(et.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(et,_e){Tf++,Sf[Tf]=et.current,et.current=_e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(et,_e){var tt=et.type.contextTypes;if(!tt)return Vf;var st=et.stateNode;if(st&&st.__reactInternalMemoizedUnmaskedChildContext===_e)return st.__reactInternalMemoizedMaskedChildContext;var rt={},nt;for(nt in tt)rt[nt]=_e[nt];return st&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=_e,et.__reactInternalMemoizedMaskedChildContext=rt),rt}function Zf(et){return et=et.childContextTypes,et!=null}function $f(){E(Wf),E(H)}function ag(et,_e,tt){if(H.current!==Vf)throw Error(p$1(168));G$1(H,_e),G$1(Wf,tt)}function bg(et,_e,tt){var st=et.stateNode;if(_e=_e.childContextTypes,typeof st.getChildContext!="function")return tt;st=st.getChildContext();for(var rt in st)if(!(rt in _e))throw Error(p$1(108,Ra(et)||"Unknown",rt));return A$1({},tt,st)}function cg(et){return et=(et=et.stateNode)&&et.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G$1(H,et),G$1(Wf,Wf.current),!0}function dg(et,_e,tt){var st=et.stateNode;if(!st)throw Error(p$1(169));tt?(et=bg(et,_e,Xf),st.__reactInternalMemoizedMergedChildContext=et,E(Wf),E(H),G$1(H,et)):E(Wf),G$1(Wf,tt)}var eg=null,fg=!1,gg=!1;function hg(et){eg===null?eg=[et]:eg.push(et)}function ig(et){fg=!0,hg(et)}function jg(){if(!gg&&eg!==null){gg=!0;var et=0,_e=C;try{var tt=eg;for(C=1;et<tt.length;et++){var st=tt[et];do st=st(!0);while(st!==null)}eg=null,fg=!1}catch(rt){throw eg!==null&&(eg=eg.slice(et+1)),ac(fc,jg),rt}finally{C=_e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(et,_e){kg[lg++]=ng,kg[lg++]=mg,mg=et,ng=_e}function ug(et,_e,tt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=et;var st=rg;et=sg;var rt=32-oc(st)-1;st&=~(1<<rt),tt+=1;var nt=32-oc(_e)+rt;if(30<nt){var it=rt-rt%5;nt=(st&(1<<it)-1).toString(32),st>>=it,rt-=it,rg=1<<32-oc(_e)+rt|tt<<rt|st,sg=nt+et}else rg=1<<nt|tt<<rt|st,sg=et}function vg(et){et.return!==null&&(tg(et,1),ug(et,1,0))}function wg(et){for(;et===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;et===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(et,_e){var tt=Bg(5,null,null,0);tt.elementType="DELETED",tt.stateNode=_e,tt.return=et,_e=et.deletions,_e===null?(et.deletions=[tt],et.flags|=16):_e.push(tt)}function Cg(et,_e){switch(et.tag){case 5:var tt=et.type;return _e=_e.nodeType!==1||tt.toLowerCase()!==_e.nodeName.toLowerCase()?null:_e,_e!==null?(et.stateNode=_e,xg=et,yg=Lf(_e.firstChild),!0):!1;case 6:return _e=et.pendingProps===""||_e.nodeType!==3?null:_e,_e!==null?(et.stateNode=_e,xg=et,yg=null,!0):!1;case 13:return _e=_e.nodeType!==8?null:_e,_e!==null?(tt=qg!==null?{id:rg,overflow:sg}:null,et.memoizedState={dehydrated:_e,treeContext:tt,retryLane:1073741824},tt=Bg(18,null,null,0),tt.stateNode=_e,tt.return=et,et.child=tt,xg=et,yg=null,!0):!1;default:return!1}}function Dg(et){return(et.mode&1)!==0&&(et.flags&128)===0}function Eg(et){if(I$1){var _e=yg;if(_e){var tt=_e;if(!Cg(et,_e)){if(Dg(et))throw Error(p$1(418));_e=Lf(tt.nextSibling);var st=xg;_e&&Cg(et,_e)?Ag(st,tt):(et.flags=et.flags&-4097|2,I$1=!1,xg=et)}}else{if(Dg(et))throw Error(p$1(418));et.flags=et.flags&-4097|2,I$1=!1,xg=et}}}function Fg(et){for(et=et.return;et!==null&&et.tag!==5&&et.tag!==3&&et.tag!==13;)et=et.return;xg=et}function Gg(et){if(et!==xg)return!1;if(!I$1)return Fg(et),I$1=!0,!1;var _e;if((_e=et.tag!==3)&&!(_e=et.tag!==5)&&(_e=et.type,_e=_e!=="head"&&_e!=="body"&&!Ef(et.type,et.memoizedProps)),_e&&(_e=yg)){if(Dg(et))throw Hg(),Error(p$1(418));for(;_e;)Ag(et,_e),_e=Lf(_e.nextSibling)}if(Fg(et),et.tag===13){if(et=et.memoizedState,et=et!==null?et.dehydrated:null,!et)throw Error(p$1(317));e:{for(et=et.nextSibling,_e=0;et;){if(et.nodeType===8){var tt=et.data;if(tt==="/$"){if(_e===0){yg=Lf(et.nextSibling);break e}_e--}else tt!=="$"&&tt!=="$!"&&tt!=="$?"||_e++}et=et.nextSibling}yg=null}}else yg=xg?Lf(et.stateNode.nextSibling):null;return!0}function Hg(){for(var et=yg;et;)et=Lf(et.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(et){zg===null?zg=[et]:zg.push(et)}var Kg=ua.ReactCurrentBatchConfig;function Lg(et,_e,tt){if(et=tt.ref,et!==null&&typeof et!="function"&&typeof et!="object"){if(tt._owner){if(tt=tt._owner,tt){if(tt.tag!==1)throw Error(p$1(309));var st=tt.stateNode}if(!st)throw Error(p$1(147,et));var rt=st,nt=""+et;return _e!==null&&_e.ref!==null&&typeof _e.ref=="function"&&_e.ref._stringRef===nt?_e.ref:(_e=function(it){var ot=rt.refs;it===null?delete ot[nt]:ot[nt]=it},_e._stringRef=nt,_e)}if(typeof et!="string")throw Error(p$1(284));if(!tt._owner)throw Error(p$1(290,et))}return et}function Mg(et,_e){throw et=Object.prototype.toString.call(_e),Error(p$1(31,et==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":et))}function Ng(et){var _e=et._init;return _e(et._payload)}function Og(et){function _e(ft,xt){if(et){var yt=ft.deletions;yt===null?(ft.deletions=[xt],ft.flags|=16):yt.push(xt)}}function tt(ft,xt){if(!et)return null;for(;xt!==null;)_e(ft,xt),xt=xt.sibling;return null}function st(ft,xt){for(ft=new Map;xt!==null;)xt.key!==null?ft.set(xt.key,xt):ft.set(xt.index,xt),xt=xt.sibling;return ft}function rt(ft,xt){return ft=Pg(ft,xt),ft.index=0,ft.sibling=null,ft}function nt(ft,xt,yt){return ft.index=yt,et?(yt=ft.alternate,yt!==null?(yt=yt.index,yt<xt?(ft.flags|=2,xt):yt):(ft.flags|=2,xt)):(ft.flags|=1048576,xt)}function it(ft){return et&&ft.alternate===null&&(ft.flags|=2),ft}function ot(ft,xt,yt,bt){return xt===null||xt.tag!==6?(xt=Qg(yt,ft.mode,bt),xt.return=ft,xt):(xt=rt(xt,yt),xt.return=ft,xt)}function at(ft,xt,yt,bt){var jt=yt.type;return jt===ya?ct(ft,xt,yt.props.children,bt,yt.key):xt!==null&&(xt.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===Ha&&Ng(jt)===xt.type)?(bt=rt(xt,yt.props),bt.ref=Lg(ft,xt,yt),bt.return=ft,bt):(bt=Rg(yt.type,yt.key,yt.props,null,ft.mode,bt),bt.ref=Lg(ft,xt,yt),bt.return=ft,bt)}function lt(ft,xt,yt,bt){return xt===null||xt.tag!==4||xt.stateNode.containerInfo!==yt.containerInfo||xt.stateNode.implementation!==yt.implementation?(xt=Sg(yt,ft.mode,bt),xt.return=ft,xt):(xt=rt(xt,yt.children||[]),xt.return=ft,xt)}function ct(ft,xt,yt,bt,jt){return xt===null||xt.tag!==7?(xt=Tg(yt,ft.mode,bt,jt),xt.return=ft,xt):(xt=rt(xt,yt),xt.return=ft,xt)}function ut(ft,xt,yt){if(typeof xt=="string"&&xt!==""||typeof xt=="number")return xt=Qg(""+xt,ft.mode,yt),xt.return=ft,xt;if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:return yt=Rg(xt.type,xt.key,xt.props,null,ft.mode,yt),yt.ref=Lg(ft,null,xt),yt.return=ft,yt;case wa:return xt=Sg(xt,ft.mode,yt),xt.return=ft,xt;case Ha:var bt=xt._init;return ut(ft,bt(xt._payload),yt)}if(eb(xt)||Ka(xt))return xt=Tg(xt,ft.mode,yt,null),xt.return=ft,xt;Mg(ft,xt)}return null}function dt(ft,xt,yt,bt){var jt=xt!==null?xt.key:null;if(typeof yt=="string"&&yt!==""||typeof yt=="number")return jt!==null?null:ot(ft,xt,""+yt,bt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:return yt.key===jt?at(ft,xt,yt,bt):null;case wa:return yt.key===jt?lt(ft,xt,yt,bt):null;case Ha:return jt=yt._init,dt(ft,xt,jt(yt._payload),bt)}if(eb(yt)||Ka(yt))return jt!==null?null:ct(ft,xt,yt,bt,null);Mg(ft,yt)}return null}function ht(ft,xt,yt,bt,jt){if(typeof bt=="string"&&bt!==""||typeof bt=="number")return ft=ft.get(yt)||null,ot(xt,ft,""+bt,jt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case va:return ft=ft.get(bt.key===null?yt:bt.key)||null,at(xt,ft,bt,jt);case wa:return ft=ft.get(bt.key===null?yt:bt.key)||null,lt(xt,ft,bt,jt);case Ha:var Ct=bt._init;return ht(ft,xt,yt,Ct(bt._payload),jt)}if(eb(bt)||Ka(bt))return ft=ft.get(yt)||null,ct(xt,ft,bt,jt,null);Mg(xt,bt)}return null}function pt(ft,xt,yt,bt){for(var jt=null,Ct=null,St=xt,vt=xt=0,Et=null;St!==null&&vt<yt.length;vt++){St.index>vt?(Et=St,St=null):Et=St.sibling;var Rt=dt(ft,St,yt[vt],bt);if(Rt===null){St===null&&(St=Et);break}et&&St&&Rt.alternate===null&&_e(ft,St),xt=nt(Rt,xt,vt),Ct===null?jt=Rt:Ct.sibling=Rt,Ct=Rt,St=Et}if(vt===yt.length)return tt(ft,St),I$1&&tg(ft,vt),jt;if(St===null){for(;vt<yt.length;vt++)St=ut(ft,yt[vt],bt),St!==null&&(xt=nt(St,xt,vt),Ct===null?jt=St:Ct.sibling=St,Ct=St);return I$1&&tg(ft,vt),jt}for(St=st(ft,St);vt<yt.length;vt++)Et=ht(St,ft,vt,yt[vt],bt),Et!==null&&(et&&Et.alternate!==null&&St.delete(Et.key===null?vt:Et.key),xt=nt(Et,xt,vt),Ct===null?jt=Et:Ct.sibling=Et,Ct=Et);return et&&St.forEach(function($t){return _e(ft,$t)}),I$1&&tg(ft,vt),jt}function mt(ft,xt,yt,bt){var jt=Ka(yt);if(typeof jt!="function")throw Error(p$1(150));if(yt=jt.call(yt),yt==null)throw Error(p$1(151));for(var Ct=jt=null,St=xt,vt=xt=0,Et=null,Rt=yt.next();St!==null&&!Rt.done;vt++,Rt=yt.next()){St.index>vt?(Et=St,St=null):Et=St.sibling;var $t=dt(ft,St,Rt.value,bt);if($t===null){St===null&&(St=Et);break}et&&St&&$t.alternate===null&&_e(ft,St),xt=nt($t,xt,vt),Ct===null?jt=$t:Ct.sibling=$t,Ct=$t,St=Et}if(Rt.done)return tt(ft,St),I$1&&tg(ft,vt),jt;if(St===null){for(;!Rt.done;vt++,Rt=yt.next())Rt=ut(ft,Rt.value,bt),Rt!==null&&(xt=nt(Rt,xt,vt),Ct===null?jt=Rt:Ct.sibling=Rt,Ct=Rt);return I$1&&tg(ft,vt),jt}for(St=st(ft,St);!Rt.done;vt++,Rt=yt.next())Rt=ht(St,ft,vt,Rt.value,bt),Rt!==null&&(et&&Rt.alternate!==null&&St.delete(Rt.key===null?vt:Rt.key),xt=nt(Rt,xt,vt),Ct===null?jt=Rt:Ct.sibling=Rt,Ct=Rt);return et&&St.forEach(function(At){return _e(ft,At)}),I$1&&tg(ft,vt),jt}function gt(ft,xt,yt,bt){if(typeof yt=="object"&&yt!==null&&yt.type===ya&&yt.key===null&&(yt=yt.props.children),typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:e:{for(var jt=yt.key,Ct=xt;Ct!==null;){if(Ct.key===jt){if(jt=yt.type,jt===ya){if(Ct.tag===7){tt(ft,Ct.sibling),xt=rt(Ct,yt.props.children),xt.return=ft,ft=xt;break e}}else if(Ct.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===Ha&&Ng(jt)===Ct.type){tt(ft,Ct.sibling),xt=rt(Ct,yt.props),xt.ref=Lg(ft,Ct,yt),xt.return=ft,ft=xt;break e}tt(ft,Ct);break}else _e(ft,Ct);Ct=Ct.sibling}yt.type===ya?(xt=Tg(yt.props.children,ft.mode,bt,yt.key),xt.return=ft,ft=xt):(bt=Rg(yt.type,yt.key,yt.props,null,ft.mode,bt),bt.ref=Lg(ft,xt,yt),bt.return=ft,ft=bt)}return it(ft);case wa:e:{for(Ct=yt.key;xt!==null;){if(xt.key===Ct)if(xt.tag===4&&xt.stateNode.containerInfo===yt.containerInfo&&xt.stateNode.implementation===yt.implementation){tt(ft,xt.sibling),xt=rt(xt,yt.children||[]),xt.return=ft,ft=xt;break e}else{tt(ft,xt);break}else _e(ft,xt);xt=xt.sibling}xt=Sg(yt,ft.mode,bt),xt.return=ft,ft=xt}return it(ft);case Ha:return Ct=yt._init,gt(ft,xt,Ct(yt._payload),bt)}if(eb(yt))return pt(ft,xt,yt,bt);if(Ka(yt))return mt(ft,xt,yt,bt);Mg(ft,yt)}return typeof yt=="string"&&yt!==""||typeof yt=="number"?(yt=""+yt,xt!==null&&xt.tag===6?(tt(ft,xt.sibling),xt=rt(xt,yt),xt.return=ft,ft=xt):(tt(ft,xt),xt=Qg(yt,ft.mode,bt),xt.return=ft,ft=xt),it(ft)):tt(ft,xt)}return gt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(et){var _e=Wg.current;E(Wg),et._currentValue=_e}function bh(et,_e,tt){for(;et!==null;){var st=et.alternate;if((et.childLanes&_e)!==_e?(et.childLanes|=_e,st!==null&&(st.childLanes|=_e)):st!==null&&(st.childLanes&_e)!==_e&&(st.childLanes|=_e),et===tt)break;et=et.return}}function ch(et,_e){Xg=et,Zg=Yg=null,et=et.dependencies,et!==null&&et.firstContext!==null&&(et.lanes&_e&&(dh=!0),et.firstContext=null)}function eh(et){var _e=et._currentValue;if(Zg!==et)if(et={context:et,memoizedValue:_e,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=et,Xg.dependencies={lanes:0,firstContext:et}}else Yg=Yg.next=et;return _e}var fh=null;function gh(et){fh===null?fh=[et]:fh.push(et)}function hh(et,_e,tt,st){var rt=_e.interleaved;return rt===null?(tt.next=tt,gh(_e)):(tt.next=rt.next,rt.next=tt),_e.interleaved=tt,ih(et,st)}function ih(et,_e){et.lanes|=_e;var tt=et.alternate;for(tt!==null&&(tt.lanes|=_e),tt=et,et=et.return;et!==null;)et.childLanes|=_e,tt=et.alternate,tt!==null&&(tt.childLanes|=_e),tt=et,et=et.return;return tt.tag===3?tt.stateNode:null}var jh=!1;function kh(et){et.updateQueue={baseState:et.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(et,_e){et=et.updateQueue,_e.updateQueue===et&&(_e.updateQueue={baseState:et.baseState,firstBaseUpdate:et.firstBaseUpdate,lastBaseUpdate:et.lastBaseUpdate,shared:et.shared,effects:et.effects})}function mh(et,_e){return{eventTime:et,lane:_e,tag:0,payload:null,callback:null,next:null}}function nh(et,_e,tt){var st=et.updateQueue;if(st===null)return null;if(st=st.shared,K&2){var rt=st.pending;return rt===null?_e.next=_e:(_e.next=rt.next,rt.next=_e),st.pending=_e,ih(et,tt)}return rt=st.interleaved,rt===null?(_e.next=_e,gh(st)):(_e.next=rt.next,rt.next=_e),st.interleaved=_e,ih(et,tt)}function oh(et,_e,tt){if(_e=_e.updateQueue,_e!==null&&(_e=_e.shared,(tt&4194240)!==0)){var st=_e.lanes;st&=et.pendingLanes,tt|=st,_e.lanes=tt,Cc(et,tt)}}function ph(et,_e){var tt=et.updateQueue,st=et.alternate;if(st!==null&&(st=st.updateQueue,tt===st)){var rt=null,nt=null;if(tt=tt.firstBaseUpdate,tt!==null){do{var it={eventTime:tt.eventTime,lane:tt.lane,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null};nt===null?rt=nt=it:nt=nt.next=it,tt=tt.next}while(tt!==null);nt===null?rt=nt=_e:nt=nt.next=_e}else rt=nt=_e;tt={baseState:st.baseState,firstBaseUpdate:rt,lastBaseUpdate:nt,shared:st.shared,effects:st.effects},et.updateQueue=tt;return}et=tt.lastBaseUpdate,et===null?tt.firstBaseUpdate=_e:et.next=_e,tt.lastBaseUpdate=_e}function qh(et,_e,tt,st){var rt=et.updateQueue;jh=!1;var nt=rt.firstBaseUpdate,it=rt.lastBaseUpdate,ot=rt.shared.pending;if(ot!==null){rt.shared.pending=null;var at=ot,lt=at.next;at.next=null,it===null?nt=lt:it.next=lt,it=at;var ct=et.alternate;ct!==null&&(ct=ct.updateQueue,ot=ct.lastBaseUpdate,ot!==it&&(ot===null?ct.firstBaseUpdate=lt:ot.next=lt,ct.lastBaseUpdate=at))}if(nt!==null){var ut=rt.baseState;it=0,ct=lt=at=null,ot=nt;do{var dt=ot.lane,ht=ot.eventTime;if((st&dt)===dt){ct!==null&&(ct=ct.next={eventTime:ht,lane:0,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null});e:{var pt=et,mt=ot;switch(dt=_e,ht=tt,mt.tag){case 1:if(pt=mt.payload,typeof pt=="function"){ut=pt.call(ht,ut,dt);break e}ut=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=mt.payload,dt=typeof pt=="function"?pt.call(ht,ut,dt):pt,dt==null)break e;ut=A$1({},ut,dt);break e;case 2:jh=!0}}ot.callback!==null&&ot.lane!==0&&(et.flags|=64,dt=rt.effects,dt===null?rt.effects=[ot]:dt.push(ot))}else ht={eventTime:ht,lane:dt,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null},ct===null?(lt=ct=ht,at=ut):ct=ct.next=ht,it|=dt;if(ot=ot.next,ot===null){if(ot=rt.shared.pending,ot===null)break;dt=ot,ot=dt.next,dt.next=null,rt.lastBaseUpdate=dt,rt.shared.pending=null}}while(!0);if(ct===null&&(at=ut),rt.baseState=at,rt.firstBaseUpdate=lt,rt.lastBaseUpdate=ct,_e=rt.shared.interleaved,_e!==null){rt=_e;do it|=rt.lane,rt=rt.next;while(rt!==_e)}else nt===null&&(rt.shared.lanes=0);rh|=it,et.lanes=it,et.memoizedState=ut}}function sh(et,_e,tt){if(et=_e.effects,_e.effects=null,et!==null)for(_e=0;_e<et.length;_e++){var st=et[_e],rt=st.callback;if(rt!==null){if(st.callback=null,st=tt,typeof rt!="function")throw Error(p$1(191,rt));rt.call(st)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(et){if(et===th)throw Error(p$1(174));return et}function yh(et,_e){switch(G$1(wh,_e),G$1(vh,et),G$1(uh,th),et=_e.nodeType,et){case 9:case 11:_e=(_e=_e.documentElement)?_e.namespaceURI:lb(null,"");break;default:et=et===8?_e.parentNode:_e,_e=et.namespaceURI||null,et=et.tagName,_e=lb(_e,et)}E(uh),G$1(uh,_e)}function zh(){E(uh),E(vh),E(wh)}function Ah(et){xh(wh.current);var _e=xh(uh.current),tt=lb(_e,et.type);_e!==tt&&(G$1(vh,et),G$1(uh,tt))}function Bh(et){vh.current===et&&(E(uh),E(vh))}var L=Uf(0);function Ch(et){for(var _e=et;_e!==null;){if(_e.tag===13){var tt=_e.memoizedState;if(tt!==null&&(tt=tt.dehydrated,tt===null||tt.data==="$?"||tt.data==="$!"))return _e}else if(_e.tag===19&&_e.memoizedProps.revealOrder!==void 0){if(_e.flags&128)return _e}else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===et)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===et)return null;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}return null}var Dh=[];function Eh(){for(var et=0;et<Dh.length;et++)Dh[et]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$1(){throw Error(p$1(321))}function Mh(et,_e){if(_e===null)return!1;for(var tt=0;tt<_e.length&&tt<et.length;tt++)if(!He(et[tt],_e[tt]))return!1;return!0}function Nh(et,_e,tt,st,rt,nt){if(Hh=nt,M$1=_e,_e.memoizedState=null,_e.updateQueue=null,_e.lanes=0,Fh.current=et===null||et.memoizedState===null?Oh:Ph,et=tt(st,rt),Jh){nt=0;do{if(Jh=!1,Kh=0,25<=nt)throw Error(p$1(301));nt+=1,O$1=N=null,_e.updateQueue=null,Fh.current=Qh,et=tt(st,rt)}while(Jh)}if(Fh.current=Rh,_e=N!==null&&N.next!==null,Hh=0,O$1=N=M$1=null,Ih=!1,_e)throw Error(p$1(300));return et}function Sh(){var et=Kh!==0;return Kh=0,et}function Th(){var et={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=et:O$1=O$1.next=et,O$1}function Uh(){if(N===null){var et=M$1.alternate;et=et!==null?et.memoizedState:null}else et=N.next;var _e=O$1===null?M$1.memoizedState:O$1.next;if(_e!==null)O$1=_e,N=et;else{if(et===null)throw Error(p$1(310));N=et,et={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O$1===null?M$1.memoizedState=O$1=et:O$1=O$1.next=et}return O$1}function Vh(et,_e){return typeof _e=="function"?_e(et):_e}function Wh(et){var _e=Uh(),tt=_e.queue;if(tt===null)throw Error(p$1(311));tt.lastRenderedReducer=et;var st=N,rt=st.baseQueue,nt=tt.pending;if(nt!==null){if(rt!==null){var it=rt.next;rt.next=nt.next,nt.next=it}st.baseQueue=rt=nt,tt.pending=null}if(rt!==null){nt=rt.next,st=st.baseState;var ot=it=null,at=null,lt=nt;do{var ct=lt.lane;if((Hh&ct)===ct)at!==null&&(at=at.next={lane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),st=lt.hasEagerState?lt.eagerState:et(st,lt.action);else{var ut={lane:ct,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null};at===null?(ot=at=ut,it=st):at=at.next=ut,M$1.lanes|=ct,rh|=ct}lt=lt.next}while(lt!==null&&lt!==nt);at===null?it=st:at.next=ot,He(st,_e.memoizedState)||(dh=!0),_e.memoizedState=st,_e.baseState=it,_e.baseQueue=at,tt.lastRenderedState=st}if(et=tt.interleaved,et!==null){rt=et;do nt=rt.lane,M$1.lanes|=nt,rh|=nt,rt=rt.next;while(rt!==et)}else rt===null&&(tt.lanes=0);return[_e.memoizedState,tt.dispatch]}function Xh(et){var _e=Uh(),tt=_e.queue;if(tt===null)throw Error(p$1(311));tt.lastRenderedReducer=et;var st=tt.dispatch,rt=tt.pending,nt=_e.memoizedState;if(rt!==null){tt.pending=null;var it=rt=rt.next;do nt=et(nt,it.action),it=it.next;while(it!==rt);He(nt,_e.memoizedState)||(dh=!0),_e.memoizedState=nt,_e.baseQueue===null&&(_e.baseState=nt),tt.lastRenderedState=nt}return[nt,st]}function Yh(){}function Zh(et,_e){var tt=M$1,st=Uh(),rt=_e(),nt=!He(st.memoizedState,rt);if(nt&&(st.memoizedState=rt,dh=!0),st=st.queue,$h(ai.bind(null,tt,st,et),[et]),st.getSnapshot!==_e||nt||O$1!==null&&O$1.memoizedState.tag&1){if(tt.flags|=2048,bi(9,ci.bind(null,tt,st,rt,_e),void 0,null),Q$1===null)throw Error(p$1(349));Hh&30||di(tt,_e,rt)}return rt}function di(et,_e,tt){et.flags|=16384,et={getSnapshot:_e,value:tt},_e=M$1.updateQueue,_e===null?(_e={lastEffect:null,stores:null},M$1.updateQueue=_e,_e.stores=[et]):(tt=_e.stores,tt===null?_e.stores=[et]:tt.push(et))}function ci(et,_e,tt,st){_e.value=tt,_e.getSnapshot=st,ei(_e)&&fi(et)}function ai(et,_e,tt){return tt(function(){ei(_e)&&fi(et)})}function ei(et){var _e=et.getSnapshot;et=et.value;try{var tt=_e();return!He(et,tt)}catch{return!0}}function fi(et){var _e=ih(et,1);_e!==null&&gi(_e,et,1,-1)}function hi(et){var _e=Th();return typeof et=="function"&&(et=et()),_e.memoizedState=_e.baseState=et,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:et},_e.queue=et,et=et.dispatch=ii.bind(null,M$1,et),[_e.memoizedState,et]}function bi(et,_e,tt,st){return et={tag:et,create:_e,destroy:tt,deps:st,next:null},_e=M$1.updateQueue,_e===null?(_e={lastEffect:null,stores:null},M$1.updateQueue=_e,_e.lastEffect=et.next=et):(tt=_e.lastEffect,tt===null?_e.lastEffect=et.next=et:(st=tt.next,tt.next=et,et.next=st,_e.lastEffect=et)),et}function ji(){return Uh().memoizedState}function ki(et,_e,tt,st){var rt=Th();M$1.flags|=et,rt.memoizedState=bi(1|_e,tt,void 0,st===void 0?null:st)}function li(et,_e,tt,st){var rt=Uh();st=st===void 0?null:st;var nt=void 0;if(N!==null){var it=N.memoizedState;if(nt=it.destroy,st!==null&&Mh(st,it.deps)){rt.memoizedState=bi(_e,tt,nt,st);return}}M$1.flags|=et,rt.memoizedState=bi(1|_e,tt,nt,st)}function mi(et,_e){return ki(8390656,8,et,_e)}function $h(et,_e){return li(2048,8,et,_e)}function ni(et,_e){return li(4,2,et,_e)}function oi(et,_e){return li(4,4,et,_e)}function pi(et,_e){if(typeof _e=="function")return et=et(),_e(et),function(){_e(null)};if(_e!=null)return et=et(),_e.current=et,function(){_e.current=null}}function qi(et,_e,tt){return tt=tt!=null?tt.concat([et]):null,li(4,4,pi.bind(null,_e,et),tt)}function ri(){}function si(et,_e){var tt=Uh();_e=_e===void 0?null:_e;var st=tt.memoizedState;return st!==null&&_e!==null&&Mh(_e,st[1])?st[0]:(tt.memoizedState=[et,_e],et)}function ti(et,_e){var tt=Uh();_e=_e===void 0?null:_e;var st=tt.memoizedState;return st!==null&&_e!==null&&Mh(_e,st[1])?st[0]:(et=et(),tt.memoizedState=[et,_e],et)}function ui(et,_e,tt){return Hh&21?(He(tt,_e)||(tt=yc(),M$1.lanes|=tt,rh|=tt,et.baseState=!0),_e):(et.baseState&&(et.baseState=!1,dh=!0),et.memoizedState=tt)}function vi(et,_e){var tt=C;C=tt!==0&&4>tt?tt:4,et(!0);var st=Gh.transition;Gh.transition={};try{et(!1),_e()}finally{C=tt,Gh.transition=st}}function wi(){return Uh().memoizedState}function xi(et,_e,tt){var st=yi(et);if(tt={lane:st,action:tt,hasEagerState:!1,eagerState:null,next:null},zi(et))Ai(_e,tt);else if(tt=hh(et,_e,tt,st),tt!==null){var rt=R();gi(tt,et,st,rt),Bi(tt,_e,st)}}function ii(et,_e,tt){var st=yi(et),rt={lane:st,action:tt,hasEagerState:!1,eagerState:null,next:null};if(zi(et))Ai(_e,rt);else{var nt=et.alternate;if(et.lanes===0&&(nt===null||nt.lanes===0)&&(nt=_e.lastRenderedReducer,nt!==null))try{var it=_e.lastRenderedState,ot=nt(it,tt);if(rt.hasEagerState=!0,rt.eagerState=ot,He(ot,it)){var at=_e.interleaved;at===null?(rt.next=rt,gh(_e)):(rt.next=at.next,at.next=rt),_e.interleaved=rt;return}}catch{}finally{}tt=hh(et,_e,rt,st),tt!==null&&(rt=R(),gi(tt,et,st,rt),Bi(tt,_e,st))}}function zi(et){var _e=et.alternate;return et===M$1||_e!==null&&_e===M$1}function Ai(et,_e){Jh=Ih=!0;var tt=et.pending;tt===null?_e.next=_e:(_e.next=tt.next,tt.next=_e),et.pending=_e}function Bi(et,_e,tt){if(tt&4194240){var st=_e.lanes;st&=et.pendingLanes,tt|=st,_e.lanes=tt,Cc(et,tt)}}var Rh={readContext:eh,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(et,_e){return Th().memoizedState=[et,_e===void 0?null:_e],et},useContext:eh,useEffect:mi,useImperativeHandle:function(et,_e,tt){return tt=tt!=null?tt.concat([et]):null,ki(4194308,4,pi.bind(null,_e,et),tt)},useLayoutEffect:function(et,_e){return ki(4194308,4,et,_e)},useInsertionEffect:function(et,_e){return ki(4,2,et,_e)},useMemo:function(et,_e){var tt=Th();return _e=_e===void 0?null:_e,et=et(),tt.memoizedState=[et,_e],et},useReducer:function(et,_e,tt){var st=Th();return _e=tt!==void 0?tt(_e):_e,st.memoizedState=st.baseState=_e,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:et,lastRenderedState:_e},st.queue=et,et=et.dispatch=xi.bind(null,M$1,et),[st.memoizedState,et]},useRef:function(et){var _e=Th();return et={current:et},_e.memoizedState=et},useState:hi,useDebugValue:ri,useDeferredValue:function(et){return Th().memoizedState=et},useTransition:function(){var et=hi(!1),_e=et[0];return et=vi.bind(null,et[1]),Th().memoizedState=et,[_e,et]},useMutableSource:function(){},useSyncExternalStore:function(et,_e,tt){var st=M$1,rt=Th();if(I$1){if(tt===void 0)throw Error(p$1(407));tt=tt()}else{if(tt=_e(),Q$1===null)throw Error(p$1(349));Hh&30||di(st,_e,tt)}rt.memoizedState=tt;var nt={value:tt,getSnapshot:_e};return rt.queue=nt,mi(ai.bind(null,st,nt,et),[et]),st.flags|=2048,bi(9,ci.bind(null,st,nt,tt,_e),void 0,null),tt},useId:function(){var et=Th(),_e=Q$1.identifierPrefix;if(I$1){var tt=sg,st=rg;tt=(st&~(1<<32-oc(st)-1)).toString(32)+tt,_e=":"+_e+"R"+tt,tt=Kh++,0<tt&&(_e+="H"+tt.toString(32)),_e+=":"}else tt=Lh++,_e=":"+_e+"r"+tt.toString(32)+":";return et.memoizedState=_e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(et){var _e=Uh();return ui(_e,N.memoizedState,et)},useTransition:function(){var et=Wh(Vh)[0],_e=Uh().memoizedState;return[et,_e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(et){var _e=Uh();return N===null?_e.memoizedState=et:ui(_e,N.memoizedState,et)},useTransition:function(){var et=Xh(Vh)[0],_e=Uh().memoizedState;return[et,_e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(et,_e){if(et&&et.defaultProps){_e=A$1({},_e),et=et.defaultProps;for(var tt in et)_e[tt]===void 0&&(_e[tt]=et[tt]);return _e}return _e}function Di(et,_e,tt,st){_e=et.memoizedState,tt=tt(st,_e),tt=tt==null?_e:A$1({},_e,tt),et.memoizedState=tt,et.lanes===0&&(et.updateQueue.baseState=tt)}var Ei={isMounted:function(et){return(et=et._reactInternals)?Vb(et)===et:!1},enqueueSetState:function(et,_e,tt){et=et._reactInternals;var st=R(),rt=yi(et),nt=mh(st,rt);nt.payload=_e,tt!=null&&(nt.callback=tt),_e=nh(et,nt,rt),_e!==null&&(gi(_e,et,rt,st),oh(_e,et,rt))},enqueueReplaceState:function(et,_e,tt){et=et._reactInternals;var st=R(),rt=yi(et),nt=mh(st,rt);nt.tag=1,nt.payload=_e,tt!=null&&(nt.callback=tt),_e=nh(et,nt,rt),_e!==null&&(gi(_e,et,rt,st),oh(_e,et,rt))},enqueueForceUpdate:function(et,_e){et=et._reactInternals;var tt=R(),st=yi(et),rt=mh(tt,st);rt.tag=2,_e!=null&&(rt.callback=_e),_e=nh(et,rt,st),_e!==null&&(gi(_e,et,st,tt),oh(_e,et,st))}};function Fi(et,_e,tt,st,rt,nt,it){return et=et.stateNode,typeof et.shouldComponentUpdate=="function"?et.shouldComponentUpdate(st,nt,it):_e.prototype&&_e.prototype.isPureReactComponent?!Ie$1(tt,st)||!Ie$1(rt,nt):!0}function Gi(et,_e,tt){var st=!1,rt=Vf,nt=_e.contextType;return typeof nt=="object"&&nt!==null?nt=eh(nt):(rt=Zf(_e)?Xf:H.current,st=_e.contextTypes,nt=(st=st!=null)?Yf(et,rt):Vf),_e=new _e(tt,nt),et.memoizedState=_e.state!==null&&_e.state!==void 0?_e.state:null,_e.updater=Ei,et.stateNode=_e,_e._reactInternals=et,st&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=rt,et.__reactInternalMemoizedMaskedChildContext=nt),_e}function Hi(et,_e,tt,st){et=_e.state,typeof _e.componentWillReceiveProps=="function"&&_e.componentWillReceiveProps(tt,st),typeof _e.UNSAFE_componentWillReceiveProps=="function"&&_e.UNSAFE_componentWillReceiveProps(tt,st),_e.state!==et&&Ei.enqueueReplaceState(_e,_e.state,null)}function Ii(et,_e,tt,st){var rt=et.stateNode;rt.props=tt,rt.state=et.memoizedState,rt.refs={},kh(et);var nt=_e.contextType;typeof nt=="object"&&nt!==null?rt.context=eh(nt):(nt=Zf(_e)?Xf:H.current,rt.context=Yf(et,nt)),rt.state=et.memoizedState,nt=_e.getDerivedStateFromProps,typeof nt=="function"&&(Di(et,_e,nt,tt),rt.state=et.memoizedState),typeof _e.getDerivedStateFromProps=="function"||typeof rt.getSnapshotBeforeUpdate=="function"||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(_e=rt.state,typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount(),_e!==rt.state&&Ei.enqueueReplaceState(rt,rt.state,null),qh(et,tt,rt,st),rt.state=et.memoizedState),typeof rt.componentDidMount=="function"&&(et.flags|=4194308)}function Ji(et,_e){try{var tt="",st=_e;do tt+=Pa(st),st=st.return;while(st);var rt=tt}catch(nt){rt=`
Error generating stack: `+nt.message+`
`+nt.stack}return{value:et,source:_e,stack:rt,digest:null}}function Ki(et,_e,tt){return{value:et,source:null,stack:tt??null,digest:_e??null}}function Li(et,_e){try{console.error(_e.value)}catch(tt){setTimeout(function(){throw tt})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(et,_e,tt){tt=mh(-1,tt),tt.tag=3,tt.payload={element:null};var st=_e.value;return tt.callback=function(){Oi||(Oi=!0,Pi=st),Li(et,_e)},tt}function Qi(et,_e,tt){tt=mh(-1,tt),tt.tag=3;var st=et.type.getDerivedStateFromError;if(typeof st=="function"){var rt=_e.value;tt.payload=function(){return st(rt)},tt.callback=function(){Li(et,_e)}}var nt=et.stateNode;return nt!==null&&typeof nt.componentDidCatch=="function"&&(tt.callback=function(){Li(et,_e),typeof st!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var it=_e.stack;this.componentDidCatch(_e.value,{componentStack:it!==null?it:""})}),tt}function Si(et,_e,tt){var st=et.pingCache;if(st===null){st=et.pingCache=new Mi;var rt=new Set;st.set(_e,rt)}else rt=st.get(_e),rt===void 0&&(rt=new Set,st.set(_e,rt));rt.has(tt)||(rt.add(tt),et=Ti.bind(null,et,_e,tt),_e.then(et,et))}function Ui(et){do{var _e;if((_e=et.tag===13)&&(_e=et.memoizedState,_e=_e!==null?_e.dehydrated!==null:!0),_e)return et;et=et.return}while(et!==null);return null}function Vi(et,_e,tt,st,rt){return et.mode&1?(et.flags|=65536,et.lanes=rt,et):(et===_e?et.flags|=65536:(et.flags|=128,tt.flags|=131072,tt.flags&=-52805,tt.tag===1&&(tt.alternate===null?tt.tag=17:(_e=mh(-1,1),_e.tag=2,nh(tt,_e,1))),tt.lanes|=1),et)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(et,_e,tt,st){_e.child=et===null?Vg(_e,null,tt,st):Ug(_e,et.child,tt,st)}function Yi(et,_e,tt,st,rt){tt=tt.render;var nt=_e.ref;return ch(_e,rt),st=Nh(et,_e,tt,st,nt,rt),tt=Sh(),et!==null&&!dh?(_e.updateQueue=et.updateQueue,_e.flags&=-2053,et.lanes&=~rt,Zi(et,_e,rt)):(I$1&&tt&&vg(_e),_e.flags|=1,Xi(et,_e,st,rt),_e.child)}function $i(et,_e,tt,st,rt){if(et===null){var nt=tt.type;return typeof nt=="function"&&!aj(nt)&&nt.defaultProps===void 0&&tt.compare===null&&tt.defaultProps===void 0?(_e.tag=15,_e.type=nt,bj(et,_e,nt,st,rt)):(et=Rg(tt.type,null,st,_e,_e.mode,rt),et.ref=_e.ref,et.return=_e,_e.child=et)}if(nt=et.child,!(et.lanes&rt)){var it=nt.memoizedProps;if(tt=tt.compare,tt=tt!==null?tt:Ie$1,tt(it,st)&&et.ref===_e.ref)return Zi(et,_e,rt)}return _e.flags|=1,et=Pg(nt,st),et.ref=_e.ref,et.return=_e,_e.child=et}function bj(et,_e,tt,st,rt){if(et!==null){var nt=et.memoizedProps;if(Ie$1(nt,st)&&et.ref===_e.ref)if(dh=!1,_e.pendingProps=st=nt,(et.lanes&rt)!==0)et.flags&131072&&(dh=!0);else return _e.lanes=et.lanes,Zi(et,_e,rt)}return cj(et,_e,tt,st,rt)}function dj(et,_e,tt){var st=_e.pendingProps,rt=st.children,nt=et!==null?et.memoizedState:null;if(st.mode==="hidden")if(!(_e.mode&1))_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=tt;else{if(!(tt&1073741824))return et=nt!==null?nt.baseLanes|tt:tt,_e.lanes=_e.childLanes=1073741824,_e.memoizedState={baseLanes:et,cachePool:null,transitions:null},_e.updateQueue=null,G$1(ej,fj),fj|=et,null;_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},st=nt!==null?nt.baseLanes:tt,G$1(ej,fj),fj|=st}else nt!==null?(st=nt.baseLanes|tt,_e.memoizedState=null):st=tt,G$1(ej,fj),fj|=st;return Xi(et,_e,rt,tt),_e.child}function gj(et,_e){var tt=_e.ref;(et===null&&tt!==null||et!==null&&et.ref!==tt)&&(_e.flags|=512,_e.flags|=2097152)}function cj(et,_e,tt,st,rt){var nt=Zf(tt)?Xf:H.current;return nt=Yf(_e,nt),ch(_e,rt),tt=Nh(et,_e,tt,st,nt,rt),st=Sh(),et!==null&&!dh?(_e.updateQueue=et.updateQueue,_e.flags&=-2053,et.lanes&=~rt,Zi(et,_e,rt)):(I$1&&st&&vg(_e),_e.flags|=1,Xi(et,_e,tt,rt),_e.child)}function hj(et,_e,tt,st,rt){if(Zf(tt)){var nt=!0;cg(_e)}else nt=!1;if(ch(_e,rt),_e.stateNode===null)ij(et,_e),Gi(_e,tt,st),Ii(_e,tt,st,rt),st=!0;else if(et===null){var it=_e.stateNode,ot=_e.memoizedProps;it.props=ot;var at=it.context,lt=tt.contextType;typeof lt=="object"&&lt!==null?lt=eh(lt):(lt=Zf(tt)?Xf:H.current,lt=Yf(_e,lt));var ct=tt.getDerivedStateFromProps,ut=typeof ct=="function"||typeof it.getSnapshotBeforeUpdate=="function";ut||typeof it.UNSAFE_componentWillReceiveProps!="function"&&typeof it.componentWillReceiveProps!="function"||(ot!==st||at!==lt)&&Hi(_e,it,st,lt),jh=!1;var dt=_e.memoizedState;it.state=dt,qh(_e,st,it,rt),at=_e.memoizedState,ot!==st||dt!==at||Wf.current||jh?(typeof ct=="function"&&(Di(_e,tt,ct,st),at=_e.memoizedState),(ot=jh||Fi(_e,tt,ot,st,dt,at,lt))?(ut||typeof it.UNSAFE_componentWillMount!="function"&&typeof it.componentWillMount!="function"||(typeof it.componentWillMount=="function"&&it.componentWillMount(),typeof it.UNSAFE_componentWillMount=="function"&&it.UNSAFE_componentWillMount()),typeof it.componentDidMount=="function"&&(_e.flags|=4194308)):(typeof it.componentDidMount=="function"&&(_e.flags|=4194308),_e.memoizedProps=st,_e.memoizedState=at),it.props=st,it.state=at,it.context=lt,st=ot):(typeof it.componentDidMount=="function"&&(_e.flags|=4194308),st=!1)}else{it=_e.stateNode,lh(et,_e),ot=_e.memoizedProps,lt=_e.type===_e.elementType?ot:Ci(_e.type,ot),it.props=lt,ut=_e.pendingProps,dt=it.context,at=tt.contextType,typeof at=="object"&&at!==null?at=eh(at):(at=Zf(tt)?Xf:H.current,at=Yf(_e,at));var ht=tt.getDerivedStateFromProps;(ct=typeof ht=="function"||typeof it.getSnapshotBeforeUpdate=="function")||typeof it.UNSAFE_componentWillReceiveProps!="function"&&typeof it.componentWillReceiveProps!="function"||(ot!==ut||dt!==at)&&Hi(_e,it,st,at),jh=!1,dt=_e.memoizedState,it.state=dt,qh(_e,st,it,rt);var pt=_e.memoizedState;ot!==ut||dt!==pt||Wf.current||jh?(typeof ht=="function"&&(Di(_e,tt,ht,st),pt=_e.memoizedState),(lt=jh||Fi(_e,tt,lt,st,dt,pt,at)||!1)?(ct||typeof it.UNSAFE_componentWillUpdate!="function"&&typeof it.componentWillUpdate!="function"||(typeof it.componentWillUpdate=="function"&&it.componentWillUpdate(st,pt,at),typeof it.UNSAFE_componentWillUpdate=="function"&&it.UNSAFE_componentWillUpdate(st,pt,at)),typeof it.componentDidUpdate=="function"&&(_e.flags|=4),typeof it.getSnapshotBeforeUpdate=="function"&&(_e.flags|=1024)):(typeof it.componentDidUpdate!="function"||ot===et.memoizedProps&&dt===et.memoizedState||(_e.flags|=4),typeof it.getSnapshotBeforeUpdate!="function"||ot===et.memoizedProps&&dt===et.memoizedState||(_e.flags|=1024),_e.memoizedProps=st,_e.memoizedState=pt),it.props=st,it.state=pt,it.context=at,st=lt):(typeof it.componentDidUpdate!="function"||ot===et.memoizedProps&&dt===et.memoizedState||(_e.flags|=4),typeof it.getSnapshotBeforeUpdate!="function"||ot===et.memoizedProps&&dt===et.memoizedState||(_e.flags|=1024),st=!1)}return jj(et,_e,tt,st,nt,rt)}function jj(et,_e,tt,st,rt,nt){gj(et,_e);var it=(_e.flags&128)!==0;if(!st&&!it)return rt&&dg(_e,tt,!1),Zi(et,_e,nt);st=_e.stateNode,Wi.current=_e;var ot=it&&typeof tt.getDerivedStateFromError!="function"?null:st.render();return _e.flags|=1,et!==null&&it?(_e.child=Ug(_e,et.child,null,nt),_e.child=Ug(_e,null,ot,nt)):Xi(et,_e,ot,nt),_e.memoizedState=st.state,rt&&dg(_e,tt,!0),_e.child}function kj(et){var _e=et.stateNode;_e.pendingContext?ag(et,_e.pendingContext,_e.pendingContext!==_e.context):_e.context&&ag(et,_e.context,!1),yh(et,_e.containerInfo)}function lj(et,_e,tt,st,rt){return Ig(),Jg(rt),_e.flags|=256,Xi(et,_e,tt,st),_e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(et){return{baseLanes:et,cachePool:null,transitions:null}}function oj(et,_e,tt){var st=_e.pendingProps,rt=L.current,nt=!1,it=(_e.flags&128)!==0,ot;if((ot=it)||(ot=et!==null&&et.memoizedState===null?!1:(rt&2)!==0),ot?(nt=!0,_e.flags&=-129):(et===null||et.memoizedState!==null)&&(rt|=1),G$1(L,rt&1),et===null)return Eg(_e),et=_e.memoizedState,et!==null&&(et=et.dehydrated,et!==null)?(_e.mode&1?et.data==="$!"?_e.lanes=8:_e.lanes=1073741824:_e.lanes=1,null):(it=st.children,et=st.fallback,nt?(st=_e.mode,nt=_e.child,it={mode:"hidden",children:it},!(st&1)&&nt!==null?(nt.childLanes=0,nt.pendingProps=it):nt=pj(it,st,0,null),et=Tg(et,st,tt,null),nt.return=_e,et.return=_e,nt.sibling=et,_e.child=nt,_e.child.memoizedState=nj(tt),_e.memoizedState=mj,et):qj(_e,it));if(rt=et.memoizedState,rt!==null&&(ot=rt.dehydrated,ot!==null))return rj(et,_e,it,st,ot,rt,tt);if(nt){nt=st.fallback,it=_e.mode,rt=et.child,ot=rt.sibling;var at={mode:"hidden",children:st.children};return!(it&1)&&_e.child!==rt?(st=_e.child,st.childLanes=0,st.pendingProps=at,_e.deletions=null):(st=Pg(rt,at),st.subtreeFlags=rt.subtreeFlags&14680064),ot!==null?nt=Pg(ot,nt):(nt=Tg(nt,it,tt,null),nt.flags|=2),nt.return=_e,st.return=_e,st.sibling=nt,_e.child=st,st=nt,nt=_e.child,it=et.child.memoizedState,it=it===null?nj(tt):{baseLanes:it.baseLanes|tt,cachePool:null,transitions:it.transitions},nt.memoizedState=it,nt.childLanes=et.childLanes&~tt,_e.memoizedState=mj,st}return nt=et.child,et=nt.sibling,st=Pg(nt,{mode:"visible",children:st.children}),!(_e.mode&1)&&(st.lanes=tt),st.return=_e,st.sibling=null,et!==null&&(tt=_e.deletions,tt===null?(_e.deletions=[et],_e.flags|=16):tt.push(et)),_e.child=st,_e.memoizedState=null,st}function qj(et,_e){return _e=pj({mode:"visible",children:_e},et.mode,0,null),_e.return=et,et.child=_e}function sj(et,_e,tt,st){return st!==null&&Jg(st),Ug(_e,et.child,null,tt),et=qj(_e,_e.pendingProps.children),et.flags|=2,_e.memoizedState=null,et}function rj(et,_e,tt,st,rt,nt,it){if(tt)return _e.flags&256?(_e.flags&=-257,st=Ki(Error(p$1(422))),sj(et,_e,it,st)):_e.memoizedState!==null?(_e.child=et.child,_e.flags|=128,null):(nt=st.fallback,rt=_e.mode,st=pj({mode:"visible",children:st.children},rt,0,null),nt=Tg(nt,rt,it,null),nt.flags|=2,st.return=_e,nt.return=_e,st.sibling=nt,_e.child=st,_e.mode&1&&Ug(_e,et.child,null,it),_e.child.memoizedState=nj(it),_e.memoizedState=mj,nt);if(!(_e.mode&1))return sj(et,_e,it,null);if(rt.data==="$!"){if(st=rt.nextSibling&&rt.nextSibling.dataset,st)var ot=st.dgst;return st=ot,nt=Error(p$1(419)),st=Ki(nt,st,void 0),sj(et,_e,it,st)}if(ot=(it&et.childLanes)!==0,dh||ot){if(st=Q$1,st!==null){switch(it&-it){case 4:rt=2;break;case 16:rt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:rt=32;break;case 536870912:rt=268435456;break;default:rt=0}rt=rt&(st.suspendedLanes|it)?0:rt,rt!==0&&rt!==nt.retryLane&&(nt.retryLane=rt,ih(et,rt),gi(st,et,rt,-1))}return tj(),st=Ki(Error(p$1(421))),sj(et,_e,it,st)}return rt.data==="$?"?(_e.flags|=128,_e.child=et.child,_e=uj.bind(null,et),rt._reactRetry=_e,null):(et=nt.treeContext,yg=Lf(rt.nextSibling),xg=_e,I$1=!0,zg=null,et!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=et.id,sg=et.overflow,qg=_e),_e=qj(_e,st.children),_e.flags|=4096,_e)}function vj(et,_e,tt){et.lanes|=_e;var st=et.alternate;st!==null&&(st.lanes|=_e),bh(et.return,_e,tt)}function wj(et,_e,tt,st,rt){var nt=et.memoizedState;nt===null?et.memoizedState={isBackwards:_e,rendering:null,renderingStartTime:0,last:st,tail:tt,tailMode:rt}:(nt.isBackwards=_e,nt.rendering=null,nt.renderingStartTime=0,nt.last=st,nt.tail=tt,nt.tailMode=rt)}function xj(et,_e,tt){var st=_e.pendingProps,rt=st.revealOrder,nt=st.tail;if(Xi(et,_e,st.children,tt),st=L.current,st&2)st=st&1|2,_e.flags|=128;else{if(et!==null&&et.flags&128)e:for(et=_e.child;et!==null;){if(et.tag===13)et.memoizedState!==null&&vj(et,tt,_e);else if(et.tag===19)vj(et,tt,_e);else if(et.child!==null){et.child.return=et,et=et.child;continue}if(et===_e)break e;for(;et.sibling===null;){if(et.return===null||et.return===_e)break e;et=et.return}et.sibling.return=et.return,et=et.sibling}st&=1}if(G$1(L,st),!(_e.mode&1))_e.memoizedState=null;else switch(rt){case"forwards":for(tt=_e.child,rt=null;tt!==null;)et=tt.alternate,et!==null&&Ch(et)===null&&(rt=tt),tt=tt.sibling;tt=rt,tt===null?(rt=_e.child,_e.child=null):(rt=tt.sibling,tt.sibling=null),wj(_e,!1,rt,tt,nt);break;case"backwards":for(tt=null,rt=_e.child,_e.child=null;rt!==null;){if(et=rt.alternate,et!==null&&Ch(et)===null){_e.child=rt;break}et=rt.sibling,rt.sibling=tt,tt=rt,rt=et}wj(_e,!0,tt,null,nt);break;case"together":wj(_e,!1,null,null,void 0);break;default:_e.memoizedState=null}return _e.child}function ij(et,_e){!(_e.mode&1)&&et!==null&&(et.alternate=null,_e.alternate=null,_e.flags|=2)}function Zi(et,_e,tt){if(et!==null&&(_e.dependencies=et.dependencies),rh|=_e.lanes,!(tt&_e.childLanes))return null;if(et!==null&&_e.child!==et.child)throw Error(p$1(153));if(_e.child!==null){for(et=_e.child,tt=Pg(et,et.pendingProps),_e.child=tt,tt.return=_e;et.sibling!==null;)et=et.sibling,tt=tt.sibling=Pg(et,et.pendingProps),tt.return=_e;tt.sibling=null}return _e.child}function yj(et,_e,tt){switch(_e.tag){case 3:kj(_e),Ig();break;case 5:Ah(_e);break;case 1:Zf(_e.type)&&cg(_e);break;case 4:yh(_e,_e.stateNode.containerInfo);break;case 10:var st=_e.type._context,rt=_e.memoizedProps.value;G$1(Wg,st._currentValue),st._currentValue=rt;break;case 13:if(st=_e.memoizedState,st!==null)return st.dehydrated!==null?(G$1(L,L.current&1),_e.flags|=128,null):tt&_e.child.childLanes?oj(et,_e,tt):(G$1(L,L.current&1),et=Zi(et,_e,tt),et!==null?et.sibling:null);G$1(L,L.current&1);break;case 19:if(st=(tt&_e.childLanes)!==0,et.flags&128){if(st)return xj(et,_e,tt);_e.flags|=128}if(rt=_e.memoizedState,rt!==null&&(rt.rendering=null,rt.tail=null,rt.lastEffect=null),G$1(L,L.current),st)break;return null;case 22:case 23:return _e.lanes=0,dj(et,_e,tt)}return Zi(et,_e,tt)}var zj,Aj,Bj,Cj;zj=function(et,_e){for(var tt=_e.child;tt!==null;){if(tt.tag===5||tt.tag===6)et.appendChild(tt.stateNode);else if(tt.tag!==4&&tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===_e)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===_e)return;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}};Aj=function(){};Bj=function(et,_e,tt,st){var rt=et.memoizedProps;if(rt!==st){et=_e.stateNode,xh(uh.current);var nt=null;switch(tt){case"input":rt=Ya(et,rt),st=Ya(et,st),nt=[];break;case"select":rt=A$1({},rt,{value:void 0}),st=A$1({},st,{value:void 0}),nt=[];break;case"textarea":rt=gb(et,rt),st=gb(et,st),nt=[];break;default:typeof rt.onClick!="function"&&typeof st.onClick=="function"&&(et.onclick=Bf)}ub(tt,st);var it;tt=null;for(lt in rt)if(!st.hasOwnProperty(lt)&&rt.hasOwnProperty(lt)&&rt[lt]!=null)if(lt==="style"){var ot=rt[lt];for(it in ot)ot.hasOwnProperty(it)&&(tt||(tt={}),tt[it]="")}else lt!=="dangerouslySetInnerHTML"&&lt!=="children"&&lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&lt!=="autoFocus"&&(ea.hasOwnProperty(lt)?nt||(nt=[]):(nt=nt||[]).push(lt,null));for(lt in st){var at=st[lt];if(ot=rt!=null?rt[lt]:void 0,st.hasOwnProperty(lt)&&at!==ot&&(at!=null||ot!=null))if(lt==="style")if(ot){for(it in ot)!ot.hasOwnProperty(it)||at&&at.hasOwnProperty(it)||(tt||(tt={}),tt[it]="");for(it in at)at.hasOwnProperty(it)&&ot[it]!==at[it]&&(tt||(tt={}),tt[it]=at[it])}else tt||(nt||(nt=[]),nt.push(lt,tt)),tt=at;else lt==="dangerouslySetInnerHTML"?(at=at?at.__html:void 0,ot=ot?ot.__html:void 0,at!=null&&ot!==at&&(nt=nt||[]).push(lt,at)):lt==="children"?typeof at!="string"&&typeof at!="number"||(nt=nt||[]).push(lt,""+at):lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(lt)?(at!=null&&lt==="onScroll"&&D$1("scroll",et),nt||ot===at||(nt=[])):(nt=nt||[]).push(lt,at))}tt&&(nt=nt||[]).push("style",tt);var lt=nt;(_e.updateQueue=lt)&&(_e.flags|=4)}};Cj=function(et,_e,tt,st){tt!==st&&(_e.flags|=4)};function Dj(et,_e){if(!I$1)switch(et.tailMode){case"hidden":_e=et.tail;for(var tt=null;_e!==null;)_e.alternate!==null&&(tt=_e),_e=_e.sibling;tt===null?et.tail=null:tt.sibling=null;break;case"collapsed":tt=et.tail;for(var st=null;tt!==null;)tt.alternate!==null&&(st=tt),tt=tt.sibling;st===null?_e||et.tail===null?et.tail=null:et.tail.sibling=null:st.sibling=null}}function S$1(et){var _e=et.alternate!==null&&et.alternate.child===et.child,tt=0,st=0;if(_e)for(var rt=et.child;rt!==null;)tt|=rt.lanes|rt.childLanes,st|=rt.subtreeFlags&14680064,st|=rt.flags&14680064,rt.return=et,rt=rt.sibling;else for(rt=et.child;rt!==null;)tt|=rt.lanes|rt.childLanes,st|=rt.subtreeFlags,st|=rt.flags,rt.return=et,rt=rt.sibling;return et.subtreeFlags|=st,et.childLanes=tt,_e}function Ej(et,_e,tt){var st=_e.pendingProps;switch(wg(_e),_e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(_e),null;case 1:return Zf(_e.type)&&$f(),S$1(_e),null;case 3:return st=_e.stateNode,zh(),E(Wf),E(H),Eh(),st.pendingContext&&(st.context=st.pendingContext,st.pendingContext=null),(et===null||et.child===null)&&(Gg(_e)?_e.flags|=4:et===null||et.memoizedState.isDehydrated&&!(_e.flags&256)||(_e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(et,_e),S$1(_e),null;case 5:Bh(_e);var rt=xh(wh.current);if(tt=_e.type,et!==null&&_e.stateNode!=null)Bj(et,_e,tt,st,rt),et.ref!==_e.ref&&(_e.flags|=512,_e.flags|=2097152);else{if(!st){if(_e.stateNode===null)throw Error(p$1(166));return S$1(_e),null}if(et=xh(uh.current),Gg(_e)){st=_e.stateNode,tt=_e.type;var nt=_e.memoizedProps;switch(st[Of]=_e,st[Pf]=nt,et=(_e.mode&1)!==0,tt){case"dialog":D$1("cancel",st),D$1("close",st);break;case"iframe":case"object":case"embed":D$1("load",st);break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D$1(lf[rt],st);break;case"source":D$1("error",st);break;case"img":case"image":case"link":D$1("error",st),D$1("load",st);break;case"details":D$1("toggle",st);break;case"input":Za(st,nt),D$1("invalid",st);break;case"select":st._wrapperState={wasMultiple:!!nt.multiple},D$1("invalid",st);break;case"textarea":hb(st,nt),D$1("invalid",st)}ub(tt,nt),rt=null;for(var it in nt)if(nt.hasOwnProperty(it)){var ot=nt[it];it==="children"?typeof ot=="string"?st.textContent!==ot&&(nt.suppressHydrationWarning!==!0&&Af(st.textContent,ot,et),rt=["children",ot]):typeof ot=="number"&&st.textContent!==""+ot&&(nt.suppressHydrationWarning!==!0&&Af(st.textContent,ot,et),rt=["children",""+ot]):ea.hasOwnProperty(it)&&ot!=null&&it==="onScroll"&&D$1("scroll",st)}switch(tt){case"input":Va(st),db(st,nt,!0);break;case"textarea":Va(st),jb(st);break;case"select":case"option":break;default:typeof nt.onClick=="function"&&(st.onclick=Bf)}st=rt,_e.updateQueue=st,st!==null&&(_e.flags|=4)}else{it=rt.nodeType===9?rt:rt.ownerDocument,et==="http://www.w3.org/1999/xhtml"&&(et=kb(tt)),et==="http://www.w3.org/1999/xhtml"?tt==="script"?(et=it.createElement("div"),et.innerHTML="<script><\/script>",et=et.removeChild(et.firstChild)):typeof st.is=="string"?et=it.createElement(tt,{is:st.is}):(et=it.createElement(tt),tt==="select"&&(it=et,st.multiple?it.multiple=!0:st.size&&(it.size=st.size))):et=it.createElementNS(et,tt),et[Of]=_e,et[Pf]=st,zj(et,_e,!1,!1),_e.stateNode=et;e:{switch(it=vb(tt,st),tt){case"dialog":D$1("cancel",et),D$1("close",et),rt=st;break;case"iframe":case"object":case"embed":D$1("load",et),rt=st;break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D$1(lf[rt],et);rt=st;break;case"source":D$1("error",et),rt=st;break;case"img":case"image":case"link":D$1("error",et),D$1("load",et),rt=st;break;case"details":D$1("toggle",et),rt=st;break;case"input":Za(et,st),rt=Ya(et,st),D$1("invalid",et);break;case"option":rt=st;break;case"select":et._wrapperState={wasMultiple:!!st.multiple},rt=A$1({},st,{value:void 0}),D$1("invalid",et);break;case"textarea":hb(et,st),rt=gb(et,st),D$1("invalid",et);break;default:rt=st}ub(tt,rt),ot=rt;for(nt in ot)if(ot.hasOwnProperty(nt)){var at=ot[nt];nt==="style"?sb(et,at):nt==="dangerouslySetInnerHTML"?(at=at?at.__html:void 0,at!=null&&nb(et,at)):nt==="children"?typeof at=="string"?(tt!=="textarea"||at!=="")&&ob(et,at):typeof at=="number"&&ob(et,""+at):nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&nt!=="autoFocus"&&(ea.hasOwnProperty(nt)?at!=null&&nt==="onScroll"&&D$1("scroll",et):at!=null&&ta(et,nt,at,it))}switch(tt){case"input":Va(et),db(et,st,!1);break;case"textarea":Va(et),jb(et);break;case"option":st.value!=null&&et.setAttribute("value",""+Sa(st.value));break;case"select":et.multiple=!!st.multiple,nt=st.value,nt!=null?fb(et,!!st.multiple,nt,!1):st.defaultValue!=null&&fb(et,!!st.multiple,st.defaultValue,!0);break;default:typeof rt.onClick=="function"&&(et.onclick=Bf)}switch(tt){case"button":case"input":case"select":case"textarea":st=!!st.autoFocus;break e;case"img":st=!0;break e;default:st=!1}}st&&(_e.flags|=4)}_e.ref!==null&&(_e.flags|=512,_e.flags|=2097152)}return S$1(_e),null;case 6:if(et&&_e.stateNode!=null)Cj(et,_e,et.memoizedProps,st);else{if(typeof st!="string"&&_e.stateNode===null)throw Error(p$1(166));if(tt=xh(wh.current),xh(uh.current),Gg(_e)){if(st=_e.stateNode,tt=_e.memoizedProps,st[Of]=_e,(nt=st.nodeValue!==tt)&&(et=xg,et!==null))switch(et.tag){case 3:Af(st.nodeValue,tt,(et.mode&1)!==0);break;case 5:et.memoizedProps.suppressHydrationWarning!==!0&&Af(st.nodeValue,tt,(et.mode&1)!==0)}nt&&(_e.flags|=4)}else st=(tt.nodeType===9?tt:tt.ownerDocument).createTextNode(st),st[Of]=_e,_e.stateNode=st}return S$1(_e),null;case 13:if(E(L),st=_e.memoizedState,et===null||et.memoizedState!==null&&et.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&_e.mode&1&&!(_e.flags&128))Hg(),Ig(),_e.flags|=98560,nt=!1;else if(nt=Gg(_e),st!==null&&st.dehydrated!==null){if(et===null){if(!nt)throw Error(p$1(318));if(nt=_e.memoizedState,nt=nt!==null?nt.dehydrated:null,!nt)throw Error(p$1(317));nt[Of]=_e}else Ig(),!(_e.flags&128)&&(_e.memoizedState=null),_e.flags|=4;S$1(_e),nt=!1}else zg!==null&&(Fj(zg),zg=null),nt=!0;if(!nt)return _e.flags&65536?_e:null}return _e.flags&128?(_e.lanes=tt,_e):(st=st!==null,st!==(et!==null&&et.memoizedState!==null)&&st&&(_e.child.flags|=8192,_e.mode&1&&(et===null||L.current&1?T$1===0&&(T$1=3):tj())),_e.updateQueue!==null&&(_e.flags|=4),S$1(_e),null);case 4:return zh(),Aj(et,_e),et===null&&sf(_e.stateNode.containerInfo),S$1(_e),null;case 10:return ah(_e.type._context),S$1(_e),null;case 17:return Zf(_e.type)&&$f(),S$1(_e),null;case 19:if(E(L),nt=_e.memoizedState,nt===null)return S$1(_e),null;if(st=(_e.flags&128)!==0,it=nt.rendering,it===null)if(st)Dj(nt,!1);else{if(T$1!==0||et!==null&&et.flags&128)for(et=_e.child;et!==null;){if(it=Ch(et),it!==null){for(_e.flags|=128,Dj(nt,!1),st=it.updateQueue,st!==null&&(_e.updateQueue=st,_e.flags|=4),_e.subtreeFlags=0,st=tt,tt=_e.child;tt!==null;)nt=tt,et=st,nt.flags&=14680066,it=nt.alternate,it===null?(nt.childLanes=0,nt.lanes=et,nt.child=null,nt.subtreeFlags=0,nt.memoizedProps=null,nt.memoizedState=null,nt.updateQueue=null,nt.dependencies=null,nt.stateNode=null):(nt.childLanes=it.childLanes,nt.lanes=it.lanes,nt.child=it.child,nt.subtreeFlags=0,nt.deletions=null,nt.memoizedProps=it.memoizedProps,nt.memoizedState=it.memoizedState,nt.updateQueue=it.updateQueue,nt.type=it.type,et=it.dependencies,nt.dependencies=et===null?null:{lanes:et.lanes,firstContext:et.firstContext}),tt=tt.sibling;return G$1(L,L.current&1|2),_e.child}et=et.sibling}nt.tail!==null&&B()>Gj&&(_e.flags|=128,st=!0,Dj(nt,!1),_e.lanes=4194304)}else{if(!st)if(et=Ch(it),et!==null){if(_e.flags|=128,st=!0,tt=et.updateQueue,tt!==null&&(_e.updateQueue=tt,_e.flags|=4),Dj(nt,!0),nt.tail===null&&nt.tailMode==="hidden"&&!it.alternate&&!I$1)return S$1(_e),null}else 2*B()-nt.renderingStartTime>Gj&&tt!==1073741824&&(_e.flags|=128,st=!0,Dj(nt,!1),_e.lanes=4194304);nt.isBackwards?(it.sibling=_e.child,_e.child=it):(tt=nt.last,tt!==null?tt.sibling=it:_e.child=it,nt.last=it)}return nt.tail!==null?(_e=nt.tail,nt.rendering=_e,nt.tail=_e.sibling,nt.renderingStartTime=B(),_e.sibling=null,tt=L.current,G$1(L,st?tt&1|2:tt&1),_e):(S$1(_e),null);case 22:case 23:return Hj(),st=_e.memoizedState!==null,et!==null&&et.memoizedState!==null!==st&&(_e.flags|=8192),st&&_e.mode&1?fj&1073741824&&(S$1(_e),_e.subtreeFlags&6&&(_e.flags|=8192)):S$1(_e),null;case 24:return null;case 25:return null}throw Error(p$1(156,_e.tag))}function Ij(et,_e){switch(wg(_e),_e.tag){case 1:return Zf(_e.type)&&$f(),et=_e.flags,et&65536?(_e.flags=et&-65537|128,_e):null;case 3:return zh(),E(Wf),E(H),Eh(),et=_e.flags,et&65536&&!(et&128)?(_e.flags=et&-65537|128,_e):null;case 5:return Bh(_e),null;case 13:if(E(L),et=_e.memoizedState,et!==null&&et.dehydrated!==null){if(_e.alternate===null)throw Error(p$1(340));Ig()}return et=_e.flags,et&65536?(_e.flags=et&-65537|128,_e):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(_e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(et,_e){var tt=et.ref;if(tt!==null)if(typeof tt=="function")try{tt(null)}catch(st){W$1(et,_e,st)}else tt.current=null}function Mj(et,_e,tt){try{tt()}catch(st){W$1(et,_e,st)}}var Nj=!1;function Oj(et,_e){if(Cf=dd,et=Me(),Ne(et)){if("selectionStart"in et)var tt={start:et.selectionStart,end:et.selectionEnd};else e:{tt=(tt=et.ownerDocument)&&tt.defaultView||window;var st=tt.getSelection&&tt.getSelection();if(st&&st.rangeCount!==0){tt=st.anchorNode;var rt=st.anchorOffset,nt=st.focusNode;st=st.focusOffset;try{tt.nodeType,nt.nodeType}catch{tt=null;break e}var it=0,ot=-1,at=-1,lt=0,ct=0,ut=et,dt=null;t:for(;;){for(var ht;ut!==tt||rt!==0&&ut.nodeType!==3||(ot=it+rt),ut!==nt||st!==0&&ut.nodeType!==3||(at=it+st),ut.nodeType===3&&(it+=ut.nodeValue.length),(ht=ut.firstChild)!==null;)dt=ut,ut=ht;for(;;){if(ut===et)break t;if(dt===tt&&++lt===rt&&(ot=it),dt===nt&&++ct===st&&(at=it),(ht=ut.nextSibling)!==null)break;ut=dt,dt=ut.parentNode}ut=ht}tt=ot===-1||at===-1?null:{start:ot,end:at}}else tt=null}tt=tt||{start:0,end:0}}else tt=null;for(Df={focusedElem:et,selectionRange:tt},dd=!1,V$1=_e;V$1!==null;)if(_e=V$1,et=_e.child,(_e.subtreeFlags&1028)!==0&&et!==null)et.return=_e,V$1=et;else for(;V$1!==null;){_e=V$1;try{var pt=_e.alternate;if(_e.flags&1024)switch(_e.tag){case 0:case 11:case 15:break;case 1:if(pt!==null){var mt=pt.memoizedProps,gt=pt.memoizedState,ft=_e.stateNode,xt=ft.getSnapshotBeforeUpdate(_e.elementType===_e.type?mt:Ci(_e.type,mt),gt);ft.__reactInternalSnapshotBeforeUpdate=xt}break;case 3:var yt=_e.stateNode.containerInfo;yt.nodeType===1?yt.textContent="":yt.nodeType===9&&yt.documentElement&&yt.removeChild(yt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(bt){W$1(_e,_e.return,bt)}if(et=_e.sibling,et!==null){et.return=_e.return,V$1=et;break}V$1=_e.return}return pt=Nj,Nj=!1,pt}function Pj(et,_e,tt){var st=_e.updateQueue;if(st=st!==null?st.lastEffect:null,st!==null){var rt=st=st.next;do{if((rt.tag&et)===et){var nt=rt.destroy;rt.destroy=void 0,nt!==void 0&&Mj(_e,tt,nt)}rt=rt.next}while(rt!==st)}}function Qj(et,_e){if(_e=_e.updateQueue,_e=_e!==null?_e.lastEffect:null,_e!==null){var tt=_e=_e.next;do{if((tt.tag&et)===et){var st=tt.create;tt.destroy=st()}tt=tt.next}while(tt!==_e)}}function Rj(et){var _e=et.ref;if(_e!==null){var tt=et.stateNode;switch(et.tag){case 5:et=tt;break;default:et=tt}typeof _e=="function"?_e(et):_e.current=et}}function Sj(et){var _e=et.alternate;_e!==null&&(et.alternate=null,Sj(_e)),et.child=null,et.deletions=null,et.sibling=null,et.tag===5&&(_e=et.stateNode,_e!==null&&(delete _e[Of],delete _e[Pf],delete _e[of],delete _e[Qf],delete _e[Rf])),et.stateNode=null,et.return=null,et.dependencies=null,et.memoizedProps=null,et.memoizedState=null,et.pendingProps=null,et.stateNode=null,et.updateQueue=null}function Tj(et){return et.tag===5||et.tag===3||et.tag===4}function Uj(et){e:for(;;){for(;et.sibling===null;){if(et.return===null||Tj(et.return))return null;et=et.return}for(et.sibling.return=et.return,et=et.sibling;et.tag!==5&&et.tag!==6&&et.tag!==18;){if(et.flags&2||et.child===null||et.tag===4)continue e;et.child.return=et,et=et.child}if(!(et.flags&2))return et.stateNode}}function Vj(et,_e,tt){var st=et.tag;if(st===5||st===6)et=et.stateNode,_e?tt.nodeType===8?tt.parentNode.insertBefore(et,_e):tt.insertBefore(et,_e):(tt.nodeType===8?(_e=tt.parentNode,_e.insertBefore(et,tt)):(_e=tt,_e.appendChild(et)),tt=tt._reactRootContainer,tt!=null||_e.onclick!==null||(_e.onclick=Bf));else if(st!==4&&(et=et.child,et!==null))for(Vj(et,_e,tt),et=et.sibling;et!==null;)Vj(et,_e,tt),et=et.sibling}function Wj(et,_e,tt){var st=et.tag;if(st===5||st===6)et=et.stateNode,_e?tt.insertBefore(et,_e):tt.appendChild(et);else if(st!==4&&(et=et.child,et!==null))for(Wj(et,_e,tt),et=et.sibling;et!==null;)Wj(et,_e,tt),et=et.sibling}var X$2=null,Xj=!1;function Yj(et,_e,tt){for(tt=tt.child;tt!==null;)Zj(et,_e,tt),tt=tt.sibling}function Zj(et,_e,tt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,tt)}catch{}switch(tt.tag){case 5:U$1||Lj(tt,_e);case 6:var st=X$2,rt=Xj;X$2=null,Yj(et,_e,tt),X$2=st,Xj=rt,X$2!==null&&(Xj?(et=X$2,tt=tt.stateNode,et.nodeType===8?et.parentNode.removeChild(tt):et.removeChild(tt)):X$2.removeChild(tt.stateNode));break;case 18:X$2!==null&&(Xj?(et=X$2,tt=tt.stateNode,et.nodeType===8?Kf(et.parentNode,tt):et.nodeType===1&&Kf(et,tt),bd(et)):Kf(X$2,tt.stateNode));break;case 4:st=X$2,rt=Xj,X$2=tt.stateNode.containerInfo,Xj=!0,Yj(et,_e,tt),X$2=st,Xj=rt;break;case 0:case 11:case 14:case 15:if(!U$1&&(st=tt.updateQueue,st!==null&&(st=st.lastEffect,st!==null))){rt=st=st.next;do{var nt=rt,it=nt.destroy;nt=nt.tag,it!==void 0&&(nt&2||nt&4)&&Mj(tt,_e,it),rt=rt.next}while(rt!==st)}Yj(et,_e,tt);break;case 1:if(!U$1&&(Lj(tt,_e),st=tt.stateNode,typeof st.componentWillUnmount=="function"))try{st.props=tt.memoizedProps,st.state=tt.memoizedState,st.componentWillUnmount()}catch(ot){W$1(tt,_e,ot)}Yj(et,_e,tt);break;case 21:Yj(et,_e,tt);break;case 22:tt.mode&1?(U$1=(st=U$1)||tt.memoizedState!==null,Yj(et,_e,tt),U$1=st):Yj(et,_e,tt);break;default:Yj(et,_e,tt)}}function ak(et){var _e=et.updateQueue;if(_e!==null){et.updateQueue=null;var tt=et.stateNode;tt===null&&(tt=et.stateNode=new Kj),_e.forEach(function(st){var rt=bk.bind(null,et,st);tt.has(st)||(tt.add(st),st.then(rt,rt))})}}function ck(et,_e){var tt=_e.deletions;if(tt!==null)for(var st=0;st<tt.length;st++){var rt=tt[st];try{var nt=et,it=_e,ot=it;e:for(;ot!==null;){switch(ot.tag){case 5:X$2=ot.stateNode,Xj=!1;break e;case 3:X$2=ot.stateNode.containerInfo,Xj=!0;break e;case 4:X$2=ot.stateNode.containerInfo,Xj=!0;break e}ot=ot.return}if(X$2===null)throw Error(p$1(160));Zj(nt,it,rt),X$2=null,Xj=!1;var at=rt.alternate;at!==null&&(at.return=null),rt.return=null}catch(lt){W$1(rt,_e,lt)}}if(_e.subtreeFlags&12854)for(_e=_e.child;_e!==null;)dk(_e,et),_e=_e.sibling}function dk(et,_e){var tt=et.alternate,st=et.flags;switch(et.tag){case 0:case 11:case 14:case 15:if(ck(_e,et),ek(et),st&4){try{Pj(3,et,et.return),Qj(3,et)}catch(mt){W$1(et,et.return,mt)}try{Pj(5,et,et.return)}catch(mt){W$1(et,et.return,mt)}}break;case 1:ck(_e,et),ek(et),st&512&&tt!==null&&Lj(tt,tt.return);break;case 5:if(ck(_e,et),ek(et),st&512&&tt!==null&&Lj(tt,tt.return),et.flags&32){var rt=et.stateNode;try{ob(rt,"")}catch(mt){W$1(et,et.return,mt)}}if(st&4&&(rt=et.stateNode,rt!=null)){var nt=et.memoizedProps,it=tt!==null?tt.memoizedProps:nt,ot=et.type,at=et.updateQueue;if(et.updateQueue=null,at!==null)try{ot==="input"&&nt.type==="radio"&&nt.name!=null&&ab(rt,nt),vb(ot,it);var lt=vb(ot,nt);for(it=0;it<at.length;it+=2){var ct=at[it],ut=at[it+1];ct==="style"?sb(rt,ut):ct==="dangerouslySetInnerHTML"?nb(rt,ut):ct==="children"?ob(rt,ut):ta(rt,ct,ut,lt)}switch(ot){case"input":bb(rt,nt);break;case"textarea":ib(rt,nt);break;case"select":var dt=rt._wrapperState.wasMultiple;rt._wrapperState.wasMultiple=!!nt.multiple;var ht=nt.value;ht!=null?fb(rt,!!nt.multiple,ht,!1):dt!==!!nt.multiple&&(nt.defaultValue!=null?fb(rt,!!nt.multiple,nt.defaultValue,!0):fb(rt,!!nt.multiple,nt.multiple?[]:"",!1))}rt[Pf]=nt}catch(mt){W$1(et,et.return,mt)}}break;case 6:if(ck(_e,et),ek(et),st&4){if(et.stateNode===null)throw Error(p$1(162));rt=et.stateNode,nt=et.memoizedProps;try{rt.nodeValue=nt}catch(mt){W$1(et,et.return,mt)}}break;case 3:if(ck(_e,et),ek(et),st&4&&tt!==null&&tt.memoizedState.isDehydrated)try{bd(_e.containerInfo)}catch(mt){W$1(et,et.return,mt)}break;case 4:ck(_e,et),ek(et);break;case 13:ck(_e,et),ek(et),rt=et.child,rt.flags&8192&&(nt=rt.memoizedState!==null,rt.stateNode.isHidden=nt,!nt||rt.alternate!==null&&rt.alternate.memoizedState!==null||(fk=B())),st&4&&ak(et);break;case 22:if(ct=tt!==null&&tt.memoizedState!==null,et.mode&1?(U$1=(lt=U$1)||ct,ck(_e,et),U$1=lt):ck(_e,et),ek(et),st&8192){if(lt=et.memoizedState!==null,(et.stateNode.isHidden=lt)&&!ct&&et.mode&1)for(V$1=et,ct=et.child;ct!==null;){for(ut=V$1=ct;V$1!==null;){switch(dt=V$1,ht=dt.child,dt.tag){case 0:case 11:case 14:case 15:Pj(4,dt,dt.return);break;case 1:Lj(dt,dt.return);var pt=dt.stateNode;if(typeof pt.componentWillUnmount=="function"){st=dt,tt=dt.return;try{_e=st,pt.props=_e.memoizedProps,pt.state=_e.memoizedState,pt.componentWillUnmount()}catch(mt){W$1(st,tt,mt)}}break;case 5:Lj(dt,dt.return);break;case 22:if(dt.memoizedState!==null){gk(ut);continue}}ht!==null?(ht.return=dt,V$1=ht):gk(ut)}ct=ct.sibling}e:for(ct=null,ut=et;;){if(ut.tag===5){if(ct===null){ct=ut;try{rt=ut.stateNode,lt?(nt=rt.style,typeof nt.setProperty=="function"?nt.setProperty("display","none","important"):nt.display="none"):(ot=ut.stateNode,at=ut.memoizedProps.style,it=at!=null&&at.hasOwnProperty("display")?at.display:null,ot.style.display=rb("display",it))}catch(mt){W$1(et,et.return,mt)}}}else if(ut.tag===6){if(ct===null)try{ut.stateNode.nodeValue=lt?"":ut.memoizedProps}catch(mt){W$1(et,et.return,mt)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===et)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===et)break e;for(;ut.sibling===null;){if(ut.return===null||ut.return===et)break e;ct===ut&&(ct=null),ut=ut.return}ct===ut&&(ct=null),ut.sibling.return=ut.return,ut=ut.sibling}}break;case 19:ck(_e,et),ek(et),st&4&&ak(et);break;case 21:break;default:ck(_e,et),ek(et)}}function ek(et){var _e=et.flags;if(_e&2){try{e:{for(var tt=et.return;tt!==null;){if(Tj(tt)){var st=tt;break e}tt=tt.return}throw Error(p$1(160))}switch(st.tag){case 5:var rt=st.stateNode;st.flags&32&&(ob(rt,""),st.flags&=-33);var nt=Uj(et);Wj(et,nt,rt);break;case 3:case 4:var it=st.stateNode.containerInfo,ot=Uj(et);Vj(et,ot,it);break;default:throw Error(p$1(161))}}catch(at){W$1(et,et.return,at)}et.flags&=-3}_e&4096&&(et.flags&=-4097)}function hk(et,_e,tt){V$1=et,ik(et)}function ik(et,_e,tt){for(var st=(et.mode&1)!==0;V$1!==null;){var rt=V$1,nt=rt.child;if(rt.tag===22&&st){var it=rt.memoizedState!==null||Jj;if(!it){var ot=rt.alternate,at=ot!==null&&ot.memoizedState!==null||U$1;ot=Jj;var lt=U$1;if(Jj=it,(U$1=at)&&!lt)for(V$1=rt;V$1!==null;)it=V$1,at=it.child,it.tag===22&&it.memoizedState!==null?jk(rt):at!==null?(at.return=it,V$1=at):jk(rt);for(;nt!==null;)V$1=nt,ik(nt),nt=nt.sibling;V$1=rt,Jj=ot,U$1=lt}kk(et)}else rt.subtreeFlags&8772&&nt!==null?(nt.return=rt,V$1=nt):kk(et)}}function kk(et){for(;V$1!==null;){var _e=V$1;if(_e.flags&8772){var tt=_e.alternate;try{if(_e.flags&8772)switch(_e.tag){case 0:case 11:case 15:U$1||Qj(5,_e);break;case 1:var st=_e.stateNode;if(_e.flags&4&&!U$1)if(tt===null)st.componentDidMount();else{var rt=_e.elementType===_e.type?tt.memoizedProps:Ci(_e.type,tt.memoizedProps);st.componentDidUpdate(rt,tt.memoizedState,st.__reactInternalSnapshotBeforeUpdate)}var nt=_e.updateQueue;nt!==null&&sh(_e,nt,st);break;case 3:var it=_e.updateQueue;if(it!==null){if(tt=null,_e.child!==null)switch(_e.child.tag){case 5:tt=_e.child.stateNode;break;case 1:tt=_e.child.stateNode}sh(_e,it,tt)}break;case 5:var ot=_e.stateNode;if(tt===null&&_e.flags&4){tt=ot;var at=_e.memoizedProps;switch(_e.type){case"button":case"input":case"select":case"textarea":at.autoFocus&&tt.focus();break;case"img":at.src&&(tt.src=at.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_e.memoizedState===null){var lt=_e.alternate;if(lt!==null){var ct=lt.memoizedState;if(ct!==null){var ut=ct.dehydrated;ut!==null&&bd(ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||_e.flags&512&&Rj(_e)}catch(dt){W$1(_e,_e.return,dt)}}if(_e===et){V$1=null;break}if(tt=_e.sibling,tt!==null){tt.return=_e.return,V$1=tt;break}V$1=_e.return}}function gk(et){for(;V$1!==null;){var _e=V$1;if(_e===et){V$1=null;break}var tt=_e.sibling;if(tt!==null){tt.return=_e.return,V$1=tt;break}V$1=_e.return}}function jk(et){for(;V$1!==null;){var _e=V$1;try{switch(_e.tag){case 0:case 11:case 15:var tt=_e.return;try{Qj(4,_e)}catch(at){W$1(_e,tt,at)}break;case 1:var st=_e.stateNode;if(typeof st.componentDidMount=="function"){var rt=_e.return;try{st.componentDidMount()}catch(at){W$1(_e,rt,at)}}var nt=_e.return;try{Rj(_e)}catch(at){W$1(_e,nt,at)}break;case 5:var it=_e.return;try{Rj(_e)}catch(at){W$1(_e,it,at)}}}catch(at){W$1(_e,_e.return,at)}if(_e===et){V$1=null;break}var ot=_e.sibling;if(ot!==null){ot.return=_e.return,V$1=ot;break}V$1=_e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q$1=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(et){return et.mode&1?K&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(et=C,et!==0||(et=window.event,et=et===void 0?16:jd(et.type)),et):1}function gi(et,_e,tt,st){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(et,tt,st),(!(K&2)||et!==Q$1)&&(et===Q$1&&(!(K&2)&&(qk|=tt),T$1===4&&Ck(et,Z$1)),Dk(et,st),tt===1&&K===0&&!(_e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(et,_e){var tt=et.callbackNode;wc(et,_e);var st=uc(et,et===Q$1?Z$1:0);if(st===0)tt!==null&&bc(tt),et.callbackNode=null,et.callbackPriority=0;else if(_e=st&-st,et.callbackPriority!==_e){if(tt!=null&&bc(tt),_e===1)et.tag===0?ig(Ek.bind(null,et)):hg(Ek.bind(null,et)),Jf(function(){!(K&6)&&jg()}),tt=null;else{switch(Dc(st)){case 1:tt=fc;break;case 4:tt=gc;break;case 16:tt=hc;break;case 536870912:tt=jc;break;default:tt=hc}tt=Fk(tt,Gk.bind(null,et))}et.callbackPriority=_e,et.callbackNode=tt}}function Gk(et,_e){if(Ak=-1,Bk=0,K&6)throw Error(p$1(327));var tt=et.callbackNode;if(Hk()&&et.callbackNode!==tt)return null;var st=uc(et,et===Q$1?Z$1:0);if(st===0)return null;if(st&30||st&et.expiredLanes||_e)_e=Ik(et,st);else{_e=st;var rt=K;K|=2;var nt=Jk();(Q$1!==et||Z$1!==_e)&&(uk=null,Gj=B()+500,Kk(et,_e));do try{Lk();break}catch(ot){Mk(et,ot)}while(!0);$g(),mk.current=nt,K=rt,Y$1!==null?_e=0:(Q$1=null,Z$1=0,_e=T$1)}if(_e!==0){if(_e===2&&(rt=xc(et),rt!==0&&(st=rt,_e=Nk(et,rt))),_e===1)throw tt=pk,Kk(et,0),Ck(et,st),Dk(et,B()),tt;if(_e===6)Ck(et,st);else{if(rt=et.current.alternate,!(st&30)&&!Ok(rt)&&(_e=Ik(et,st),_e===2&&(nt=xc(et),nt!==0&&(st=nt,_e=Nk(et,nt))),_e===1))throw tt=pk,Kk(et,0),Ck(et,st),Dk(et,B()),tt;switch(et.finishedWork=rt,et.finishedLanes=st,_e){case 0:case 1:throw Error(p$1(345));case 2:Pk(et,tk,uk);break;case 3:if(Ck(et,st),(st&130023424)===st&&(_e=fk+500-B(),10<_e)){if(uc(et,0)!==0)break;if(rt=et.suspendedLanes,(rt&st)!==st){R(),et.pingedLanes|=et.suspendedLanes&rt;break}et.timeoutHandle=Ff(Pk.bind(null,et,tk,uk),_e);break}Pk(et,tk,uk);break;case 4:if(Ck(et,st),(st&4194240)===st)break;for(_e=et.eventTimes,rt=-1;0<st;){var it=31-oc(st);nt=1<<it,it=_e[it],it>rt&&(rt=it),st&=~nt}if(st=rt,st=B()-st,st=(120>st?120:480>st?480:1080>st?1080:1920>st?1920:3e3>st?3e3:4320>st?4320:1960*lk(st/1960))-st,10<st){et.timeoutHandle=Ff(Pk.bind(null,et,tk,uk),st);break}Pk(et,tk,uk);break;case 5:Pk(et,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(et,B()),et.callbackNode===tt?Gk.bind(null,et):null}function Nk(et,_e){var tt=sk;return et.current.memoizedState.isDehydrated&&(Kk(et,_e).flags|=256),et=Ik(et,_e),et!==2&&(_e=tk,tk=tt,_e!==null&&Fj(_e)),et}function Fj(et){tk===null?tk=et:tk.push.apply(tk,et)}function Ok(et){for(var _e=et;;){if(_e.flags&16384){var tt=_e.updateQueue;if(tt!==null&&(tt=tt.stores,tt!==null))for(var st=0;st<tt.length;st++){var rt=tt[st],nt=rt.getSnapshot;rt=rt.value;try{if(!He(nt(),rt))return!1}catch{return!1}}}if(tt=_e.child,_e.subtreeFlags&16384&&tt!==null)tt.return=_e,_e=tt;else{if(_e===et)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===et)return!0;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}}return!0}function Ck(et,_e){for(_e&=~rk,_e&=~qk,et.suspendedLanes|=_e,et.pingedLanes&=~_e,et=et.expirationTimes;0<_e;){var tt=31-oc(_e),st=1<<tt;et[tt]=-1,_e&=~st}}function Ek(et){if(K&6)throw Error(p$1(327));Hk();var _e=uc(et,0);if(!(_e&1))return Dk(et,B()),null;var tt=Ik(et,_e);if(et.tag!==0&&tt===2){var st=xc(et);st!==0&&(_e=st,tt=Nk(et,st))}if(tt===1)throw tt=pk,Kk(et,0),Ck(et,_e),Dk(et,B()),tt;if(tt===6)throw Error(p$1(345));return et.finishedWork=et.current.alternate,et.finishedLanes=_e,Pk(et,tk,uk),Dk(et,B()),null}function Qk(et,_e){var tt=K;K|=1;try{return et(_e)}finally{K=tt,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(et){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var _e=K;K|=1;var tt=ok.transition,st=C;try{if(ok.transition=null,C=1,et)return et()}finally{C=st,ok.transition=tt,K=_e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(et,_e){et.finishedWork=null,et.finishedLanes=0;var tt=et.timeoutHandle;if(tt!==-1&&(et.timeoutHandle=-1,Gf(tt)),Y$1!==null)for(tt=Y$1.return;tt!==null;){var st=tt;switch(wg(st),st.tag){case 1:st=st.type.childContextTypes,st!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(st);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(st.type._context);break;case 22:case 23:Hj()}tt=tt.return}if(Q$1=et,Y$1=et=Pg(et.current,null),Z$1=fj=_e,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(_e=0;_e<fh.length;_e++)if(tt=fh[_e],st=tt.interleaved,st!==null){tt.interleaved=null;var rt=st.next,nt=tt.pending;if(nt!==null){var it=nt.next;nt.next=rt,st.next=it}tt.pending=st}fh=null}return et}function Mk(et,_e){do{var tt=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var st=M$1.memoizedState;st!==null;){var rt=st.queue;rt!==null&&(rt.pending=null),st=st.next}Ih=!1}if(Hh=0,O$1=N=M$1=null,Jh=!1,Kh=0,nk.current=null,tt===null||tt.return===null){T$1=1,pk=_e,Y$1=null;break}e:{var nt=et,it=tt.return,ot=tt,at=_e;if(_e=Z$1,ot.flags|=32768,at!==null&&typeof at=="object"&&typeof at.then=="function"){var lt=at,ct=ot,ut=ct.tag;if(!(ct.mode&1)&&(ut===0||ut===11||ut===15)){var dt=ct.alternate;dt?(ct.updateQueue=dt.updateQueue,ct.memoizedState=dt.memoizedState,ct.lanes=dt.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var ht=Ui(it);if(ht!==null){ht.flags&=-257,Vi(ht,it,ot,nt,_e),ht.mode&1&&Si(nt,lt,_e),_e=ht,at=lt;var pt=_e.updateQueue;if(pt===null){var mt=new Set;mt.add(at),_e.updateQueue=mt}else pt.add(at);break e}else{if(!(_e&1)){Si(nt,lt,_e),tj();break e}at=Error(p$1(426))}}else if(I$1&&ot.mode&1){var gt=Ui(it);if(gt!==null){!(gt.flags&65536)&&(gt.flags|=256),Vi(gt,it,ot,nt,_e),Jg(Ji(at,ot));break e}}nt=at=Ji(at,ot),T$1!==4&&(T$1=2),sk===null?sk=[nt]:sk.push(nt),nt=it;do{switch(nt.tag){case 3:nt.flags|=65536,_e&=-_e,nt.lanes|=_e;var ft=Ni(nt,at,_e);ph(nt,ft);break e;case 1:ot=at;var xt=nt.type,yt=nt.stateNode;if(!(nt.flags&128)&&(typeof xt.getDerivedStateFromError=="function"||yt!==null&&typeof yt.componentDidCatch=="function"&&(Ri===null||!Ri.has(yt)))){nt.flags|=65536,_e&=-_e,nt.lanes|=_e;var bt=Qi(nt,ot,_e);ph(nt,bt);break e}}nt=nt.return}while(nt!==null)}Sk(tt)}catch(jt){_e=jt,Y$1===tt&&tt!==null&&(Y$1=tt=tt.return);continue}break}while(!0)}function Jk(){var et=mk.current;return mk.current=Rh,et===null?Rh:et}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$1)}function Ik(et,_e){var tt=K;K|=2;var st=Jk();(Q$1!==et||Z$1!==_e)&&(uk=null,Kk(et,_e));do try{Tk();break}catch(rt){Mk(et,rt)}while(!0);if($g(),K=tt,mk.current=st,Y$1!==null)throw Error(p$1(261));return Q$1=null,Z$1=0,T$1}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(et){var _e=Vk(et.alternate,et,fj);et.memoizedProps=et.pendingProps,_e===null?Sk(et):Y$1=_e,nk.current=null}function Sk(et){var _e=et;do{var tt=_e.alternate;if(et=_e.return,_e.flags&32768){if(tt=Ij(tt,_e),tt!==null){tt.flags&=32767,Y$1=tt;return}if(et!==null)et.flags|=32768,et.subtreeFlags=0,et.deletions=null;else{T$1=6,Y$1=null;return}}else if(tt=Ej(tt,_e,fj),tt!==null){Y$1=tt;return}if(_e=_e.sibling,_e!==null){Y$1=_e;return}Y$1=_e=et}while(_e!==null);T$1===0&&(T$1=5)}function Pk(et,_e,tt){var st=C,rt=ok.transition;try{ok.transition=null,C=1,Wk(et,_e,tt,st)}finally{ok.transition=rt,C=st}return null}function Wk(et,_e,tt,st){do Hk();while(wk!==null);if(K&6)throw Error(p$1(327));tt=et.finishedWork;var rt=et.finishedLanes;if(tt===null)return null;if(et.finishedWork=null,et.finishedLanes=0,tt===et.current)throw Error(p$1(177));et.callbackNode=null,et.callbackPriority=0;var nt=tt.lanes|tt.childLanes;if(Bc(et,nt),et===Q$1&&(Y$1=Q$1=null,Z$1=0),!(tt.subtreeFlags&2064)&&!(tt.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),nt=(tt.flags&15990)!==0,tt.subtreeFlags&15990||nt){nt=ok.transition,ok.transition=null;var it=C;C=1;var ot=K;K|=4,nk.current=null,Oj(et,tt),dk(tt,et),Oe(Df),dd=!!Cf,Df=Cf=null,et.current=tt,hk(tt),dc(),K=ot,C=it,ok.transition=nt}else et.current=tt;if(vk&&(vk=!1,wk=et,xk=rt),nt=et.pendingLanes,nt===0&&(Ri=null),mc(tt.stateNode),Dk(et,B()),_e!==null)for(st=et.onRecoverableError,tt=0;tt<_e.length;tt++)rt=_e[tt],st(rt.value,{componentStack:rt.stack,digest:rt.digest});if(Oi)throw Oi=!1,et=Pi,Pi=null,et;return xk&1&&et.tag!==0&&Hk(),nt=et.pendingLanes,nt&1?et===zk?yk++:(yk=0,zk=et):yk=0,jg(),null}function Hk(){if(wk!==null){var et=Dc(xk),_e=ok.transition,tt=C;try{if(ok.transition=null,C=16>et?16:et,wk===null)var st=!1;else{if(et=wk,wk=null,xk=0,K&6)throw Error(p$1(331));var rt=K;for(K|=4,V$1=et.current;V$1!==null;){var nt=V$1,it=nt.child;if(V$1.flags&16){var ot=nt.deletions;if(ot!==null){for(var at=0;at<ot.length;at++){var lt=ot[at];for(V$1=lt;V$1!==null;){var ct=V$1;switch(ct.tag){case 0:case 11:case 15:Pj(8,ct,nt)}var ut=ct.child;if(ut!==null)ut.return=ct,V$1=ut;else for(;V$1!==null;){ct=V$1;var dt=ct.sibling,ht=ct.return;if(Sj(ct),ct===lt){V$1=null;break}if(dt!==null){dt.return=ht,V$1=dt;break}V$1=ht}}}var pt=nt.alternate;if(pt!==null){var mt=pt.child;if(mt!==null){pt.child=null;do{var gt=mt.sibling;mt.sibling=null,mt=gt}while(mt!==null)}}V$1=nt}}if(nt.subtreeFlags&2064&&it!==null)it.return=nt,V$1=it;else e:for(;V$1!==null;){if(nt=V$1,nt.flags&2048)switch(nt.tag){case 0:case 11:case 15:Pj(9,nt,nt.return)}var ft=nt.sibling;if(ft!==null){ft.return=nt.return,V$1=ft;break e}V$1=nt.return}}var xt=et.current;for(V$1=xt;V$1!==null;){it=V$1;var yt=it.child;if(it.subtreeFlags&2064&&yt!==null)yt.return=it,V$1=yt;else e:for(it=xt;V$1!==null;){if(ot=V$1,ot.flags&2048)try{switch(ot.tag){case 0:case 11:case 15:Qj(9,ot)}}catch(jt){W$1(ot,ot.return,jt)}if(ot===it){V$1=null;break e}var bt=ot.sibling;if(bt!==null){bt.return=ot.return,V$1=bt;break e}V$1=ot.return}}if(K=rt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,et)}catch{}st=!0}return st}finally{C=tt,ok.transition=_e}}return!1}function Xk(et,_e,tt){_e=Ji(tt,_e),_e=Ni(et,_e,1),et=nh(et,_e,1),_e=R(),et!==null&&(Ac(et,1,_e),Dk(et,_e))}function W$1(et,_e,tt){if(et.tag===3)Xk(et,et,tt);else for(;_e!==null;){if(_e.tag===3){Xk(_e,et,tt);break}else if(_e.tag===1){var st=_e.stateNode;if(typeof _e.type.getDerivedStateFromError=="function"||typeof st.componentDidCatch=="function"&&(Ri===null||!Ri.has(st))){et=Ji(tt,et),et=Qi(_e,et,1),_e=nh(_e,et,1),et=R(),_e!==null&&(Ac(_e,1,et),Dk(_e,et));break}}_e=_e.return}}function Ti(et,_e,tt){var st=et.pingCache;st!==null&&st.delete(_e),_e=R(),et.pingedLanes|=et.suspendedLanes&tt,Q$1===et&&(Z$1&tt)===tt&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B()-fk?Kk(et,0):rk|=tt),Dk(et,_e)}function Yk(et,_e){_e===0&&(et.mode&1?(_e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_e=1);var tt=R();et=ih(et,_e),et!==null&&(Ac(et,_e,tt),Dk(et,tt))}function uj(et){var _e=et.memoizedState,tt=0;_e!==null&&(tt=_e.retryLane),Yk(et,tt)}function bk(et,_e){var tt=0;switch(et.tag){case 13:var st=et.stateNode,rt=et.memoizedState;rt!==null&&(tt=rt.retryLane);break;case 19:st=et.stateNode;break;default:throw Error(p$1(314))}st!==null&&st.delete(_e),Yk(et,tt)}var Vk;Vk=function(et,_e,tt){if(et!==null)if(et.memoizedProps!==_e.pendingProps||Wf.current)dh=!0;else{if(!(et.lanes&tt)&&!(_e.flags&128))return dh=!1,yj(et,_e,tt);dh=!!(et.flags&131072)}else dh=!1,I$1&&_e.flags&1048576&&ug(_e,ng,_e.index);switch(_e.lanes=0,_e.tag){case 2:var st=_e.type;ij(et,_e),et=_e.pendingProps;var rt=Yf(_e,H.current);ch(_e,tt),rt=Nh(null,_e,st,et,rt,tt);var nt=Sh();return _e.flags|=1,typeof rt=="object"&&rt!==null&&typeof rt.render=="function"&&rt.$$typeof===void 0?(_e.tag=1,_e.memoizedState=null,_e.updateQueue=null,Zf(st)?(nt=!0,cg(_e)):nt=!1,_e.memoizedState=rt.state!==null&&rt.state!==void 0?rt.state:null,kh(_e),rt.updater=Ei,_e.stateNode=rt,rt._reactInternals=_e,Ii(_e,st,et,tt),_e=jj(null,_e,st,!0,nt,tt)):(_e.tag=0,I$1&&nt&&vg(_e),Xi(null,_e,rt,tt),_e=_e.child),_e;case 16:st=_e.elementType;e:{switch(ij(et,_e),et=_e.pendingProps,rt=st._init,st=rt(st._payload),_e.type=st,rt=_e.tag=Zk(st),et=Ci(st,et),rt){case 0:_e=cj(null,_e,st,et,tt);break e;case 1:_e=hj(null,_e,st,et,tt);break e;case 11:_e=Yi(null,_e,st,et,tt);break e;case 14:_e=$i(null,_e,st,Ci(st.type,et),tt);break e}throw Error(p$1(306,st,""))}return _e;case 0:return st=_e.type,rt=_e.pendingProps,rt=_e.elementType===st?rt:Ci(st,rt),cj(et,_e,st,rt,tt);case 1:return st=_e.type,rt=_e.pendingProps,rt=_e.elementType===st?rt:Ci(st,rt),hj(et,_e,st,rt,tt);case 3:e:{if(kj(_e),et===null)throw Error(p$1(387));st=_e.pendingProps,nt=_e.memoizedState,rt=nt.element,lh(et,_e),qh(_e,st,null,tt);var it=_e.memoizedState;if(st=it.element,nt.isDehydrated)if(nt={element:st,isDehydrated:!1,cache:it.cache,pendingSuspenseBoundaries:it.pendingSuspenseBoundaries,transitions:it.transitions},_e.updateQueue.baseState=nt,_e.memoizedState=nt,_e.flags&256){rt=Ji(Error(p$1(423)),_e),_e=lj(et,_e,st,tt,rt);break e}else if(st!==rt){rt=Ji(Error(p$1(424)),_e),_e=lj(et,_e,st,tt,rt);break e}else for(yg=Lf(_e.stateNode.containerInfo.firstChild),xg=_e,I$1=!0,zg=null,tt=Vg(_e,null,st,tt),_e.child=tt;tt;)tt.flags=tt.flags&-3|4096,tt=tt.sibling;else{if(Ig(),st===rt){_e=Zi(et,_e,tt);break e}Xi(et,_e,st,tt)}_e=_e.child}return _e;case 5:return Ah(_e),et===null&&Eg(_e),st=_e.type,rt=_e.pendingProps,nt=et!==null?et.memoizedProps:null,it=rt.children,Ef(st,rt)?it=null:nt!==null&&Ef(st,nt)&&(_e.flags|=32),gj(et,_e),Xi(et,_e,it,tt),_e.child;case 6:return et===null&&Eg(_e),null;case 13:return oj(et,_e,tt);case 4:return yh(_e,_e.stateNode.containerInfo),st=_e.pendingProps,et===null?_e.child=Ug(_e,null,st,tt):Xi(et,_e,st,tt),_e.child;case 11:return st=_e.type,rt=_e.pendingProps,rt=_e.elementType===st?rt:Ci(st,rt),Yi(et,_e,st,rt,tt);case 7:return Xi(et,_e,_e.pendingProps,tt),_e.child;case 8:return Xi(et,_e,_e.pendingProps.children,tt),_e.child;case 12:return Xi(et,_e,_e.pendingProps.children,tt),_e.child;case 10:e:{if(st=_e.type._context,rt=_e.pendingProps,nt=_e.memoizedProps,it=rt.value,G$1(Wg,st._currentValue),st._currentValue=it,nt!==null)if(He(nt.value,it)){if(nt.children===rt.children&&!Wf.current){_e=Zi(et,_e,tt);break e}}else for(nt=_e.child,nt!==null&&(nt.return=_e);nt!==null;){var ot=nt.dependencies;if(ot!==null){it=nt.child;for(var at=ot.firstContext;at!==null;){if(at.context===st){if(nt.tag===1){at=mh(-1,tt&-tt),at.tag=2;var lt=nt.updateQueue;if(lt!==null){lt=lt.shared;var ct=lt.pending;ct===null?at.next=at:(at.next=ct.next,ct.next=at),lt.pending=at}}nt.lanes|=tt,at=nt.alternate,at!==null&&(at.lanes|=tt),bh(nt.return,tt,_e),ot.lanes|=tt;break}at=at.next}}else if(nt.tag===10)it=nt.type===_e.type?null:nt.child;else if(nt.tag===18){if(it=nt.return,it===null)throw Error(p$1(341));it.lanes|=tt,ot=it.alternate,ot!==null&&(ot.lanes|=tt),bh(it,tt,_e),it=nt.sibling}else it=nt.child;if(it!==null)it.return=nt;else for(it=nt;it!==null;){if(it===_e){it=null;break}if(nt=it.sibling,nt!==null){nt.return=it.return,it=nt;break}it=it.return}nt=it}Xi(et,_e,rt.children,tt),_e=_e.child}return _e;case 9:return rt=_e.type,st=_e.pendingProps.children,ch(_e,tt),rt=eh(rt),st=st(rt),_e.flags|=1,Xi(et,_e,st,tt),_e.child;case 14:return st=_e.type,rt=Ci(st,_e.pendingProps),rt=Ci(st.type,rt),$i(et,_e,st,rt,tt);case 15:return bj(et,_e,_e.type,_e.pendingProps,tt);case 17:return st=_e.type,rt=_e.pendingProps,rt=_e.elementType===st?rt:Ci(st,rt),ij(et,_e),_e.tag=1,Zf(st)?(et=!0,cg(_e)):et=!1,ch(_e,tt),Gi(_e,st,rt),Ii(_e,st,rt,tt),jj(null,_e,st,!0,et,tt);case 19:return xj(et,_e,tt);case 22:return dj(et,_e,tt)}throw Error(p$1(156,_e.tag))};function Fk(et,_e){return ac(et,_e)}function $k(et,_e,tt,st){this.tag=et,this.key=tt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=st,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(et,_e,tt,st){return new $k(et,_e,tt,st)}function aj(et){return et=et.prototype,!(!et||!et.isReactComponent)}function Zk(et){if(typeof et=="function")return aj(et)?1:0;if(et!=null){if(et=et.$$typeof,et===Da)return 11;if(et===Ga)return 14}return 2}function Pg(et,_e){var tt=et.alternate;return tt===null?(tt=Bg(et.tag,_e,et.key,et.mode),tt.elementType=et.elementType,tt.type=et.type,tt.stateNode=et.stateNode,tt.alternate=et,et.alternate=tt):(tt.pendingProps=_e,tt.type=et.type,tt.flags=0,tt.subtreeFlags=0,tt.deletions=null),tt.flags=et.flags&14680064,tt.childLanes=et.childLanes,tt.lanes=et.lanes,tt.child=et.child,tt.memoizedProps=et.memoizedProps,tt.memoizedState=et.memoizedState,tt.updateQueue=et.updateQueue,_e=et.dependencies,tt.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext},tt.sibling=et.sibling,tt.index=et.index,tt.ref=et.ref,tt}function Rg(et,_e,tt,st,rt,nt){var it=2;if(st=et,typeof et=="function")aj(et)&&(it=1);else if(typeof et=="string")it=5;else e:switch(et){case ya:return Tg(tt.children,rt,nt,_e);case za:it=8,rt|=8;break;case Aa:return et=Bg(12,tt,_e,rt|2),et.elementType=Aa,et.lanes=nt,et;case Ea:return et=Bg(13,tt,_e,rt),et.elementType=Ea,et.lanes=nt,et;case Fa:return et=Bg(19,tt,_e,rt),et.elementType=Fa,et.lanes=nt,et;case Ia:return pj(tt,rt,nt,_e);default:if(typeof et=="object"&&et!==null)switch(et.$$typeof){case Ba:it=10;break e;case Ca:it=9;break e;case Da:it=11;break e;case Ga:it=14;break e;case Ha:it=16,st=null;break e}throw Error(p$1(130,et==null?et:typeof et,""))}return _e=Bg(it,tt,_e,rt),_e.elementType=et,_e.type=st,_e.lanes=nt,_e}function Tg(et,_e,tt,st){return et=Bg(7,et,st,_e),et.lanes=tt,et}function pj(et,_e,tt,st){return et=Bg(22,et,st,_e),et.elementType=Ia,et.lanes=tt,et.stateNode={isHidden:!1},et}function Qg(et,_e,tt){return et=Bg(6,et,null,_e),et.lanes=tt,et}function Sg(et,_e,tt){return _e=Bg(4,et.children!==null?et.children:[],et.key,_e),_e.lanes=tt,_e.stateNode={containerInfo:et.containerInfo,pendingChildren:null,implementation:et.implementation},_e}function al(et,_e,tt,st,rt){this.tag=_e,this.containerInfo=et,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=st,this.onRecoverableError=rt,this.mutableSourceEagerHydrationData=null}function bl(et,_e,tt,st,rt,nt,it,ot,at){return et=new al(et,_e,tt,ot,at),_e===1?(_e=1,nt===!0&&(_e|=8)):_e=0,nt=Bg(3,null,null,_e),et.current=nt,nt.stateNode=et,nt.memoizedState={element:st,isDehydrated:tt,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(nt),et}function cl(et,_e,tt){var st=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:st==null?null:""+st,children:et,containerInfo:_e,implementation:tt}}function dl(et){if(!et)return Vf;et=et._reactInternals;e:{if(Vb(et)!==et||et.tag!==1)throw Error(p$1(170));var _e=et;do{switch(_e.tag){case 3:_e=_e.stateNode.context;break e;case 1:if(Zf(_e.type)){_e=_e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_e=_e.return}while(_e!==null);throw Error(p$1(171))}if(et.tag===1){var tt=et.type;if(Zf(tt))return bg(et,tt,_e)}return _e}function el(et,_e,tt,st,rt,nt,it,ot,at){return et=bl(tt,st,!0,et,rt,nt,it,ot,at),et.context=dl(null),tt=et.current,st=R(),rt=yi(tt),nt=mh(st,rt),nt.callback=_e??null,nh(tt,nt,rt),et.current.lanes=rt,Ac(et,rt,st),Dk(et,st),et}function fl(et,_e,tt,st){var rt=_e.current,nt=R(),it=yi(rt);return tt=dl(tt),_e.context===null?_e.context=tt:_e.pendingContext=tt,_e=mh(nt,it),_e.payload={element:et},st=st===void 0?null:st,st!==null&&(_e.callback=st),et=nh(rt,_e,it),et!==null&&(gi(et,rt,it,nt),oh(et,rt,it)),it}function gl(et){if(et=et.current,!et.child)return null;switch(et.child.tag){case 5:return et.child.stateNode;default:return et.child.stateNode}}function hl(et,_e){if(et=et.memoizedState,et!==null&&et.dehydrated!==null){var tt=et.retryLane;et.retryLane=tt!==0&&tt<_e?tt:_e}}function il(et,_e){hl(et,_e),(et=et.alternate)&&hl(et,_e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(et){console.error(et)};function ll(et){this._internalRoot=et}ml.prototype.render=ll.prototype.render=function(et){var _e=this._internalRoot;if(_e===null)throw Error(p$1(409));fl(et,_e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var et=this._internalRoot;if(et!==null){this._internalRoot=null;var _e=et.containerInfo;Rk(function(){fl(null,et,null,null)}),_e[uf]=null}};function ml(et){this._internalRoot=et}ml.prototype.unstable_scheduleHydration=function(et){if(et){var _e=Hc();et={blockedOn:null,target:et,priority:_e};for(var tt=0;tt<Qc.length&&_e!==0&&_e<Qc[tt].priority;tt++);Qc.splice(tt,0,et),tt===0&&Vc(et)}};function nl(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11)}function ol(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11&&(et.nodeType!==8||et.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(et,_e,tt,st,rt){if(rt){if(typeof st=="function"){var nt=st;st=function(){var lt=gl(it);nt.call(lt)}}var it=el(_e,st,et,0,null,!1,!1,"",pl);return et._reactRootContainer=it,et[uf]=it.current,sf(et.nodeType===8?et.parentNode:et),Rk(),it}for(;rt=et.lastChild;)et.removeChild(rt);if(typeof st=="function"){var ot=st;st=function(){var lt=gl(at);ot.call(lt)}}var at=bl(et,0,!1,null,null,!1,!1,"",pl);return et._reactRootContainer=at,et[uf]=at.current,sf(et.nodeType===8?et.parentNode:et),Rk(function(){fl(_e,at,tt,st)}),at}function rl(et,_e,tt,st,rt){var nt=tt._reactRootContainer;if(nt){var it=nt;if(typeof rt=="function"){var ot=rt;rt=function(){var at=gl(it);ot.call(at)}}fl(_e,it,et,rt)}else it=ql(tt,_e,et,rt,st);return gl(it)}Ec=function(et){switch(et.tag){case 3:var _e=et.stateNode;if(_e.current.memoizedState.isDehydrated){var tt=tc(_e.pendingLanes);tt!==0&&(Cc(_e,tt|1),Dk(_e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var st=ih(et,1);if(st!==null){var rt=R();gi(st,et,1,rt)}}),il(et,1)}};Fc=function(et){if(et.tag===13){var _e=ih(et,134217728);if(_e!==null){var tt=R();gi(_e,et,134217728,tt)}il(et,134217728)}};Gc=function(et){if(et.tag===13){var _e=yi(et),tt=ih(et,_e);if(tt!==null){var st=R();gi(tt,et,_e,st)}il(et,_e)}};Hc=function(){return C};Ic=function(et,_e){var tt=C;try{return C=et,_e()}finally{C=tt}};yb=function(et,_e,tt){switch(_e){case"input":if(bb(et,tt),_e=tt.name,tt.type==="radio"&&_e!=null){for(tt=et;tt.parentNode;)tt=tt.parentNode;for(tt=tt.querySelectorAll("input[name="+JSON.stringify(""+_e)+'][type="radio"]'),_e=0;_e<tt.length;_e++){var st=tt[_e];if(st!==et&&st.form===et.form){var rt=Db(st);if(!rt)throw Error(p$1(90));Wa(st),bb(st,rt)}}}break;case"textarea":ib(et,tt);break;case"select":_e=tt.value,_e!=null&&fb(et,!!tt.multiple,_e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(et){return et=Zb(et),et===null?null:et.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(et,_e){var tt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(_e))throw Error(p$1(200));return cl(et,_e,null,tt)};reactDom_production_min.createRoot=function(et,_e){if(!nl(et))throw Error(p$1(299));var tt=!1,st="",rt=kl;return _e!=null&&(_e.unstable_strictMode===!0&&(tt=!0),_e.identifierPrefix!==void 0&&(st=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(rt=_e.onRecoverableError)),_e=bl(et,1,!1,null,null,tt,!1,st,rt),et[uf]=_e.current,sf(et.nodeType===8?et.parentNode:et),new ll(_e)};reactDom_production_min.findDOMNode=function(et){if(et==null)return null;if(et.nodeType===1)return et;var _e=et._reactInternals;if(_e===void 0)throw typeof et.render=="function"?Error(p$1(188)):(et=Object.keys(et).join(","),Error(p$1(268,et)));return et=Zb(_e),et=et===null?null:et.stateNode,et};reactDom_production_min.flushSync=function(et){return Rk(et)};reactDom_production_min.hydrate=function(et,_e,tt){if(!ol(_e))throw Error(p$1(200));return rl(null,et,_e,!0,tt)};reactDom_production_min.hydrateRoot=function(et,_e,tt){if(!nl(et))throw Error(p$1(405));var st=tt!=null&&tt.hydratedSources||null,rt=!1,nt="",it=kl;if(tt!=null&&(tt.unstable_strictMode===!0&&(rt=!0),tt.identifierPrefix!==void 0&&(nt=tt.identifierPrefix),tt.onRecoverableError!==void 0&&(it=tt.onRecoverableError)),_e=el(_e,null,et,1,tt??null,rt,!1,nt,it),et[uf]=_e.current,sf(et),st)for(et=0;et<st.length;et++)tt=st[et],rt=tt._getVersion,rt=rt(tt._source),_e.mutableSourceEagerHydrationData==null?_e.mutableSourceEagerHydrationData=[tt,rt]:_e.mutableSourceEagerHydrationData.push(tt,rt);return new ml(_e)};reactDom_production_min.render=function(et,_e,tt){if(!ol(_e))throw Error(p$1(200));return rl(null,et,_e,!1,tt)};reactDom_production_min.unmountComponentAtNode=function(et){if(!ol(et))throw Error(p$1(40));return et._reactRootContainer?(Rk(function(){rl(null,null,et,!1,function(){et._reactRootContainer=null,et[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(et,_e,tt,st){if(!ol(tt))throw Error(p$1(200));if(et==null||et._reactInternals===void 0)throw Error(p$1(38));return rl(et,_e,tt,!1,st)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(et){console.error(et)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m$1=reactDomExports;createRoot=m$1.createRoot,m$1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e];for(var st in tt)Object.prototype.hasOwnProperty.call(tt,st)&&(et[st]=tt[st])}return et},_extends$2.apply(this,arguments)}var Action;(function(et){et.Pop="POP",et.Push="PUSH",et.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(et){et===void 0&&(et={});function _e(st,rt){let{pathname:nt,search:it,hash:ot}=st.location;return createLocation("",{pathname:nt,search:it,hash:ot},rt.state&&rt.state.usr||null,rt.state&&rt.state.key||"default")}function tt(st,rt){return typeof rt=="string"?rt:createPath(rt)}return getUrlBasedHistory(_e,tt,null,et)}function invariant$1(et,_e){if(et===!1||et===null||typeof et>"u")throw new Error(_e)}function warning(et,_e){if(!et){typeof console<"u"&&console.warn(_e);try{throw new Error(_e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(et,_e){return{usr:et.state,key:et.key,idx:_e}}function createLocation(et,_e,tt,st){return tt===void 0&&(tt=null),_extends$2({pathname:typeof et=="string"?et:et.pathname,search:"",hash:""},typeof _e=="string"?parsePath(_e):_e,{state:tt,key:_e&&_e.key||st||createKey()})}function createPath(et){let{pathname:_e="/",search:tt="",hash:st=""}=et;return tt&&tt!=="?"&&(_e+=tt.charAt(0)==="?"?tt:"?"+tt),st&&st!=="#"&&(_e+=st.charAt(0)==="#"?st:"#"+st),_e}function parsePath(et){let _e={};if(et){let tt=et.indexOf("#");tt>=0&&(_e.hash=et.substr(tt),et=et.substr(0,tt));let st=et.indexOf("?");st>=0&&(_e.search=et.substr(st),et=et.substr(0,st)),et&&(_e.pathname=et)}return _e}function getUrlBasedHistory(et,_e,tt,st){st===void 0&&(st={});let{window:rt=document.defaultView,v5Compat:nt=!1}=st,it=rt.history,ot=Action.Pop,at=null,lt=ct();lt==null&&(lt=0,it.replaceState(_extends$2({},it.state,{idx:lt}),""));function ct(){return(it.state||{idx:null}).idx}function ut(){ot=Action.Pop;let gt=ct(),ft=gt==null?null:gt-lt;lt=gt,at&&at({action:ot,location:mt.location,delta:ft})}function dt(gt,ft){ot=Action.Push;let xt=createLocation(mt.location,gt,ft);lt=ct()+1;let yt=getHistoryState(xt,lt),bt=mt.createHref(xt);try{it.pushState(yt,"",bt)}catch(jt){if(jt instanceof DOMException&&jt.name==="DataCloneError")throw jt;rt.location.assign(bt)}nt&&at&&at({action:ot,location:mt.location,delta:1})}function ht(gt,ft){ot=Action.Replace;let xt=createLocation(mt.location,gt,ft);lt=ct();let yt=getHistoryState(xt,lt),bt=mt.createHref(xt);it.replaceState(yt,"",bt),nt&&at&&at({action:ot,location:mt.location,delta:0})}function pt(gt){let ft=rt.location.origin!=="null"?rt.location.origin:rt.location.href,xt=typeof gt=="string"?gt:createPath(gt);return xt=xt.replace(/ $/,"%20"),invariant$1(ft,"No window.location.(origin|href) available to create URL for href: "+xt),new URL(xt,ft)}let mt={get action(){return ot},get location(){return et(rt,it)},listen(gt){if(at)throw new Error("A history only accepts one active listener");return rt.addEventListener(PopStateEventType,ut),at=gt,()=>{rt.removeEventListener(PopStateEventType,ut),at=null}},createHref(gt){return _e(rt,gt)},createURL:pt,encodeLocation(gt){let ft=pt(gt);return{pathname:ft.pathname,search:ft.search,hash:ft.hash}},push:dt,replace:ht,go(gt){return it.go(gt)}};return mt}var ResultType;(function(et){et.data="data",et.deferred="deferred",et.redirect="redirect",et.error="error"})(ResultType||(ResultType={}));function matchRoutes(et,_e,tt){return tt===void 0&&(tt="/"),matchRoutesImpl(et,_e,tt,!1)}function matchRoutesImpl(et,_e,tt,st){let rt=typeof _e=="string"?parsePath(_e):_e,nt=stripBasename(rt.pathname||"/",tt);if(nt==null)return null;let it=flattenRoutes(et);rankRouteBranches(it);let ot=null;for(let at=0;ot==null&&at<it.length;++at){let lt=decodePath(nt);ot=matchRouteBranch(it[at],lt,st)}return ot}function flattenRoutes(et,_e,tt,st){_e===void 0&&(_e=[]),tt===void 0&&(tt=[]),st===void 0&&(st="");let rt=(nt,it,ot)=>{let at={relativePath:ot===void 0?nt.path||"":ot,caseSensitive:nt.caseSensitive===!0,childrenIndex:it,route:nt};at.relativePath.startsWith("/")&&(invariant$1(at.relativePath.startsWith(st),'Absolute route path "'+at.relativePath+'" nested under path '+('"'+st+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),at.relativePath=at.relativePath.slice(st.length));let lt=joinPaths([st,at.relativePath]),ct=tt.concat(at);nt.children&&nt.children.length>0&&(invariant$1(nt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+lt+'".')),flattenRoutes(nt.children,_e,ct,lt)),!(nt.path==null&&!nt.index)&&_e.push({path:lt,score:computeScore(lt,nt.index),routesMeta:ct})};return et.forEach((nt,it)=>{var ot;if(nt.path===""||!((ot=nt.path)!=null&&ot.includes("?")))rt(nt,it);else for(let at of explodeOptionalSegments(nt.path))rt(nt,it,at)}),_e}function explodeOptionalSegments(et){let _e=et.split("/");if(_e.length===0)return[];let[tt,...st]=_e,rt=tt.endsWith("?"),nt=tt.replace(/\?$/,"");if(st.length===0)return rt?[nt,""]:[nt];let it=explodeOptionalSegments(st.join("/")),ot=[];return ot.push(...it.map(at=>at===""?nt:[nt,at].join("/"))),rt&&ot.push(...it),ot.map(at=>et.startsWith("/")&&at===""?"/":at)}function rankRouteBranches(et){et.sort((_e,tt)=>_e.score!==tt.score?tt.score-_e.score:compareIndexes(_e.routesMeta.map(st=>st.childrenIndex),tt.routesMeta.map(st=>st.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=et=>et==="*";function computeScore(et,_e){let tt=et.split("/"),st=tt.length;return tt.some(isSplat)&&(st+=splatPenalty),_e&&(st+=indexRouteValue),tt.filter(rt=>!isSplat(rt)).reduce((rt,nt)=>rt+(paramRe.test(nt)?dynamicSegmentValue:nt===""?emptySegmentValue:staticSegmentValue),st)}function compareIndexes(et,_e){return et.length===_e.length&&et.slice(0,-1).every((st,rt)=>st===_e[rt])?et[et.length-1]-_e[_e.length-1]:0}function matchRouteBranch(et,_e,tt){let{routesMeta:st}=et,rt={},nt="/",it=[];for(let ot=0;ot<st.length;++ot){let at=st[ot],lt=ot===st.length-1,ct=nt==="/"?_e:_e.slice(nt.length)||"/",ut=matchPath({path:at.relativePath,caseSensitive:at.caseSensitive,end:lt},ct),dt=at.route;if(!ut&&lt&&tt&&!st[st.length-1].route.index&&(ut=matchPath({path:at.relativePath,caseSensitive:at.caseSensitive,end:!1},ct)),!ut)return null;Object.assign(rt,ut.params),it.push({params:rt,pathname:joinPaths([nt,ut.pathname]),pathnameBase:normalizePathname(joinPaths([nt,ut.pathnameBase])),route:dt}),ut.pathnameBase!=="/"&&(nt=joinPaths([nt,ut.pathnameBase]))}return it}function matchPath(et,_e){typeof et=="string"&&(et={path:et,caseSensitive:!1,end:!0});let[tt,st]=compilePath(et.path,et.caseSensitive,et.end),rt=_e.match(tt);if(!rt)return null;let nt=rt[0],it=nt.replace(/(.)\/+$/,"$1"),ot=rt.slice(1);return{params:st.reduce((lt,ct,ut)=>{let{paramName:dt,isOptional:ht}=ct;if(dt==="*"){let mt=ot[ut]||"";it=nt.slice(0,nt.length-mt.length).replace(/(.)\/+$/,"$1")}const pt=ot[ut];return ht&&!pt?lt[dt]=void 0:lt[dt]=(pt||"").replace(/%2F/g,"/"),lt},{}),pathname:nt,pathnameBase:it,pattern:et}}function compilePath(et,_e,tt){_e===void 0&&(_e=!1),tt===void 0&&(tt=!0),warning(et==="*"||!et.endsWith("*")||et.endsWith("/*"),'Route path "'+et+'" will be treated as if it were '+('"'+et.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+et.replace(/\*$/,"/*")+'".'));let st=[],rt="^"+et.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(it,ot,at)=>(st.push({paramName:ot,isOptional:at!=null}),at?"/?([^\\/]+)?":"/([^\\/]+)"));return et.endsWith("*")?(st.push({paramName:"*"}),rt+=et==="*"||et==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):tt?rt+="\\/*$":et!==""&&et!=="/"&&(rt+="(?:(?=\\/|$))"),[new RegExp(rt,_e?void 0:"i"),st]}function decodePath(et){try{return et.split("/").map(_e=>decodeURIComponent(_e).replace(/\//g,"%2F")).join("/")}catch(_e){return warning(!1,'The URL path "'+et+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+_e+").")),et}}function stripBasename(et,_e){if(_e==="/")return et;if(!et.toLowerCase().startsWith(_e.toLowerCase()))return null;let tt=_e.endsWith("/")?_e.length-1:_e.length,st=et.charAt(tt);return st&&st!=="/"?null:et.slice(tt)||"/"}function resolvePath(et,_e){_e===void 0&&(_e="/");let{pathname:tt,search:st="",hash:rt=""}=typeof et=="string"?parsePath(et):et;return{pathname:tt?tt.startsWith("/")?tt:resolvePathname(tt,_e):_e,search:normalizeSearch(st),hash:normalizeHash(rt)}}function resolvePathname(et,_e){let tt=_e.replace(/\/+$/,"").split("/");return et.split("/").forEach(rt=>{rt===".."?tt.length>1&&tt.pop():rt!=="."&&tt.push(rt)}),tt.length>1?tt.join("/"):"/"}function getInvalidPathError(et,_e,tt,st){return"Cannot include a '"+et+"' character in a manually specified "+("`to."+_e+"` field ["+JSON.stringify(st)+"].  Please separate it out to the ")+("`to."+tt+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(et){return et.filter((_e,tt)=>tt===0||_e.route.path&&_e.route.path.length>0)}function getResolveToMatches(et,_e){let tt=getPathContributingMatches(et);return _e?tt.map((st,rt)=>rt===tt.length-1?st.pathname:st.pathnameBase):tt.map(st=>st.pathnameBase)}function resolveTo(et,_e,tt,st){st===void 0&&(st=!1);let rt;typeof et=="string"?rt=parsePath(et):(rt=_extends$2({},et),invariant$1(!rt.pathname||!rt.pathname.includes("?"),getInvalidPathError("?","pathname","search",rt)),invariant$1(!rt.pathname||!rt.pathname.includes("#"),getInvalidPathError("#","pathname","hash",rt)),invariant$1(!rt.search||!rt.search.includes("#"),getInvalidPathError("#","search","hash",rt)));let nt=et===""||rt.pathname==="",it=nt?"/":rt.pathname,ot;if(it==null)ot=tt;else{let ut=_e.length-1;if(!st&&it.startsWith("..")){let dt=it.split("/");for(;dt[0]==="..";)dt.shift(),ut-=1;rt.pathname=dt.join("/")}ot=ut>=0?_e[ut]:"/"}let at=resolvePath(rt,ot),lt=it&&it!=="/"&&it.endsWith("/"),ct=(nt||it===".")&&tt.endsWith("/");return!at.pathname.endsWith("/")&&(lt||ct)&&(at.pathname+="/"),at}const joinPaths=et=>et.join("/").replace(/\/\/+/g,"/"),normalizePathname=et=>et.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=et=>!et||et==="?"?"":et.startsWith("?")?et:"?"+et,normalizeHash=et=>!et||et==="#"?"":et.startsWith("#")?et:"#"+et;function isRouteErrorResponse(et){return et!=null&&typeof et.status=="number"&&typeof et.statusText=="string"&&typeof et.internal=="boolean"&&"data"in et}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e];for(var st in tt)Object.prototype.hasOwnProperty.call(tt,st)&&(et[st]=tt[st])}return et},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(et,_e){let{relative:tt}=_e===void 0?{}:_e;useInRouterContext()||invariant$1(!1);let{basename:st,navigator:rt}=reactExports.useContext(NavigationContext),{hash:nt,pathname:it,search:ot}=useResolvedPath(et,{relative:tt}),at=it;return st!=="/"&&(at=it==="/"?st:joinPaths([st,it])),rt.createHref({pathname:at,search:ot,hash:nt})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$1(et){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(et)}function useNavigate(){let{isDataRoute:et}=reactExports.useContext(RouteContext);return et?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let et=reactExports.useContext(DataRouterContext),{basename:_e,future:tt,navigator:st}=reactExports.useContext(NavigationContext),{matches:rt}=reactExports.useContext(RouteContext),{pathname:nt}=useLocation(),it=JSON.stringify(getResolveToMatches(rt,tt.v7_relativeSplatPath)),ot=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{ot.current=!0}),reactExports.useCallback(function(lt,ct){if(ct===void 0&&(ct={}),!ot.current)return;if(typeof lt=="number"){st.go(lt);return}let ut=resolveTo(lt,JSON.parse(it),nt,ct.relative==="path");et==null&&_e!=="/"&&(ut.pathname=ut.pathname==="/"?_e:joinPaths([_e,ut.pathname])),(ct.replace?st.replace:st.push)(ut,ct.state,ct)},[_e,st,it,nt,et])}function useParams(){let{matches:et}=reactExports.useContext(RouteContext),_e=et[et.length-1];return _e?_e.params:{}}function useResolvedPath(et,_e){let{relative:tt}=_e===void 0?{}:_e,{future:st}=reactExports.useContext(NavigationContext),{matches:rt}=reactExports.useContext(RouteContext),{pathname:nt}=useLocation(),it=JSON.stringify(getResolveToMatches(rt,st.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(et,JSON.parse(it),nt,tt==="path"),[et,it,nt,tt])}function useRoutes(et,_e){return useRoutesImpl(et,_e)}function useRoutesImpl(et,_e,tt,st){useInRouterContext()||invariant$1(!1);let{navigator:rt,static:nt}=reactExports.useContext(NavigationContext),{matches:it}=reactExports.useContext(RouteContext),ot=it[it.length-1],at=ot?ot.params:{};ot&&ot.pathname;let lt=ot?ot.pathnameBase:"/";ot&&ot.route;let ct=useLocation(),ut;if(_e){var dt;let ft=typeof _e=="string"?parsePath(_e):_e;lt==="/"||(dt=ft.pathname)!=null&&dt.startsWith(lt)||invariant$1(!1),ut=ft}else ut=ct;let ht=ut.pathname||"/",pt=ht;if(lt!=="/"){let ft=lt.replace(/^\//,"").split("/");pt="/"+ht.replace(/^\//,"").split("/").slice(ft.length).join("/")}let mt=!nt&&tt&&tt.matches&&tt.matches.length>0?tt.matches:matchRoutes(et,{pathname:pt}),gt=_renderMatches(mt&&mt.map(ft=>Object.assign({},ft,{params:Object.assign({},at,ft.params),pathname:joinPaths([lt,rt.encodeLocation?rt.encodeLocation(ft.pathname).pathname:ft.pathname]),pathnameBase:ft.pathnameBase==="/"?lt:joinPaths([lt,rt.encodeLocation?rt.encodeLocation(ft.pathnameBase).pathname:ft.pathnameBase])})),it,tt,st);return _e&&gt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},ut),navigationType:Action.Pop}},gt):gt}function DefaultErrorComponent(){let et=useRouteError(),_e=isRouteErrorResponse(et)?et.status+" "+et.statusText:et instanceof Error?et.message:JSON.stringify(et),tt=et instanceof Error?et.stack:null,rt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},_e),tt?reactExports.createElement("pre",{style:rt},tt):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(_e){super(_e),this.state={location:_e.location,revalidation:_e.revalidation,error:_e.error}}static getDerivedStateFromError(_e){return{error:_e}}static getDerivedStateFromProps(_e,tt){return tt.location!==_e.location||tt.revalidation!=="idle"&&_e.revalidation==="idle"?{error:_e.error,location:_e.location,revalidation:_e.revalidation}:{error:_e.error!==void 0?_e.error:tt.error,location:tt.location,revalidation:_e.revalidation||tt.revalidation}}componentDidCatch(_e,tt){console.error("React Router caught the following error during render",_e,tt)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(et){let{routeContext:_e,match:tt,children:st}=et,rt=reactExports.useContext(DataRouterContext);return rt&&rt.static&&rt.staticContext&&(tt.route.errorElement||tt.route.ErrorBoundary)&&(rt.staticContext._deepestRenderedBoundaryId=tt.route.id),reactExports.createElement(RouteContext.Provider,{value:_e},st)}function _renderMatches(et,_e,tt,st){var rt;if(_e===void 0&&(_e=[]),tt===void 0&&(tt=null),st===void 0&&(st=null),et==null){var nt;if(!tt)return null;if(tt.errors)et=tt.matches;else if((nt=st)!=null&&nt.v7_partialHydration&&_e.length===0&&!tt.initialized&&tt.matches.length>0)et=tt.matches;else return null}let it=et,ot=(rt=tt)==null?void 0:rt.errors;if(ot!=null){let ct=it.findIndex(ut=>ut.route.id&&(ot==null?void 0:ot[ut.route.id])!==void 0);ct>=0||invariant$1(!1),it=it.slice(0,Math.min(it.length,ct+1))}let at=!1,lt=-1;if(tt&&st&&st.v7_partialHydration)for(let ct=0;ct<it.length;ct++){let ut=it[ct];if((ut.route.HydrateFallback||ut.route.hydrateFallbackElement)&&(lt=ct),ut.route.id){let{loaderData:dt,errors:ht}=tt,pt=ut.route.loader&&dt[ut.route.id]===void 0&&(!ht||ht[ut.route.id]===void 0);if(ut.route.lazy||pt){at=!0,lt>=0?it=it.slice(0,lt+1):it=[it[0]];break}}}return it.reduceRight((ct,ut,dt)=>{let ht,pt=!1,mt=null,gt=null;tt&&(ht=ot&&ut.route.id?ot[ut.route.id]:void 0,mt=ut.route.errorElement||defaultErrorElement,at&&(lt<0&&dt===0?(pt=!0,gt=null):lt===dt&&(pt=!0,gt=ut.route.hydrateFallbackElement||null)));let ft=_e.concat(it.slice(0,dt+1)),xt=()=>{let yt;return ht?yt=mt:pt?yt=gt:ut.route.Component?yt=reactExports.createElement(ut.route.Component,null):ut.route.element?yt=ut.route.element:yt=ct,reactExports.createElement(RenderedRoute,{match:ut,routeContext:{outlet:ct,matches:ft,isDataRoute:tt!=null},children:yt})};return tt&&(ut.route.ErrorBoundary||ut.route.errorElement||dt===0)?reactExports.createElement(RenderErrorBoundary,{location:tt.location,revalidation:tt.revalidation,component:mt,error:ht,children:xt(),routeContext:{outlet:null,matches:ft,isDataRoute:!0}}):xt()},null)}var DataRouterHook$1=function(et){return et.UseBlocker="useBlocker",et.UseRevalidator="useRevalidator",et.UseNavigateStable="useNavigate",et}(DataRouterHook$1||{}),DataRouterStateHook$1=function(et){return et.UseBlocker="useBlocker",et.UseLoaderData="useLoaderData",et.UseActionData="useActionData",et.UseRouteError="useRouteError",et.UseNavigation="useNavigation",et.UseRouteLoaderData="useRouteLoaderData",et.UseMatches="useMatches",et.UseRevalidator="useRevalidator",et.UseNavigateStable="useNavigate",et.UseRouteId="useRouteId",et}(DataRouterStateHook$1||{});function useDataRouterContext(et){let _e=reactExports.useContext(DataRouterContext);return _e||invariant$1(!1),_e}function useDataRouterState(et){let _e=reactExports.useContext(DataRouterStateContext);return _e||invariant$1(!1),_e}function useRouteContext(et){let _e=reactExports.useContext(RouteContext);return _e||invariant$1(!1),_e}function useCurrentRouteId(et){let _e=useRouteContext(),tt=_e.matches[_e.matches.length-1];return tt.route.id||invariant$1(!1),tt.route.id}function useRouteError(){var et;let _e=reactExports.useContext(RouteErrorContext),tt=useDataRouterState(DataRouterStateHook$1.UseRouteError),st=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return _e!==void 0?_e:(et=tt.errors)==null?void 0:et[st]}function useNavigateStable(){let{router:et}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),_e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),tt=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{tt.current=!0}),reactExports.useCallback(function(rt,nt){nt===void 0&&(nt={}),tt.current&&(typeof rt=="number"?et.navigate(rt):et.navigate(rt,_extends$1({fromRouteId:_e},nt)))},[et,_e])}function logV6DeprecationWarnings(et,_e){et==null||et.v7_startTransition,et==null||et.v7_relativeSplatPath}function Route(et){invariant$1(!1)}function Router(et){let{basename:_e="/",children:tt=null,location:st,navigationType:rt=Action.Pop,navigator:nt,static:it=!1,future:ot}=et;useInRouterContext()&&invariant$1(!1);let at=_e.replace(/^\/*/,"/"),lt=reactExports.useMemo(()=>({basename:at,navigator:nt,static:it,future:_extends$1({v7_relativeSplatPath:!1},ot)}),[at,ot,nt,it]);typeof st=="string"&&(st=parsePath(st));let{pathname:ct="/",search:ut="",hash:dt="",state:ht=null,key:pt="default"}=st,mt=reactExports.useMemo(()=>{let gt=stripBasename(ct,at);return gt==null?null:{location:{pathname:gt,search:ut,hash:dt,state:ht,key:pt},navigationType:rt}},[at,ct,ut,dt,ht,pt,rt]);return mt==null?null:reactExports.createElement(NavigationContext.Provider,{value:lt},reactExports.createElement(LocationContext.Provider,{children:tt,value:mt}))}function Routes(et){let{children:_e,location:tt}=et;return useRoutes(createRoutesFromChildren(_e),tt)}new Promise(()=>{});function createRoutesFromChildren(et,_e){_e===void 0&&(_e=[]);let tt=[];return reactExports.Children.forEach(et,(st,rt)=>{if(!reactExports.isValidElement(st))return;let nt=[..._e,rt];if(st.type===reactExports.Fragment){tt.push.apply(tt,createRoutesFromChildren(st.props.children,nt));return}st.type!==Route&&invariant$1(!1),!st.props.index||!st.props.children||invariant$1(!1);let it={id:st.props.id||nt.join("-"),caseSensitive:st.props.caseSensitive,element:st.props.element,Component:st.props.Component,index:st.props.index,path:st.props.path,loader:st.props.loader,action:st.props.action,errorElement:st.props.errorElement,ErrorBoundary:st.props.ErrorBoundary,hasErrorBoundary:st.props.ErrorBoundary!=null||st.props.errorElement!=null,shouldRevalidate:st.props.shouldRevalidate,handle:st.props.handle,lazy:st.props.lazy};st.props.children&&(it.children=createRoutesFromChildren(st.props.children,nt)),tt.push(it)}),tt}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e];for(var st in tt)Object.prototype.hasOwnProperty.call(tt,st)&&(et[st]=tt[st])}return et},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(et,_e){if(et==null)return{};var tt={},st=Object.keys(et),rt,nt;for(nt=0;nt<st.length;nt++)rt=st[nt],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}function isModifiedEvent(et){return!!(et.metaKey||et.altKey||et.ctrlKey||et.shiftKey)}function shouldProcessLinkClick(et,_e){return et.button===0&&(!_e||_e==="_self")&&!isModifiedEvent(et)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(et){let{basename:_e,children:tt,future:st,window:rt}=et,nt=reactExports.useRef();nt.current==null&&(nt.current=createBrowserHistory({window:rt,v5Compat:!0}));let it=nt.current,[ot,at]=reactExports.useState({action:it.action,location:it.location}),{v7_startTransition:lt}=st||{},ct=reactExports.useCallback(ut=>{lt&&startTransitionImpl?startTransitionImpl(()=>at(ut)):at(ut)},[at,lt]);return reactExports.useLayoutEffect(()=>it.listen(ct),[it,ct]),reactExports.useEffect(()=>logV6DeprecationWarnings(st),[st]),reactExports.createElement(Router,{basename:_e,children:tt,location:ot.location,navigationType:ot.action,navigator:it,future:st})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function(_e,tt){let{onClick:st,relative:rt,reloadDocument:nt,replace:it,state:ot,target:at,to:lt,preventScrollReset:ct,viewTransition:ut}=_e,dt=_objectWithoutPropertiesLoose$1(_e,_excluded),{basename:ht}=reactExports.useContext(NavigationContext),pt,mt=!1;if(typeof lt=="string"&&ABSOLUTE_URL_REGEX.test(lt)&&(pt=lt,isBrowser$1))try{let yt=new URL(window.location.href),bt=lt.startsWith("//")?new URL(yt.protocol+lt):new URL(lt),jt=stripBasename(bt.pathname,ht);bt.origin===yt.origin&&jt!=null?lt=jt+bt.search+bt.hash:mt=!0}catch{}let gt=useHref(lt,{relative:rt}),ft=useLinkClickHandler(lt,{replace:it,state:ot,target:at,preventScrollReset:ct,relative:rt,viewTransition:ut});function xt(yt){st&&st(yt),yt.defaultPrevented||ft(yt)}return reactExports.createElement("a",_extends({},dt,{href:pt||gt,onClick:mt||nt?st:xt,ref:tt,target:at}))});var DataRouterHook;(function(et){et.UseScrollRestoration="useScrollRestoration",et.UseSubmit="useSubmit",et.UseSubmitFetcher="useSubmitFetcher",et.UseFetcher="useFetcher",et.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(et){et.UseFetcher="useFetcher",et.UseFetchers="useFetchers",et.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(et,_e){let{target:tt,replace:st,state:rt,preventScrollReset:nt,relative:it,viewTransition:ot}=_e===void 0?{}:_e,at=useNavigate(),lt=useLocation(),ct=useResolvedPath(et,{relative:it});return reactExports.useCallback(ut=>{if(shouldProcessLinkClick(ut,tt)){ut.preventDefault();let dt=st!==void 0?st:createPath(lt)===createPath(ct);at(et,{replace:dt,state:rt,preventScrollReset:nt,relative:it,viewTransition:ot})}},[lt,at,ct,st,rt,tt,et,nt,it,ot])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=et=>et.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(et,_e)=>{const tt=reactExports.forwardRef(({color:st="currentColor",size:rt=24,strokeWidth:nt=2,absoluteStrokeWidth:it,className:ot="",children:at,...lt},ct)=>reactExports.createElement("svg",{ref:ct,...defaultAttributes,width:rt,height:rt,stroke:st,strokeWidth:it?Number(nt)*24/Number(rt):nt,className:["lucide",`lucide-${toKebabCase(et)}`,ot].join(" "),...lt},[..._e.map(([ut,dt])=>reactExports.createElement(ut,dt)),...Array.isArray(at)?at:[at]]));return tt.displayName=`${et}`,tt};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AlertCircle=createLucideIcon("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AlertTriangle=createLucideIcon("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowDownAZ=createLucideIcon("ArrowDownAZ",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowDownUp=createLucideIcon("ArrowDownUp",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowLeft=createLucideIcon("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowRight=createLucideIcon("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BarChart3=createLucideIcon("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BarChart=createLucideIcon("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Briefcase=createLucideIcon("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Calculator=createLucideIcon("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CheckCircle=createLucideIcon("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Clock=createLucideIcon("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Database=createLucideIcon("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DollarSign=createLucideIcon("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Download=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ExternalLink=createLucideIcon("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eye=createLucideIcon("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileDown=createLucideIcon("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Filter=createLucideIcon("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HelpCircle=createLucideIcon("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Info=createLucideIcon("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LayoutDashboard=createLucideIcon("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Link=createLucideIcon("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loader2=createLucideIcon("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MoveVertical=createLucideIcon("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Package=createLucideIcon("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pen=createLucideIcon("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Percent=createLucideIcon("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PlusCircle=createLucideIcon("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Plus=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RefreshCcw=createLucideIcon("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Save=createLucideIcon("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings$1=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ShoppingCart=createLucideIcon("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SquarePen=createLucideIcon("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tag=createLucideIcon("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tags=createLucideIcon("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TrendingUp=createLucideIcon("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Truck=createLucideIcon("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UploadCloud=createLucideIcon("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$1=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Sidebar=()=>{const et=useLocation(),_e=tt=>et.pathname===tt?"bg-blue-800 text-white":"text-white hover:text-blue-200";return jsxRuntimeExports.jsx("div",{className:"sidebar fixed left-0 top-0 w-64 h-full bg-blue-900 z-10",children:jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-8 text-white",children:"Amazon Product & Supplier Analysis"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{className:"mb-4",children:jsxRuntimeExports.jsxs(Link$1,{to:"/",className:`flex items-center ${_e("/")} p-2 rounded-md transition-colors`,children:[jsxRuntimeExports.jsx(LayoutDashboard,{className:"w-5 h-5 mr-3"}),"Dashboard"]})}),jsxRuntimeExports.jsx("li",{className:"mb-4",children:jsxRuntimeExports.jsxs(Link$1,{to:"/import-data",className:`flex items-center ${_e("/import-data")} p-2 rounded-md transition-colors`,children:[jsxRuntimeExports.jsx(Upload,{className:"w-5 h-5 mr-3"}),"Import Data"]})}),jsxRuntimeExports.jsx("li",{className:"mb-4",children:jsxRuntimeExports.jsxs(Link$1,{to:"/products",className:`flex items-center ${_e("/products")} p-2 rounded-md transition-colors`,children:[jsxRuntimeExports.jsx(Package,{className:"w-5 h-5 mr-3"}),"Products"]})}),jsxRuntimeExports.jsx("li",{className:"mb-4",children:jsxRuntimeExports.jsxs(Link$1,{to:"/suppliers",className:`flex items-center ${_e("/suppliers")} p-2 rounded-md transition-colors`,children:[jsxRuntimeExports.jsx(Truck,{className:"w-5 h-5 mr-3"}),"Suppliers"]})}),jsxRuntimeExports.jsx("li",{className:"mb-4",children:jsxRuntimeExports.jsxs(Link$1,{to:"/attributes",className:`flex items-center ${_e("/attributes")} p-2 rounded-md transition-colors`,children:[jsxRuntimeExports.jsx(Tags,{className:"w-5 h-5 mr-3"}),"Custom Attributes"]})}),jsxRuntimeExports.jsx("li",{className:"mb-4",children:jsxRuntimeExports.jsxs(Link$1,{to:"/profit-analysis",className:`flex items-center ${_e("/profit-analysis")} p-2 rounded-md transition-colors`,children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-5 h-5 mr-3"}),"Profit Analysis"]})}),jsxRuntimeExports.jsx("li",{className:"mb-4",children:jsxRuntimeExports.jsxs(Link$1,{to:"/settings",className:`flex items-center ${_e("/settings")} p-2 rounded-md transition-colors`,children:[jsxRuntimeExports.jsx(Settings$1,{className:"w-5 h-5 mr-3"}),"Settings"]})})]})]})})},Layout=({children:et})=>jsxRuntimeExports.jsxs("div",{className:"app-container bg-gray-100 min-h-screen",children:[jsxRuntimeExports.jsx(Sidebar,{}),jsxRuntimeExports.jsx("main",{className:"main-content ml-64 p-6",children:et})]}),scriptRel="modulepreload",assetsURL=function(et){return"/"+et},seen={},__vitePreload=function(_e,tt,st){let rt=Promise.resolve();if(tt&&tt.length>0){document.getElementsByTagName("link");const it=document.querySelector("meta[property=csp-nonce]"),ot=(it==null?void 0:it.nonce)||(it==null?void 0:it.getAttribute("nonce"));rt=Promise.allSettled(tt.map(at=>{if(at=assetsURL(at),at in seen)return;seen[at]=!0;const lt=at.endsWith(".css"),ct=lt?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${at}"]${ct}`))return;const ut=document.createElement("link");if(ut.rel=lt?"stylesheet":scriptRel,lt||(ut.as="script"),ut.crossOrigin="",ut.href=at,ot&&ut.setAttribute("nonce",ot),document.head.appendChild(ut),lt)return new Promise((dt,ht)=>{ut.addEventListener("load",dt),ut.addEventListener("error",()=>ht(new Error(`Unable to preload CSS for ${at}`)))})}))}function nt(it){const ot=new Event("vite:preloadError",{cancelable:!0});if(ot.payload=it,window.dispatchEvent(ot),!ot.defaultPrevented)throw it}return rt.then(it=>{for(const ot of it||[])ot.status==="rejected"&&nt(ot.reason);return _e().catch(nt)})},resolveFetch$3=et=>{let _e;return et?_e=et:typeof fetch>"u"?_e=(...tt)=>__vitePreload(async()=>{const{default:st}=await Promise.resolve().then(()=>browser);return{default:st}},void 0).then(({default:st})=>st(...tt)):_e=fetch,(...tt)=>_e(...tt)};class FunctionsError extends Error{constructor(_e,tt="FunctionsError",st){super(_e),this.name=tt,this.context=st}}class FunctionsFetchError extends FunctionsError{constructor(_e){super("Failed to send a request to the Edge Function","FunctionsFetchError",_e)}}class FunctionsRelayError extends FunctionsError{constructor(_e){super("Relay Error invoking the Edge Function","FunctionsRelayError",_e)}}class FunctionsHttpError extends FunctionsError{constructor(_e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",_e)}}var FunctionRegion;(function(et){et.Any="any",et.ApNortheast1="ap-northeast-1",et.ApNortheast2="ap-northeast-2",et.ApSouth1="ap-south-1",et.ApSoutheast1="ap-southeast-1",et.ApSoutheast2="ap-southeast-2",et.CaCentral1="ca-central-1",et.EuCentral1="eu-central-1",et.EuWest1="eu-west-1",et.EuWest2="eu-west-2",et.EuWest3="eu-west-3",et.SaEast1="sa-east-1",et.UsEast1="us-east-1",et.UsWest1="us-west-1",et.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));var __awaiter$7=function(et,_e,tt,st){function rt(nt){return nt instanceof tt?nt:new tt(function(it){it(nt)})}return new(tt||(tt=Promise))(function(nt,it){function ot(ct){try{lt(st.next(ct))}catch(ut){it(ut)}}function at(ct){try{lt(st.throw(ct))}catch(ut){it(ut)}}function lt(ct){ct.done?nt(ct.value):rt(ct.value).then(ot,at)}lt((st=st.apply(et,_e||[])).next())})};class FunctionsClient{constructor(_e,{headers:tt={},customFetch:st,region:rt=FunctionRegion.Any}={}){this.url=_e,this.headers=tt,this.region=rt,this.fetch=resolveFetch$3(st)}setAuth(_e){this.headers.Authorization=`Bearer ${_e}`}invoke(_e,tt={}){var st;return __awaiter$7(this,void 0,void 0,function*(){try{const{headers:rt,method:nt,body:it}=tt;let ot={},{region:at}=tt;at||(at=this.region),at&&at!=="any"&&(ot["x-region"]=at);let lt;it&&(rt&&!Object.prototype.hasOwnProperty.call(rt,"Content-Type")||!rt)&&(typeof Blob<"u"&&it instanceof Blob||it instanceof ArrayBuffer?(ot["Content-Type"]="application/octet-stream",lt=it):typeof it=="string"?(ot["Content-Type"]="text/plain",lt=it):typeof FormData<"u"&&it instanceof FormData?lt=it:(ot["Content-Type"]="application/json",lt=JSON.stringify(it)));const ct=yield this.fetch(`${this.url}/${_e}`,{method:nt||"POST",headers:Object.assign(Object.assign(Object.assign({},ot),this.headers),rt),body:lt}).catch(pt=>{throw new FunctionsFetchError(pt)}),ut=ct.headers.get("x-relay-error");if(ut&&ut==="true")throw new FunctionsRelayError(ct);if(!ct.ok)throw new FunctionsHttpError(ct);let dt=((st=ct.headers.get("Content-Type"))!==null&&st!==void 0?st:"text/plain").split(";")[0].trim(),ht;return dt==="application/json"?ht=yield ct.json():dt==="application/octet-stream"?ht=yield ct.blob():dt==="text/event-stream"?ht=ct:dt==="multipart/form-data"?ht=yield ct.formData():ht=yield ct.text(),{data:ht,error:null}}catch(rt){return{data:null,error:rt}}})}}var cjs={},PostgrestClient$2={},PostgrestQueryBuilder$2={},PostgrestFilterBuilder$2={},PostgrestTransformBuilder$2={},PostgrestBuilder$2={},getGlobal=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},globalObject=getGlobal();const fetch$1=globalObject.fetch,nodeFetch=globalObject.fetch.bind(globalObject),Headers$1=globalObject.Headers,Request=globalObject.Request,Response$1=globalObject.Response,browser=Object.freeze(Object.defineProperty({__proto__:null,Headers:Headers$1,Request,Response:Response$1,default:nodeFetch,fetch:fetch$1},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(browser);var PostgrestError$2={};Object.defineProperty(PostgrestError$2,"__esModule",{value:!0});let PostgrestError$1=class extends Error{constructor(_e){super(_e.message),this.name="PostgrestError",this.details=_e.details,this.hint=_e.hint,this.code=_e.code}};PostgrestError$2.default=PostgrestError$1;var __importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(et){return et&&et.__esModule?et:{default:et}};Object.defineProperty(PostgrestBuilder$2,"__esModule",{value:!0});const node_fetch_1=__importDefault$5(require$$0),PostgrestError_1$1=__importDefault$5(PostgrestError$2);let PostgrestBuilder$1=class{constructor(_e){this.shouldThrowOnError=!1,this.method=_e.method,this.url=_e.url,this.headers=_e.headers,this.schema=_e.schema,this.body=_e.body,this.shouldThrowOnError=_e.shouldThrowOnError,this.signal=_e.signal,this.isMaybeSingle=_e.isMaybeSingle,_e.fetch?this.fetch=_e.fetch:typeof fetch>"u"?this.fetch=node_fetch_1.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(_e,tt){return this.headers=Object.assign({},this.headers),this.headers[_e]=tt,this}then(_e,tt){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const st=this.fetch;let rt=st(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async nt=>{var it,ot,at;let lt=null,ct=null,ut=null,dt=nt.status,ht=nt.statusText;if(nt.ok){if(this.method!=="HEAD"){const ft=await nt.text();ft===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?ct=ft:ct=JSON.parse(ft))}const mt=(it=this.headers.Prefer)===null||it===void 0?void 0:it.match(/count=(exact|planned|estimated)/),gt=(ot=nt.headers.get("content-range"))===null||ot===void 0?void 0:ot.split("/");mt&&gt&&gt.length>1&&(ut=parseInt(gt[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(ct)&&(ct.length>1?(lt={code:"PGRST116",details:`Results contain ${ct.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},ct=null,ut=null,dt=406,ht="Not Acceptable"):ct.length===1?ct=ct[0]:ct=null)}else{const mt=await nt.text();try{lt=JSON.parse(mt),Array.isArray(lt)&&nt.status===404&&(ct=[],lt=null,dt=200,ht="OK")}catch{nt.status===404&&mt===""?(dt=204,ht="No Content"):lt={message:mt}}if(lt&&this.isMaybeSingle&&(!((at=lt==null?void 0:lt.details)===null||at===void 0)&&at.includes("0 rows"))&&(lt=null,dt=200,ht="OK"),lt&&this.shouldThrowOnError)throw new PostgrestError_1$1.default(lt)}return{error:lt,data:ct,count:ut,status:dt,statusText:ht}});return this.shouldThrowOnError||(rt=rt.catch(nt=>{var it,ot,at;return{error:{message:`${(it=nt==null?void 0:nt.name)!==null&&it!==void 0?it:"FetchError"}: ${nt==null?void 0:nt.message}`,details:`${(ot=nt==null?void 0:nt.stack)!==null&&ot!==void 0?ot:""}`,hint:"",code:`${(at=nt==null?void 0:nt.code)!==null&&at!==void 0?at:""}`},data:null,count:null,status:0,statusText:""}})),rt.then(_e,tt)}returns(){return this}overrideTypes(){return this}};PostgrestBuilder$2.default=PostgrestBuilder$1;var __importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(et){return et&&et.__esModule?et:{default:et}};Object.defineProperty(PostgrestTransformBuilder$2,"__esModule",{value:!0});const PostgrestBuilder_1$1=__importDefault$4(PostgrestBuilder$2);let PostgrestTransformBuilder$1=class extends PostgrestBuilder_1$1.default{select(_e){let tt=!1;const st=(_e??"*").split("").map(rt=>/\s/.test(rt)&&!tt?"":(rt==='"'&&(tt=!tt),rt)).join("");return this.url.searchParams.set("select",st),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(_e,{ascending:tt=!0,nullsFirst:st,foreignTable:rt,referencedTable:nt=rt}={}){const it=nt?`${nt}.order`:"order",ot=this.url.searchParams.get(it);return this.url.searchParams.set(it,`${ot?`${ot},`:""}${_e}.${tt?"asc":"desc"}${st===void 0?"":st?".nullsfirst":".nullslast"}`),this}limit(_e,{foreignTable:tt,referencedTable:st=tt}={}){const rt=typeof st>"u"?"limit":`${st}.limit`;return this.url.searchParams.set(rt,`${_e}`),this}range(_e,tt,{foreignTable:st,referencedTable:rt=st}={}){const nt=typeof rt>"u"?"offset":`${rt}.offset`,it=typeof rt>"u"?"limit":`${rt}.limit`;return this.url.searchParams.set(nt,`${_e}`),this.url.searchParams.set(it,`${tt-_e+1}`),this}abortSignal(_e){return this.signal=_e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:_e=!1,verbose:tt=!1,settings:st=!1,buffers:rt=!1,wal:nt=!1,format:it="text"}={}){var ot;const at=[_e?"analyze":null,tt?"verbose":null,st?"settings":null,rt?"buffers":null,nt?"wal":null].filter(Boolean).join("|"),lt=(ot=this.headers.Accept)!==null&&ot!==void 0?ot:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${it}; for="${lt}"; options=${at};`,it==="json"?this:this}rollback(){var _e;return((_e=this.headers.Prefer)!==null&&_e!==void 0?_e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};PostgrestTransformBuilder$2.default=PostgrestTransformBuilder$1;var __importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(et){return et&&et.__esModule?et:{default:et}};Object.defineProperty(PostgrestFilterBuilder$2,"__esModule",{value:!0});const PostgrestTransformBuilder_1$1=__importDefault$3(PostgrestTransformBuilder$2);let PostgrestFilterBuilder$1=class extends PostgrestTransformBuilder_1$1.default{eq(_e,tt){return this.url.searchParams.append(_e,`eq.${tt}`),this}neq(_e,tt){return this.url.searchParams.append(_e,`neq.${tt}`),this}gt(_e,tt){return this.url.searchParams.append(_e,`gt.${tt}`),this}gte(_e,tt){return this.url.searchParams.append(_e,`gte.${tt}`),this}lt(_e,tt){return this.url.searchParams.append(_e,`lt.${tt}`),this}lte(_e,tt){return this.url.searchParams.append(_e,`lte.${tt}`),this}like(_e,tt){return this.url.searchParams.append(_e,`like.${tt}`),this}likeAllOf(_e,tt){return this.url.searchParams.append(_e,`like(all).{${tt.join(",")}}`),this}likeAnyOf(_e,tt){return this.url.searchParams.append(_e,`like(any).{${tt.join(",")}}`),this}ilike(_e,tt){return this.url.searchParams.append(_e,`ilike.${tt}`),this}ilikeAllOf(_e,tt){return this.url.searchParams.append(_e,`ilike(all).{${tt.join(",")}}`),this}ilikeAnyOf(_e,tt){return this.url.searchParams.append(_e,`ilike(any).{${tt.join(",")}}`),this}is(_e,tt){return this.url.searchParams.append(_e,`is.${tt}`),this}in(_e,tt){const st=Array.from(new Set(tt)).map(rt=>typeof rt=="string"&&new RegExp("[,()]").test(rt)?`"${rt}"`:`${rt}`).join(",");return this.url.searchParams.append(_e,`in.(${st})`),this}contains(_e,tt){return typeof tt=="string"?this.url.searchParams.append(_e,`cs.${tt}`):Array.isArray(tt)?this.url.searchParams.append(_e,`cs.{${tt.join(",")}}`):this.url.searchParams.append(_e,`cs.${JSON.stringify(tt)}`),this}containedBy(_e,tt){return typeof tt=="string"?this.url.searchParams.append(_e,`cd.${tt}`):Array.isArray(tt)?this.url.searchParams.append(_e,`cd.{${tt.join(",")}}`):this.url.searchParams.append(_e,`cd.${JSON.stringify(tt)}`),this}rangeGt(_e,tt){return this.url.searchParams.append(_e,`sr.${tt}`),this}rangeGte(_e,tt){return this.url.searchParams.append(_e,`nxl.${tt}`),this}rangeLt(_e,tt){return this.url.searchParams.append(_e,`sl.${tt}`),this}rangeLte(_e,tt){return this.url.searchParams.append(_e,`nxr.${tt}`),this}rangeAdjacent(_e,tt){return this.url.searchParams.append(_e,`adj.${tt}`),this}overlaps(_e,tt){return typeof tt=="string"?this.url.searchParams.append(_e,`ov.${tt}`):this.url.searchParams.append(_e,`ov.{${tt.join(",")}}`),this}textSearch(_e,tt,{config:st,type:rt}={}){let nt="";rt==="plain"?nt="pl":rt==="phrase"?nt="ph":rt==="websearch"&&(nt="w");const it=st===void 0?"":`(${st})`;return this.url.searchParams.append(_e,`${nt}fts${it}.${tt}`),this}match(_e){return Object.entries(_e).forEach(([tt,st])=>{this.url.searchParams.append(tt,`eq.${st}`)}),this}not(_e,tt,st){return this.url.searchParams.append(_e,`not.${tt}.${st}`),this}or(_e,{foreignTable:tt,referencedTable:st=tt}={}){const rt=st?`${st}.or`:"or";return this.url.searchParams.append(rt,`(${_e})`),this}filter(_e,tt,st){return this.url.searchParams.append(_e,`${tt}.${st}`),this}};PostgrestFilterBuilder$2.default=PostgrestFilterBuilder$1;var __importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(et){return et&&et.__esModule?et:{default:et}};Object.defineProperty(PostgrestQueryBuilder$2,"__esModule",{value:!0});const PostgrestFilterBuilder_1$2=__importDefault$2(PostgrestFilterBuilder$2);let PostgrestQueryBuilder$1=class{constructor(_e,{headers:tt={},schema:st,fetch:rt}){this.url=_e,this.headers=tt,this.schema=st,this.fetch=rt}select(_e,{head:tt=!1,count:st}={}){const rt=tt?"HEAD":"GET";let nt=!1;const it=(_e??"*").split("").map(ot=>/\s/.test(ot)&&!nt?"":(ot==='"'&&(nt=!nt),ot)).join("");return this.url.searchParams.set("select",it),st&&(this.headers.Prefer=`count=${st}`),new PostgrestFilterBuilder_1$2.default({method:rt,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(_e,{count:tt,defaultToNull:st=!0}={}){const rt="POST",nt=[];if(this.headers.Prefer&&nt.push(this.headers.Prefer),tt&&nt.push(`count=${tt}`),st||nt.push("missing=default"),this.headers.Prefer=nt.join(","),Array.isArray(_e)){const it=_e.reduce((ot,at)=>ot.concat(Object.keys(at)),[]);if(it.length>0){const ot=[...new Set(it)].map(at=>`"${at}"`);this.url.searchParams.set("columns",ot.join(","))}}return new PostgrestFilterBuilder_1$2.default({method:rt,url:this.url,headers:this.headers,schema:this.schema,body:_e,fetch:this.fetch,allowEmpty:!1})}upsert(_e,{onConflict:tt,ignoreDuplicates:st=!1,count:rt,defaultToNull:nt=!0}={}){const it="POST",ot=[`resolution=${st?"ignore":"merge"}-duplicates`];if(tt!==void 0&&this.url.searchParams.set("on_conflict",tt),this.headers.Prefer&&ot.push(this.headers.Prefer),rt&&ot.push(`count=${rt}`),nt||ot.push("missing=default"),this.headers.Prefer=ot.join(","),Array.isArray(_e)){const at=_e.reduce((lt,ct)=>lt.concat(Object.keys(ct)),[]);if(at.length>0){const lt=[...new Set(at)].map(ct=>`"${ct}"`);this.url.searchParams.set("columns",lt.join(","))}}return new PostgrestFilterBuilder_1$2.default({method:it,url:this.url,headers:this.headers,schema:this.schema,body:_e,fetch:this.fetch,allowEmpty:!1})}update(_e,{count:tt}={}){const st="PATCH",rt=[];return this.headers.Prefer&&rt.push(this.headers.Prefer),tt&&rt.push(`count=${tt}`),this.headers.Prefer=rt.join(","),new PostgrestFilterBuilder_1$2.default({method:st,url:this.url,headers:this.headers,schema:this.schema,body:_e,fetch:this.fetch,allowEmpty:!1})}delete({count:_e}={}){const tt="DELETE",st=[];return _e&&st.push(`count=${_e}`),this.headers.Prefer&&st.unshift(this.headers.Prefer),this.headers.Prefer=st.join(","),new PostgrestFilterBuilder_1$2.default({method:tt,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};PostgrestQueryBuilder$2.default=PostgrestQueryBuilder$1;var constants={},version$5={};Object.defineProperty(version$5,"__esModule",{value:!0});version$5.version=void 0;version$5.version="0.0.0-automated";Object.defineProperty(constants,"__esModule",{value:!0});constants.DEFAULT_HEADERS=void 0;const version_1=version$5;constants.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${version_1.version}`};var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(et){return et&&et.__esModule?et:{default:et}};Object.defineProperty(PostgrestClient$2,"__esModule",{value:!0});const PostgrestQueryBuilder_1$1=__importDefault$1(PostgrestQueryBuilder$2),PostgrestFilterBuilder_1$1=__importDefault$1(PostgrestFilterBuilder$2),constants_1=constants;let PostgrestClient$1=class vs{constructor(_e,{headers:tt={},schema:st,fetch:rt}={}){this.url=_e,this.headers=Object.assign(Object.assign({},constants_1.DEFAULT_HEADERS),tt),this.schemaName=st,this.fetch=rt}from(_e){const tt=new URL(`${this.url}/${_e}`);return new PostgrestQueryBuilder_1$1.default(tt,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(_e){return new vs(this.url,{headers:this.headers,schema:_e,fetch:this.fetch})}rpc(_e,tt={},{head:st=!1,get:rt=!1,count:nt}={}){let it;const ot=new URL(`${this.url}/rpc/${_e}`);let at;st||rt?(it=st?"HEAD":"GET",Object.entries(tt).filter(([ct,ut])=>ut!==void 0).map(([ct,ut])=>[ct,Array.isArray(ut)?`{${ut.join(",")}}`:`${ut}`]).forEach(([ct,ut])=>{ot.searchParams.append(ct,ut)})):(it="POST",at=tt);const lt=Object.assign({},this.headers);return nt&&(lt.Prefer=`count=${nt}`),new PostgrestFilterBuilder_1$1.default({method:it,url:ot,headers:lt,schema:this.schemaName,body:at,fetch:this.fetch,allowEmpty:!1})}};PostgrestClient$2.default=PostgrestClient$1;var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(et){return et&&et.__esModule?et:{default:et}};Object.defineProperty(cjs,"__esModule",{value:!0});cjs.PostgrestError=cjs.PostgrestBuilder=cjs.PostgrestTransformBuilder=cjs.PostgrestFilterBuilder=cjs.PostgrestQueryBuilder=cjs.PostgrestClient=void 0;const PostgrestClient_1=__importDefault(PostgrestClient$2);cjs.PostgrestClient=PostgrestClient_1.default;const PostgrestQueryBuilder_1=__importDefault(PostgrestQueryBuilder$2);cjs.PostgrestQueryBuilder=PostgrestQueryBuilder_1.default;const PostgrestFilterBuilder_1=__importDefault(PostgrestFilterBuilder$2);cjs.PostgrestFilterBuilder=PostgrestFilterBuilder_1.default;const PostgrestTransformBuilder_1=__importDefault(PostgrestTransformBuilder$2);cjs.PostgrestTransformBuilder=PostgrestTransformBuilder_1.default;const PostgrestBuilder_1=__importDefault(PostgrestBuilder$2);cjs.PostgrestBuilder=PostgrestBuilder_1.default;const PostgrestError_1=__importDefault(PostgrestError$2);cjs.PostgrestError=PostgrestError_1.default;var _default=cjs.default={PostgrestClient:PostgrestClient_1.default,PostgrestQueryBuilder:PostgrestQueryBuilder_1.default,PostgrestFilterBuilder:PostgrestFilterBuilder_1.default,PostgrestTransformBuilder:PostgrestTransformBuilder_1.default,PostgrestBuilder:PostgrestBuilder_1.default,PostgrestError:PostgrestError_1.default};const{PostgrestClient,PostgrestQueryBuilder,PostgrestFilterBuilder,PostgrestTransformBuilder,PostgrestBuilder,PostgrestError}=_default,version$4="2.11.2",DEFAULT_HEADERS$3={"X-Client-Info":`realtime-js/${version$4}`},VSN="1.0.0",DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3;var SOCKET_STATES;(function(et){et[et.connecting=0]="connecting",et[et.open=1]="open",et[et.closing=2]="closing",et[et.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(et){et.closed="closed",et.errored="errored",et.joined="joined",et.joining="joining",et.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(et){et.close="phx_close",et.error="phx_error",et.join="phx_join",et.reply="phx_reply",et.leave="phx_leave",et.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(et){et.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(et){et.Connecting="connecting",et.Open="open",et.Closing="closing",et.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(){this.HEADER_LENGTH=1}decode(_e,tt){return _e.constructor===ArrayBuffer?tt(this._binaryDecode(_e)):tt(typeof _e=="string"?JSON.parse(_e):{})}_binaryDecode(_e){const tt=new DataView(_e),st=new TextDecoder;return this._decodeBroadcast(_e,tt,st)}_decodeBroadcast(_e,tt,st){const rt=tt.getUint8(1),nt=tt.getUint8(2);let it=this.HEADER_LENGTH+2;const ot=st.decode(_e.slice(it,it+rt));it=it+rt;const at=st.decode(_e.slice(it,it+nt));it=it+nt;const lt=JSON.parse(st.decode(_e.slice(it,_e.byteLength)));return{ref:null,topic:ot,event:at,payload:lt}}}class Timer{constructor(_e,tt){this.callback=_e,this.timerCalc=tt,this.timer=void 0,this.tries=0,this.callback=_e,this.timerCalc=tt}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(et){et.abstime="abstime",et.bool="bool",et.date="date",et.daterange="daterange",et.float4="float4",et.float8="float8",et.int2="int2",et.int4="int4",et.int4range="int4range",et.int8="int8",et.int8range="int8range",et.json="json",et.jsonb="jsonb",et.money="money",et.numeric="numeric",et.oid="oid",et.reltime="reltime",et.text="text",et.time="time",et.timestamp="timestamp",et.timestamptz="timestamptz",et.timetz="timetz",et.tsrange="tsrange",et.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(et,_e,tt={})=>{var st;const rt=(st=tt.skipTypes)!==null&&st!==void 0?st:[];return Object.keys(_e).reduce((nt,it)=>(nt[it]=convertColumn(it,et,_e,rt),nt),{})},convertColumn=(et,_e,tt,st)=>{const rt=_e.find(ot=>ot.name===et),nt=rt==null?void 0:rt.type,it=tt[et];return nt&&!st.includes(nt)?convertCell(nt,it):noop$2(it)},convertCell=(et,_e)=>{if(et.charAt(0)==="_"){const tt=et.slice(1,et.length);return toArray(_e,tt)}switch(et){case PostgresTypes.bool:return toBoolean(_e);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(_e);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(_e);case PostgresTypes.timestamp:return toTimestampString(_e);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$2(_e);default:return noop$2(_e)}},noop$2=et=>et,toBoolean=et=>{switch(et){case"t":return!0;case"f":return!1;default:return et}},toNumber=et=>{if(typeof et=="string"){const _e=parseFloat(et);if(!Number.isNaN(_e))return _e}return et},toJson=et=>{if(typeof et=="string")try{return JSON.parse(et)}catch(_e){return console.log(`JSON parse error: ${_e}`),et}return et},toArray=(et,_e)=>{if(typeof et!="string")return et;const tt=et.length-1,st=et[tt];if(et[0]==="{"&&st==="}"){let nt;const it=et.slice(1,tt);try{nt=JSON.parse("["+it+"]")}catch{nt=it?it.split(","):[]}return nt.map(ot=>convertCell(_e,ot))}return et},toTimestampString=et=>typeof et=="string"?et.replace(" ","T"):et,httpEndpointURL=et=>{let _e=et;return _e=_e.replace(/^ws/i,"http"),_e=_e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),_e.replace(/\/+$/,"")};class Push{constructor(_e,tt,st={},rt=DEFAULT_TIMEOUT){this.channel=_e,this.event=tt,this.payload=st,this.timeout=rt,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(_e){this.timeout=_e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(_e){this.payload=Object.assign(Object.assign({},this.payload),_e)}receive(_e,tt){var st;return this._hasReceived(_e)&&tt((st=this.receivedResp)===null||st===void 0?void 0:st.response),this.recHooks.push({status:_e,callback:tt}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const _e=tt=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=tt,this._matchReceive(tt)};this.channel._on(this.refEvent,{},_e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(_e,tt){this.refEvent&&this.channel._trigger(this.refEvent,{status:_e,response:tt})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:_e,response:tt}){this.recHooks.filter(st=>st.status===_e).forEach(st=>st.callback(tt))}_hasReceived(_e){return this.receivedResp&&this.receivedResp.status===_e}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(et){et.SYNC="sync",et.JOIN="join",et.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(_e,tt){this.channel=_e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const st=(tt==null?void 0:tt.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(st.state,{},rt=>{const{onJoin:nt,onLeave:it,onSync:ot}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,rt,nt,it),this.pendingDiffs.forEach(at=>{this.state=RealtimePresence.syncDiff(this.state,at,nt,it)}),this.pendingDiffs=[],ot()}),this.channel._on(st.diff,{},rt=>{const{onJoin:nt,onLeave:it,onSync:ot}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(rt):(this.state=RealtimePresence.syncDiff(this.state,rt,nt,it),ot())}),this.onJoin((rt,nt,it)=>{this.channel._trigger("presence",{event:"join",key:rt,currentPresences:nt,newPresences:it})}),this.onLeave((rt,nt,it)=>{this.channel._trigger("presence",{event:"leave",key:rt,currentPresences:nt,leftPresences:it})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(_e,tt,st,rt){const nt=this.cloneDeep(_e),it=this.transformState(tt),ot={},at={};return this.map(nt,(lt,ct)=>{it[lt]||(at[lt]=ct)}),this.map(it,(lt,ct)=>{const ut=nt[lt];if(ut){const dt=ct.map(gt=>gt.presence_ref),ht=ut.map(gt=>gt.presence_ref),pt=ct.filter(gt=>ht.indexOf(gt.presence_ref)<0),mt=ut.filter(gt=>dt.indexOf(gt.presence_ref)<0);pt.length>0&&(ot[lt]=pt),mt.length>0&&(at[lt]=mt)}else ot[lt]=ct}),this.syncDiff(nt,{joins:ot,leaves:at},st,rt)}static syncDiff(_e,tt,st,rt){const{joins:nt,leaves:it}={joins:this.transformState(tt.joins),leaves:this.transformState(tt.leaves)};return st||(st=()=>{}),rt||(rt=()=>{}),this.map(nt,(ot,at)=>{var lt;const ct=(lt=_e[ot])!==null&&lt!==void 0?lt:[];if(_e[ot]=this.cloneDeep(at),ct.length>0){const ut=_e[ot].map(ht=>ht.presence_ref),dt=ct.filter(ht=>ut.indexOf(ht.presence_ref)<0);_e[ot].unshift(...dt)}st(ot,ct,at)}),this.map(it,(ot,at)=>{let lt=_e[ot];if(!lt)return;const ct=at.map(ut=>ut.presence_ref);lt=lt.filter(ut=>ct.indexOf(ut.presence_ref)<0),_e[ot]=lt,rt(ot,lt,at),lt.length===0&&delete _e[ot]}),_e}static map(_e,tt){return Object.getOwnPropertyNames(_e).map(st=>tt(st,_e[st]))}static transformState(_e){return _e=this.cloneDeep(_e),Object.getOwnPropertyNames(_e).reduce((tt,st)=>{const rt=_e[st];return"metas"in rt?tt[st]=rt.metas.map(nt=>(nt.presence_ref=nt.phx_ref,delete nt.phx_ref,delete nt.phx_ref_prev,nt)):tt[st]=rt,tt},{})}static cloneDeep(_e){return JSON.parse(JSON.stringify(_e))}onJoin(_e){this.caller.onJoin=_e}onLeave(_e){this.caller.onLeave=_e}onSync(_e){this.caller.onSync=_e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(et){et.ALL="*",et.INSERT="INSERT",et.UPDATE="UPDATE",et.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(et){et.BROADCAST="broadcast",et.PRESENCE="presence",et.POSTGRES_CHANGES="postgres_changes",et.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(et){et.SUBSCRIBED="SUBSCRIBED",et.TIMED_OUT="TIMED_OUT",et.CLOSED="CLOSED",et.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(_e,tt={config:{}},st){this.topic=_e,this.params=tt,this.socket=st,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=_e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},tt.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(rt=>rt.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(rt=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,rt),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(rt,nt)=>{this._trigger(this._replyEventName(nt),rt)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(_e,tt=this.timeout){var st,rt;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:nt,presence:it,private:ot}}=this.params;this._onError(ct=>_e==null?void 0:_e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,ct)),this._onClose(()=>_e==null?void 0:_e(REALTIME_SUBSCRIBE_STATES.CLOSED));const at={},lt={broadcast:nt,presence:it,postgres_changes:(rt=(st=this.bindings.postgres_changes)===null||st===void 0?void 0:st.map(ct=>ct.filter))!==null&&rt!==void 0?rt:[],private:ot};this.socket.accessTokenValue&&(at.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:lt},at)),this.joinedOnce=!0,this._rejoin(tt),this.joinPush.receive("ok",async({postgres_changes:ct})=>{var ut;if(this.socket.setAuth(),ct===void 0){_e==null||_e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const dt=this.bindings.postgres_changes,ht=(ut=dt==null?void 0:dt.length)!==null&&ut!==void 0?ut:0,pt=[];for(let mt=0;mt<ht;mt++){const gt=dt[mt],{filter:{event:ft,schema:xt,table:yt,filter:bt}}=gt,jt=ct&&ct[mt];if(jt&&jt.event===ft&&jt.schema===xt&&jt.table===yt&&jt.filter===bt)pt.push(Object.assign(Object.assign({},gt),{id:jt.id}));else{this.unsubscribe(),_e==null||_e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=pt,_e&&_e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",ct=>{_e==null||_e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(ct).join(", ")||"error")))}).receive("timeout",()=>{_e==null||_e(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(_e,tt={}){return await this.send({type:"presence",event:"track",payload:_e},tt.timeout||this.timeout)}async untrack(_e={}){return await this.send({type:"presence",event:"untrack"},_e)}on(_e,tt,st){return this._on(_e,tt,st)}async send(_e,tt={}){var st,rt;if(!this._canPush()&&_e.type==="broadcast"){const{event:nt,payload:it}=_e,at={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:nt,payload:it,private:this.private}]})};try{const lt=await this._fetchWithTimeout(this.broadcastEndpointURL,at,(st=tt.timeout)!==null&&st!==void 0?st:this.timeout);return await((rt=lt.body)===null||rt===void 0?void 0:rt.cancel()),lt.ok?"ok":"error"}catch(lt){return lt.name==="AbortError"?"timed out":"error"}}else return new Promise(nt=>{var it,ot,at;const lt=this._push(_e.type,_e,tt.timeout||this.timeout);_e.type==="broadcast"&&!(!((at=(ot=(it=this.params)===null||it===void 0?void 0:it.config)===null||ot===void 0?void 0:ot.broadcast)===null||at===void 0)&&at.ack)&&nt("ok"),lt.receive("ok",()=>nt("ok")),lt.receive("error",()=>nt("error")),lt.receive("timeout",()=>nt("timed out"))})}updateJoinPayload(_e){this.joinPush.updatePayload(_e)}unsubscribe(_e=this.timeout){this.state=CHANNEL_STATES.leaving;const tt=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(st=>{const rt=new Push(this,CHANNEL_EVENTS.leave,{},_e);rt.receive("ok",()=>{tt(),st("ok")}).receive("timeout",()=>{tt(),st("timed out")}).receive("error",()=>{st("error")}),rt.send(),this._canPush()||rt.trigger("ok",{})})}async _fetchWithTimeout(_e,tt,st){const rt=new AbortController,nt=setTimeout(()=>rt.abort(),st),it=await this.socket.fetch(_e,Object.assign(Object.assign({},tt),{signal:rt.signal}));return clearTimeout(nt),it}_push(_e,tt,st=this.timeout){if(!this.joinedOnce)throw`tried to push '${_e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let rt=new Push(this,_e,tt,st);return this._canPush()?rt.send():(rt.startTimeout(),this.pushBuffer.push(rt)),rt}_onMessage(_e,tt,st){return tt}_isMember(_e){return this.topic===_e}_joinRef(){return this.joinPush.ref}_trigger(_e,tt,st){var rt,nt;const it=_e.toLocaleLowerCase(),{close:ot,error:at,leave:lt,join:ct}=CHANNEL_EVENTS;if(st&&[ot,at,lt,ct].indexOf(it)>=0&&st!==this._joinRef())return;let dt=this._onMessage(it,tt,st);if(tt&&!dt)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(it)?(rt=this.bindings.postgres_changes)===null||rt===void 0||rt.filter(ht=>{var pt,mt,gt;return((pt=ht.filter)===null||pt===void 0?void 0:pt.event)==="*"||((gt=(mt=ht.filter)===null||mt===void 0?void 0:mt.event)===null||gt===void 0?void 0:gt.toLocaleLowerCase())===it}).map(ht=>ht.callback(dt,st)):(nt=this.bindings[it])===null||nt===void 0||nt.filter(ht=>{var pt,mt,gt,ft,xt,yt;if(["broadcast","presence","postgres_changes"].includes(it))if("id"in ht){const bt=ht.id,jt=(pt=ht.filter)===null||pt===void 0?void 0:pt.event;return bt&&((mt=tt.ids)===null||mt===void 0?void 0:mt.includes(bt))&&(jt==="*"||(jt==null?void 0:jt.toLocaleLowerCase())===((gt=tt.data)===null||gt===void 0?void 0:gt.type.toLocaleLowerCase()))}else{const bt=(xt=(ft=ht==null?void 0:ht.filter)===null||ft===void 0?void 0:ft.event)===null||xt===void 0?void 0:xt.toLocaleLowerCase();return bt==="*"||bt===((yt=tt==null?void 0:tt.event)===null||yt===void 0?void 0:yt.toLocaleLowerCase())}else return ht.type.toLocaleLowerCase()===it}).map(ht=>{if(typeof dt=="object"&&"ids"in dt){const pt=dt.data,{schema:mt,table:gt,commit_timestamp:ft,type:xt,errors:yt}=pt;dt=Object.assign(Object.assign({},{schema:mt,table:gt,commit_timestamp:ft,eventType:xt,new:{},old:{},errors:yt}),this._getPayloadRecords(pt))}ht.callback(dt,st)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(_e){return`chan_reply_${_e}`}_on(_e,tt,st){const rt=_e.toLocaleLowerCase(),nt={type:rt,filter:tt,callback:st};return this.bindings[rt]?this.bindings[rt].push(nt):this.bindings[rt]=[nt],this}_off(_e,tt){const st=_e.toLocaleLowerCase();return this.bindings[st]=this.bindings[st].filter(rt=>{var nt;return!(((nt=rt.type)===null||nt===void 0?void 0:nt.toLocaleLowerCase())===st&&RealtimeChannel.isEqual(rt.filter,tt))}),this}static isEqual(_e,tt){if(Object.keys(_e).length!==Object.keys(tt).length)return!1;for(const st in _e)if(_e[st]!==tt[st])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(_e){this._on(CHANNEL_EVENTS.close,{},_e)}_onError(_e){this._on(CHANNEL_EVENTS.error,{},tt=>_e(tt))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(_e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(_e))}_getPayloadRecords(_e){const tt={new:{},old:{}};return(_e.type==="INSERT"||_e.type==="UPDATE")&&(tt.new=convertChangeData(_e.columns,_e.record)),(_e.type==="UPDATE"||_e.type==="DELETE")&&(tt.old=convertChangeData(_e.columns,_e.old_record)),tt}}const noop$1=()=>{},NATIVE_WEBSOCKET_AVAILABLE=typeof WebSocket<"u",WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(_e,tt){var st;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=DEFAULT_HEADERS$3,this.params={},this.timeout=DEFAULT_TIMEOUT,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=noop$1,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=nt=>{let it;return nt?it=nt:typeof fetch>"u"?it=(...ot)=>__vitePreload(async()=>{const{default:at}=await Promise.resolve().then(()=>browser);return{default:at}},void 0).then(({default:at})=>at(...ot)):it=fetch,(...ot)=>it(...ot)},this.endPoint=`${_e}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(_e),tt!=null&&tt.transport?this.transport=tt.transport:this.transport=null,tt!=null&&tt.params&&(this.params=tt.params),tt!=null&&tt.headers&&(this.headers=Object.assign(Object.assign({},this.headers),tt.headers)),tt!=null&&tt.timeout&&(this.timeout=tt.timeout),tt!=null&&tt.logger&&(this.logger=tt.logger),tt!=null&&tt.heartbeatIntervalMs&&(this.heartbeatIntervalMs=tt.heartbeatIntervalMs);const rt=(st=tt==null?void 0:tt.params)===null||st===void 0?void 0:st.apikey;if(rt&&(this.accessTokenValue=rt,this.apiKey=rt),this.reconnectAfterMs=tt!=null&&tt.reconnectAfterMs?tt.reconnectAfterMs:nt=>[1e3,2e3,5e3,1e4][nt-1]||1e4,this.encode=tt!=null&&tt.encode?tt.encode:(nt,it)=>it(JSON.stringify(nt)),this.decode=tt!=null&&tt.decode?tt.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Timer(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(tt==null?void 0:tt.fetch),tt!=null&&tt.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(tt==null?void 0:tt.worker)||!1,this.workerUrl=tt==null?void 0:tt.workerUrl}this.accessToken=(tt==null?void 0:tt.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(NATIVE_WEBSOCKET_AVAILABLE){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new WSWebSocketDummy(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),__vitePreload(async()=>{const{default:_e}=await import("./browser-BXF96yyH.js").then(tt=>tt.b);return{default:_e}},[]).then(({default:_e})=>{this.conn=new _e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VSN}))}disconnect(_e,tt){this.conn&&(this.conn.onclose=function(){},_e?this.conn.close(_e,tt??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(_e){const tt=await _e.unsubscribe();return this.channels.length===0&&this.disconnect(),tt}async removeAllChannels(){const _e=await Promise.all(this.channels.map(tt=>tt.unsubscribe()));return this.disconnect(),_e}log(_e,tt,st){this.logger(_e,tt,st)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}channel(_e,tt={config:{}}){const st=new RealtimeChannel(`realtime:${_e}`,tt,this);return this.channels.push(st),st}push(_e){const{topic:tt,event:st,payload:rt,ref:nt}=_e,it=()=>{this.encode(_e,ot=>{var at;(at=this.conn)===null||at===void 0||at.send(ot)})};this.log("push",`${tt} ${st} (${nt})`,rt),this.isConnected()?it():this.sendBuffer.push(it)}async setAuth(_e=null){let tt=_e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(tt){let st=null;try{st=JSON.parse(atob(tt.split(".")[1]))}catch{}if(st&&st.exp&&!(Math.floor(Date.now()/1e3)-st.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${st.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${st.exp}`);this.accessTokenValue=tt,this.channels.forEach(rt=>{tt&&rt.updateJoinPayload({access_token:tt}),rt.joinedOnce&&rt._isJoined()&&rt._push(CHANNEL_EVENTS.access_token,{access_token:tt})})}}async sendHeartbeat(){var _e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(_e=this.conn)===null||_e===void 0||_e.close(WS_CLOSE_NORMAL,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(_e=>_e()),this.sendBuffer=[])}_makeRef(){let _e=this.ref+1;return _e===this.ref?this.ref=0:this.ref=_e,this.ref.toString()}_leaveOpenTopic(_e){let tt=this.channels.find(st=>st.topic===_e&&(st._isJoined()||st._isJoining()));tt&&(this.log("transport",`leaving duplicate topic "${_e}"`),tt.unsubscribe())}_remove(_e){this.channels=this.channels.filter(tt=>tt._joinRef()!==_e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=_e=>this._onConnError(_e),this.conn.onmessage=_e=>this._onConnMessage(_e),this.conn.onclose=_e=>this._onConnClose(_e))}_onConnMessage(_e){this.decode(_e.data,tt=>{let{topic:st,event:rt,payload:nt,ref:it}=tt;it&&it===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${nt.status||""} ${st} ${rt} ${it&&"("+it+")"||""}`,nt),this.channels.filter(ot=>ot._isMember(st)).forEach(ot=>ot._trigger(rt,nt,it)),this.stateChangeCallbacks.message.forEach(ot=>ot(tt))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const _e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(_e),this.workerRef.onerror=tt=>{this.log("worker","worker error",tt.message),this.workerRef.terminate()},this.workerRef.onmessage=tt=>{tt.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(_e=>_e())}_onConnClose(_e){this.log("transport","close",_e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(tt=>tt(_e))}_onConnError(_e){this.log("transport",_e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(tt=>tt(_e))}_triggerChanError(){this.channels.forEach(_e=>_e._trigger(CHANNEL_EVENTS.error))}_appendParams(_e,tt){if(Object.keys(tt).length===0)return _e;const st=_e.match(/\?/)?"&":"?",rt=new URLSearchParams(tt);return`${_e}${st}${rt}`}_workerObjectUrl(_e){let tt;if(_e)tt=_e;else{const st=new Blob([WORKER_SCRIPT],{type:"application/javascript"});tt=URL.createObjectURL(st)}return tt}}class WSWebSocketDummy{constructor(_e,tt,st){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=SOCKET_STATES.connecting,this.send=()=>{},this.url=null,this.url=_e,this.close=st.close}}class StorageError extends Error{constructor(_e){super(_e),this.__isStorageError=!0,this.name="StorageError"}}function isStorageError(et){return typeof et=="object"&&et!==null&&"__isStorageError"in et}class StorageApiError extends StorageError{constructor(_e,tt){super(_e),this.name="StorageApiError",this.status=tt}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class StorageUnknownError extends StorageError{constructor(_e,tt){super(_e),this.name="StorageUnknownError",this.originalError=tt}}var __awaiter$6=function(et,_e,tt,st){function rt(nt){return nt instanceof tt?nt:new tt(function(it){it(nt)})}return new(tt||(tt=Promise))(function(nt,it){function ot(ct){try{lt(st.next(ct))}catch(ut){it(ut)}}function at(ct){try{lt(st.throw(ct))}catch(ut){it(ut)}}function lt(ct){ct.done?nt(ct.value):rt(ct.value).then(ot,at)}lt((st=st.apply(et,_e||[])).next())})};const resolveFetch$2=et=>{let _e;return et?_e=et:typeof fetch>"u"?_e=(...tt)=>__vitePreload(async()=>{const{default:st}=await Promise.resolve().then(()=>browser);return{default:st}},void 0).then(({default:st})=>st(...tt)):_e=fetch,(...tt)=>_e(...tt)},resolveResponse=()=>__awaiter$6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield __vitePreload(()=>Promise.resolve().then(()=>browser),void 0)).Response:Response}),recursiveToCamel=et=>{if(Array.isArray(et))return et.map(tt=>recursiveToCamel(tt));if(typeof et=="function"||et!==Object(et))return et;const _e={};return Object.entries(et).forEach(([tt,st])=>{const rt=tt.replace(/([-_][a-z])/gi,nt=>nt.toUpperCase().replace(/[-_]/g,""));_e[rt]=recursiveToCamel(st)}),_e};var __awaiter$5=function(et,_e,tt,st){function rt(nt){return nt instanceof tt?nt:new tt(function(it){it(nt)})}return new(tt||(tt=Promise))(function(nt,it){function ot(ct){try{lt(st.next(ct))}catch(ut){it(ut)}}function at(ct){try{lt(st.throw(ct))}catch(ut){it(ut)}}function lt(ct){ct.done?nt(ct.value):rt(ct.value).then(ot,at)}lt((st=st.apply(et,_e||[])).next())})};const _getErrorMessage$1=et=>et.msg||et.message||et.error_description||et.error||JSON.stringify(et),handleError$1=(et,_e,tt)=>__awaiter$5(void 0,void 0,void 0,function*(){const st=yield resolveResponse();et instanceof st&&!(tt!=null&&tt.noResolveJson)?et.json().then(rt=>{_e(new StorageApiError(_getErrorMessage$1(rt),et.status||500))}).catch(rt=>{_e(new StorageUnknownError(_getErrorMessage$1(rt),rt))}):_e(new StorageUnknownError(_getErrorMessage$1(et),et))}),_getRequestParams$1=(et,_e,tt,st)=>{const rt={method:et,headers:(_e==null?void 0:_e.headers)||{}};return et==="GET"?rt:(rt.headers=Object.assign({"Content-Type":"application/json"},_e==null?void 0:_e.headers),st&&(rt.body=JSON.stringify(st)),Object.assign(Object.assign({},rt),tt))};function _handleRequest$1(et,_e,tt,st,rt,nt){return __awaiter$5(this,void 0,void 0,function*(){return new Promise((it,ot)=>{et(tt,_getRequestParams$1(_e,st,rt,nt)).then(at=>{if(!at.ok)throw at;return st!=null&&st.noResolveJson?at:at.json()}).then(at=>it(at)).catch(at=>handleError$1(at,ot,st))})})}function get$1(et,_e,tt,st){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(et,"GET",_e,tt,st)})}function post(et,_e,tt,st,rt){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(et,"POST",_e,st,rt,tt)})}function put(et,_e,tt,st,rt){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(et,"PUT",_e,st,rt,tt)})}function head(et,_e,tt,st){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(et,"HEAD",_e,Object.assign(Object.assign({},tt),{noResolveJson:!0}),st)})}function remove(et,_e,tt,st,rt){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(et,"DELETE",_e,st,rt,tt)})}var __awaiter$4=function(et,_e,tt,st){function rt(nt){return nt instanceof tt?nt:new tt(function(it){it(nt)})}return new(tt||(tt=Promise))(function(nt,it){function ot(ct){try{lt(st.next(ct))}catch(ut){it(ut)}}function at(ct){try{lt(st.throw(ct))}catch(ut){it(ut)}}function lt(ct){ct.done?nt(ct.value):rt(ct.value).then(ot,at)}lt((st=st.apply(et,_e||[])).next())})};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(_e,tt={},st,rt){this.url=_e,this.headers=tt,this.bucketId=st,this.fetch=resolveFetch$2(rt)}uploadOrUpdate(_e,tt,st,rt){return __awaiter$4(this,void 0,void 0,function*(){try{let nt;const it=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),rt);let ot=Object.assign(Object.assign({},this.headers),_e==="POST"&&{"x-upsert":String(it.upsert)});const at=it.metadata;typeof Blob<"u"&&st instanceof Blob?(nt=new FormData,nt.append("cacheControl",it.cacheControl),at&&nt.append("metadata",this.encodeMetadata(at)),nt.append("",st)):typeof FormData<"u"&&st instanceof FormData?(nt=st,nt.append("cacheControl",it.cacheControl),at&&nt.append("metadata",this.encodeMetadata(at))):(nt=st,ot["cache-control"]=`max-age=${it.cacheControl}`,ot["content-type"]=it.contentType,at&&(ot["x-metadata"]=this.toBase64(this.encodeMetadata(at)))),rt!=null&&rt.headers&&(ot=Object.assign(Object.assign({},ot),rt.headers));const lt=this._removeEmptyFolders(tt),ct=this._getFinalPath(lt),ut=yield this.fetch(`${this.url}/object/${ct}`,Object.assign({method:_e,body:nt,headers:ot},it!=null&&it.duplex?{duplex:it.duplex}:{})),dt=yield ut.json();return ut.ok?{data:{path:lt,id:dt.Id,fullPath:dt.Key},error:null}:{data:null,error:dt}}catch(nt){if(isStorageError(nt))return{data:null,error:nt};throw nt}})}upload(_e,tt,st){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",_e,tt,st)})}uploadToSignedUrl(_e,tt,st,rt){return __awaiter$4(this,void 0,void 0,function*(){const nt=this._removeEmptyFolders(_e),it=this._getFinalPath(nt),ot=new URL(this.url+`/object/upload/sign/${it}`);ot.searchParams.set("token",tt);try{let at;const lt=Object.assign({upsert:DEFAULT_FILE_OPTIONS.upsert},rt),ct=Object.assign(Object.assign({},this.headers),{"x-upsert":String(lt.upsert)});typeof Blob<"u"&&st instanceof Blob?(at=new FormData,at.append("cacheControl",lt.cacheControl),at.append("",st)):typeof FormData<"u"&&st instanceof FormData?(at=st,at.append("cacheControl",lt.cacheControl)):(at=st,ct["cache-control"]=`max-age=${lt.cacheControl}`,ct["content-type"]=lt.contentType);const ut=yield this.fetch(ot.toString(),{method:"PUT",body:at,headers:ct}),dt=yield ut.json();return ut.ok?{data:{path:nt,fullPath:dt.Key},error:null}:{data:null,error:dt}}catch(at){if(isStorageError(at))return{data:null,error:at};throw at}})}createSignedUploadUrl(_e,tt){return __awaiter$4(this,void 0,void 0,function*(){try{let st=this._getFinalPath(_e);const rt=Object.assign({},this.headers);tt!=null&&tt.upsert&&(rt["x-upsert"]="true");const nt=yield post(this.fetch,`${this.url}/object/upload/sign/${st}`,{},{headers:rt}),it=new URL(this.url+nt.url),ot=it.searchParams.get("token");if(!ot)throw new StorageError("No token returned by API");return{data:{signedUrl:it.toString(),path:_e,token:ot},error:null}}catch(st){if(isStorageError(st))return{data:null,error:st};throw st}})}update(_e,tt,st){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",_e,tt,st)})}move(_e,tt,st){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:_e,destinationKey:tt,destinationBucket:st==null?void 0:st.destinationBucket},{headers:this.headers}),error:null}}catch(rt){if(isStorageError(rt))return{data:null,error:rt};throw rt}})}copy(_e,tt,st){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:{path:(yield post(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:_e,destinationKey:tt,destinationBucket:st==null?void 0:st.destinationBucket},{headers:this.headers})).Key},error:null}}catch(rt){if(isStorageError(rt))return{data:null,error:rt};throw rt}})}createSignedUrl(_e,tt,st){return __awaiter$4(this,void 0,void 0,function*(){try{let rt=this._getFinalPath(_e),nt=yield post(this.fetch,`${this.url}/object/sign/${rt}`,Object.assign({expiresIn:tt},st!=null&&st.transform?{transform:st.transform}:{}),{headers:this.headers});const it=st!=null&&st.download?`&download=${st.download===!0?"":st.download}`:"";return nt={signedUrl:encodeURI(`${this.url}${nt.signedURL}${it}`)},{data:nt,error:null}}catch(rt){if(isStorageError(rt))return{data:null,error:rt};throw rt}})}createSignedUrls(_e,tt,st){return __awaiter$4(this,void 0,void 0,function*(){try{const rt=yield post(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:tt,paths:_e},{headers:this.headers}),nt=st!=null&&st.download?`&download=${st.download===!0?"":st.download}`:"";return{data:rt.map(it=>Object.assign(Object.assign({},it),{signedUrl:it.signedURL?encodeURI(`${this.url}${it.signedURL}${nt}`):null})),error:null}}catch(rt){if(isStorageError(rt))return{data:null,error:rt};throw rt}})}download(_e,tt){return __awaiter$4(this,void 0,void 0,function*(){const rt=typeof(tt==null?void 0:tt.transform)<"u"?"render/image/authenticated":"object",nt=this.transformOptsToQueryString((tt==null?void 0:tt.transform)||{}),it=nt?`?${nt}`:"";try{const ot=this._getFinalPath(_e);return{data:yield(yield get$1(this.fetch,`${this.url}/${rt}/${ot}${it}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(ot){if(isStorageError(ot))return{data:null,error:ot};throw ot}})}info(_e){return __awaiter$4(this,void 0,void 0,function*(){const tt=this._getFinalPath(_e);try{const st=yield get$1(this.fetch,`${this.url}/object/info/${tt}`,{headers:this.headers});return{data:recursiveToCamel(st),error:null}}catch(st){if(isStorageError(st))return{data:null,error:st};throw st}})}exists(_e){return __awaiter$4(this,void 0,void 0,function*(){const tt=this._getFinalPath(_e);try{return yield head(this.fetch,`${this.url}/object/${tt}`,{headers:this.headers}),{data:!0,error:null}}catch(st){if(isStorageError(st)&&st instanceof StorageUnknownError){const rt=st.originalError;if([400,404].includes(rt==null?void 0:rt.status))return{data:!1,error:st}}throw st}})}getPublicUrl(_e,tt){const st=this._getFinalPath(_e),rt=[],nt=tt!=null&&tt.download?`download=${tt.download===!0?"":tt.download}`:"";nt!==""&&rt.push(nt);const ot=typeof(tt==null?void 0:tt.transform)<"u"?"render/image":"object",at=this.transformOptsToQueryString((tt==null?void 0:tt.transform)||{});at!==""&&rt.push(at);let lt=rt.join("&");return lt!==""&&(lt=`?${lt}`),{data:{publicUrl:encodeURI(`${this.url}/${ot}/public/${st}${lt}`)}}}remove(_e){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:_e},{headers:this.headers}),error:null}}catch(tt){if(isStorageError(tt))return{data:null,error:tt};throw tt}})}list(_e,tt,st){return __awaiter$4(this,void 0,void 0,function*(){try{const rt=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),tt),{prefix:_e||""});return{data:yield post(this.fetch,`${this.url}/object/list/${this.bucketId}`,rt,{headers:this.headers},st),error:null}}catch(rt){if(isStorageError(rt))return{data:null,error:rt};throw rt}})}encodeMetadata(_e){return JSON.stringify(_e)}toBase64(_e){return typeof Buffer<"u"?Buffer.from(_e).toString("base64"):btoa(_e)}_getFinalPath(_e){return`${this.bucketId}/${_e}`}_removeEmptyFolders(_e){return _e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(_e){const tt=[];return _e.width&&tt.push(`width=${_e.width}`),_e.height&&tt.push(`height=${_e.height}`),_e.resize&&tt.push(`resize=${_e.resize}`),_e.format&&tt.push(`format=${_e.format}`),_e.quality&&tt.push(`quality=${_e.quality}`),tt.join("&")}}const version$3="2.7.1",DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$3}`};var __awaiter$3=function(et,_e,tt,st){function rt(nt){return nt instanceof tt?nt:new tt(function(it){it(nt)})}return new(tt||(tt=Promise))(function(nt,it){function ot(ct){try{lt(st.next(ct))}catch(ut){it(ut)}}function at(ct){try{lt(st.throw(ct))}catch(ut){it(ut)}}function lt(ct){ct.done?nt(ct.value):rt(ct.value).then(ot,at)}lt((st=st.apply(et,_e||[])).next())})};class StorageBucketApi{constructor(_e,tt={},st){this.url=_e,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),tt),this.fetch=resolveFetch$2(st)}listBuckets(){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get$1(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(_e){if(isStorageError(_e))return{data:null,error:_e};throw _e}})}getBucket(_e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get$1(this.fetch,`${this.url}/bucket/${_e}`,{headers:this.headers}),error:null}}catch(tt){if(isStorageError(tt))return{data:null,error:tt};throw tt}})}createBucket(_e,tt={public:!1}){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket`,{id:_e,name:_e,public:tt.public,file_size_limit:tt.fileSizeLimit,allowed_mime_types:tt.allowedMimeTypes},{headers:this.headers}),error:null}}catch(st){if(isStorageError(st))return{data:null,error:st};throw st}})}updateBucket(_e,tt){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield put(this.fetch,`${this.url}/bucket/${_e}`,{id:_e,name:_e,public:tt.public,file_size_limit:tt.fileSizeLimit,allowed_mime_types:tt.allowedMimeTypes},{headers:this.headers}),error:null}}catch(st){if(isStorageError(st))return{data:null,error:st};throw st}})}emptyBucket(_e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket/${_e}/empty`,{},{headers:this.headers}),error:null}}catch(tt){if(isStorageError(tt))return{data:null,error:tt};throw tt}})}deleteBucket(_e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/bucket/${_e}`,{},{headers:this.headers}),error:null}}catch(tt){if(isStorageError(tt))return{data:null,error:tt};throw tt}})}}class StorageClient extends StorageBucketApi{constructor(_e,tt={},st){super(_e,tt,st)}from(_e){return new StorageFileApi(this.url,this.headers,_e,this.fetch)}}const version$2="2.49.4";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS$1={"X-Client-Info":`supabase-js-${JS_ENV}/${version$2}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS$1},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};var __awaiter$2=function(et,_e,tt,st){function rt(nt){return nt instanceof tt?nt:new tt(function(it){it(nt)})}return new(tt||(tt=Promise))(function(nt,it){function ot(ct){try{lt(st.next(ct))}catch(ut){it(ut)}}function at(ct){try{lt(st.throw(ct))}catch(ut){it(ut)}}function lt(ct){ct.done?nt(ct.value):rt(ct.value).then(ot,at)}lt((st=st.apply(et,_e||[])).next())})};const resolveFetch$1=et=>{let _e;return et?_e=et:typeof fetch>"u"?_e=nodeFetch:_e=fetch,(...tt)=>_e(...tt)},resolveHeadersConstructor=()=>typeof Headers>"u"?Headers$1:Headers,fetchWithAuth=(et,_e,tt)=>{const st=resolveFetch$1(tt),rt=resolveHeadersConstructor();return(nt,it)=>__awaiter$2(void 0,void 0,void 0,function*(){var ot;const at=(ot=yield _e())!==null&&ot!==void 0?ot:et;let lt=new rt(it==null?void 0:it.headers);return lt.has("apikey")||lt.set("apikey",et),lt.has("Authorization")||lt.set("Authorization",`Bearer ${at}`),st(nt,Object.assign(Object.assign({},it),{headers:lt}))})};var __awaiter$1=function(et,_e,tt,st){function rt(nt){return nt instanceof tt?nt:new tt(function(it){it(nt)})}return new(tt||(tt=Promise))(function(nt,it){function ot(ct){try{lt(st.next(ct))}catch(ut){it(ut)}}function at(ct){try{lt(st.throw(ct))}catch(ut){it(ut)}}function lt(ct){ct.done?nt(ct.value):rt(ct.value).then(ot,at)}lt((st=st.apply(et,_e||[])).next())})};function stripTrailingSlash(et){return et.replace(/\/$/,"")}function applySettingDefaults(et,_e){const{db:tt,auth:st,realtime:rt,global:nt}=et,{db:it,auth:ot,realtime:at,global:lt}=_e,ct={db:Object.assign(Object.assign({},it),tt),auth:Object.assign(Object.assign({},ot),st),realtime:Object.assign(Object.assign({},at),rt),global:Object.assign(Object.assign({},lt),nt),accessToken:()=>__awaiter$1(this,void 0,void 0,function*(){return""})};return et.accessToken?ct.accessToken=et.accessToken:delete ct.accessToken,ct}const version$1="2.69.1",AUTO_REFRESH_TICK_DURATION_MS=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3,EXPIRY_MARGIN_MS=AUTO_REFRESH_TICK_THRESHOLD*AUTO_REFRESH_TICK_DURATION_MS,GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${version$1}`},API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BASE64URL_REGEX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JWKS_TTL=6e5;class AuthError extends Error{constructor(_e,tt,st){super(_e),this.__isAuthError=!0,this.name="AuthError",this.status=tt,this.code=st}}function isAuthError(et){return typeof et=="object"&&et!==null&&"__isAuthError"in et}class AuthApiError extends AuthError{constructor(_e,tt,st){super(_e,tt,st),this.name="AuthApiError",this.status=tt,this.code=st}}function isAuthApiError(et){return isAuthError(et)&&et.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(_e,tt){super(_e),this.name="AuthUnknownError",this.originalError=tt}}class CustomAuthError extends AuthError{constructor(_e,tt,st,rt){super(_e,st,rt),this.name=tt,this.status=st}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(et){return isAuthError(et)&&et.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(_e){super(_e,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(_e,tt=null){super(_e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=tt}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(et){return isAuthError(et)&&et.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(_e,tt=null){super(_e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=tt}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends CustomAuthError{constructor(_e,tt){super(_e,"AuthRetryableFetchError",tt,void 0)}}function isAuthRetryableFetchError(et){return isAuthError(et)&&et.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(_e,tt,st){super(_e,"AuthWeakPasswordError",tt,"weak_password"),this.reasons=st}}class AuthInvalidJwtError extends CustomAuthError{constructor(_e){super(_e,"AuthInvalidJwtError",400,"invalid_jwt")}}const TO_BASE64URL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IGNORE_BASE64URL=` 	
\r=`.split(""),FROM_BASE64URL=(()=>{const et=new Array(128);for(let _e=0;_e<et.length;_e+=1)et[_e]=-1;for(let _e=0;_e<IGNORE_BASE64URL.length;_e+=1)et[IGNORE_BASE64URL[_e].charCodeAt(0)]=-2;for(let _e=0;_e<TO_BASE64URL.length;_e+=1)et[TO_BASE64URL[_e].charCodeAt(0)]=_e;return et})();function byteFromBase64URL(et,_e,tt){const st=FROM_BASE64URL[et];if(st>-1)for(_e.queue=_e.queue<<6|st,_e.queuedBits+=6;_e.queuedBits>=8;)tt(_e.queue>>_e.queuedBits-8&255),_e.queuedBits-=8;else{if(st===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(et)}"`)}}function stringFromBase64URL(et){const _e=[],tt=it=>{_e.push(String.fromCodePoint(it))},st={utf8seq:0,codepoint:0},rt={queue:0,queuedBits:0},nt=it=>{stringFromUTF8(it,st,tt)};for(let it=0;it<et.length;it+=1)byteFromBase64URL(et.charCodeAt(it),rt,nt);return _e.join("")}function codepointToUTF8(et,_e){if(et<=127){_e(et);return}else if(et<=2047){_e(192|et>>6),_e(128|et&63);return}else if(et<=65535){_e(224|et>>12),_e(128|et>>6&63),_e(128|et&63);return}else if(et<=1114111){_e(240|et>>18),_e(128|et>>12&63),_e(128|et>>6&63),_e(128|et&63);return}throw new Error(`Unrecognized Unicode codepoint: ${et.toString(16)}`)}function stringToUTF8(et,_e){for(let tt=0;tt<et.length;tt+=1){let st=et.charCodeAt(tt);if(st>55295&&st<=56319){const rt=(st-55296)*1024&65535;st=(et.charCodeAt(tt+1)-56320&65535|rt)+65536,tt+=1}codepointToUTF8(st,_e)}}function stringFromUTF8(et,_e,tt){if(_e.utf8seq===0){if(et<=127){tt(et);return}for(let st=1;st<6;st+=1)if(!(et>>7-st&1)){_e.utf8seq=st;break}if(_e.utf8seq===2)_e.codepoint=et&31;else if(_e.utf8seq===3)_e.codepoint=et&15;else if(_e.utf8seq===4)_e.codepoint=et&7;else throw new Error("Invalid UTF-8 sequence");_e.utf8seq-=1}else if(_e.utf8seq>0){if(et<=127)throw new Error("Invalid UTF-8 sequence");_e.codepoint=_e.codepoint<<6|et&63,_e.utf8seq-=1,_e.utf8seq===0&&tt(_e.codepoint)}}function base64UrlToUint8Array(et){const _e=[],tt={queue:0,queuedBits:0},st=rt=>{_e.push(rt)};for(let rt=0;rt<et.length;rt+=1)byteFromBase64URL(et.charCodeAt(rt),tt,st);return new Uint8Array(_e)}function stringToUint8Array(et){const _e=[];return stringToUTF8(et,tt=>_e.push(tt)),new Uint8Array(_e)}function expiresAt(et){return Math.round(Date.now()/1e3)+et}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(et){const _e=Math.random()*16|0;return(et=="x"?_e:_e&3|8).toString(16)})}const isBrowser=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const et=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(et,et),globalThis.localStorage.removeItem(et),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(et){const _e={},tt=new URL(et);if(tt.hash&&tt.hash[0]==="#")try{new URLSearchParams(tt.hash.substring(1)).forEach((rt,nt)=>{_e[nt]=rt})}catch{}return tt.searchParams.forEach((st,rt)=>{_e[rt]=st}),_e}const resolveFetch=et=>{let _e;return et?_e=et:typeof fetch>"u"?_e=(...tt)=>__vitePreload(async()=>{const{default:st}=await Promise.resolve().then(()=>browser);return{default:st}},void 0).then(({default:st})=>st(...tt)):_e=fetch,(...tt)=>_e(...tt)},looksLikeFetchResponse=et=>typeof et=="object"&&et!==null&&"status"in et&&"ok"in et&&"json"in et&&typeof et.json=="function",setItemAsync=async(et,_e,tt)=>{await et.setItem(_e,JSON.stringify(tt))},getItemAsync=async(et,_e)=>{const tt=await et.getItem(_e);if(!tt)return null;try{return JSON.parse(tt)}catch{return tt}},removeItemAsync=async(et,_e)=>{await et.removeItem(_e)};class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((_e,tt)=>{this.resolve=_e,this.reject=tt})}}Deferred.promiseConstructor=Promise;function decodeJWT(et){const _e=et.split(".");if(_e.length!==3)throw new AuthInvalidJwtError("Invalid JWT structure");for(let st=0;st<_e.length;st++)if(!BASE64URL_REGEX.test(_e[st]))throw new AuthInvalidJwtError("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(_e[0])),payload:JSON.parse(stringFromBase64URL(_e[1])),signature:base64UrlToUint8Array(_e[2]),raw:{header:_e[0],payload:_e[1]}}}async function sleep(et){return await new Promise(_e=>{setTimeout(()=>_e(null),et)})}function retryable(et,_e){return new Promise((st,rt)=>{(async()=>{for(let nt=0;nt<1/0;nt++)try{const it=await et(nt);if(!_e(nt,null,it)){st(it);return}}catch(it){if(!_e(nt,it)){rt(it);return}}})()})}function dec2hex(et){return("0"+et.toString(16)).substr(-2)}function generatePKCEVerifier(){const _e=new Uint32Array(56);if(typeof crypto>"u"){const tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",st=tt.length;let rt="";for(let nt=0;nt<56;nt++)rt+=tt.charAt(Math.floor(Math.random()*st));return rt}return crypto.getRandomValues(_e),Array.from(_e,dec2hex).join("")}async function sha256(et){const tt=new TextEncoder().encode(et),st=await crypto.subtle.digest("SHA-256",tt),rt=new Uint8Array(st);return Array.from(rt).map(nt=>String.fromCharCode(nt)).join("")}async function generatePKCEChallenge(et){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),et;const tt=await sha256(et);return btoa(tt).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function getCodeChallengeAndMethod(et,_e,tt=!1){const st=generatePKCEVerifier();let rt=st;tt&&(rt+="/PASSWORD_RECOVERY"),await setItemAsync(et,`${_e}-code-verifier`,rt);const nt=await generatePKCEChallenge(st);return[nt,st===nt?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(et){const _e=et.headers.get(API_VERSION_HEADER_NAME);if(!_e||!_e.match(API_VERSION_REGEX))return null;try{return new Date(`${_e}T00:00:00.0Z`)}catch{return null}}function validateExp(et){if(!et)throw new Error("Missing exp claim");const _e=Math.floor(Date.now()/1e3);if(et<=_e)throw new Error("JWT has expired")}function getAlgorithm(et){switch(et){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var __rest$1=function(et,_e){var tt={};for(var st in et)Object.prototype.hasOwnProperty.call(et,st)&&_e.indexOf(st)<0&&(tt[st]=et[st]);if(et!=null&&typeof Object.getOwnPropertySymbols=="function")for(var rt=0,st=Object.getOwnPropertySymbols(et);rt<st.length;rt++)_e.indexOf(st[rt])<0&&Object.prototype.propertyIsEnumerable.call(et,st[rt])&&(tt[st[rt]]=et[st[rt]]);return tt};const _getErrorMessage=et=>et.msg||et.message||et.error_description||et.error||JSON.stringify(et),NETWORK_ERROR_CODES=[502,503,504];async function handleError(et){var _e;if(!looksLikeFetchResponse(et))throw new AuthRetryableFetchError(_getErrorMessage(et),0);if(NETWORK_ERROR_CODES.includes(et.status))throw new AuthRetryableFetchError(_getErrorMessage(et),et.status);let tt;try{tt=await et.json()}catch(nt){throw new AuthUnknownError(_getErrorMessage(nt),nt)}let st;const rt=parseResponseAPIVersion(et);if(rt&&rt.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof tt=="object"&&tt&&typeof tt.code=="string"?st=tt.code:typeof tt=="object"&&tt&&typeof tt.error_code=="string"&&(st=tt.error_code),st){if(st==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(tt),et.status,((_e=tt.weak_password)===null||_e===void 0?void 0:_e.reasons)||[]);if(st==="session_not_found")throw new AuthSessionMissingError}else if(typeof tt=="object"&&tt&&typeof tt.weak_password=="object"&&tt.weak_password&&Array.isArray(tt.weak_password.reasons)&&tt.weak_password.reasons.length&&tt.weak_password.reasons.reduce((nt,it)=>nt&&typeof it=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(tt),et.status,tt.weak_password.reasons);throw new AuthApiError(_getErrorMessage(tt),et.status||500,st)}const _getRequestParams=(et,_e,tt,st)=>{const rt={method:et,headers:(_e==null?void 0:_e.headers)||{}};return et==="GET"?rt:(rt.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},_e==null?void 0:_e.headers),rt.body=JSON.stringify(st),Object.assign(Object.assign({},rt),tt))};async function _request(et,_e,tt,st){var rt;const nt=Object.assign({},st==null?void 0:st.headers);nt[API_VERSION_HEADER_NAME]||(nt[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),st!=null&&st.jwt&&(nt.Authorization=`Bearer ${st.jwt}`);const it=(rt=st==null?void 0:st.query)!==null&&rt!==void 0?rt:{};st!=null&&st.redirectTo&&(it.redirect_to=st.redirectTo);const ot=Object.keys(it).length?"?"+new URLSearchParams(it).toString():"",at=await _handleRequest(et,_e,tt+ot,{headers:nt,noResolveJson:st==null?void 0:st.noResolveJson},{},st==null?void 0:st.body);return st!=null&&st.xform?st==null?void 0:st.xform(at):{data:Object.assign({},at),error:null}}async function _handleRequest(et,_e,tt,st,rt,nt){const it=_getRequestParams(_e,st,rt,nt);let ot;try{ot=await et(tt,Object.assign({},it))}catch(at){throw console.error(at),new AuthRetryableFetchError(_getErrorMessage(at),0)}if(ot.ok||await handleError(ot),st!=null&&st.noResolveJson)return ot;try{return await ot.json()}catch(at){await handleError(at)}}function _sessionResponse(et){var _e;let tt=null;hasSession(et)&&(tt=Object.assign({},et),et.expires_at||(tt.expires_at=expiresAt(et.expires_in)));const st=(_e=et.user)!==null&&_e!==void 0?_e:et;return{data:{session:tt,user:st},error:null}}function _sessionResponsePassword(et){const _e=_sessionResponse(et);return!_e.error&&et.weak_password&&typeof et.weak_password=="object"&&Array.isArray(et.weak_password.reasons)&&et.weak_password.reasons.length&&et.weak_password.message&&typeof et.weak_password.message=="string"&&et.weak_password.reasons.reduce((tt,st)=>tt&&typeof st=="string",!0)&&(_e.data.weak_password=et.weak_password),_e}function _userResponse(et){var _e;return{data:{user:(_e=et.user)!==null&&_e!==void 0?_e:et},error:null}}function _ssoResponse(et){return{data:et,error:null}}function _generateLinkResponse(et){const{action_link:_e,email_otp:tt,hashed_token:st,redirect_to:rt,verification_type:nt}=et,it=__rest$1(et,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),ot={action_link:_e,email_otp:tt,hashed_token:st,redirect_to:rt,verification_type:nt},at=Object.assign({},it);return{data:{properties:ot,user:at},error:null}}function _noResolveJsonResponse(et){return et}function hasSession(et){return et.access_token&&et.refresh_token&&et.expires_in}var __rest=function(et,_e){var tt={};for(var st in et)Object.prototype.hasOwnProperty.call(et,st)&&_e.indexOf(st)<0&&(tt[st]=et[st]);if(et!=null&&typeof Object.getOwnPropertySymbols=="function")for(var rt=0,st=Object.getOwnPropertySymbols(et);rt<st.length;rt++)_e.indexOf(st[rt])<0&&Object.prototype.propertyIsEnumerable.call(et,st[rt])&&(tt[st[rt]]=et[st[rt]]);return tt};class GoTrueAdminApi{constructor({url:_e="",headers:tt={},fetch:st}){this.url=_e,this.headers=tt,this.fetch=resolveFetch(st),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(_e,tt="global"){try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${tt}`,{headers:this.headers,jwt:_e,noResolveJson:!0}),{data:null,error:null}}catch(st){if(isAuthError(st))return{data:null,error:st};throw st}}async inviteUserByEmail(_e,tt={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:_e,data:tt.data},headers:this.headers,redirectTo:tt.redirectTo,xform:_userResponse})}catch(st){if(isAuthError(st))return{data:{user:null},error:st};throw st}}async generateLink(_e){try{const{options:tt}=_e,st=__rest(_e,["options"]),rt=Object.assign(Object.assign({},st),tt);return"newEmail"in st&&(rt.new_email=st==null?void 0:st.newEmail,delete rt.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:rt,headers:this.headers,xform:_generateLinkResponse,redirectTo:tt==null?void 0:tt.redirectTo})}catch(tt){if(isAuthError(tt))return{data:{properties:null,user:null},error:tt};throw tt}}async createUser(_e){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:_e,headers:this.headers,xform:_userResponse})}catch(tt){if(isAuthError(tt))return{data:{user:null},error:tt};throw tt}}async listUsers(_e){var tt,st,rt,nt,it,ot,at;try{const lt={nextPage:null,lastPage:0,total:0},ct=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(st=(tt=_e==null?void 0:_e.page)===null||tt===void 0?void 0:tt.toString())!==null&&st!==void 0?st:"",per_page:(nt=(rt=_e==null?void 0:_e.perPage)===null||rt===void 0?void 0:rt.toString())!==null&&nt!==void 0?nt:""},xform:_noResolveJsonResponse});if(ct.error)throw ct.error;const ut=await ct.json(),dt=(it=ct.headers.get("x-total-count"))!==null&&it!==void 0?it:0,ht=(at=(ot=ct.headers.get("link"))===null||ot===void 0?void 0:ot.split(","))!==null&&at!==void 0?at:[];return ht.length>0&&(ht.forEach(pt=>{const mt=parseInt(pt.split(";")[0].split("=")[1].substring(0,1)),gt=JSON.parse(pt.split(";")[1].split("=")[1]);lt[`${gt}Page`]=mt}),lt.total=parseInt(dt)),{data:Object.assign(Object.assign({},ut),lt),error:null}}catch(lt){if(isAuthError(lt))return{data:{users:[]},error:lt};throw lt}}async getUserById(_e){try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${_e}`,{headers:this.headers,xform:_userResponse})}catch(tt){if(isAuthError(tt))return{data:{user:null},error:tt};throw tt}}async updateUserById(_e,tt){try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${_e}`,{body:tt,headers:this.headers,xform:_userResponse})}catch(st){if(isAuthError(st))return{data:{user:null},error:st};throw st}}async deleteUser(_e,tt=!1){try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${_e}`,{headers:this.headers,body:{should_soft_delete:tt},xform:_userResponse})}catch(st){if(isAuthError(st))return{data:{user:null},error:st};throw st}}async _listFactors(_e){try{const{data:tt,error:st}=await _request(this.fetch,"GET",`${this.url}/admin/users/${_e.userId}/factors`,{headers:this.headers,xform:rt=>({data:{factors:rt},error:null})});return{data:tt,error:st}}catch(tt){if(isAuthError(tt))return{data:null,error:tt};throw tt}}async _deleteFactor(_e){try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${_e.userId}/factors/${_e.id}`,{headers:this.headers}),error:null}}catch(tt){if(isAuthError(tt))return{data:null,error:tt};throw tt}}}const localStorageAdapter={getItem:et=>supportsLocalStorage()?globalThis.localStorage.getItem(et):null,setItem:(et,_e)=>{supportsLocalStorage()&&globalThis.localStorage.setItem(et,_e)},removeItem:et=>{supportsLocalStorage()&&globalThis.localStorage.removeItem(et)}};function memoryLocalStorageAdapter(et={}){return{getItem:_e=>et[_e]||null,setItem:(_e,tt)=>{et[_e]=tt},removeItem:_e=>{delete et[_e]}}}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(_e){super(_e),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(et,_e,tt){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",et,_e);const st=new globalThis.AbortController;return _e>0&&setTimeout(()=>{st.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",et)},_e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(et,_e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:st.signal},async rt=>{if(rt){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",et,rt.name);try{return await tt()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",et,rt.name)}}else{if(_e===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",et),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${et}" immediately failed`);if(internals.debug)try{const nt=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(nt,null,"  "))}catch(nt){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",nt)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await tt()}}))}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lockNoOp(et,_e,tt){return await tt()}class GoTrueClient{constructor(_e){var tt,st;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const rt=Object.assign(Object.assign({},DEFAULT_OPTIONS),_e);if(this.logDebugMessages=!!rt.debug,typeof rt.debug=="function"&&(this.logger=rt.debug),this.persistSession=rt.persistSession,this.storageKey=rt.storageKey,this.autoRefreshToken=rt.autoRefreshToken,this.admin=new GoTrueAdminApi({url:rt.url,headers:rt.headers,fetch:rt.fetch}),this.url=rt.url,this.headers=rt.headers,this.fetch=resolveFetch(rt.fetch),this.lock=rt.lock||lockNoOp,this.detectSessionInUrl=rt.detectSessionInUrl,this.flowType=rt.flowType,this.hasCustomAuthorizationHeader=rt.hasCustomAuthorizationHeader,rt.lock?this.lock=rt.lock:isBrowser()&&(!((tt=globalThis==null?void 0:globalThis.navigator)===null||tt===void 0)&&tt.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?rt.storage?this.storage=rt.storage:supportsLocalStorage()?this.storage=localStorageAdapter:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(nt){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",nt)}(st=this.broadcastChannel)===null||st===void 0||st.addEventListener("message",async nt=>{this._debug("received broadcast notification from other tab or client",nt),await this._notifyAllSubscribers(nt.data.event,nt.data.session,!1)})}this.initialize()}_debug(..._e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${version$1}) ${new Date().toISOString()}`,..._e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var _e;try{const tt=parseParametersFromURL(window.location.href);let st="none";if(this._isImplicitGrantCallback(tt)?st="implicit":await this._isPKCECallback(tt)&&(st="pkce"),isBrowser()&&this.detectSessionInUrl&&st!=="none"){const{data:rt,error:nt}=await this._getSessionFromURL(tt,st);if(nt){if(this._debug("#_initialize()","error detecting session from URL",nt),isAuthImplicitGrantRedirectError(nt)){const at=(_e=nt.details)===null||_e===void 0?void 0:_e.code;if(at==="identity_already_exists"||at==="identity_not_found"||at==="single_identity_not_deletable")return{error:nt}}return await this._removeSession(),{error:nt}}const{session:it,redirectType:ot}=rt;return this._debug("#_initialize()","detected session in URL",it,"redirect type",ot),await this._saveSession(it),setTimeout(async()=>{ot==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",it):await this._notifyAllSubscribers("SIGNED_IN",it)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(tt){return isAuthError(tt)?{error:tt}:{error:new AuthUnknownError("Unexpected error during initialization",tt)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(_e){var tt,st,rt;try{const nt=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(st=(tt=_e==null?void 0:_e.options)===null||tt===void 0?void 0:tt.data)!==null&&st!==void 0?st:{},gotrue_meta_security:{captcha_token:(rt=_e==null?void 0:_e.options)===null||rt===void 0?void 0:rt.captchaToken}},xform:_sessionResponse}),{data:it,error:ot}=nt;if(ot||!it)return{data:{user:null,session:null},error:ot};const at=it.session,lt=it.user;return it.session&&(await this._saveSession(it.session),await this._notifyAllSubscribers("SIGNED_IN",at)),{data:{user:lt,session:at},error:null}}catch(nt){if(isAuthError(nt))return{data:{user:null,session:null},error:nt};throw nt}}async signUp(_e){var tt,st,rt;try{let nt;if("email"in _e){const{email:ct,password:ut,options:dt}=_e;let ht=null,pt=null;this.flowType==="pkce"&&([ht,pt]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),nt=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:dt==null?void 0:dt.emailRedirectTo,body:{email:ct,password:ut,data:(tt=dt==null?void 0:dt.data)!==null&&tt!==void 0?tt:{},gotrue_meta_security:{captcha_token:dt==null?void 0:dt.captchaToken},code_challenge:ht,code_challenge_method:pt},xform:_sessionResponse})}else if("phone"in _e){const{phone:ct,password:ut,options:dt}=_e;nt=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:ct,password:ut,data:(st=dt==null?void 0:dt.data)!==null&&st!==void 0?st:{},channel:(rt=dt==null?void 0:dt.channel)!==null&&rt!==void 0?rt:"sms",gotrue_meta_security:{captcha_token:dt==null?void 0:dt.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:it,error:ot}=nt;if(ot||!it)return{data:{user:null,session:null},error:ot};const at=it.session,lt=it.user;return it.session&&(await this._saveSession(it.session),await this._notifyAllSubscribers("SIGNED_IN",at)),{data:{user:lt,session:at},error:null}}catch(nt){if(isAuthError(nt))return{data:{user:null,session:null},error:nt};throw nt}}async signInWithPassword(_e){try{let tt;if("email"in _e){const{email:nt,password:it,options:ot}=_e;tt=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:nt,password:it,gotrue_meta_security:{captcha_token:ot==null?void 0:ot.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in _e){const{phone:nt,password:it,options:ot}=_e;tt=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:nt,password:it,gotrue_meta_security:{captcha_token:ot==null?void 0:ot.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:st,error:rt}=tt;return rt?{data:{user:null,session:null},error:rt}:!st||!st.session||!st.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(st.session&&(await this._saveSession(st.session),await this._notifyAllSubscribers("SIGNED_IN",st.session)),{data:Object.assign({user:st.user,session:st.session},st.weak_password?{weakPassword:st.weak_password}:null),error:rt})}catch(tt){if(isAuthError(tt))return{data:{user:null,session:null},error:tt};throw tt}}async signInWithOAuth(_e){var tt,st,rt,nt;return await this._handleProviderSignIn(_e.provider,{redirectTo:(tt=_e.options)===null||tt===void 0?void 0:tt.redirectTo,scopes:(st=_e.options)===null||st===void 0?void 0:st.scopes,queryParams:(rt=_e.options)===null||rt===void 0?void 0:rt.queryParams,skipBrowserRedirect:(nt=_e.options)===null||nt===void 0?void 0:nt.skipBrowserRedirect})}async exchangeCodeForSession(_e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(_e))}async _exchangeCodeForSession(_e){const tt=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[st,rt]=(tt??"").split("/");try{const{data:nt,error:it}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:_e,code_verifier:st},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),it)throw it;return!nt||!nt.session||!nt.user?{data:{user:null,session:null,redirectType:null},error:new AuthInvalidTokenResponseError}:(nt.session&&(await this._saveSession(nt.session),await this._notifyAllSubscribers("SIGNED_IN",nt.session)),{data:Object.assign(Object.assign({},nt),{redirectType:rt??null}),error:it})}catch(nt){if(isAuthError(nt))return{data:{user:null,session:null,redirectType:null},error:nt};throw nt}}async signInWithIdToken(_e){try{const{options:tt,provider:st,token:rt,access_token:nt,nonce:it}=_e,ot=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:st,id_token:rt,access_token:nt,nonce:it,gotrue_meta_security:{captcha_token:tt==null?void 0:tt.captchaToken}},xform:_sessionResponse}),{data:at,error:lt}=ot;return lt?{data:{user:null,session:null},error:lt}:!at||!at.session||!at.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(at.session&&(await this._saveSession(at.session),await this._notifyAllSubscribers("SIGNED_IN",at.session)),{data:at,error:lt})}catch(tt){if(isAuthError(tt))return{data:{user:null,session:null},error:tt};throw tt}}async signInWithOtp(_e){var tt,st,rt,nt,it;try{if("email"in _e){const{email:ot,options:at}=_e;let lt=null,ct=null;this.flowType==="pkce"&&([lt,ct]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:ut}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:ot,data:(tt=at==null?void 0:at.data)!==null&&tt!==void 0?tt:{},create_user:(st=at==null?void 0:at.shouldCreateUser)!==null&&st!==void 0?st:!0,gotrue_meta_security:{captcha_token:at==null?void 0:at.captchaToken},code_challenge:lt,code_challenge_method:ct},redirectTo:at==null?void 0:at.emailRedirectTo});return{data:{user:null,session:null},error:ut}}if("phone"in _e){const{phone:ot,options:at}=_e,{data:lt,error:ct}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:ot,data:(rt=at==null?void 0:at.data)!==null&&rt!==void 0?rt:{},create_user:(nt=at==null?void 0:at.shouldCreateUser)!==null&&nt!==void 0?nt:!0,gotrue_meta_security:{captcha_token:at==null?void 0:at.captchaToken},channel:(it=at==null?void 0:at.channel)!==null&&it!==void 0?it:"sms"}});return{data:{user:null,session:null,messageId:lt==null?void 0:lt.message_id},error:ct}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(ot){if(isAuthError(ot))return{data:{user:null,session:null},error:ot};throw ot}}async verifyOtp(_e){var tt,st;try{let rt,nt;"options"in _e&&(rt=(tt=_e.options)===null||tt===void 0?void 0:tt.redirectTo,nt=(st=_e.options)===null||st===void 0?void 0:st.captchaToken);const{data:it,error:ot}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},_e),{gotrue_meta_security:{captcha_token:nt}}),redirectTo:rt,xform:_sessionResponse});if(ot)throw ot;if(!it)throw new Error("An error occurred on token verification.");const at=it.session,lt=it.user;return at!=null&&at.access_token&&(await this._saveSession(at),await this._notifyAllSubscribers(_e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",at)),{data:{user:lt,session:at},error:null}}catch(rt){if(isAuthError(rt))return{data:{user:null,session:null},error:rt};throw rt}}async signInWithSSO(_e){var tt,st,rt;try{let nt=null,it=null;return this.flowType==="pkce"&&([nt,it]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in _e?{provider_id:_e.providerId}:null),"domain"in _e?{domain:_e.domain}:null),{redirect_to:(st=(tt=_e.options)===null||tt===void 0?void 0:tt.redirectTo)!==null&&st!==void 0?st:void 0}),!((rt=_e==null?void 0:_e.options)===null||rt===void 0)&&rt.captchaToken?{gotrue_meta_security:{captcha_token:_e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:nt,code_challenge_method:it}),headers:this.headers,xform:_ssoResponse})}catch(nt){if(isAuthError(nt))return{data:null,error:nt};throw nt}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async _e=>{const{data:{session:tt},error:st}=_e;if(st)throw st;if(!tt)throw new AuthSessionMissingError;const{error:rt}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:tt.access_token});return{data:{user:null,session:null},error:rt}})}catch(_e){if(isAuthError(_e))return{data:{user:null,session:null},error:_e};throw _e}}async resend(_e){try{const tt=`${this.url}/resend`;if("email"in _e){const{email:st,type:rt,options:nt}=_e,{error:it}=await _request(this.fetch,"POST",tt,{headers:this.headers,body:{email:st,type:rt,gotrue_meta_security:{captcha_token:nt==null?void 0:nt.captchaToken}},redirectTo:nt==null?void 0:nt.emailRedirectTo});return{data:{user:null,session:null},error:it}}else if("phone"in _e){const{phone:st,type:rt,options:nt}=_e,{data:it,error:ot}=await _request(this.fetch,"POST",tt,{headers:this.headers,body:{phone:st,type:rt,gotrue_meta_security:{captcha_token:nt==null?void 0:nt.captchaToken}}});return{data:{user:null,session:null,messageId:it==null?void 0:it.message_id},error:ot}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(tt){if(isAuthError(tt))return{data:{user:null,session:null},error:tt};throw tt}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async tt=>tt))}async _acquireLock(_e,tt){this._debug("#_acquireLock","begin",_e);try{if(this.lockAcquired){const st=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),rt=(async()=>(await st,await tt()))();return this.pendingInLock.push((async()=>{try{await rt}catch{}})()),rt}return await this.lock(`lock:${this.storageKey}`,_e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const st=tt();for(this.pendingInLock.push((async()=>{try{await st}catch{}})()),await st;this.pendingInLock.length;){const rt=[...this.pendingInLock];await Promise.all(rt),this.pendingInLock.splice(0,rt.length)}return await st}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(_e){this._debug("#_useSession","begin");try{const tt=await this.__loadSession();return await _e(tt)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let _e=null;const tt=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",tt),tt!==null&&(this._isValidSession(tt)?_e=tt:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!_e)return{data:{session:null},error:null};const st=_e.expires_at?_e.expires_at*1e3-Date.now()<EXPIRY_MARGIN_MS:!1;if(this._debug("#__loadSession()",`session has${st?"":" not"} expired`,"expires_at",_e.expires_at),!st){if(this.storage.isServer){let it=this.suppressGetSessionWarning;_e=new Proxy(_e,{get:(at,lt,ct)=>(!it&&lt==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),it=!0,this.suppressGetSessionWarning=!0),Reflect.get(at,lt,ct))})}return{data:{session:_e},error:null}}const{session:rt,error:nt}=await this._callRefreshToken(_e.refresh_token);return nt?{data:{session:null},error:nt}:{data:{session:rt},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(_e){return _e?await this._getUser(_e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(_e){try{return _e?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:_e,xform:_userResponse}):await this._useSession(async tt=>{var st,rt,nt;const{data:it,error:ot}=tt;if(ot)throw ot;return!(!((st=it.session)===null||st===void 0)&&st.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(nt=(rt=it.session)===null||rt===void 0?void 0:rt.access_token)!==null&&nt!==void 0?nt:void 0,xform:_userResponse})})}catch(tt){if(isAuthError(tt))return isAuthSessionMissingError(tt)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:tt};throw tt}}async updateUser(_e,tt={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(_e,tt))}async _updateUser(_e,tt={}){try{return await this._useSession(async st=>{const{data:rt,error:nt}=st;if(nt)throw nt;if(!rt.session)throw new AuthSessionMissingError;const it=rt.session;let ot=null,at=null;this.flowType==="pkce"&&_e.email!=null&&([ot,at]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:lt,error:ct}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:tt==null?void 0:tt.emailRedirectTo,body:Object.assign(Object.assign({},_e),{code_challenge:ot,code_challenge_method:at}),jwt:it.access_token,xform:_userResponse});if(ct)throw ct;return it.user=lt.user,await this._saveSession(it),await this._notifyAllSubscribers("USER_UPDATED",it),{data:{user:it.user},error:null}})}catch(st){if(isAuthError(st))return{data:{user:null},error:st};throw st}}async setSession(_e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(_e))}async _setSession(_e){try{if(!_e.access_token||!_e.refresh_token)throw new AuthSessionMissingError;const tt=Date.now()/1e3;let st=tt,rt=!0,nt=null;const{payload:it}=decodeJWT(_e.access_token);if(it.exp&&(st=it.exp,rt=st<=tt),rt){const{session:ot,error:at}=await this._callRefreshToken(_e.refresh_token);if(at)return{data:{user:null,session:null},error:at};if(!ot)return{data:{user:null,session:null},error:null};nt=ot}else{const{data:ot,error:at}=await this._getUser(_e.access_token);if(at)throw at;nt={access_token:_e.access_token,refresh_token:_e.refresh_token,user:ot.user,token_type:"bearer",expires_in:st-tt,expires_at:st},await this._saveSession(nt),await this._notifyAllSubscribers("SIGNED_IN",nt)}return{data:{user:nt.user,session:nt},error:null}}catch(tt){if(isAuthError(tt))return{data:{session:null,user:null},error:tt};throw tt}}async refreshSession(_e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(_e))}async _refreshSession(_e){try{return await this._useSession(async tt=>{var st;if(!_e){const{data:it,error:ot}=tt;if(ot)throw ot;_e=(st=it.session)!==null&&st!==void 0?st:void 0}if(!(_e!=null&&_e.refresh_token))throw new AuthSessionMissingError;const{session:rt,error:nt}=await this._callRefreshToken(_e.refresh_token);return nt?{data:{user:null,session:null},error:nt}:rt?{data:{user:rt.user,session:rt},error:null}:{data:{user:null,session:null},error:null}})}catch(tt){if(isAuthError(tt))return{data:{user:null,session:null},error:tt};throw tt}}async _getSessionFromURL(_e,tt){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(_e.error||_e.error_description||_e.error_code)throw new AuthImplicitGrantRedirectError(_e.error_description||"Error in URL with unspecified error_description",{error:_e.error||"unspecified_error",code:_e.error_code||"unspecified_code"});switch(tt){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(tt==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!_e.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:xt,error:yt}=await this._exchangeCodeForSession(_e.code);if(yt)throw yt;const bt=new URL(window.location.href);return bt.searchParams.delete("code"),window.history.replaceState(window.history.state,"",bt.toString()),{data:{session:xt.session,redirectType:null},error:null}}const{provider_token:st,provider_refresh_token:rt,access_token:nt,refresh_token:it,expires_in:ot,expires_at:at,token_type:lt}=_e;if(!nt||!ot||!it||!lt)throw new AuthImplicitGrantRedirectError("No session defined in URL");const ct=Math.round(Date.now()/1e3),ut=parseInt(ot);let dt=ct+ut;at&&(dt=parseInt(at));const ht=dt-ct;ht*1e3<=AUTO_REFRESH_TICK_DURATION_MS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${ht}s, should have been closer to ${ut}s`);const pt=dt-ut;ct-pt>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",pt,dt,ct):ct-pt<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",pt,dt,ct);const{data:mt,error:gt}=await this._getUser(nt);if(gt)throw gt;const ft={provider_token:st,provider_refresh_token:rt,access_token:nt,expires_in:ut,expires_at:dt,refresh_token:it,token_type:lt,user:mt.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:ft,redirectType:_e.type},error:null}}catch(st){if(isAuthError(st))return{data:{session:null,redirectType:null},error:st};throw st}}_isImplicitGrantCallback(_e){return!!(_e.access_token||_e.error_description)}async _isPKCECallback(_e){const tt=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(_e.code&&tt)}async signOut(_e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(_e))}async _signOut({scope:_e}={scope:"global"}){return await this._useSession(async tt=>{var st;const{data:rt,error:nt}=tt;if(nt)return{error:nt};const it=(st=rt.session)===null||st===void 0?void 0:st.access_token;if(it){const{error:ot}=await this.admin.signOut(it,_e);if(ot&&!(isAuthApiError(ot)&&(ot.status===404||ot.status===401||ot.status===403)))return{error:ot}}return _e!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(_e){const tt=uuid(),st={id:tt,callback:_e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",tt),this.stateChangeEmitters.delete(tt)}};return this._debug("#onAuthStateChange()","registered callback with id",tt),this.stateChangeEmitters.set(tt,st),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(tt)})))(),{data:{subscription:st}}}async _emitInitialSession(_e){return await this._useSession(async tt=>{var st,rt;try{const{data:{session:nt},error:it}=tt;if(it)throw it;await((st=this.stateChangeEmitters.get(_e))===null||st===void 0?void 0:st.callback("INITIAL_SESSION",nt)),this._debug("INITIAL_SESSION","callback id",_e,"session",nt)}catch(nt){await((rt=this.stateChangeEmitters.get(_e))===null||rt===void 0?void 0:rt.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",_e,"error",nt),console.error(nt)}})}async resetPasswordForEmail(_e,tt={}){let st=null,rt=null;this.flowType==="pkce"&&([st,rt]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:_e,code_challenge:st,code_challenge_method:rt,gotrue_meta_security:{captcha_token:tt.captchaToken}},headers:this.headers,redirectTo:tt.redirectTo})}catch(nt){if(isAuthError(nt))return{data:null,error:nt};throw nt}}async getUserIdentities(){var _e;try{const{data:tt,error:st}=await this.getUser();if(st)throw st;return{data:{identities:(_e=tt.user.identities)!==null&&_e!==void 0?_e:[]},error:null}}catch(tt){if(isAuthError(tt))return{data:null,error:tt};throw tt}}async linkIdentity(_e){var tt;try{const{data:st,error:rt}=await this._useSession(async nt=>{var it,ot,at,lt,ct;const{data:ut,error:dt}=nt;if(dt)throw dt;const ht=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,_e.provider,{redirectTo:(it=_e.options)===null||it===void 0?void 0:it.redirectTo,scopes:(ot=_e.options)===null||ot===void 0?void 0:ot.scopes,queryParams:(at=_e.options)===null||at===void 0?void 0:at.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",ht,{headers:this.headers,jwt:(ct=(lt=ut.session)===null||lt===void 0?void 0:lt.access_token)!==null&&ct!==void 0?ct:void 0})});if(rt)throw rt;return isBrowser()&&!(!((tt=_e.options)===null||tt===void 0)&&tt.skipBrowserRedirect)&&window.location.assign(st==null?void 0:st.url),{data:{provider:_e.provider,url:st==null?void 0:st.url},error:null}}catch(st){if(isAuthError(st))return{data:{provider:_e.provider,url:null},error:st};throw st}}async unlinkIdentity(_e){try{return await this._useSession(async tt=>{var st,rt;const{data:nt,error:it}=tt;if(it)throw it;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${_e.identity_id}`,{headers:this.headers,jwt:(rt=(st=nt.session)===null||st===void 0?void 0:st.access_token)!==null&&rt!==void 0?rt:void 0})})}catch(tt){if(isAuthError(tt))return{data:null,error:tt};throw tt}}async _refreshAccessToken(_e){const tt=`#_refreshAccessToken(${_e.substring(0,5)}...)`;this._debug(tt,"begin");try{const st=Date.now();return await retryable(async rt=>(rt>0&&await sleep(200*Math.pow(2,rt-1)),this._debug(tt,"refreshing attempt",rt),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:_e},headers:this.headers,xform:_sessionResponse})),(rt,nt)=>{const it=200*Math.pow(2,rt);return nt&&isAuthRetryableFetchError(nt)&&Date.now()+it-st<AUTO_REFRESH_TICK_DURATION_MS})}catch(st){if(this._debug(tt,"error",st),isAuthError(st))return{data:{session:null,user:null},error:st};throw st}finally{this._debug(tt,"end")}}_isValidSession(_e){return typeof _e=="object"&&_e!==null&&"access_token"in _e&&"refresh_token"in _e&&"expires_at"in _e}async _handleProviderSignIn(_e,tt){const st=await this._getUrlForProvider(`${this.url}/authorize`,_e,{redirectTo:tt.redirectTo,scopes:tt.scopes,queryParams:tt.queryParams});return this._debug("#_handleProviderSignIn()","provider",_e,"options",tt,"url",st),isBrowser()&&!tt.skipBrowserRedirect&&window.location.assign(st),{data:{provider:_e,url:st},error:null}}async _recoverAndRefresh(){var _e;const tt="#_recoverAndRefresh()";this._debug(tt,"begin");try{const st=await getItemAsync(this.storage,this.storageKey);if(this._debug(tt,"session from storage",st),!this._isValidSession(st)){this._debug(tt,"session is not valid"),st!==null&&await this._removeSession();return}const rt=((_e=st.expires_at)!==null&&_e!==void 0?_e:1/0)*1e3-Date.now()<EXPIRY_MARGIN_MS;if(this._debug(tt,`session has${rt?"":" not"} expired with margin of ${EXPIRY_MARGIN_MS}s`),rt){if(this.autoRefreshToken&&st.refresh_token){const{error:nt}=await this._callRefreshToken(st.refresh_token);nt&&(console.error(nt),isAuthRetryableFetchError(nt)||(this._debug(tt,"refresh failed with a non-retryable error, removing the session",nt),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",st)}catch(st){this._debug(tt,"error",st),console.error(st);return}finally{this._debug(tt,"end")}}async _callRefreshToken(_e){var tt,st;if(!_e)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const rt=`#_callRefreshToken(${_e.substring(0,5)}...)`;this._debug(rt,"begin");try{this.refreshingDeferred=new Deferred;const{data:nt,error:it}=await this._refreshAccessToken(_e);if(it)throw it;if(!nt.session)throw new AuthSessionMissingError;await this._saveSession(nt.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",nt.session);const ot={session:nt.session,error:null};return this.refreshingDeferred.resolve(ot),ot}catch(nt){if(this._debug(rt,"error",nt),isAuthError(nt)){const it={session:null,error:nt};return isAuthRetryableFetchError(nt)||await this._removeSession(),(tt=this.refreshingDeferred)===null||tt===void 0||tt.resolve(it),it}throw(st=this.refreshingDeferred)===null||st===void 0||st.reject(nt),nt}finally{this.refreshingDeferred=null,this._debug(rt,"end")}}async _notifyAllSubscribers(_e,tt,st=!0){const rt=`#_notifyAllSubscribers(${_e})`;this._debug(rt,"begin",tt,`broadcast = ${st}`);try{this.broadcastChannel&&st&&this.broadcastChannel.postMessage({event:_e,session:tt});const nt=[],it=Array.from(this.stateChangeEmitters.values()).map(async ot=>{try{await ot.callback(_e,tt)}catch(at){nt.push(at)}});if(await Promise.all(it),nt.length>0){for(let ot=0;ot<nt.length;ot+=1)console.error(nt[ot]);throw nt[0]}}finally{this._debug(rt,"end")}}async _saveSession(_e){this._debug("#_saveSession()",_e),this.suppressGetSessionWarning=!0,await setItemAsync(this.storage,this.storageKey,_e)}async _removeSession(){this._debug("#_removeSession()"),await removeItemAsync(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const _e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{_e&&isBrowser()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",_e)}catch(tt){console.error("removing visibilitychange callback failed",tt)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const _e=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION_MS);this.autoRefreshTicker=_e,_e&&typeof _e=="object"&&typeof _e.unref=="function"?_e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(_e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const _e=this.autoRefreshTicker;this.autoRefreshTicker=null,_e&&clearInterval(_e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const _e=Date.now();try{return await this._useSession(async tt=>{const{data:{session:st}}=tt;if(!st||!st.refresh_token||!st.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const rt=Math.floor((st.expires_at*1e3-_e)/AUTO_REFRESH_TICK_DURATION_MS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${rt} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),rt<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(st.refresh_token)})}catch(tt){console.error("Auto refresh tick failed with error. This is likely a transient error.",tt)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(_e){if(_e.isAcquireTimeout||_e instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw _e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(_e){console.error("_handleVisibilityChange",_e)}}async _onVisibilityChanged(_e){const tt=`#_onVisibilityChanged(${_e})`;this._debug(tt,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),_e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(tt,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(_e,tt,st){const rt=[`provider=${encodeURIComponent(tt)}`];if(st!=null&&st.redirectTo&&rt.push(`redirect_to=${encodeURIComponent(st.redirectTo)}`),st!=null&&st.scopes&&rt.push(`scopes=${encodeURIComponent(st.scopes)}`),this.flowType==="pkce"){const[nt,it]=await getCodeChallengeAndMethod(this.storage,this.storageKey),ot=new URLSearchParams({code_challenge:`${encodeURIComponent(nt)}`,code_challenge_method:`${encodeURIComponent(it)}`});rt.push(ot.toString())}if(st!=null&&st.queryParams){const nt=new URLSearchParams(st.queryParams);rt.push(nt.toString())}return st!=null&&st.skipBrowserRedirect&&rt.push(`skip_http_redirect=${st.skipBrowserRedirect}`),`${_e}?${rt.join("&")}`}async _unenroll(_e){try{return await this._useSession(async tt=>{var st;const{data:rt,error:nt}=tt;return nt?{data:null,error:nt}:await _request(this.fetch,"DELETE",`${this.url}/factors/${_e.factorId}`,{headers:this.headers,jwt:(st=rt==null?void 0:rt.session)===null||st===void 0?void 0:st.access_token})})}catch(tt){if(isAuthError(tt))return{data:null,error:tt};throw tt}}async _enroll(_e){try{return await this._useSession(async tt=>{var st,rt;const{data:nt,error:it}=tt;if(it)return{data:null,error:it};const ot=Object.assign({friendly_name:_e.friendlyName,factor_type:_e.factorType},_e.factorType==="phone"?{phone:_e.phone}:{issuer:_e.issuer}),{data:at,error:lt}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:ot,headers:this.headers,jwt:(st=nt==null?void 0:nt.session)===null||st===void 0?void 0:st.access_token});return lt?{data:null,error:lt}:(_e.factorType==="totp"&&(!((rt=at==null?void 0:at.totp)===null||rt===void 0)&&rt.qr_code)&&(at.totp.qr_code=`data:image/svg+xml;utf-8,${at.totp.qr_code}`),{data:at,error:null})})}catch(tt){if(isAuthError(tt))return{data:null,error:tt};throw tt}}async _verify(_e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async tt=>{var st;const{data:rt,error:nt}=tt;if(nt)return{data:null,error:nt};const{data:it,error:ot}=await _request(this.fetch,"POST",`${this.url}/factors/${_e.factorId}/verify`,{body:{code:_e.code,challenge_id:_e.challengeId},headers:this.headers,jwt:(st=rt==null?void 0:rt.session)===null||st===void 0?void 0:st.access_token});return ot?{data:null,error:ot}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+it.expires_in},it)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",it),{data:it,error:ot})})}catch(tt){if(isAuthError(tt))return{data:null,error:tt};throw tt}})}async _challenge(_e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async tt=>{var st;const{data:rt,error:nt}=tt;return nt?{data:null,error:nt}:await _request(this.fetch,"POST",`${this.url}/factors/${_e.factorId}/challenge`,{body:{channel:_e.channel},headers:this.headers,jwt:(st=rt==null?void 0:rt.session)===null||st===void 0?void 0:st.access_token})})}catch(tt){if(isAuthError(tt))return{data:null,error:tt};throw tt}})}async _challengeAndVerify(_e){const{data:tt,error:st}=await this._challenge({factorId:_e.factorId});return st?{data:null,error:st}:await this._verify({factorId:_e.factorId,challengeId:tt.id,code:_e.code})}async _listFactors(){const{data:{user:_e},error:tt}=await this.getUser();if(tt)return{data:null,error:tt};const st=(_e==null?void 0:_e.factors)||[],rt=st.filter(it=>it.factor_type==="totp"&&it.status==="verified"),nt=st.filter(it=>it.factor_type==="phone"&&it.status==="verified");return{data:{all:st,totp:rt,phone:nt},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async _e=>{var tt,st;const{data:{session:rt},error:nt}=_e;if(nt)return{data:null,error:nt};if(!rt)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:it}=decodeJWT(rt.access_token);let ot=null;it.aal&&(ot=it.aal);let at=ot;((st=(tt=rt.user.factors)===null||tt===void 0?void 0:tt.filter(ut=>ut.status==="verified"))!==null&&st!==void 0?st:[]).length>0&&(at="aal2");const ct=it.amr||[];return{data:{currentLevel:ot,nextLevel:at,currentAuthenticationMethods:ct},error:null}}))}async fetchJwk(_e,tt={keys:[]}){let st=tt.keys.find(it=>it.kid===_e);if(st||(st=this.jwks.keys.find(it=>it.kid===_e),st&&this.jwks_cached_at+JWKS_TTL>Date.now()))return st;const{data:rt,error:nt}=await _request(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(nt)throw nt;if(!rt.keys||rt.keys.length===0)throw new AuthInvalidJwtError("JWKS is empty");if(this.jwks=rt,this.jwks_cached_at=Date.now(),st=rt.keys.find(it=>it.kid===_e),!st)throw new AuthInvalidJwtError("No matching signing key found in JWKS");return st}async getClaims(_e,tt={keys:[]}){try{let st=_e;if(!st){const{data:ht,error:pt}=await this.getSession();if(pt||!ht.session)return{data:null,error:pt};st=ht.session.access_token}const{header:rt,payload:nt,signature:it,raw:{header:ot,payload:at}}=decodeJWT(st);if(validateExp(nt.exp),!rt.kid||rt.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:ht}=await this.getUser(st);if(ht)throw ht;return{data:{claims:nt,header:rt,signature:it},error:null}}const lt=getAlgorithm(rt.alg),ct=await this.fetchJwk(rt.kid,tt),ut=await crypto.subtle.importKey("jwk",ct,lt,!0,["verify"]);if(!await crypto.subtle.verify(lt,ut,it,stringToUint8Array(`${ot}.${at}`)))throw new AuthInvalidJwtError("Invalid JWT signature");return{data:{claims:nt,header:rt,signature:it},error:null}}catch(st){if(isAuthError(st))return{data:null,error:st};throw st}}}GoTrueClient.nextInstanceID=0;const AuthClient=GoTrueClient;class SupabaseAuthClient extends AuthClient{constructor(_e){super(_e)}}var __awaiter=function(et,_e,tt,st){function rt(nt){return nt instanceof tt?nt:new tt(function(it){it(nt)})}return new(tt||(tt=Promise))(function(nt,it){function ot(ct){try{lt(st.next(ct))}catch(ut){it(ut)}}function at(ct){try{lt(st.throw(ct))}catch(ut){it(ut)}}function lt(ct){ct.done?nt(ct.value):rt(ct.value).then(ot,at)}lt((st=st.apply(et,_e||[])).next())})};class SupabaseClient{constructor(_e,tt,st){var rt,nt,it;if(this.supabaseUrl=_e,this.supabaseKey=tt,!_e)throw new Error("supabaseUrl is required.");if(!tt)throw new Error("supabaseKey is required.");const ot=stripTrailingSlash(_e);this.realtimeUrl=`${ot}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${ot}/auth/v1`,this.storageUrl=`${ot}/storage/v1`,this.functionsUrl=`${ot}/functions/v1`;const at=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,lt={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},DEFAULT_AUTH_OPTIONS),{storageKey:at}),global:DEFAULT_GLOBAL_OPTIONS},ct=applySettingDefaults(st??{},lt);this.storageKey=(rt=ct.auth.storageKey)!==null&&rt!==void 0?rt:"",this.headers=(nt=ct.global.headers)!==null&&nt!==void 0?nt:{},ct.accessToken?(this.accessToken=ct.accessToken,this.auth=new Proxy({},{get:(ut,dt)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(dt)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((it=ct.auth)!==null&&it!==void 0?it:{},this.headers,ct.global.fetch),this.fetch=fetchWithAuth(tt,this._getAccessToken.bind(this),ct.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},ct.realtime)),this.rest=new PostgrestClient(`${ot}/rest/v1`,{headers:this.headers,schema:ct.db.schema,fetch:this.fetch}),ct.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new StorageClient(this.storageUrl,this.headers,this.fetch)}from(_e){return this.rest.from(_e)}schema(_e){return this.rest.schema(_e)}rpc(_e,tt={},st={}){return this.rest.rpc(_e,tt,st)}channel(_e,tt={config:{}}){return this.realtime.channel(_e,tt)}getChannels(){return this.realtime.getChannels()}removeChannel(_e){return this.realtime.removeChannel(_e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var _e,tt;return __awaiter(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:st}=yield this.auth.getSession();return(tt=(_e=st.session)===null||_e===void 0?void 0:_e.access_token)!==null&&tt!==void 0?tt:null})}_initSupabaseAuthClient({autoRefreshToken:_e,persistSession:tt,detectSessionInUrl:st,storage:rt,storageKey:nt,flowType:it,lock:ot,debug:at},lt,ct){const ut={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl,headers:Object.assign(Object.assign({},ut),lt),storageKey:nt,autoRefreshToken:_e,persistSession:tt,detectSessionInUrl:st,storage:rt,flowType:it,lock:ot,debug:at,fetch:ct,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(_e){return new RealtimeClient(this.realtimeUrl,Object.assign(Object.assign({},_e),{params:Object.assign({apikey:this.supabaseKey},_e==null?void 0:_e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((tt,st)=>{this._handleTokenChanged(tt,"CLIENT",st==null?void 0:st.access_token)})}_handleTokenChanged(_e,tt,st){(_e==="TOKEN_REFRESHED"||_e==="SIGNED_IN")&&this.changedAccessToken!==st?this.changedAccessToken=st:_e==="SIGNED_OUT"&&(this.realtime.setAuth(),tt=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const createClient=(et,_e,tt)=>new SupabaseClient(et,_e,tt),supabaseUrl=void 0,supabaseAnonKey=void 0;throw new Error("Missing Supabase environment variables");const supabase=createClient(supabaseUrl,supabaseAnonKey);function useProducts(){const[et,_e]=reactExports.useState([]),[tt,st]=reactExports.useState(!0),[rt,nt]=reactExports.useState(null),[it,ot]=reactExports.useState(0);reactExports.useEffect(()=>{at()},[]);async function at(){try{st(!0),nt(null);const{count:dt,error:ht}=await supabase.from("products").select("*",{count:"exact",head:!0});if(ht)throw ht;const pt=dt||0;ot(pt),console.log(`Total products in database: ${pt}`);const mt=1e3,gt=Math.ceil(pt/mt);let ft=[];console.log(`Fetching ${pt} products in ${gt} batches of ${mt}`);for(let xt=0;xt<gt;xt++){console.log(`Fetching batch ${xt+1} of ${gt}...`);const yt=xt*mt,bt=yt+mt-1,{data:jt,error:Ct}=await supabase.from("products").select("*").order("created_at",{ascending:!1}).range(yt,bt);if(Ct)throw Ct;ft=[...ft,...jt||[]],console.log(`Fetched ${ft.length} of ${pt} products...`)}console.log(`Successfully fetched all ${ft.length} products`),_e(ft)}catch(dt){console.error("Error fetching products:",dt),nt(dt instanceof Error?dt:new Error("An error occurred fetching products"))}finally{st(!1)}}async function lt(dt){try{const{data:ht,error:pt}=await supabase.from("products").insert(dt).select().single();if(pt)throw pt;return _e(mt=>[ht,...mt]),ht}catch(ht){throw ht instanceof Error?ht:new Error("Failed to add product")}}async function ct(dt,ht){try{const{data:pt,error:mt}=await supabase.from("products").update(ht).eq("id",dt).select().single();if(mt)throw mt;return _e(gt=>gt.map(ft=>ft.id===dt?pt:ft)),pt}catch(pt){throw pt instanceof Error?pt:new Error("Failed to update product")}}async function ut(dt){try{const{error:ht}=await supabase.from("products").delete().eq("id",dt);if(ht)throw ht;_e(pt=>pt.filter(mt=>mt.id!==dt))}catch(ht){throw ht instanceof Error?ht:new Error("Failed to delete product")}}return{products:et,loading:tt,error:rt,totalProductCount:it,addProduct:lt,updateProduct:ct,deleteProduct:ut,refreshProducts:at}}function useSuppliers(){const[et,_e]=reactExports.useState([]),[tt,st]=reactExports.useState(!0),[rt,nt]=reactExports.useState(null);reactExports.useEffect(()=>{it()},[]);async function it(){try{const{data:ct,error:ut}=await supabase.from("suppliers").select("*").order("name");if(ut)throw ut;_e(ct||[])}catch(ct){nt(ct instanceof Error?ct:new Error("An error occurred"))}finally{st(!1)}}async function ot(ct){try{const{data:ut,error:dt}=await supabase.from("suppliers").insert(ct).select().single();if(dt)throw dt;return _e(ht=>[...ht,ut].sort((pt,mt)=>pt.name.localeCompare(mt.name))),ut}catch(ut){throw ut instanceof Error?ut:new Error("Failed to add supplier")}}async function at(ct,ut){try{const{data:dt,error:ht}=await supabase.from("suppliers").update(ut).eq("id",ct).select().single();if(ht)throw ht;return _e(pt=>pt.map(mt=>mt.id===ct?dt:mt).sort((mt,gt)=>mt.name.localeCompare(gt.name))),dt}catch(dt){throw dt instanceof Error?dt:new Error("Failed to update supplier")}}async function lt(ct){try{const{error:ut}=await supabase.from("suppliers").delete().eq("id",ct);if(ut)throw ut;_e(dt=>dt.filter(ht=>ht.id!==ct))}catch(ut){throw ut instanceof Error?ut:new Error("Failed to delete supplier")}}return{suppliers:et,loading:tt,error:rt,addSupplier:ot,updateSupplier:at,deleteSupplier:lt,refreshSuppliers:it}}function useImportHistory(){const[et,_e]=reactExports.useState([]),[tt,st]=reactExports.useState(!0),[rt,nt]=reactExports.useState(null);reactExports.useEffect(()=>{it()},[]);async function it(){try{st(!0);const{data:lt,error:ct}=await supabase.from("import_history").select("*").order("created_at",{ascending:!1});if(ct)throw ct;_e(lt||[])}catch(lt){nt(lt instanceof Error?lt:new Error("An error occurred"))}finally{st(!1)}}async function ot(lt){try{let ct,ut;if(lt.id?{data:ct,error:ut}=await supabase.from("import_history").update(lt).eq("id",lt.id).select().single():{data:ct,error:ut}=await supabase.from("import_history").insert(lt).select().single(),ut)throw ut;return lt.id?_e(dt=>dt.map(ht=>ht.id===ct.id?ct:ht)):_e(dt=>[ct,...dt]),ct}catch(ct){throw ct instanceof Error?ct:new Error("Failed to add import record")}}async function at(lt){try{const{error:ct}=await supabase.from("import_history").delete().eq("id",lt);if(ct)throw ct;_e(ut=>ut.filter(dt=>dt.id!==lt))}catch(ct){throw ct instanceof Error?ct:new Error("Failed to delete import record")}}return{importHistory:et,loading:tt,error:rt,addImportRecord:ot,deleteImportRecord:at,refreshHistory:it}}const AppContext=reactExports.createContext(void 0),AppProvider=({children:et})=>{const{products:_e,loading:tt,error:st,addProduct:rt,refreshProducts:nt,totalProductCount:it}=useProducts(),{suppliers:ot,loading:at,error:lt,addSupplier:ct,updateSupplier:ut,deleteSupplier:dt,refreshSuppliers:ht}=useSuppliers(),pt=reactExports.useMemo(()=>_e.map(Ot=>({id:Ot.id,title:Ot.title,ean:Ot.ean,brand:Ot.brand,salePrice:Ot.sale_price,unitsSold:Ot.units_sold,amazonFee:Ot.amazon_fee,buyBoxPrice:Ot.buy_box_price,category:Ot.category,rating:Ot.rating,reviewCount:Ot.review_count,mpn:Ot.mpn})),[_e]),mt=reactExports.useMemo(()=>ot.map(Ot=>({id:Ot.id,name:Ot.name})),[ot]),[gt,ft]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>{try{const{data:It,error:zt}=await supabase.from("supplier_products").select(`
            *,
            suppliers (
              id,
              name
            )
          `);if(zt)throw zt;ft(It||[])}catch(It){console.error("Error fetching supplier products:",It)}})()},[]);const[xt,yt]=reactExports.useState([]),[bt,jt]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>{try{const{data:It,error:zt}=await supabase.from("custom_attributes").select("*");if(zt)throw zt;const Nt=(It||[]).map(Lt=>({id:Lt.id,name:Lt.name,type:Lt.type,defaultValue:Lt.default_value,required:Lt.required,forType:Lt.for_type,hasColumnMapping:Lt.has_column_mapping||!1}));yt(Nt)}catch(It){console.error("Error fetching custom attributes:",It)}})()},[]),reactExports.useEffect(()=>{(async()=>{try{const{data:It,error:zt}=await supabase.from("custom_attribute_values").select("*");if(zt)throw zt;const Nt=(It||[]).map(Lt=>({attributeId:Lt.attribute_id,entityId:Lt.entity_id,value:Lt.value}));jt(Nt)}catch(It){console.error("Error fetching attribute values:",It)}})()},[]);const Ct=tt||at,St=st||lt,vt=async Ot=>{const It=await rt({title:Ot.title,ean:Ot.ean,brand:Ot.brand,sale_price:Ot.salePrice,units_sold:Ot.unitsSold,amazon_fee:Ot.amazonFee,buy_box_price:Ot.buyBoxPrice,category:Ot.category,rating:Ot.rating,review_count:Ot.reviewCount,mpn:Ot.mpn});return{...It,salePrice:It.sale_price,unitsSold:It.units_sold,amazonFee:It.amazon_fee,buyBoxPrice:It.buy_box_price,reviewCount:It.review_count,mpn:It.mpn}},Et=async Ot=>{try{const It={id:Ot.id,title:Ot.title,ean:Ot.ean,brand:Ot.brand,sale_price:Ot.salePrice,units_sold:Ot.unitsSold,amazon_fee:Ot.amazonFee,buy_box_price:Ot.buyBoxPrice,category:Ot.category,rating:Ot.rating,review_count:Ot.reviewCount,mpn:Ot.mpn,updated_at:new Date().toISOString()},{data:zt,error:Nt}=await supabase.from("products").update(It).eq("id",Ot.id).select().single();if(Nt)throw Nt;if(!zt)throw new Error("Product update failed");return{id:zt.id,title:zt.title,ean:zt.ean,brand:zt.brand,salePrice:zt.sale_price,unitsSold:zt.units_sold,amazonFee:zt.amazon_fee,buyBoxPrice:zt.buy_box_price,category:zt.category,rating:zt.rating,reviewCount:zt.review_count,mpn:zt.mpn}}catch(It){throw console.error("Error updating product:",It),It}},Rt=async Ot=>await ct(Ot),$t=async(Ot,It)=>await ut(Ot,It),At=async Ot=>{await dt(Ot)},Xt=async Ot=>{try{const It=new Date().toISOString(),{data:zt,error:Nt}=await supabase.from("custom_attributes").insert({name:Ot.name,type:Ot.type,default_value:Ot.defaultValue,required:Ot.required,for_type:Ot.forType,created_at:It,updated_at:It,has_column_mapping:!0}).select().single();if(Nt)throw Nt;const Lt={id:zt.id,name:zt.name,type:zt.type,defaultValue:zt.default_value,required:zt.required,forType:zt.for_type,hasColumnMapping:zt.has_column_mapping||!0},Kt=`custom_${Ot.name.toLowerCase().replace(/\s+/g,"_")}`;let Ut="TEXT";switch(Ot.type){case"Number":Ut="NUMERIC";break;case"Date":Ut="TIMESTAMP WITH TIME ZONE";break;case"Yes/No":Ut="BOOLEAN";break;default:Ut="TEXT"}const ss=Ot.forType==="product"?"products":"suppliers";try{await supabase.rpc("execute_sql",{query:`ALTER TABLE ${ss} ADD COLUMN IF NOT EXISTS ${Kt} ${Ut}`}),await supabase.rpc("execute_sql",{query:`CREATE INDEX IF NOT EXISTS idx_${ss}_${Kt} ON ${ss}(${Kt})`})}catch(as){console.error("Error modifying database schema:",as)}return yt([...xt,Lt]),Lt}catch(It){throw console.error("Error adding custom attribute:",It),It}},kt=async(Ot,It)=>{try{const zt=new Date().toISOString(),{data:Nt,error:Lt}=await supabase.from("custom_attributes").update({name:It.name,type:It.type,default_value:It.defaultValue,required:It.required,for_type:It.forType,has_column_mapping:It.hasColumnMapping!==void 0?It.hasColumnMapping:!0,updated_at:zt}).eq("id",Ot).select().single();if(Lt)throw Lt;const Kt={id:Nt.id,name:Nt.name,type:Nt.type,defaultValue:Nt.default_value,required:Nt.required,forType:Nt.for_type,hasColumnMapping:Nt.has_column_mapping||!1};return yt(xt.map(Ut=>Ut.id===Ot?Kt:Ut)),Kt}catch(zt){throw console.error("Error updating custom attribute:",zt),zt}},Zt=async Ot=>{try{const{error:It}=await supabase.from("custom_attributes").delete().eq("id",Ot);if(It)throw It;yt(xt.filter(zt=>zt.id!==Ot))}catch(It){throw console.error("Error deleting custom attribute:",It),It}},Jt=(Ot,It)=>{const zt=xt.find(Kt=>Kt.id===Ot);if(!zt)return null;const Nt=`custom_${zt.name.toLowerCase().replace(/\s+/g,"_")}`;if(zt.forType==="product"){const Kt=_e.find(Ut=>Ut.id===It);if(Kt&&Nt in Kt&&Kt[Nt]!==null)return Kt[Nt]}else if(zt.forType==="supplier"){const Kt=ot.find(Ut=>Ut.id===It);if(Kt&&Nt in Kt&&Kt[Nt]!==null)return Kt[Nt]}const Lt=bt.find(Kt=>Kt.attributeId===Ot&&Kt.entityId===It);return Lt?Lt.value:zt.defaultValue},Yt=async(Ot,It,zt)=>{try{const Nt=new Date().toISOString(),Lt=xt.find(ss=>ss.id===Ot);if(!Lt)throw new Error("Attribute not found");const Kt=`custom_${Lt.name.toLowerCase().replace(/\s+/g,"_")}`;if(Lt.forType==="product"){const{error:ss}=await supabase.from("products").update({[Kt]:zt,...Lt.name==="MPN"?{mpn:zt}:{},updated_at:Nt}).eq("id",It);if(ss)throw console.error("Error updating product with custom attribute:",ss),ss;const as=_e.findIndex(Dt=>Dt.id===It);if(as>=0){const Dt=[..._e];Dt[as]={...Dt[as],[Kt]:zt,...Lt.name==="MPN"?{mpn:zt}:{},updated_at:Nt}}}else if(Lt.forType==="supplier"){const{error:ss}=await supabase.from("suppliers").update({[Kt]:zt,updated_at:Nt}).eq("id",It);if(ss)throw console.error("Error updating supplier with custom attribute:",ss),ss;const as=ot.findIndex(Dt=>Dt.id===It);if(as>=0){const Dt=[...ot];Dt[as]={...Dt[as],[Kt]:zt,updated_at:Nt}}}const Ut=bt.findIndex(ss=>ss.attributeId===Ot&&ss.entityId===It);if(Ut>=0){const ss=[...bt];ss[Ut]={attributeId:Ot,entityId:It,value:zt},jt(ss)}else jt([...bt,{attributeId:Ot,entityId:It,value:zt}])}catch(Nt){throw console.error("Error setting attribute value:",Nt),Nt}},wt=(Ot,It)=>xt.filter(Nt=>Nt.forType===It).map(Nt=>{const Lt=Jt(Nt.id,Ot);return{attribute:Nt,value:Lt}}),Tt=Ot=>xt.filter(It=>It.forType===Ot&&It.required),Bt=(Ot,It)=>{const Nt=Tt(It).filter(Lt=>{const Kt=Jt(Lt.id,Ot);return Kt==null||Kt===""});return{valid:Nt.length===0,missingAttributes:Nt}},Wt=Ot=>pt.find(It=>It.id===Ot),Mt=Ot=>gt.filter(It=>It.product_id===Ot),qt=Ot=>{const It=Mt(Ot);if(It.length!==0)return It.reduce((zt,Nt)=>Nt.cost<zt.cost?Nt:zt,It[0])},es=async()=>{try{await Promise.all([nt(),ht()]);const{data:Ot,error:It}=await supabase.from("supplier_products").select(`
          id,
          supplier_id,
          product_id,
          cost,
          moq,
          lead_time,
          payment_terms,
          ean,
          match_method,
          product_name,
          mpn,
          created_at,
          updated_at,
          suppliers (
            id,
            name
          )
        `);if(It)throw It;console.log("Refreshed supplier products data:",Ot?Ot.length:0,"records");const zt=(Ot==null?void 0:Ot.filter(Ut=>Ut.match_method==="mpn"))||[];zt.length>0&&(console.log(`Found ${zt.length} products matched by MPN`),zt.length>0&&zt.length<=5&&console.log("Sample MPN matches:",zt.slice(0,5).map(Ut=>({product_id:Ut.product_id,mpn:Ut.mpn,match_method:Ut.match_method})))),ft(Ot||[]);const{data:Nt,error:Lt}=await supabase.from("custom_attributes").select("*");if(Lt)throw Lt;const Kt=(Nt||[]).map(Ut=>({id:Ut.id,name:Ut.name,type:Ut.type,defaultValue:Ut.default_value,required:Ut.required,forType:Ut.for_type,hasColumnMapping:Ut.has_column_mapping||!1}));yt(Kt),jt([])}catch(Ot){throw console.error("Error refreshing data:",Ot),Ot}};return jsxRuntimeExports.jsx(AppContext.Provider,{value:{products:pt,suppliers:mt,customAttributes:xt,supplierProducts:gt,loading:Ct,error:St,totalProductCount:it,addProduct:vt,updateProduct:Et,addSupplier:Rt,updateSupplier:$t,deleteSupplier:At,addCustomAttribute:Xt,updateCustomAttribute:kt,deleteCustomAttribute:Zt,getAttributeValue:Jt,setAttributeValue:Yt,getEntityAttributes:wt,getRequiredAttributes:Tt,validateRequiredAttributes:Bt,getProductById:Wt,getSuppliersForProduct:Mt,getBestSupplierForProduct:qt,refreshData:es},children:et})},useAppContext=()=>{const et=reactExports.useContext(AppContext);if(et===void 0)throw new Error("useAppContext must be used within an AppProvider");return et},StatCard=({title:et,value:_e,icon:tt,trend:st,bgColor:rt="bg-blue-100"})=>jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-gray-500",children:et}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold",children:_e})]}),jsxRuntimeExports.jsx("div",{className:`p-3 rounded-full ${rt}`,children:tt})]}),jsxRuntimeExports.jsxs("p",{className:`${st.isPositive?"text-green-500":"text-red-500"} mt-2`,children:[st.isPositive?jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}):jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),st.value]})]}),ChartCard=({title:et,children:_e})=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:et}),jsxRuntimeExports.jsx("div",{className:"h-[300px]",children:_e})]}),EmptyState=({message:et,suggestion:_e})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"bg-blue-100 p-4 rounded-full mb-4",children:jsxRuntimeExports.jsx(Database,{className:"h-8 w-8 text-blue-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:et}),_e&&jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:_e})]});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function round(et){return et+.5|0}const lim=(et,_e,tt)=>Math.max(Math.min(et,tt),_e);function p2b(et){return lim(round(et*2.55),0,255)}function n2b(et){return lim(round(et*255),0,255)}function b2n(et){return lim(round(et/2.55)/100,0,1)}function n2p(et){return lim(round(et*100),0,100)}const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex=[..."0123456789ABCDEF"],h1=et=>hex[et&15],h2=et=>hex[(et&240)>>4]+hex[et&15],eq=et=>(et&240)>>4===(et&15),isShort=et=>eq(et.r)&&eq(et.g)&&eq(et.b)&&eq(et.a);function hexParse(et){var _e=et.length,tt;return et[0]==="#"&&(_e===4||_e===5?tt={r:255&map$1[et[1]]*17,g:255&map$1[et[2]]*17,b:255&map$1[et[3]]*17,a:_e===5?map$1[et[4]]*17:255}:(_e===7||_e===9)&&(tt={r:map$1[et[1]]<<4|map$1[et[2]],g:map$1[et[3]]<<4|map$1[et[4]],b:map$1[et[5]]<<4|map$1[et[6]],a:_e===9?map$1[et[7]]<<4|map$1[et[8]]:255})),tt}const alpha=(et,_e)=>et<255?_e(et):"";function hexString(et){var _e=isShort(et)?h1:h2;return et?"#"+_e(et.r)+_e(et.g)+_e(et.b)+alpha(et.a,_e):void 0}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(et,_e,tt){const st=_e*Math.min(tt,1-tt),rt=(nt,it=(nt+et/30)%12)=>tt-st*Math.max(Math.min(it-3,9-it,1),-1);return[rt(0),rt(8),rt(4)]}function hsv2rgbn(et,_e,tt){const st=(rt,nt=(rt+et/60)%6)=>tt-tt*_e*Math.max(Math.min(nt,4-nt,1),0);return[st(5),st(3),st(1)]}function hwb2rgbn(et,_e,tt){const st=hsl2rgbn(et,1,.5);let rt;for(_e+tt>1&&(rt=1/(_e+tt),_e*=rt,tt*=rt),rt=0;rt<3;rt++)st[rt]*=1-_e-tt,st[rt]+=_e;return st}function hueValue(et,_e,tt,st,rt){return et===rt?(_e-tt)/st+(_e<tt?6:0):_e===rt?(tt-et)/st+2:(et-_e)/st+4}function rgb2hsl(et){const tt=et.r/255,st=et.g/255,rt=et.b/255,nt=Math.max(tt,st,rt),it=Math.min(tt,st,rt),ot=(nt+it)/2;let at,lt,ct;return nt!==it&&(ct=nt-it,lt=ot>.5?ct/(2-nt-it):ct/(nt+it),at=hueValue(tt,st,rt,ct,nt),at=at*60+.5),[at|0,lt||0,ot]}function calln(et,_e,tt,st){return(Array.isArray(_e)?et(_e[0],_e[1],_e[2]):et(_e,tt,st)).map(n2b)}function hsl2rgb(et,_e,tt){return calln(hsl2rgbn,et,_e,tt)}function hwb2rgb(et,_e,tt){return calln(hwb2rgbn,et,_e,tt)}function hsv2rgb(et,_e,tt){return calln(hsv2rgbn,et,_e,tt)}function hue(et){return(et%360+360)%360}function hueParse(et){const _e=HUE_RE.exec(et);let tt=255,st;if(!_e)return;_e[5]!==st&&(tt=_e[6]?p2b(+_e[5]):n2b(+_e[5]));const rt=hue(+_e[2]),nt=+_e[3]/100,it=+_e[4]/100;return _e[1]==="hwb"?st=hwb2rgb(rt,nt,it):_e[1]==="hsv"?st=hsv2rgb(rt,nt,it):st=hsl2rgb(rt,nt,it),{r:st[0],g:st[1],b:st[2],a:tt}}function rotate(et,_e){var tt=rgb2hsl(et);tt[0]=hue(tt[0]+_e),tt=hsl2rgb(tt),et.r=tt[0],et.g=tt[1],et.b=tt[2]}function hslString(et){if(!et)return;const _e=rgb2hsl(et),tt=_e[0],st=n2p(_e[1]),rt=n2p(_e[2]);return et.a<255?`hsla(${tt}, ${st}%, ${rt}%, ${b2n(et.a)})`:`hsl(${tt}, ${st}%, ${rt}%)`}const map={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){const et={},_e=Object.keys(names$1),tt=Object.keys(map);let st,rt,nt,it,ot;for(st=0;st<_e.length;st++){for(it=ot=_e[st],rt=0;rt<tt.length;rt++)nt=tt[rt],ot=ot.replace(nt,map[nt]);nt=parseInt(names$1[it],16),et[ot]=[nt>>16&255,nt>>8&255,nt&255]}return et}let names;function nameParse(et){names||(names=unpack(),names.transparent=[0,0,0,0]);const _e=names[et.toLowerCase()];return _e&&{r:_e[0],g:_e[1],b:_e[2],a:_e.length===4?_e[3]:255}}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(et){const _e=RGB_RE.exec(et);let tt=255,st,rt,nt;if(_e){if(_e[7]!==st){const it=+_e[7];tt=_e[8]?p2b(it):lim(it*255,0,255)}return st=+_e[1],rt=+_e[3],nt=+_e[5],st=255&(_e[2]?p2b(st):lim(st,0,255)),rt=255&(_e[4]?p2b(rt):lim(rt,0,255)),nt=255&(_e[6]?p2b(nt):lim(nt,0,255)),{r:st,g:rt,b:nt,a:tt}}}function rgbString(et){return et&&(et.a<255?`rgba(${et.r}, ${et.g}, ${et.b}, ${b2n(et.a)})`:`rgb(${et.r}, ${et.g}, ${et.b})`)}const to=et=>et<=.0031308?et*12.92:Math.pow(et,1/2.4)*1.055-.055,from=et=>et<=.04045?et/12.92:Math.pow((et+.055)/1.055,2.4);function interpolate$1(et,_e,tt){const st=from(b2n(et.r)),rt=from(b2n(et.g)),nt=from(b2n(et.b));return{r:n2b(to(st+tt*(from(b2n(_e.r))-st))),g:n2b(to(rt+tt*(from(b2n(_e.g))-rt))),b:n2b(to(nt+tt*(from(b2n(_e.b))-nt))),a:et.a+tt*(_e.a-et.a)}}function modHSL(et,_e,tt){if(et){let st=rgb2hsl(et);st[_e]=Math.max(0,Math.min(st[_e]+st[_e]*tt,_e===0?360:1)),st=hsl2rgb(st),et.r=st[0],et.g=st[1],et.b=st[2]}}function clone$1(et,_e){return et&&Object.assign(_e||{},et)}function fromObject(et){var _e={r:0,g:0,b:0,a:255};return Array.isArray(et)?et.length>=3&&(_e={r:et[0],g:et[1],b:et[2],a:255},et.length>3&&(_e.a=n2b(et[3]))):(_e=clone$1(et,{r:0,g:0,b:0,a:1}),_e.a=n2b(_e.a)),_e}function functionParse(et){return et.charAt(0)==="r"?rgbParse(et):hueParse(et)}class Color{constructor(_e){if(_e instanceof Color)return _e;const tt=typeof _e;let st;tt==="object"?st=fromObject(_e):tt==="string"&&(st=hexParse(_e)||nameParse(_e)||functionParse(_e)),this._rgb=st,this._valid=!!st}get valid(){return this._valid}get rgb(){var _e=clone$1(this._rgb);return _e&&(_e.a=b2n(_e.a)),_e}set rgb(_e){this._rgb=fromObject(_e)}rgbString(){return this._valid?rgbString(this._rgb):void 0}hexString(){return this._valid?hexString(this._rgb):void 0}hslString(){return this._valid?hslString(this._rgb):void 0}mix(_e,tt){if(_e){const st=this.rgb,rt=_e.rgb;let nt;const it=tt===nt?.5:tt,ot=2*it-1,at=st.a-rt.a,lt=((ot*at===-1?ot:(ot+at)/(1+ot*at))+1)/2;nt=1-lt,st.r=255&lt*st.r+nt*rt.r+.5,st.g=255&lt*st.g+nt*rt.g+.5,st.b=255&lt*st.b+nt*rt.b+.5,st.a=it*st.a+(1-it)*rt.a,this.rgb=st}return this}interpolate(_e,tt){return _e&&(this._rgb=interpolate$1(this._rgb,_e._rgb,tt)),this}clone(){return new Color(this.rgb)}alpha(_e){return this._rgb.a=n2b(_e),this}clearer(_e){const tt=this._rgb;return tt.a*=1-_e,this}greyscale(){const _e=this._rgb,tt=round(_e.r*.3+_e.g*.59+_e.b*.11);return _e.r=_e.g=_e.b=tt,this}opaquer(_e){const tt=this._rgb;return tt.a*=1+_e,this}negate(){const _e=this._rgb;return _e.r=255-_e.r,_e.g=255-_e.g,_e.b=255-_e.b,this}lighten(_e){return modHSL(this._rgb,2,_e),this}darken(_e){return modHSL(this._rgb,2,-_e),this}saturate(_e){return modHSL(this._rgb,1,_e),this}desaturate(_e){return modHSL(this._rgb,1,-_e),this}rotate(_e){return rotate(this._rgb,_e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function noop(){}const uid=(()=>{let et=0;return()=>et++})();function isNullOrUndef(et){return et==null}function isArray(et){if(Array.isArray&&Array.isArray(et))return!0;const _e=Object.prototype.toString.call(et);return _e.slice(0,7)==="[object"&&_e.slice(-6)==="Array]"}function isObject$1(et){return et!==null&&Object.prototype.toString.call(et)==="[object Object]"}function isNumberFinite(et){return(typeof et=="number"||et instanceof Number)&&isFinite(+et)}function finiteOrDefault(et,_e){return isNumberFinite(et)?et:_e}function valueOrDefault(et,_e){return typeof et>"u"?_e:et}const toPercentage=(et,_e)=>typeof et=="string"&&et.endsWith("%")?parseFloat(et)/100:+et/_e,toDimension=(et,_e)=>typeof et=="string"&&et.endsWith("%")?parseFloat(et)/100*_e:+et;function callback(et,_e,tt){if(et&&typeof et.call=="function")return et.apply(tt,_e)}function each(et,_e,tt,st){let rt,nt,it;if(isArray(et))for(nt=et.length,rt=0;rt<nt;rt++)_e.call(tt,et[rt],rt);else if(isObject$1(et))for(it=Object.keys(et),nt=it.length,rt=0;rt<nt;rt++)_e.call(tt,et[it[rt]],it[rt])}function _elementsEqual(et,_e){let tt,st,rt,nt;if(!et||!_e||et.length!==_e.length)return!1;for(tt=0,st=et.length;tt<st;++tt)if(rt=et[tt],nt=_e[tt],rt.datasetIndex!==nt.datasetIndex||rt.index!==nt.index)return!1;return!0}function clone(et){if(isArray(et))return et.map(clone);if(isObject$1(et)){const _e=Object.create(null),tt=Object.keys(et),st=tt.length;let rt=0;for(;rt<st;++rt)_e[tt[rt]]=clone(et[tt[rt]]);return _e}return et}function isValidKey(et){return["__proto__","prototype","constructor"].indexOf(et)===-1}function _merger(et,_e,tt,st){if(!isValidKey(et))return;const rt=_e[et],nt=tt[et];isObject$1(rt)&&isObject$1(nt)?merge(rt,nt,st):_e[et]=clone(nt)}function merge(et,_e,tt){const st=isArray(_e)?_e:[_e],rt=st.length;if(!isObject$1(et))return et;tt=tt||{};const nt=tt.merger||_merger;let it;for(let ot=0;ot<rt;++ot){if(it=st[ot],!isObject$1(it))continue;const at=Object.keys(it);for(let lt=0,ct=at.length;lt<ct;++lt)nt(at[lt],et,it,tt)}return et}function mergeIf(et,_e){return merge(et,_e,{merger:_mergerIf})}function _mergerIf(et,_e,tt){if(!isValidKey(et))return;const st=_e[et],rt=tt[et];isObject$1(st)&&isObject$1(rt)?mergeIf(st,rt):Object.prototype.hasOwnProperty.call(_e,et)||(_e[et]=clone(rt))}const keyResolvers={"":et=>et,x:et=>et.x,y:et=>et.y};function _splitKey(et){const _e=et.split("."),tt=[];let st="";for(const rt of _e)st+=rt,st.endsWith("\\")?st=st.slice(0,-1)+".":(tt.push(st),st="");return tt}function _getKeyResolver(et){const _e=_splitKey(et);return tt=>{for(const st of _e){if(st==="")break;tt=tt&&tt[st]}return tt}}function resolveObjectKey(et,_e){return(keyResolvers[_e]||(keyResolvers[_e]=_getKeyResolver(_e)))(et)}function _capitalize(et){return et.charAt(0).toUpperCase()+et.slice(1)}const defined=et=>typeof et<"u",isFunction=et=>typeof et=="function",setsEqual=(et,_e)=>{if(et.size!==_e.size)return!1;for(const tt of et)if(!_e.has(tt))return!1;return!0};function _isClickEvent(et){return et.type==="mouseup"||et.type==="click"||et.type==="contextmenu"}const PI=Math.PI,TAU=2*PI,PITAU=TAU+PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=PI*2/3,log10=Math.log10,sign=Math.sign;function almostEquals(et,_e,tt){return Math.abs(et-_e)<tt}function niceNum(et){const _e=Math.round(et);et=almostEquals(et,_e,et/1e3)?_e:et;const tt=Math.pow(10,Math.floor(log10(et))),st=et/tt;return(st<=1?1:st<=2?2:st<=5?5:10)*tt}function _factorize(et){const _e=[],tt=Math.sqrt(et);let st;for(st=1;st<tt;st++)et%st===0&&(_e.push(st),_e.push(et/st));return tt===(tt|0)&&_e.push(tt),_e.sort((rt,nt)=>rt-nt).pop(),_e}function isNonPrimitive(et){return typeof et=="symbol"||typeof et=="object"&&et!==null&&!(Symbol.toPrimitive in et||"toString"in et||"valueOf"in et)}function isNumber(et){return!isNonPrimitive(et)&&!isNaN(parseFloat(et))&&isFinite(et)}function almostWhole(et,_e){const tt=Math.round(et);return tt-_e<=et&&tt+_e>=et}function _setMinAndMaxByKey(et,_e,tt){let st,rt,nt;for(st=0,rt=et.length;st<rt;st++)nt=et[st][tt],isNaN(nt)||(_e.min=Math.min(_e.min,nt),_e.max=Math.max(_e.max,nt))}function toRadians(et){return et*(PI/180)}function toDegrees(et){return et*(180/PI)}function _decimalPlaces(et){if(!isNumberFinite(et))return;let _e=1,tt=0;for(;Math.round(et*_e)/_e!==et;)_e*=10,tt++;return tt}function getAngleFromPoint(et,_e){const tt=_e.x-et.x,st=_e.y-et.y,rt=Math.sqrt(tt*tt+st*st);let nt=Math.atan2(st,tt);return nt<-.5*PI&&(nt+=TAU),{angle:nt,distance:rt}}function distanceBetweenPoints(et,_e){return Math.sqrt(Math.pow(_e.x-et.x,2)+Math.pow(_e.y-et.y,2))}function _angleDiff(et,_e){return(et-_e+PITAU)%TAU-PI}function _normalizeAngle(et){return(et%TAU+TAU)%TAU}function _angleBetween(et,_e,tt,st){const rt=_normalizeAngle(et),nt=_normalizeAngle(_e),it=_normalizeAngle(tt),ot=_normalizeAngle(nt-rt),at=_normalizeAngle(it-rt),lt=_normalizeAngle(rt-nt),ct=_normalizeAngle(rt-it);return rt===nt||rt===it||st&&nt===it||ot>at&&lt<ct}function _limitValue(et,_e,tt){return Math.max(_e,Math.min(tt,et))}function _int16Range(et){return _limitValue(et,-32768,32767)}function _isBetween(et,_e,tt,st=1e-6){return et>=Math.min(_e,tt)-st&&et<=Math.max(_e,tt)+st}function _lookup(et,_e,tt){tt=tt||(it=>et[it]<_e);let st=et.length-1,rt=0,nt;for(;st-rt>1;)nt=rt+st>>1,tt(nt)?rt=nt:st=nt;return{lo:rt,hi:st}}const _lookupByKey=(et,_e,tt,st)=>_lookup(et,tt,st?rt=>{const nt=et[rt][_e];return nt<tt||nt===tt&&et[rt+1][_e]===tt}:rt=>et[rt][_e]<tt),_rlookupByKey=(et,_e,tt)=>_lookup(et,tt,st=>et[st][_e]>=tt);function _filterBetween(et,_e,tt){let st=0,rt=et.length;for(;st<rt&&et[st]<_e;)st++;for(;rt>st&&et[rt-1]>tt;)rt--;return st>0||rt<et.length?et.slice(st,rt):et}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(et,_e){if(et._chartjs){et._chartjs.listeners.push(_e);return}Object.defineProperty(et,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[_e]}}),arrayEvents.forEach(tt=>{const st="_onData"+_capitalize(tt),rt=et[tt];Object.defineProperty(et,tt,{configurable:!0,enumerable:!1,value(...nt){const it=rt.apply(this,nt);return et._chartjs.listeners.forEach(ot=>{typeof ot[st]=="function"&&ot[st](...nt)}),it}})})}function unlistenArrayEvents(et,_e){const tt=et._chartjs;if(!tt)return;const st=tt.listeners,rt=st.indexOf(_e);rt!==-1&&st.splice(rt,1),!(st.length>0)&&(arrayEvents.forEach(nt=>{delete et[nt]}),delete et._chartjs)}function _arrayUnique(et){const _e=new Set(et);return _e.size===et.length?et:Array.from(_e)}const requestAnimFrame=function(){return typeof window>"u"?function(et){return et()}:window.requestAnimationFrame}();function throttled(et,_e){let tt=[],st=!1;return function(...rt){tt=rt,st||(st=!0,requestAnimFrame.call(window,()=>{st=!1,et.apply(_e,tt)}))}}function debounce(et,_e){let tt;return function(...st){return _e?(clearTimeout(tt),tt=setTimeout(et,_e,st)):et.apply(this,st),_e}}const _toLeftRightCenter=et=>et==="start"?"left":et==="end"?"right":"center",_alignStartEnd=(et,_e,tt)=>et==="start"?_e:et==="end"?tt:(_e+tt)/2,_textX=(et,_e,tt,st)=>et===(st?"left":"right")?tt:et==="center"?(_e+tt)/2:_e;function _getStartAndCountOfVisiblePoints(et,_e,tt){const st=_e.length;let rt=0,nt=st;if(et._sorted){const{iScale:it,vScale:ot,_parsed:at}=et,lt=et.dataset&&et.dataset.options?et.dataset.options.spanGaps:null,ct=it.axis,{min:ut,max:dt,minDefined:ht,maxDefined:pt}=it.getUserBounds();if(ht){if(rt=Math.min(_lookupByKey(at,ct,ut).lo,tt?st:_lookupByKey(_e,ct,it.getPixelForValue(ut)).lo),lt){const mt=at.slice(0,rt+1).reverse().findIndex(gt=>!isNullOrUndef(gt[ot.axis]));rt-=Math.max(0,mt)}rt=_limitValue(rt,0,st-1)}if(pt){let mt=Math.max(_lookupByKey(at,it.axis,dt,!0).hi+1,tt?0:_lookupByKey(_e,ct,it.getPixelForValue(dt),!0).hi+1);if(lt){const gt=at.slice(mt-1).findIndex(ft=>!isNullOrUndef(ft[ot.axis]));mt+=Math.max(0,gt)}nt=_limitValue(mt,rt,st)-rt}else nt=st-rt}return{start:rt,count:nt}}function _scaleRangesChanged(et){const{xScale:_e,yScale:tt,_scaleRanges:st}=et,rt={xmin:_e.min,xmax:_e.max,ymin:tt.min,ymax:tt.max};if(!st)return et._scaleRanges=rt,!0;const nt=st.xmin!==_e.min||st.xmax!==_e.max||st.ymin!==tt.min||st.ymax!==tt.max;return Object.assign(st,rt),nt}const atEdge=et=>et===0||et===1,elasticIn=(et,_e,tt)=>-(Math.pow(2,10*(et-=1))*Math.sin((et-_e)*TAU/tt)),elasticOut=(et,_e,tt)=>Math.pow(2,-10*et)*Math.sin((et-_e)*TAU/tt)+1,effects={linear:et=>et,easeInQuad:et=>et*et,easeOutQuad:et=>-et*(et-2),easeInOutQuad:et=>(et/=.5)<1?.5*et*et:-.5*(--et*(et-2)-1),easeInCubic:et=>et*et*et,easeOutCubic:et=>(et-=1)*et*et+1,easeInOutCubic:et=>(et/=.5)<1?.5*et*et*et:.5*((et-=2)*et*et+2),easeInQuart:et=>et*et*et*et,easeOutQuart:et=>-((et-=1)*et*et*et-1),easeInOutQuart:et=>(et/=.5)<1?.5*et*et*et*et:-.5*((et-=2)*et*et*et-2),easeInQuint:et=>et*et*et*et*et,easeOutQuint:et=>(et-=1)*et*et*et*et+1,easeInOutQuint:et=>(et/=.5)<1?.5*et*et*et*et*et:.5*((et-=2)*et*et*et*et+2),easeInSine:et=>-Math.cos(et*HALF_PI)+1,easeOutSine:et=>Math.sin(et*HALF_PI),easeInOutSine:et=>-.5*(Math.cos(PI*et)-1),easeInExpo:et=>et===0?0:Math.pow(2,10*(et-1)),easeOutExpo:et=>et===1?1:-Math.pow(2,-10*et)+1,easeInOutExpo:et=>atEdge(et)?et:et<.5?.5*Math.pow(2,10*(et*2-1)):.5*(-Math.pow(2,-10*(et*2-1))+2),easeInCirc:et=>et>=1?et:-(Math.sqrt(1-et*et)-1),easeOutCirc:et=>Math.sqrt(1-(et-=1)*et),easeInOutCirc:et=>(et/=.5)<1?-.5*(Math.sqrt(1-et*et)-1):.5*(Math.sqrt(1-(et-=2)*et)+1),easeInElastic:et=>atEdge(et)?et:elasticIn(et,.075,.3),easeOutElastic:et=>atEdge(et)?et:elasticOut(et,.075,.3),easeInOutElastic(et){return atEdge(et)?et:et<.5?.5*elasticIn(et*2,.1125,.45):.5+.5*elasticOut(et*2-1,.1125,.45)},easeInBack(et){return et*et*((1.70158+1)*et-1.70158)},easeOutBack(et){return(et-=1)*et*((1.70158+1)*et+1.70158)+1},easeInOutBack(et){let _e=1.70158;return(et/=.5)<1?.5*(et*et*(((_e*=1.525)+1)*et-_e)):.5*((et-=2)*et*(((_e*=1.525)+1)*et+_e)+2)},easeInBounce:et=>1-effects.easeOutBounce(1-et),easeOutBounce(et){return et<1/2.75?7.5625*et*et:et<2/2.75?7.5625*(et-=1.5/2.75)*et+.75:et<2.5/2.75?7.5625*(et-=2.25/2.75)*et+.9375:7.5625*(et-=2.625/2.75)*et+.984375},easeInOutBounce:et=>et<.5?effects.easeInBounce(et*2)*.5:effects.easeOutBounce(et*2-1)*.5+.5};function isPatternOrGradient(et){if(et&&typeof et=="object"){const _e=et.toString();return _e==="[object CanvasPattern]"||_e==="[object CanvasGradient]"}return!1}function color(et){return isPatternOrGradient(et)?et:new Color(et)}function getHoverColor(et){return isPatternOrGradient(et)?et:new Color(et).saturate(.5).darken(.1).hexString()}const numbers=["x","y","borderWidth","radius","tension"],colors=["color","borderColor","backgroundColor"];function applyAnimationsDefaults(et){et.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),et.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:_e=>_e!=="onProgress"&&_e!=="onComplete"&&_e!=="fn"}),et.set("animations",{colors:{type:"color",properties:colors},numbers:{type:"number",properties:numbers}}),et.describe("animations",{_fallback:"animation"}),et.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:_e=>_e|0}}}})}function applyLayoutsDefaults(et){et.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const intlCache=new Map;function getNumberFormat(et,_e){_e=_e||{};const tt=et+JSON.stringify(_e);let st=intlCache.get(tt);return st||(st=new Intl.NumberFormat(et,_e),intlCache.set(tt,st)),st}function formatNumber(et,_e,tt){return getNumberFormat(_e,tt).format(et)}const formatters={values(et){return isArray(et)?et:""+et},numeric(et,_e,tt){if(et===0)return"0";const st=this.chart.options.locale;let rt,nt=et;if(tt.length>1){const lt=Math.max(Math.abs(tt[0].value),Math.abs(tt[tt.length-1].value));(lt<1e-4||lt>1e15)&&(rt="scientific"),nt=calculateDelta(et,tt)}const it=log10(Math.abs(nt)),ot=isNaN(it)?1:Math.max(Math.min(-1*Math.floor(it),20),0),at={notation:rt,minimumFractionDigits:ot,maximumFractionDigits:ot};return Object.assign(at,this.options.ticks.format),formatNumber(et,st,at)},logarithmic(et,_e,tt){if(et===0)return"0";const st=tt[_e].significand||et/Math.pow(10,Math.floor(log10(et)));return[1,2,3,5,10,15].includes(st)||_e>.8*tt.length?formatters.numeric.call(this,et,_e,tt):""}};function calculateDelta(et,_e){let tt=_e.length>3?_e[2].value-_e[1].value:_e[1].value-_e[0].value;return Math.abs(tt)>=1&&et!==Math.floor(et)&&(tt=et-Math.floor(et)),tt}var Ticks={formatters};function applyScaleDefaults(et){et.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(_e,tt)=>tt.lineWidth,tickColor:(_e,tt)=>tt.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),et.route("scale.ticks","color","","color"),et.route("scale.grid","color","","borderColor"),et.route("scale.border","color","","borderColor"),et.route("scale.title","color","","color"),et.describe("scale",{_fallback:!1,_scriptable:_e=>!_e.startsWith("before")&&!_e.startsWith("after")&&_e!=="callback"&&_e!=="parser",_indexable:_e=>_e!=="borderDash"&&_e!=="tickBorderDash"&&_e!=="dash"}),et.describe("scales",{_fallback:"scale"}),et.describe("scale.ticks",{_scriptable:_e=>_e!=="backdropPadding"&&_e!=="callback",_indexable:_e=>_e!=="backdropPadding"})}const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(et,_e){if(!_e)return et;const tt=_e.split(".");for(let st=0,rt=tt.length;st<rt;++st){const nt=tt[st];et=et[nt]||(et[nt]=Object.create(null))}return et}function set(et,_e,tt){return typeof _e=="string"?merge(getScope$1(et,_e),tt):merge(getScope$1(et,""),_e)}class Defaults{constructor(_e,tt){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=st=>st.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(st,rt)=>getHoverColor(rt.backgroundColor),this.hoverBorderColor=(st,rt)=>getHoverColor(rt.borderColor),this.hoverColor=(st,rt)=>getHoverColor(rt.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(_e),this.apply(tt)}set(_e,tt){return set(this,_e,tt)}get(_e){return getScope$1(this,_e)}describe(_e,tt){return set(descriptors,_e,tt)}override(_e,tt){return set(overrides,_e,tt)}route(_e,tt,st,rt){const nt=getScope$1(this,_e),it=getScope$1(this,st),ot="_"+tt;Object.defineProperties(nt,{[ot]:{value:nt[tt],writable:!0},[tt]:{enumerable:!0,get(){const at=this[ot],lt=it[rt];return isObject$1(at)?Object.assign({},lt,at):valueOrDefault(at,lt)},set(at){this[ot]=at}}})}apply(_e){_e.forEach(tt=>tt(this))}}var defaults=new Defaults({_scriptable:et=>!et.startsWith("on"),_indexable:et=>et!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[applyAnimationsDefaults,applyLayoutsDefaults,applyScaleDefaults]);function toFontString(et){return!et||isNullOrUndef(et.size)||isNullOrUndef(et.family)?null:(et.style?et.style+" ":"")+(et.weight?et.weight+" ":"")+et.size+"px "+et.family}function _measureText(et,_e,tt,st,rt){let nt=_e[rt];return nt||(nt=_e[rt]=et.measureText(rt).width,tt.push(rt)),nt>st&&(st=nt),st}function _alignPixel(et,_e,tt){const st=et.currentDevicePixelRatio,rt=tt!==0?Math.max(tt/2,.5):0;return Math.round((_e-rt)*st)/st+rt}function clearCanvas(et,_e){!_e&&!et||(_e=_e||et.getContext("2d"),_e.save(),_e.resetTransform(),_e.clearRect(0,0,et.width,et.height),_e.restore())}function drawPoint(et,_e,tt,st){drawPointLegend(et,_e,tt,st,null)}function drawPointLegend(et,_e,tt,st,rt){let nt,it,ot,at,lt,ct,ut,dt;const ht=_e.pointStyle,pt=_e.rotation,mt=_e.radius;let gt=(pt||0)*RAD_PER_DEG;if(ht&&typeof ht=="object"&&(nt=ht.toString(),nt==="[object HTMLImageElement]"||nt==="[object HTMLCanvasElement]")){et.save(),et.translate(tt,st),et.rotate(gt),et.drawImage(ht,-ht.width/2,-ht.height/2,ht.width,ht.height),et.restore();return}if(!(isNaN(mt)||mt<=0)){switch(et.beginPath(),ht){default:rt?et.ellipse(tt,st,rt/2,mt,0,0,TAU):et.arc(tt,st,mt,0,TAU),et.closePath();break;case"triangle":ct=rt?rt/2:mt,et.moveTo(tt+Math.sin(gt)*ct,st-Math.cos(gt)*mt),gt+=TWO_THIRDS_PI,et.lineTo(tt+Math.sin(gt)*ct,st-Math.cos(gt)*mt),gt+=TWO_THIRDS_PI,et.lineTo(tt+Math.sin(gt)*ct,st-Math.cos(gt)*mt),et.closePath();break;case"rectRounded":lt=mt*.516,at=mt-lt,it=Math.cos(gt+QUARTER_PI)*at,ut=Math.cos(gt+QUARTER_PI)*(rt?rt/2-lt:at),ot=Math.sin(gt+QUARTER_PI)*at,dt=Math.sin(gt+QUARTER_PI)*(rt?rt/2-lt:at),et.arc(tt-ut,st-ot,lt,gt-PI,gt-HALF_PI),et.arc(tt+dt,st-it,lt,gt-HALF_PI,gt),et.arc(tt+ut,st+ot,lt,gt,gt+HALF_PI),et.arc(tt-dt,st+it,lt,gt+HALF_PI,gt+PI),et.closePath();break;case"rect":if(!pt){at=Math.SQRT1_2*mt,ct=rt?rt/2:at,et.rect(tt-ct,st-at,2*ct,2*at);break}gt+=QUARTER_PI;case"rectRot":ut=Math.cos(gt)*(rt?rt/2:mt),it=Math.cos(gt)*mt,ot=Math.sin(gt)*mt,dt=Math.sin(gt)*(rt?rt/2:mt),et.moveTo(tt-ut,st-ot),et.lineTo(tt+dt,st-it),et.lineTo(tt+ut,st+ot),et.lineTo(tt-dt,st+it),et.closePath();break;case"crossRot":gt+=QUARTER_PI;case"cross":ut=Math.cos(gt)*(rt?rt/2:mt),it=Math.cos(gt)*mt,ot=Math.sin(gt)*mt,dt=Math.sin(gt)*(rt?rt/2:mt),et.moveTo(tt-ut,st-ot),et.lineTo(tt+ut,st+ot),et.moveTo(tt+dt,st-it),et.lineTo(tt-dt,st+it);break;case"star":ut=Math.cos(gt)*(rt?rt/2:mt),it=Math.cos(gt)*mt,ot=Math.sin(gt)*mt,dt=Math.sin(gt)*(rt?rt/2:mt),et.moveTo(tt-ut,st-ot),et.lineTo(tt+ut,st+ot),et.moveTo(tt+dt,st-it),et.lineTo(tt-dt,st+it),gt+=QUARTER_PI,ut=Math.cos(gt)*(rt?rt/2:mt),it=Math.cos(gt)*mt,ot=Math.sin(gt)*mt,dt=Math.sin(gt)*(rt?rt/2:mt),et.moveTo(tt-ut,st-ot),et.lineTo(tt+ut,st+ot),et.moveTo(tt+dt,st-it),et.lineTo(tt-dt,st+it);break;case"line":it=rt?rt/2:Math.cos(gt)*mt,ot=Math.sin(gt)*mt,et.moveTo(tt-it,st-ot),et.lineTo(tt+it,st+ot);break;case"dash":et.moveTo(tt,st),et.lineTo(tt+Math.cos(gt)*(rt?rt/2:mt),st+Math.sin(gt)*mt);break;case!1:et.closePath();break}et.fill(),_e.borderWidth>0&&et.stroke()}}function _isPointInArea(et,_e,tt){return tt=tt||.5,!_e||et&&et.x>_e.left-tt&&et.x<_e.right+tt&&et.y>_e.top-tt&&et.y<_e.bottom+tt}function clipArea(et,_e){et.save(),et.beginPath(),et.rect(_e.left,_e.top,_e.right-_e.left,_e.bottom-_e.top),et.clip()}function unclipArea(et){et.restore()}function _steppedLineTo(et,_e,tt,st,rt){if(!_e)return et.lineTo(tt.x,tt.y);if(rt==="middle"){const nt=(_e.x+tt.x)/2;et.lineTo(nt,_e.y),et.lineTo(nt,tt.y)}else rt==="after"!=!!st?et.lineTo(_e.x,tt.y):et.lineTo(tt.x,_e.y);et.lineTo(tt.x,tt.y)}function _bezierCurveTo(et,_e,tt,st){if(!_e)return et.lineTo(tt.x,tt.y);et.bezierCurveTo(st?_e.cp1x:_e.cp2x,st?_e.cp1y:_e.cp2y,st?tt.cp2x:tt.cp1x,st?tt.cp2y:tt.cp1y,tt.x,tt.y)}function setRenderOpts(et,_e){_e.translation&&et.translate(_e.translation[0],_e.translation[1]),isNullOrUndef(_e.rotation)||et.rotate(_e.rotation),_e.color&&(et.fillStyle=_e.color),_e.textAlign&&(et.textAlign=_e.textAlign),_e.textBaseline&&(et.textBaseline=_e.textBaseline)}function decorateText(et,_e,tt,st,rt){if(rt.strikethrough||rt.underline){const nt=et.measureText(st),it=_e-nt.actualBoundingBoxLeft,ot=_e+nt.actualBoundingBoxRight,at=tt-nt.actualBoundingBoxAscent,lt=tt+nt.actualBoundingBoxDescent,ct=rt.strikethrough?(at+lt)/2:lt;et.strokeStyle=et.fillStyle,et.beginPath(),et.lineWidth=rt.decorationWidth||2,et.moveTo(it,ct),et.lineTo(ot,ct),et.stroke()}}function drawBackdrop(et,_e){const tt=et.fillStyle;et.fillStyle=_e.color,et.fillRect(_e.left,_e.top,_e.width,_e.height),et.fillStyle=tt}function renderText(et,_e,tt,st,rt,nt={}){const it=isArray(_e)?_e:[_e],ot=nt.strokeWidth>0&&nt.strokeColor!=="";let at,lt;for(et.save(),et.font=rt.string,setRenderOpts(et,nt),at=0;at<it.length;++at)lt=it[at],nt.backdrop&&drawBackdrop(et,nt.backdrop),ot&&(nt.strokeColor&&(et.strokeStyle=nt.strokeColor),isNullOrUndef(nt.strokeWidth)||(et.lineWidth=nt.strokeWidth),et.strokeText(lt,tt,st,nt.maxWidth)),et.fillText(lt,tt,st,nt.maxWidth),decorateText(et,tt,st,lt,nt),st+=Number(rt.lineHeight);et.restore()}function addRoundedRectPath(et,_e){const{x:tt,y:st,w:rt,h:nt,radius:it}=_e;et.arc(tt+it.topLeft,st+it.topLeft,it.topLeft,1.5*PI,PI,!0),et.lineTo(tt,st+nt-it.bottomLeft),et.arc(tt+it.bottomLeft,st+nt-it.bottomLeft,it.bottomLeft,PI,HALF_PI,!0),et.lineTo(tt+rt-it.bottomRight,st+nt),et.arc(tt+rt-it.bottomRight,st+nt-it.bottomRight,it.bottomRight,HALF_PI,0,!0),et.lineTo(tt+rt,st+it.topRight),et.arc(tt+rt-it.topRight,st+it.topRight,it.topRight,0,-HALF_PI,!0),et.lineTo(tt+it.topLeft,st)}const LINE_HEIGHT=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,FONT_STYLE=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function toLineHeight(et,_e){const tt=(""+et).match(LINE_HEIGHT);if(!tt||tt[1]==="normal")return _e*1.2;switch(et=+tt[2],tt[3]){case"px":return et;case"%":et/=100;break}return _e*et}const numberOrZero=et=>+et||0;function _readValueToProps(et,_e){const tt={},st=isObject$1(_e),rt=st?Object.keys(_e):_e,nt=isObject$1(et)?st?it=>valueOrDefault(et[it],et[_e[it]]):it=>et[it]:()=>et;for(const it of rt)tt[it]=numberOrZero(nt(it));return tt}function toTRBL(et){return _readValueToProps(et,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(et){return _readValueToProps(et,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(et){const _e=toTRBL(et);return _e.width=_e.left+_e.right,_e.height=_e.top+_e.bottom,_e}function toFont(et,_e){et=et||{},_e=_e||defaults.font;let tt=valueOrDefault(et.size,_e.size);typeof tt=="string"&&(tt=parseInt(tt,10));let st=valueOrDefault(et.style,_e.style);st&&!(""+st).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+st+'"'),st=void 0);const rt={family:valueOrDefault(et.family,_e.family),lineHeight:toLineHeight(valueOrDefault(et.lineHeight,_e.lineHeight),tt),size:tt,style:st,weight:valueOrDefault(et.weight,_e.weight),string:""};return rt.string=toFontString(rt),rt}function resolve(et,_e,tt,st){let rt,nt,it;for(rt=0,nt=et.length;rt<nt;++rt)if(it=et[rt],it!==void 0&&it!==void 0)return it}function _addGrace(et,_e,tt){const{min:st,max:rt}=et,nt=toDimension(_e,(rt-st)/2),it=(ot,at)=>tt&&ot===0?0:ot+at;return{min:it(st,-Math.abs(nt)),max:it(rt,nt)}}function createContext(et,_e){return Object.assign(Object.create(et),_e)}function _createResolver(et,_e=[""],tt,st,rt=()=>et[0]){const nt=tt||et;typeof st>"u"&&(st=_resolve("_fallback",et));const it={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:et,_rootScopes:nt,_fallback:st,_getTarget:rt,override:ot=>_createResolver([ot,...et],_e,nt,st)};return new Proxy(it,{deleteProperty(ot,at){return delete ot[at],delete ot._keys,delete et[0][at],!0},get(ot,at){return _cached(ot,at,()=>_resolveWithPrefixes(at,_e,et,ot))},getOwnPropertyDescriptor(ot,at){return Reflect.getOwnPropertyDescriptor(ot._scopes[0],at)},getPrototypeOf(){return Reflect.getPrototypeOf(et[0])},has(ot,at){return getKeysFromAllScopes(ot).includes(at)},ownKeys(ot){return getKeysFromAllScopes(ot)},set(ot,at,lt){const ct=ot._storage||(ot._storage=rt());return ot[at]=ct[at]=lt,delete ot._keys,!0}})}function _attachContext(et,_e,tt,st){const rt={_cacheable:!1,_proxy:et,_context:_e,_subProxy:tt,_stack:new Set,_descriptors:_descriptors(et,st),setContext:nt=>_attachContext(et,nt,tt,st),override:nt=>_attachContext(et.override(nt),_e,tt,st)};return new Proxy(rt,{deleteProperty(nt,it){return delete nt[it],delete et[it],!0},get(nt,it,ot){return _cached(nt,it,()=>_resolveWithContext(nt,it,ot))},getOwnPropertyDescriptor(nt,it){return nt._descriptors.allKeys?Reflect.has(et,it)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(et,it)},getPrototypeOf(){return Reflect.getPrototypeOf(et)},has(nt,it){return Reflect.has(et,it)},ownKeys(){return Reflect.ownKeys(et)},set(nt,it,ot){return et[it]=ot,delete nt[it],!0}})}function _descriptors(et,_e={scriptable:!0,indexable:!0}){const{_scriptable:tt=_e.scriptable,_indexable:st=_e.indexable,_allKeys:rt=_e.allKeys}=et;return{allKeys:rt,scriptable:tt,indexable:st,isScriptable:isFunction(tt)?tt:()=>tt,isIndexable:isFunction(st)?st:()=>st}}const readKey=(et,_e)=>et?et+_capitalize(_e):_e,needsSubResolver=(et,_e)=>isObject$1(_e)&&et!=="adapters"&&(Object.getPrototypeOf(_e)===null||_e.constructor===Object);function _cached(et,_e,tt){if(Object.prototype.hasOwnProperty.call(et,_e)||_e==="constructor")return et[_e];const st=tt();return et[_e]=st,st}function _resolveWithContext(et,_e,tt){const{_proxy:st,_context:rt,_subProxy:nt,_descriptors:it}=et;let ot=st[_e];return isFunction(ot)&&it.isScriptable(_e)&&(ot=_resolveScriptable(_e,ot,et,tt)),isArray(ot)&&ot.length&&(ot=_resolveArray(_e,ot,et,it.isIndexable)),needsSubResolver(_e,ot)&&(ot=_attachContext(ot,rt,nt&&nt[_e],it)),ot}function _resolveScriptable(et,_e,tt,st){const{_proxy:rt,_context:nt,_subProxy:it,_stack:ot}=tt;if(ot.has(et))throw new Error("Recursion detected: "+Array.from(ot).join("->")+"->"+et);ot.add(et);let at=_e(nt,it||st);return ot.delete(et),needsSubResolver(et,at)&&(at=createSubResolver(rt._scopes,rt,et,at)),at}function _resolveArray(et,_e,tt,st){const{_proxy:rt,_context:nt,_subProxy:it,_descriptors:ot}=tt;if(typeof nt.index<"u"&&st(et))return _e[nt.index%_e.length];if(isObject$1(_e[0])){const at=_e,lt=rt._scopes.filter(ct=>ct!==at);_e=[];for(const ct of at){const ut=createSubResolver(lt,rt,et,ct);_e.push(_attachContext(ut,nt,it&&it[et],ot))}}return _e}function resolveFallback(et,_e,tt){return isFunction(et)?et(_e,tt):et}const getScope=(et,_e)=>et===!0?_e:typeof et=="string"?resolveObjectKey(_e,et):void 0;function addScopes(et,_e,tt,st,rt){for(const nt of _e){const it=getScope(tt,nt);if(it){et.add(it);const ot=resolveFallback(it._fallback,tt,rt);if(typeof ot<"u"&&ot!==tt&&ot!==st)return ot}else if(it===!1&&typeof st<"u"&&tt!==st)return null}return!1}function createSubResolver(et,_e,tt,st){const rt=_e._rootScopes,nt=resolveFallback(_e._fallback,tt,st),it=[...et,...rt],ot=new Set;ot.add(st);let at=addScopesFromKey(ot,it,tt,nt||tt,st);return at===null||typeof nt<"u"&&nt!==tt&&(at=addScopesFromKey(ot,it,nt,at,st),at===null)?!1:_createResolver(Array.from(ot),[""],rt,nt,()=>subGetTarget(_e,tt,st))}function addScopesFromKey(et,_e,tt,st,rt){for(;tt;)tt=addScopes(et,_e,tt,st,rt);return tt}function subGetTarget(et,_e,tt){const st=et._getTarget();_e in st||(st[_e]={});const rt=st[_e];return isArray(rt)&&isObject$1(tt)?tt:rt||{}}function _resolveWithPrefixes(et,_e,tt,st){let rt;for(const nt of _e)if(rt=_resolve(readKey(nt,et),tt),typeof rt<"u")return needsSubResolver(et,rt)?createSubResolver(tt,st,et,rt):rt}function _resolve(et,_e){for(const tt of _e){if(!tt)continue;const st=tt[et];if(typeof st<"u")return st}}function getKeysFromAllScopes(et){let _e=et._keys;return _e||(_e=et._keys=resolveKeysFromAllScopes(et._scopes)),_e}function resolveKeysFromAllScopes(et){const _e=new Set;for(const tt of et)for(const st of Object.keys(tt).filter(rt=>!rt.startsWith("_")))_e.add(st);return Array.from(_e)}const EPSILON=Number.EPSILON||1e-14,getPoint=(et,_e)=>_e<et.length&&!et[_e].skip&&et[_e],getValueAxis=et=>et==="x"?"y":"x";function splineCurve(et,_e,tt,st){const rt=et.skip?_e:et,nt=_e,it=tt.skip?_e:tt,ot=distanceBetweenPoints(nt,rt),at=distanceBetweenPoints(it,nt);let lt=ot/(ot+at),ct=at/(ot+at);lt=isNaN(lt)?0:lt,ct=isNaN(ct)?0:ct;const ut=st*lt,dt=st*ct;return{previous:{x:nt.x-ut*(it.x-rt.x),y:nt.y-ut*(it.y-rt.y)},next:{x:nt.x+dt*(it.x-rt.x),y:nt.y+dt*(it.y-rt.y)}}}function monotoneAdjust(et,_e,tt){const st=et.length;let rt,nt,it,ot,at,lt=getPoint(et,0);for(let ct=0;ct<st-1;++ct)if(at=lt,lt=getPoint(et,ct+1),!(!at||!lt)){if(almostEquals(_e[ct],0,EPSILON)){tt[ct]=tt[ct+1]=0;continue}rt=tt[ct]/_e[ct],nt=tt[ct+1]/_e[ct],ot=Math.pow(rt,2)+Math.pow(nt,2),!(ot<=9)&&(it=3/Math.sqrt(ot),tt[ct]=rt*it*_e[ct],tt[ct+1]=nt*it*_e[ct])}}function monotoneCompute(et,_e,tt="x"){const st=getValueAxis(tt),rt=et.length;let nt,it,ot,at=getPoint(et,0);for(let lt=0;lt<rt;++lt){if(it=ot,ot=at,at=getPoint(et,lt+1),!ot)continue;const ct=ot[tt],ut=ot[st];it&&(nt=(ct-it[tt])/3,ot[`cp1${tt}`]=ct-nt,ot[`cp1${st}`]=ut-nt*_e[lt]),at&&(nt=(at[tt]-ct)/3,ot[`cp2${tt}`]=ct+nt,ot[`cp2${st}`]=ut+nt*_e[lt])}}function splineCurveMonotone(et,_e="x"){const tt=getValueAxis(_e),st=et.length,rt=Array(st).fill(0),nt=Array(st);let it,ot,at,lt=getPoint(et,0);for(it=0;it<st;++it)if(ot=at,at=lt,lt=getPoint(et,it+1),!!at){if(lt){const ct=lt[_e]-at[_e];rt[it]=ct!==0?(lt[tt]-at[tt])/ct:0}nt[it]=ot?lt?sign(rt[it-1])!==sign(rt[it])?0:(rt[it-1]+rt[it])/2:rt[it-1]:rt[it]}monotoneAdjust(et,rt,nt),monotoneCompute(et,nt,_e)}function capControlPoint(et,_e,tt){return Math.max(Math.min(et,tt),_e)}function capBezierPoints(et,_e){let tt,st,rt,nt,it,ot=_isPointInArea(et[0],_e);for(tt=0,st=et.length;tt<st;++tt)it=nt,nt=ot,ot=tt<st-1&&_isPointInArea(et[tt+1],_e),nt&&(rt=et[tt],it&&(rt.cp1x=capControlPoint(rt.cp1x,_e.left,_e.right),rt.cp1y=capControlPoint(rt.cp1y,_e.top,_e.bottom)),ot&&(rt.cp2x=capControlPoint(rt.cp2x,_e.left,_e.right),rt.cp2y=capControlPoint(rt.cp2y,_e.top,_e.bottom)))}function _updateBezierControlPoints(et,_e,tt,st,rt){let nt,it,ot,at;if(_e.spanGaps&&(et=et.filter(lt=>!lt.skip)),_e.cubicInterpolationMode==="monotone")splineCurveMonotone(et,rt);else{let lt=st?et[et.length-1]:et[0];for(nt=0,it=et.length;nt<it;++nt)ot=et[nt],at=splineCurve(lt,ot,et[Math.min(nt+1,it-(st?0:1))%it],_e.tension),ot.cp1x=at.previous.x,ot.cp1y=at.previous.y,ot.cp2x=at.next.x,ot.cp2y=at.next.y,lt=ot}_e.capBezierPoints&&capBezierPoints(et,tt)}function _isDomSupported(){return typeof window<"u"&&typeof document<"u"}function _getParentNode(et){let _e=et.parentNode;return _e&&_e.toString()==="[object ShadowRoot]"&&(_e=_e.host),_e}function parseMaxStyle(et,_e,tt){let st;return typeof et=="string"?(st=parseInt(et,10),et.indexOf("%")!==-1&&(st=st/100*_e.parentNode[tt])):st=et,st}const getComputedStyle=et=>et.ownerDocument.defaultView.getComputedStyle(et,null);function getStyle(et,_e){return getComputedStyle(et).getPropertyValue(_e)}const positions=["top","right","bottom","left"];function getPositionedStyle(et,_e,tt){const st={};tt=tt?"-"+tt:"";for(let rt=0;rt<4;rt++){const nt=positions[rt];st[nt]=parseFloat(et[_e+"-"+nt+tt])||0}return st.width=st.left+st.right,st.height=st.top+st.bottom,st}const useOffsetPos=(et,_e,tt)=>(et>0||_e>0)&&(!tt||!tt.shadowRoot);function getCanvasPosition(et,_e){const tt=et.touches,st=tt&&tt.length?tt[0]:et,{offsetX:rt,offsetY:nt}=st;let it=!1,ot,at;if(useOffsetPos(rt,nt,et.target))ot=rt,at=nt;else{const lt=_e.getBoundingClientRect();ot=st.clientX-lt.left,at=st.clientY-lt.top,it=!0}return{x:ot,y:at,box:it}}function getRelativePosition(et,_e){if("native"in et)return et;const{canvas:tt,currentDevicePixelRatio:st}=_e,rt=getComputedStyle(tt),nt=rt.boxSizing==="border-box",it=getPositionedStyle(rt,"padding"),ot=getPositionedStyle(rt,"border","width"),{x:at,y:lt,box:ct}=getCanvasPosition(et,tt),ut=it.left+(ct&&ot.left),dt=it.top+(ct&&ot.top);let{width:ht,height:pt}=_e;return nt&&(ht-=it.width+ot.width,pt-=it.height+ot.height),{x:Math.round((at-ut)/ht*tt.width/st),y:Math.round((lt-dt)/pt*tt.height/st)}}function getContainerSize(et,_e,tt){let st,rt;if(_e===void 0||tt===void 0){const nt=et&&_getParentNode(et);if(!nt)_e=et.clientWidth,tt=et.clientHeight;else{const it=nt.getBoundingClientRect(),ot=getComputedStyle(nt),at=getPositionedStyle(ot,"border","width"),lt=getPositionedStyle(ot,"padding");_e=it.width-lt.width-at.width,tt=it.height-lt.height-at.height,st=parseMaxStyle(ot.maxWidth,nt,"clientWidth"),rt=parseMaxStyle(ot.maxHeight,nt,"clientHeight")}}return{width:_e,height:tt,maxWidth:st||INFINITY,maxHeight:rt||INFINITY}}const round1=et=>Math.round(et*10)/10;function getMaximumSize(et,_e,tt,st){const rt=getComputedStyle(et),nt=getPositionedStyle(rt,"margin"),it=parseMaxStyle(rt.maxWidth,et,"clientWidth")||INFINITY,ot=parseMaxStyle(rt.maxHeight,et,"clientHeight")||INFINITY,at=getContainerSize(et,_e,tt);let{width:lt,height:ct}=at;if(rt.boxSizing==="content-box"){const dt=getPositionedStyle(rt,"border","width"),ht=getPositionedStyle(rt,"padding");lt-=ht.width+dt.width,ct-=ht.height+dt.height}return lt=Math.max(0,lt-nt.width),ct=Math.max(0,st?lt/st:ct-nt.height),lt=round1(Math.min(lt,it,at.maxWidth)),ct=round1(Math.min(ct,ot,at.maxHeight)),lt&&!ct&&(ct=round1(lt/2)),(_e!==void 0||tt!==void 0)&&st&&at.height&&ct>at.height&&(ct=at.height,lt=round1(Math.floor(ct*st))),{width:lt,height:ct}}function retinaScale(et,_e,tt){const st=_e||1,rt=Math.floor(et.height*st),nt=Math.floor(et.width*st);et.height=Math.floor(et.height),et.width=Math.floor(et.width);const it=et.canvas;return it.style&&(tt||!it.style.height&&!it.style.width)&&(it.style.height=`${et.height}px`,it.style.width=`${et.width}px`),et.currentDevicePixelRatio!==st||it.height!==rt||it.width!==nt?(et.currentDevicePixelRatio=st,it.height=rt,it.width=nt,et.ctx.setTransform(st,0,0,st,0,0),!0):!1}const supportsEventListenerOptions=function(){let et=!1;try{const _e={get passive(){return et=!0,!1}};_isDomSupported()&&(window.addEventListener("test",null,_e),window.removeEventListener("test",null,_e))}catch{}return et}();function readUsedSize(et,_e){const tt=getStyle(et,_e),st=tt&&tt.match(/^(\d+)(\.\d+)?px$/);return st?+st[1]:void 0}function _pointInLine(et,_e,tt,st){return{x:et.x+tt*(_e.x-et.x),y:et.y+tt*(_e.y-et.y)}}function _steppedInterpolation(et,_e,tt,st){return{x:et.x+tt*(_e.x-et.x),y:st==="middle"?tt<.5?et.y:_e.y:st==="after"?tt<1?et.y:_e.y:tt>0?_e.y:et.y}}function _bezierInterpolation(et,_e,tt,st){const rt={x:et.cp2x,y:et.cp2y},nt={x:_e.cp1x,y:_e.cp1y},it=_pointInLine(et,rt,tt),ot=_pointInLine(rt,nt,tt),at=_pointInLine(nt,_e,tt),lt=_pointInLine(it,ot,tt),ct=_pointInLine(ot,at,tt);return _pointInLine(lt,ct,tt)}const getRightToLeftAdapter=function(et,_e){return{x(tt){return et+et+_e-tt},setWidth(tt){_e=tt},textAlign(tt){return tt==="center"?tt:tt==="right"?"left":"right"},xPlus(tt,st){return tt-st},leftForLtr(tt,st){return tt-st}}},getLeftToRightAdapter=function(){return{x(et){return et},setWidth(et){},textAlign(et){return et},xPlus(et,_e){return et+_e},leftForLtr(et,_e){return et}}};function getRtlAdapter(et,_e,tt){return et?getRightToLeftAdapter(_e,tt):getLeftToRightAdapter()}function overrideTextDirection(et,_e){let tt,st;(_e==="ltr"||_e==="rtl")&&(tt=et.canvas.style,st=[tt.getPropertyValue("direction"),tt.getPropertyPriority("direction")],tt.setProperty("direction",_e,"important"),et.prevTextDirection=st)}function restoreTextDirection(et,_e){_e!==void 0&&(delete et.prevTextDirection,et.canvas.style.setProperty("direction",_e[0],_e[1]))}function propertyFn(et){return et==="angle"?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:(_e,tt)=>_e-tt,normalize:_e=>_e}}function normalizeSegment({start:et,end:_e,count:tt,loop:st,style:rt}){return{start:et%tt,end:_e%tt,loop:st&&(_e-et+1)%tt===0,style:rt}}function getSegment(et,_e,tt){const{property:st,start:rt,end:nt}=tt,{between:it,normalize:ot}=propertyFn(st),at=_e.length;let{start:lt,end:ct,loop:ut}=et,dt,ht;if(ut){for(lt+=at,ct+=at,dt=0,ht=at;dt<ht&&it(ot(_e[lt%at][st]),rt,nt);++dt)lt--,ct--;lt%=at,ct%=at}return ct<lt&&(ct+=at),{start:lt,end:ct,loop:ut,style:et.style}}function _boundSegment(et,_e,tt){if(!tt)return[et];const{property:st,start:rt,end:nt}=tt,it=_e.length,{compare:ot,between:at,normalize:lt}=propertyFn(st),{start:ct,end:ut,loop:dt,style:ht}=getSegment(et,_e,tt),pt=[];let mt=!1,gt=null,ft,xt,yt;const bt=()=>at(rt,yt,ft)&&ot(rt,yt)!==0,jt=()=>ot(nt,ft)===0||at(nt,yt,ft),Ct=()=>mt||bt(),St=()=>!mt||jt();for(let vt=ct,Et=ct;vt<=ut;++vt)xt=_e[vt%it],!xt.skip&&(ft=lt(xt[st]),ft!==yt&&(mt=at(ft,rt,nt),gt===null&&Ct()&&(gt=ot(ft,rt)===0?vt:Et),gt!==null&&St()&&(pt.push(normalizeSegment({start:gt,end:vt,loop:dt,count:it,style:ht})),gt=null),Et=vt,yt=ft));return gt!==null&&pt.push(normalizeSegment({start:gt,end:ut,loop:dt,count:it,style:ht})),pt}function _boundSegments(et,_e){const tt=[],st=et.segments;for(let rt=0;rt<st.length;rt++){const nt=_boundSegment(st[rt],et.points,_e);nt.length&&tt.push(...nt)}return tt}function findStartAndEnd(et,_e,tt,st){let rt=0,nt=_e-1;if(tt&&!st)for(;rt<_e&&!et[rt].skip;)rt++;for(;rt<_e&&et[rt].skip;)rt++;for(rt%=_e,tt&&(nt+=rt);nt>rt&&et[nt%_e].skip;)nt--;return nt%=_e,{start:rt,end:nt}}function solidSegments(et,_e,tt,st){const rt=et.length,nt=[];let it=_e,ot=et[_e],at;for(at=_e+1;at<=tt;++at){const lt=et[at%rt];lt.skip||lt.stop?ot.skip||(st=!1,nt.push({start:_e%rt,end:(at-1)%rt,loop:st}),_e=it=lt.stop?at:null):(it=at,ot.skip&&(_e=at)),ot=lt}return it!==null&&nt.push({start:_e%rt,end:it%rt,loop:st}),nt}function _computeSegments(et,_e){const tt=et.points,st=et.options.spanGaps,rt=tt.length;if(!rt)return[];const nt=!!et._loop,{start:it,end:ot}=findStartAndEnd(tt,rt,nt,st);if(st===!0)return splitByStyles(et,[{start:it,end:ot,loop:nt}],tt,_e);const at=ot<it?ot+rt:ot,lt=!!et._fullLoop&&it===0&&ot===rt-1;return splitByStyles(et,solidSegments(tt,it,at,lt),tt,_e)}function splitByStyles(et,_e,tt,st){return!st||!st.setContext||!tt?_e:doSplitByStyles(et,_e,tt,st)}function doSplitByStyles(et,_e,tt,st){const rt=et._chart.getContext(),nt=readStyle(et.options),{_datasetIndex:it,options:{spanGaps:ot}}=et,at=tt.length,lt=[];let ct=nt,ut=_e[0].start,dt=ut;function ht(pt,mt,gt,ft){const xt=ot?-1:1;if(pt!==mt){for(pt+=at;tt[pt%at].skip;)pt-=xt;for(;tt[mt%at].skip;)mt+=xt;pt%at!==mt%at&&(lt.push({start:pt%at,end:mt%at,loop:gt,style:ft}),ct=ft,ut=mt%at)}}for(const pt of _e){ut=ot?ut:pt.start;let mt=tt[ut%at],gt;for(dt=ut+1;dt<=pt.end;dt++){const ft=tt[dt%at];gt=readStyle(st.setContext(createContext(rt,{type:"segment",p0:mt,p1:ft,p0DataIndex:(dt-1)%at,p1DataIndex:dt%at,datasetIndex:it}))),styleChanged(gt,ct)&&ht(ut,dt-1,pt.loop,ct),mt=ft,ct=gt}ut<dt-1&&ht(ut,dt-1,pt.loop,ct)}return lt}function readStyle(et){return{backgroundColor:et.backgroundColor,borderCapStyle:et.borderCapStyle,borderDash:et.borderDash,borderDashOffset:et.borderDashOffset,borderJoinStyle:et.borderJoinStyle,borderWidth:et.borderWidth,borderColor:et.borderColor}}function styleChanged(et,_e){if(!_e)return!1;const tt=[],st=function(rt,nt){return isPatternOrGradient(nt)?(tt.includes(nt)||tt.push(nt),tt.indexOf(nt)):nt};return JSON.stringify(et,st)!==JSON.stringify(_e,st)}function getSizeForArea(et,_e,tt){return et.options.clip?et[tt]:_e[tt]}function getDatasetArea(et,_e){const{xScale:tt,yScale:st}=et;return tt&&st?{left:getSizeForArea(tt,_e,"left"),right:getSizeForArea(tt,_e,"right"),top:getSizeForArea(st,_e,"top"),bottom:getSizeForArea(st,_e,"bottom")}:_e}function getDatasetClipArea(et,_e){const tt=_e._clip;if(tt.disabled)return!1;const st=getDatasetArea(_e,et.chartArea);return{left:tt.left===!1?0:st.left-(tt.left===!0?0:tt.left),right:tt.right===!1?et.width:st.right+(tt.right===!0?0:tt.right),top:tt.top===!1?0:st.top-(tt.top===!0?0:tt.top),bottom:tt.bottom===!1?et.height:st.bottom+(tt.bottom===!0?0:tt.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(_e,tt,st,rt){const nt=tt.listeners[rt],it=tt.duration;nt.forEach(ot=>ot({chart:_e,initial:tt.initial,numSteps:it,currentStep:Math.min(st-tt.start,it)}))}_refresh(){this._request||(this._running=!0,this._request=requestAnimFrame.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(_e=Date.now()){let tt=0;this._charts.forEach((st,rt)=>{if(!st.running||!st.items.length)return;const nt=st.items;let it=nt.length-1,ot=!1,at;for(;it>=0;--it)at=nt[it],at._active?(at._total>st.duration&&(st.duration=at._total),at.tick(_e),ot=!0):(nt[it]=nt[nt.length-1],nt.pop());ot&&(rt.draw(),this._notify(rt,st,_e,"progress")),nt.length||(st.running=!1,this._notify(rt,st,_e,"complete"),st.initial=!1),tt+=nt.length}),this._lastDate=_e,tt===0&&(this._running=!1)}_getAnims(_e){const tt=this._charts;let st=tt.get(_e);return st||(st={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},tt.set(_e,st)),st}listen(_e,tt,st){this._getAnims(_e).listeners[tt].push(st)}add(_e,tt){!tt||!tt.length||this._getAnims(_e).items.push(...tt)}has(_e){return this._getAnims(_e).items.length>0}start(_e){const tt=this._charts.get(_e);tt&&(tt.running=!0,tt.start=Date.now(),tt.duration=tt.items.reduce((st,rt)=>Math.max(st,rt._duration),0),this._refresh())}running(_e){if(!this._running)return!1;const tt=this._charts.get(_e);return!(!tt||!tt.running||!tt.items.length)}stop(_e){const tt=this._charts.get(_e);if(!tt||!tt.items.length)return;const st=tt.items;let rt=st.length-1;for(;rt>=0;--rt)st[rt].cancel();tt.items=[],this._notify(_e,tt,Date.now(),"complete")}remove(_e){return this._charts.delete(_e)}}var animator=new Animator;const transparent="transparent",interpolators={boolean(et,_e,tt){return tt>.5?_e:et},color(et,_e,tt){const st=color(et||transparent),rt=st.valid&&color(_e||transparent);return rt&&rt.valid?rt.mix(st,tt).hexString():_e},number(et,_e,tt){return et+(_e-et)*tt}};class Animation{constructor(_e,tt,st,rt){const nt=tt[st];rt=resolve([_e.to,rt,nt,_e.from]);const it=resolve([_e.from,nt,rt]);this._active=!0,this._fn=_e.fn||interpolators[_e.type||typeof it],this._easing=effects[_e.easing]||effects.linear,this._start=Math.floor(Date.now()+(_e.delay||0)),this._duration=this._total=Math.floor(_e.duration),this._loop=!!_e.loop,this._target=tt,this._prop=st,this._from=it,this._to=rt,this._promises=void 0}active(){return this._active}update(_e,tt,st){if(this._active){this._notify(!1);const rt=this._target[this._prop],nt=st-this._start,it=this._duration-nt;this._start=st,this._duration=Math.floor(Math.max(it,_e.duration)),this._total+=nt,this._loop=!!_e.loop,this._to=resolve([_e.to,tt,rt,_e.from]),this._from=resolve([_e.from,rt,tt])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(_e){const tt=_e-this._start,st=this._duration,rt=this._prop,nt=this._from,it=this._loop,ot=this._to;let at;if(this._active=nt!==ot&&(it||tt<st),!this._active){this._target[rt]=ot,this._notify(!0);return}if(tt<0){this._target[rt]=nt;return}at=tt/st%2,at=it&&at>1?2-at:at,at=this._easing(Math.min(1,Math.max(0,at))),this._target[rt]=this._fn(nt,ot,at)}wait(){const _e=this._promises||(this._promises=[]);return new Promise((tt,st)=>{_e.push({res:tt,rej:st})})}_notify(_e){const tt=_e?"res":"rej",st=this._promises||[];for(let rt=0;rt<st.length;rt++)st[rt][tt]()}}class Animations{constructor(_e,tt){this._chart=_e,this._properties=new Map,this.configure(tt)}configure(_e){if(!isObject$1(_e))return;const tt=Object.keys(defaults.animation),st=this._properties;Object.getOwnPropertyNames(_e).forEach(rt=>{const nt=_e[rt];if(!isObject$1(nt))return;const it={};for(const ot of tt)it[ot]=nt[ot];(isArray(nt.properties)&&nt.properties||[rt]).forEach(ot=>{(ot===rt||!st.has(ot))&&st.set(ot,it)})})}_animateOptions(_e,tt){const st=tt.options,rt=resolveTargetOptions(_e,st);if(!rt)return[];const nt=this._createAnimations(rt,st);return st.$shared&&awaitAll(_e.options.$animations,st).then(()=>{_e.options=st},()=>{}),nt}_createAnimations(_e,tt){const st=this._properties,rt=[],nt=_e.$animations||(_e.$animations={}),it=Object.keys(tt),ot=Date.now();let at;for(at=it.length-1;at>=0;--at){const lt=it[at];if(lt.charAt(0)==="$")continue;if(lt==="options"){rt.push(...this._animateOptions(_e,tt));continue}const ct=tt[lt];let ut=nt[lt];const dt=st.get(lt);if(ut)if(dt&&ut.active()){ut.update(dt,ct,ot);continue}else ut.cancel();if(!dt||!dt.duration){_e[lt]=ct;continue}nt[lt]=ut=new Animation(dt,_e,lt,ct),rt.push(ut)}return rt}update(_e,tt){if(this._properties.size===0){Object.assign(_e,tt);return}const st=this._createAnimations(_e,tt);if(st.length)return animator.add(this._chart,st),!0}}function awaitAll(et,_e){const tt=[],st=Object.keys(_e);for(let rt=0;rt<st.length;rt++){const nt=et[st[rt]];nt&&nt.active()&&tt.push(nt.wait())}return Promise.all(tt)}function resolveTargetOptions(et,_e){if(!_e)return;let tt=et.options;if(!tt){et.options=_e;return}return tt.$shared&&(et.options=tt=Object.assign({},tt,{$shared:!1,$animations:{}})),tt}function scaleClip(et,_e){const tt=et&&et.options||{},st=tt.reverse,rt=tt.min===void 0?_e:0,nt=tt.max===void 0?_e:0;return{start:st?nt:rt,end:st?rt:nt}}function defaultClip(et,_e,tt){if(tt===!1)return!1;const st=scaleClip(et,tt),rt=scaleClip(_e,tt);return{top:rt.end,right:st.end,bottom:rt.start,left:st.start}}function toClip(et){let _e,tt,st,rt;return isObject$1(et)?(_e=et.top,tt=et.right,st=et.bottom,rt=et.left):_e=tt=st=rt=et,{top:_e,right:tt,bottom:st,left:rt,disabled:et===!1}}function getSortedDatasetIndices(et,_e){const tt=[],st=et._getSortedDatasetMetas(_e);let rt,nt;for(rt=0,nt=st.length;rt<nt;++rt)tt.push(st[rt].index);return tt}function applyStack(et,_e,tt,st={}){const rt=et.keys,nt=st.mode==="single";let it,ot,at,lt;if(_e===null)return;let ct=!1;for(it=0,ot=rt.length;it<ot;++it){if(at=+rt[it],at===tt){if(ct=!0,st.all)continue;break}lt=et.values[at],isNumberFinite(lt)&&(nt||_e===0||sign(_e)===sign(lt))&&(_e+=lt)}return!ct&&!st.all?0:_e}function convertObjectDataToArray(et,_e){const{iScale:tt,vScale:st}=_e,rt=tt.axis==="x"?"x":"y",nt=st.axis==="x"?"x":"y",it=Object.keys(et),ot=new Array(it.length);let at,lt,ct;for(at=0,lt=it.length;at<lt;++at)ct=it[at],ot[at]={[rt]:ct,[nt]:et[ct]};return ot}function isStacked(et,_e){const tt=et&&et.options.stacked;return tt||tt===void 0&&_e.stack!==void 0}function getStackKey(et,_e,tt){return`${et.id}.${_e.id}.${tt.stack||tt.type}`}function getUserBounds(et){const{min:_e,max:tt,minDefined:st,maxDefined:rt}=et.getUserBounds();return{min:st?_e:Number.NEGATIVE_INFINITY,max:rt?tt:Number.POSITIVE_INFINITY}}function getOrCreateStack(et,_e,tt){const st=et[_e]||(et[_e]={});return st[tt]||(st[tt]={})}function getLastIndexInStack(et,_e,tt,st){for(const rt of _e.getMatchingVisibleMetas(st).reverse()){const nt=et[rt.index];if(tt&&nt>0||!tt&&nt<0)return rt.index}return null}function updateStacks(et,_e){const{chart:tt,_cachedMeta:st}=et,rt=tt._stacks||(tt._stacks={}),{iScale:nt,vScale:it,index:ot}=st,at=nt.axis,lt=it.axis,ct=getStackKey(nt,it,st),ut=_e.length;let dt;for(let ht=0;ht<ut;++ht){const pt=_e[ht],{[at]:mt,[lt]:gt}=pt,ft=pt._stacks||(pt._stacks={});dt=ft[lt]=getOrCreateStack(rt,ct,mt),dt[ot]=gt,dt._top=getLastIndexInStack(dt,it,!0,st.type),dt._bottom=getLastIndexInStack(dt,it,!1,st.type);const xt=dt._visualValues||(dt._visualValues={});xt[ot]=gt}}function getFirstScaleId(et,_e){const tt=et.scales;return Object.keys(tt).filter(st=>tt[st].axis===_e).shift()}function createDatasetContext(et,_e){return createContext(et,{active:!1,dataset:void 0,datasetIndex:_e,index:_e,mode:"default",type:"dataset"})}function createDataContext(et,_e,tt){return createContext(et,{active:!1,dataIndex:_e,parsed:void 0,raw:void 0,element:tt,index:_e,mode:"default",type:"data"})}function clearStacks(et,_e){const tt=et.controller.index,st=et.vScale&&et.vScale.axis;if(st){_e=_e||et._parsed;for(const rt of _e){const nt=rt._stacks;if(!nt||nt[st]===void 0||nt[st][tt]===void 0)return;delete nt[st][tt],nt[st]._visualValues!==void 0&&nt[st]._visualValues[tt]!==void 0&&delete nt[st]._visualValues[tt]}}}const isDirectUpdateMode=et=>et==="reset"||et==="none",cloneIfNotShared=(et,_e)=>_e?et:Object.assign({},et),createStack=(et,_e,tt)=>et&&!_e.hidden&&_e._stacked&&{keys:getSortedDatasetIndices(tt,!0),values:null};class DatasetController{constructor(_e,tt){this.chart=_e,this._ctx=_e.ctx,this.index=tt,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const _e=this._cachedMeta;this.configure(),this.linkScales(),_e._stacked=isStacked(_e.vScale,_e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(_e){this.index!==_e&&clearStacks(this._cachedMeta),this.index=_e}linkScales(){const _e=this.chart,tt=this._cachedMeta,st=this.getDataset(),rt=(ut,dt,ht,pt)=>ut==="x"?dt:ut==="r"?pt:ht,nt=tt.xAxisID=valueOrDefault(st.xAxisID,getFirstScaleId(_e,"x")),it=tt.yAxisID=valueOrDefault(st.yAxisID,getFirstScaleId(_e,"y")),ot=tt.rAxisID=valueOrDefault(st.rAxisID,getFirstScaleId(_e,"r")),at=tt.indexAxis,lt=tt.iAxisID=rt(at,nt,it,ot),ct=tt.vAxisID=rt(at,it,nt,ot);tt.xScale=this.getScaleForId(nt),tt.yScale=this.getScaleForId(it),tt.rScale=this.getScaleForId(ot),tt.iScale=this.getScaleForId(lt),tt.vScale=this.getScaleForId(ct)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(_e){return this.chart.scales[_e]}_getOtherScale(_e){const tt=this._cachedMeta;return _e===tt.iScale?tt.vScale:tt.iScale}reset(){this._update("reset")}_destroy(){const _e=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),_e._stacked&&clearStacks(_e)}_dataCheck(){const _e=this.getDataset(),tt=_e.data||(_e.data=[]),st=this._data;if(isObject$1(tt)){const rt=this._cachedMeta;this._data=convertObjectDataToArray(tt,rt)}else if(st!==tt){if(st){unlistenArrayEvents(st,this);const rt=this._cachedMeta;clearStacks(rt),rt._parsed=[]}tt&&Object.isExtensible(tt)&&listenArrayEvents(tt,this),this._syncList=[],this._data=tt}}addElements(){const _e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(_e.dataset=new this.datasetElementType)}buildOrUpdateElements(_e){const tt=this._cachedMeta,st=this.getDataset();let rt=!1;this._dataCheck();const nt=tt._stacked;tt._stacked=isStacked(tt.vScale,tt),tt.stack!==st.stack&&(rt=!0,clearStacks(tt),tt.stack=st.stack),this._resyncElements(_e),(rt||nt!==tt._stacked)&&(updateStacks(this,tt._parsed),tt._stacked=isStacked(tt.vScale,tt))}configure(){const _e=this.chart.config,tt=_e.datasetScopeKeys(this._type),st=_e.getOptionScopes(this.getDataset(),tt,!0);this.options=_e.createResolver(st,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(_e,tt){const{_cachedMeta:st,_data:rt}=this,{iScale:nt,_stacked:it}=st,ot=nt.axis;let at=_e===0&&tt===rt.length?!0:st._sorted,lt=_e>0&&st._parsed[_e-1],ct,ut,dt;if(this._parsing===!1)st._parsed=rt,st._sorted=!0,dt=rt;else{isArray(rt[_e])?dt=this.parseArrayData(st,rt,_e,tt):isObject$1(rt[_e])?dt=this.parseObjectData(st,rt,_e,tt):dt=this.parsePrimitiveData(st,rt,_e,tt);const ht=()=>ut[ot]===null||lt&&ut[ot]<lt[ot];for(ct=0;ct<tt;++ct)st._parsed[ct+_e]=ut=dt[ct],at&&(ht()&&(at=!1),lt=ut);st._sorted=at}it&&updateStacks(this,dt)}parsePrimitiveData(_e,tt,st,rt){const{iScale:nt,vScale:it}=_e,ot=nt.axis,at=it.axis,lt=nt.getLabels(),ct=nt===it,ut=new Array(rt);let dt,ht,pt;for(dt=0,ht=rt;dt<ht;++dt)pt=dt+st,ut[dt]={[ot]:ct||nt.parse(lt[pt],pt),[at]:it.parse(tt[pt],pt)};return ut}parseArrayData(_e,tt,st,rt){const{xScale:nt,yScale:it}=_e,ot=new Array(rt);let at,lt,ct,ut;for(at=0,lt=rt;at<lt;++at)ct=at+st,ut=tt[ct],ot[at]={x:nt.parse(ut[0],ct),y:it.parse(ut[1],ct)};return ot}parseObjectData(_e,tt,st,rt){const{xScale:nt,yScale:it}=_e,{xAxisKey:ot="x",yAxisKey:at="y"}=this._parsing,lt=new Array(rt);let ct,ut,dt,ht;for(ct=0,ut=rt;ct<ut;++ct)dt=ct+st,ht=tt[dt],lt[ct]={x:nt.parse(resolveObjectKey(ht,ot),dt),y:it.parse(resolveObjectKey(ht,at),dt)};return lt}getParsed(_e){return this._cachedMeta._parsed[_e]}getDataElement(_e){return this._cachedMeta.data[_e]}applyStack(_e,tt,st){const rt=this.chart,nt=this._cachedMeta,it=tt[_e.axis],ot={keys:getSortedDatasetIndices(rt,!0),values:tt._stacks[_e.axis]._visualValues};return applyStack(ot,it,nt.index,{mode:st})}updateRangeFromParsed(_e,tt,st,rt){const nt=st[tt.axis];let it=nt===null?NaN:nt;const ot=rt&&st._stacks[tt.axis];rt&&ot&&(rt.values=ot,it=applyStack(rt,nt,this._cachedMeta.index)),_e.min=Math.min(_e.min,it),_e.max=Math.max(_e.max,it)}getMinMax(_e,tt){const st=this._cachedMeta,rt=st._parsed,nt=st._sorted&&_e===st.iScale,it=rt.length,ot=this._getOtherScale(_e),at=createStack(tt,st,this.chart),lt={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:ct,max:ut}=getUserBounds(ot);let dt,ht;function pt(){ht=rt[dt];const mt=ht[ot.axis];return!isNumberFinite(ht[_e.axis])||ct>mt||ut<mt}for(dt=0;dt<it&&!(!pt()&&(this.updateRangeFromParsed(lt,_e,ht,at),nt));++dt);if(nt){for(dt=it-1;dt>=0;--dt)if(!pt()){this.updateRangeFromParsed(lt,_e,ht,at);break}}return lt}getAllParsedValues(_e){const tt=this._cachedMeta._parsed,st=[];let rt,nt,it;for(rt=0,nt=tt.length;rt<nt;++rt)it=tt[rt][_e.axis],isNumberFinite(it)&&st.push(it);return st}getMaxOverflow(){return!1}getLabelAndValue(_e){const tt=this._cachedMeta,st=tt.iScale,rt=tt.vScale,nt=this.getParsed(_e);return{label:st?""+st.getLabelForValue(nt[st.axis]):"",value:rt?""+rt.getLabelForValue(nt[rt.axis]):""}}_update(_e){const tt=this._cachedMeta;this.update(_e||"default"),tt._clip=toClip(valueOrDefault(this.options.clip,defaultClip(tt.xScale,tt.yScale,this.getMaxOverflow())))}update(_e){}draw(){const _e=this._ctx,tt=this.chart,st=this._cachedMeta,rt=st.data||[],nt=tt.chartArea,it=[],ot=this._drawStart||0,at=this._drawCount||rt.length-ot,lt=this.options.drawActiveElementsOnTop;let ct;for(st.dataset&&st.dataset.draw(_e,nt,ot,at),ct=ot;ct<ot+at;++ct){const ut=rt[ct];ut.hidden||(ut.active&&lt?it.push(ut):ut.draw(_e,nt))}for(ct=0;ct<it.length;++ct)it[ct].draw(_e,nt)}getStyle(_e,tt){const st=tt?"active":"default";return _e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(st):this.resolveDataElementOptions(_e||0,st)}getContext(_e,tt,st){const rt=this.getDataset();let nt;if(_e>=0&&_e<this._cachedMeta.data.length){const it=this._cachedMeta.data[_e];nt=it.$context||(it.$context=createDataContext(this.getContext(),_e,it)),nt.parsed=this.getParsed(_e),nt.raw=rt.data[_e],nt.index=nt.dataIndex=_e}else nt=this.$context||(this.$context=createDatasetContext(this.chart.getContext(),this.index)),nt.dataset=rt,nt.index=nt.datasetIndex=this.index;return nt.active=!!tt,nt.mode=st,nt}resolveDatasetElementOptions(_e){return this._resolveElementOptions(this.datasetElementType.id,_e)}resolveDataElementOptions(_e,tt){return this._resolveElementOptions(this.dataElementType.id,tt,_e)}_resolveElementOptions(_e,tt="default",st){const rt=tt==="active",nt=this._cachedDataOpts,it=_e+"-"+tt,ot=nt[it],at=this.enableOptionSharing&&defined(st);if(ot)return cloneIfNotShared(ot,at);const lt=this.chart.config,ct=lt.datasetElementScopeKeys(this._type,_e),ut=rt?[`${_e}Hover`,"hover",_e,""]:[_e,""],dt=lt.getOptionScopes(this.getDataset(),ct),ht=Object.keys(defaults.elements[_e]),pt=()=>this.getContext(st,rt,tt),mt=lt.resolveNamedOptions(dt,ht,pt,ut);return mt.$shared&&(mt.$shared=at,nt[it]=Object.freeze(cloneIfNotShared(mt,at))),mt}_resolveAnimations(_e,tt,st){const rt=this.chart,nt=this._cachedDataOpts,it=`animation-${tt}`,ot=nt[it];if(ot)return ot;let at;if(rt.options.animation!==!1){const ct=this.chart.config,ut=ct.datasetAnimationScopeKeys(this._type,tt),dt=ct.getOptionScopes(this.getDataset(),ut);at=ct.createResolver(dt,this.getContext(_e,st,tt))}const lt=new Animations(rt,at&&at.animations);return at&&at._cacheable&&(nt[it]=Object.freeze(lt)),lt}getSharedOptions(_e){if(_e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},_e))}includeOptions(_e,tt){return!tt||isDirectUpdateMode(_e)||this.chart._animationsDisabled}_getSharedOptions(_e,tt){const st=this.resolveDataElementOptions(_e,tt),rt=this._sharedOptions,nt=this.getSharedOptions(st),it=this.includeOptions(tt,nt)||nt!==rt;return this.updateSharedOptions(nt,tt,st),{sharedOptions:nt,includeOptions:it}}updateElement(_e,tt,st,rt){isDirectUpdateMode(rt)?Object.assign(_e,st):this._resolveAnimations(tt,rt).update(_e,st)}updateSharedOptions(_e,tt,st){_e&&!isDirectUpdateMode(tt)&&this._resolveAnimations(void 0,tt).update(_e,st)}_setStyle(_e,tt,st,rt){_e.active=rt;const nt=this.getStyle(tt,rt);this._resolveAnimations(tt,st,rt).update(_e,{options:!rt&&this.getSharedOptions(nt)||nt})}removeHoverStyle(_e,tt,st){this._setStyle(_e,st,"active",!1)}setHoverStyle(_e,tt,st){this._setStyle(_e,st,"active",!0)}_removeDatasetHoverStyle(){const _e=this._cachedMeta.dataset;_e&&this._setStyle(_e,void 0,"active",!1)}_setDatasetHoverStyle(){const _e=this._cachedMeta.dataset;_e&&this._setStyle(_e,void 0,"active",!0)}_resyncElements(_e){const tt=this._data,st=this._cachedMeta.data;for(const[ot,at,lt]of this._syncList)this[ot](at,lt);this._syncList=[];const rt=st.length,nt=tt.length,it=Math.min(nt,rt);it&&this.parse(0,it),nt>rt?this._insertElements(rt,nt-rt,_e):nt<rt&&this._removeElements(nt,rt-nt)}_insertElements(_e,tt,st=!0){const rt=this._cachedMeta,nt=rt.data,it=_e+tt;let ot;const at=lt=>{for(lt.length+=tt,ot=lt.length-1;ot>=it;ot--)lt[ot]=lt[ot-tt]};for(at(nt),ot=_e;ot<it;++ot)nt[ot]=new this.dataElementType;this._parsing&&at(rt._parsed),this.parse(_e,tt),st&&this.updateElements(nt,_e,tt,"reset")}updateElements(_e,tt,st,rt){}_removeElements(_e,tt){const st=this._cachedMeta;if(this._parsing){const rt=st._parsed.splice(_e,tt);st._stacked&&clearStacks(st,rt)}st.data.splice(_e,tt)}_sync(_e){if(this._parsing)this._syncList.push(_e);else{const[tt,st,rt]=_e;this[tt](st,rt)}this.chart._dataChanges.push([this.index,..._e])}_onDataPush(){const _e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-_e,_e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(_e,tt){tt&&this._sync(["_removeElements",_e,tt]);const st=arguments.length-2;st&&this._sync(["_insertElements",_e,st])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}rs(DatasetController,"defaults",{}),rs(DatasetController,"datasetElementType",null),rs(DatasetController,"dataElementType",null);function getAllScaleValues(et,_e){if(!et._cache.$bar){const tt=et.getMatchingVisibleMetas(_e);let st=[];for(let rt=0,nt=tt.length;rt<nt;rt++)st=st.concat(tt[rt].controller.getAllParsedValues(et));et._cache.$bar=_arrayUnique(st.sort((rt,nt)=>rt-nt))}return et._cache.$bar}function computeMinSampleSize(et){const _e=et.iScale,tt=getAllScaleValues(_e,et.type);let st=_e._length,rt,nt,it,ot;const at=()=>{it===32767||it===-32768||(defined(ot)&&(st=Math.min(st,Math.abs(it-ot)||st)),ot=it)};for(rt=0,nt=tt.length;rt<nt;++rt)it=_e.getPixelForValue(tt[rt]),at();for(ot=void 0,rt=0,nt=_e.ticks.length;rt<nt;++rt)it=_e.getPixelForTick(rt),at();return st}function computeFitCategoryTraits(et,_e,tt,st){const rt=tt.barThickness;let nt,it;return isNullOrUndef(rt)?(nt=_e.min*tt.categoryPercentage,it=tt.barPercentage):(nt=rt*st,it=1),{chunk:nt/st,ratio:it,start:_e.pixels[et]-nt/2}}function computeFlexCategoryTraits(et,_e,tt,st){const rt=_e.pixels,nt=rt[et];let it=et>0?rt[et-1]:null,ot=et<rt.length-1?rt[et+1]:null;const at=tt.categoryPercentage;it===null&&(it=nt-(ot===null?_e.end-_e.start:ot-nt)),ot===null&&(ot=nt+nt-it);const lt=nt-(nt-Math.min(it,ot))/2*at;return{chunk:Math.abs(ot-it)/2*at/st,ratio:tt.barPercentage,start:lt}}function parseFloatBar(et,_e,tt,st){const rt=tt.parse(et[0],st),nt=tt.parse(et[1],st),it=Math.min(rt,nt),ot=Math.max(rt,nt);let at=it,lt=ot;Math.abs(it)>Math.abs(ot)&&(at=ot,lt=it),_e[tt.axis]=lt,_e._custom={barStart:at,barEnd:lt,start:rt,end:nt,min:it,max:ot}}function parseValue(et,_e,tt,st){return isArray(et)?parseFloatBar(et,_e,tt,st):_e[tt.axis]=tt.parse(et,st),_e}function parseArrayOrPrimitive(et,_e,tt,st){const rt=et.iScale,nt=et.vScale,it=rt.getLabels(),ot=rt===nt,at=[];let lt,ct,ut,dt;for(lt=tt,ct=tt+st;lt<ct;++lt)dt=_e[lt],ut={},ut[rt.axis]=ot||rt.parse(it[lt],lt),at.push(parseValue(dt,ut,nt,lt));return at}function isFloatBar(et){return et&&et.barStart!==void 0&&et.barEnd!==void 0}function barSign(et,_e,tt){return et!==0?sign(et):(_e.isHorizontal()?1:-1)*(_e.min>=tt?1:-1)}function borderProps(et){let _e,tt,st,rt,nt;return et.horizontal?(_e=et.base>et.x,tt="left",st="right"):(_e=et.base<et.y,tt="bottom",st="top"),_e?(rt="end",nt="start"):(rt="start",nt="end"),{start:tt,end:st,reverse:_e,top:rt,bottom:nt}}function setBorderSkipped(et,_e,tt,st){let rt=_e.borderSkipped;const nt={};if(!rt){et.borderSkipped=nt;return}if(rt===!0){et.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:it,end:ot,reverse:at,top:lt,bottom:ct}=borderProps(et);rt==="middle"&&tt&&(et.enableBorderRadius=!0,(tt._top||0)===st?rt=lt:(tt._bottom||0)===st?rt=ct:(nt[parseEdge(ct,it,ot,at)]=!0,rt=lt)),nt[parseEdge(rt,it,ot,at)]=!0,et.borderSkipped=nt}function parseEdge(et,_e,tt,st){return st?(et=swap(et,_e,tt),et=startEnd(et,tt,_e)):et=startEnd(et,_e,tt),et}function swap(et,_e,tt){return et===_e?tt:et===tt?_e:et}function startEnd(et,_e,tt){return et==="start"?_e:et==="end"?tt:et}function setInflateAmount(et,{inflateAmount:_e},tt){et.inflateAmount=_e==="auto"?tt===1?.33:0:_e}class BarController extends DatasetController{parsePrimitiveData(_e,tt,st,rt){return parseArrayOrPrimitive(_e,tt,st,rt)}parseArrayData(_e,tt,st,rt){return parseArrayOrPrimitive(_e,tt,st,rt)}parseObjectData(_e,tt,st,rt){const{iScale:nt,vScale:it}=_e,{xAxisKey:ot="x",yAxisKey:at="y"}=this._parsing,lt=nt.axis==="x"?ot:at,ct=it.axis==="x"?ot:at,ut=[];let dt,ht,pt,mt;for(dt=st,ht=st+rt;dt<ht;++dt)mt=tt[dt],pt={},pt[nt.axis]=nt.parse(resolveObjectKey(mt,lt),dt),ut.push(parseValue(resolveObjectKey(mt,ct),pt,it,dt));return ut}updateRangeFromParsed(_e,tt,st,rt){super.updateRangeFromParsed(_e,tt,st,rt);const nt=st._custom;nt&&tt===this._cachedMeta.vScale&&(_e.min=Math.min(_e.min,nt.min),_e.max=Math.max(_e.max,nt.max))}getMaxOverflow(){return 0}getLabelAndValue(_e){const tt=this._cachedMeta,{iScale:st,vScale:rt}=tt,nt=this.getParsed(_e),it=nt._custom,ot=isFloatBar(it)?"["+it.start+", "+it.end+"]":""+rt.getLabelForValue(nt[rt.axis]);return{label:""+st.getLabelForValue(nt[st.axis]),value:ot}}initialize(){this.enableOptionSharing=!0,super.initialize();const _e=this._cachedMeta;_e.stack=this.getDataset().stack}update(_e){const tt=this._cachedMeta;this.updateElements(tt.data,0,tt.data.length,_e)}updateElements(_e,tt,st,rt){const nt=rt==="reset",{index:it,_cachedMeta:{vScale:ot}}=this,at=ot.getBasePixel(),lt=ot.isHorizontal(),ct=this._getRuler(),{sharedOptions:ut,includeOptions:dt}=this._getSharedOptions(tt,rt);for(let ht=tt;ht<tt+st;ht++){const pt=this.getParsed(ht),mt=nt||isNullOrUndef(pt[ot.axis])?{base:at,head:at}:this._calculateBarValuePixels(ht),gt=this._calculateBarIndexPixels(ht,ct),ft=(pt._stacks||{})[ot.axis],xt={horizontal:lt,base:mt.base,enableBorderRadius:!ft||isFloatBar(pt._custom)||it===ft._top||it===ft._bottom,x:lt?mt.head:gt.center,y:lt?gt.center:mt.head,height:lt?gt.size:Math.abs(mt.size),width:lt?Math.abs(mt.size):gt.size};dt&&(xt.options=ut||this.resolveDataElementOptions(ht,_e[ht].active?"active":rt));const yt=xt.options||_e[ht].options;setBorderSkipped(xt,yt,ft,it),setInflateAmount(xt,yt,ct.ratio),this.updateElement(_e[ht],ht,xt,rt)}}_getStacks(_e,tt){const{iScale:st}=this._cachedMeta,rt=st.getMatchingVisibleMetas(this._type).filter(ct=>ct.controller.options.grouped),nt=st.options.stacked,it=[],ot=this._cachedMeta.controller.getParsed(tt),at=ot&&ot[st.axis],lt=ct=>{const ut=ct._parsed.find(ht=>ht[st.axis]===at),dt=ut&&ut[ct.vScale.axis];if(isNullOrUndef(dt)||isNaN(dt))return!0};for(const ct of rt)if(!(tt!==void 0&&lt(ct))&&((nt===!1||it.indexOf(ct.stack)===-1||nt===void 0&&ct.stack===void 0)&&it.push(ct.stack),ct.index===_e))break;return it.length||it.push(void 0),it}_getStackCount(_e){return this._getStacks(void 0,_e).length}_getStackIndex(_e,tt,st){const rt=this._getStacks(_e,st),nt=tt!==void 0?rt.indexOf(tt):-1;return nt===-1?rt.length-1:nt}_getRuler(){const _e=this.options,tt=this._cachedMeta,st=tt.iScale,rt=[];let nt,it;for(nt=0,it=tt.data.length;nt<it;++nt)rt.push(st.getPixelForValue(this.getParsed(nt)[st.axis],nt));const ot=_e.barThickness;return{min:ot||computeMinSampleSize(tt),pixels:rt,start:st._startPixel,end:st._endPixel,stackCount:this._getStackCount(),scale:st,grouped:_e.grouped,ratio:ot?1:_e.categoryPercentage*_e.barPercentage}}_calculateBarValuePixels(_e){const{_cachedMeta:{vScale:tt,_stacked:st,index:rt},options:{base:nt,minBarLength:it}}=this,ot=nt||0,at=this.getParsed(_e),lt=at._custom,ct=isFloatBar(lt);let ut=at[tt.axis],dt=0,ht=st?this.applyStack(tt,at,st):ut,pt,mt;ht!==ut&&(dt=ht-ut,ht=ut),ct&&(ut=lt.barStart,ht=lt.barEnd-lt.barStart,ut!==0&&sign(ut)!==sign(lt.barEnd)&&(dt=0),dt+=ut);const gt=!isNullOrUndef(nt)&&!ct?nt:dt;let ft=tt.getPixelForValue(gt);if(this.chart.getDataVisibility(_e)?pt=tt.getPixelForValue(dt+ht):pt=ft,mt=pt-ft,Math.abs(mt)<it){mt=barSign(mt,tt,ot)*it,ut===ot&&(ft-=mt/2);const xt=tt.getPixelForDecimal(0),yt=tt.getPixelForDecimal(1),bt=Math.min(xt,yt),jt=Math.max(xt,yt);ft=Math.max(Math.min(ft,jt),bt),pt=ft+mt,st&&!ct&&(at._stacks[tt.axis]._visualValues[rt]=tt.getValueForPixel(pt)-tt.getValueForPixel(ft))}if(ft===tt.getPixelForValue(ot)){const xt=sign(mt)*tt.getLineWidthForValue(ot)/2;ft+=xt,mt-=xt}return{size:mt,base:ft,head:pt,center:pt+mt/2}}_calculateBarIndexPixels(_e,tt){const st=tt.scale,rt=this.options,nt=rt.skipNull,it=valueOrDefault(rt.maxBarThickness,1/0);let ot,at;if(tt.grouped){const lt=nt?this._getStackCount(_e):tt.stackCount,ct=rt.barThickness==="flex"?computeFlexCategoryTraits(_e,tt,rt,lt):computeFitCategoryTraits(_e,tt,rt,lt),ut=this._getStackIndex(this.index,this._cachedMeta.stack,nt?_e:void 0);ot=ct.start+ct.chunk*ut+ct.chunk/2,at=Math.min(it,ct.chunk*ct.ratio)}else ot=st.getPixelForValue(this.getParsed(_e)[st.axis],_e),at=Math.min(it,tt.min*tt.ratio);return{base:ot-at/2,head:ot+at/2,center:ot,size:at}}draw(){const _e=this._cachedMeta,tt=_e.vScale,st=_e.data,rt=st.length;let nt=0;for(;nt<rt;++nt)this.getParsed(nt)[tt.axis]!==null&&!st[nt].hidden&&st[nt].draw(this._ctx)}}rs(BarController,"id","bar"),rs(BarController,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),rs(BarController,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function getRatioAndOffset(et,_e,tt){let st=1,rt=1,nt=0,it=0;if(_e<TAU){const ot=et,at=ot+_e,lt=Math.cos(ot),ct=Math.sin(ot),ut=Math.cos(at),dt=Math.sin(at),ht=(yt,bt,jt)=>_angleBetween(yt,ot,at,!0)?1:Math.max(bt,bt*tt,jt,jt*tt),pt=(yt,bt,jt)=>_angleBetween(yt,ot,at,!0)?-1:Math.min(bt,bt*tt,jt,jt*tt),mt=ht(0,lt,ut),gt=ht(HALF_PI,ct,dt),ft=pt(PI,lt,ut),xt=pt(PI+HALF_PI,ct,dt);st=(mt-ft)/2,rt=(gt-xt)/2,nt=-(mt+ft)/2,it=-(gt+xt)/2}return{ratioX:st,ratioY:rt,offsetX:nt,offsetY:it}}class DoughnutController extends DatasetController{constructor(_e,tt){super(_e,tt),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(_e,tt){const st=this.getDataset().data,rt=this._cachedMeta;if(this._parsing===!1)rt._parsed=st;else{let nt=at=>+st[at];if(isObject$1(st[_e])){const{key:at="value"}=this._parsing;nt=lt=>+resolveObjectKey(st[lt],at)}let it,ot;for(it=_e,ot=_e+tt;it<ot;++it)rt._parsed[it]=nt(it)}}_getRotation(){return toRadians(this.options.rotation-90)}_getCircumference(){return toRadians(this.options.circumference)}_getRotationExtents(){let _e=TAU,tt=-TAU;for(let st=0;st<this.chart.data.datasets.length;++st)if(this.chart.isDatasetVisible(st)&&this.chart.getDatasetMeta(st).type===this._type){const rt=this.chart.getDatasetMeta(st).controller,nt=rt._getRotation(),it=rt._getCircumference();_e=Math.min(_e,nt),tt=Math.max(tt,nt+it)}return{rotation:_e,circumference:tt-_e}}update(_e){const tt=this.chart,{chartArea:st}=tt,rt=this._cachedMeta,nt=rt.data,it=this.getMaxBorderWidth()+this.getMaxOffset(nt)+this.options.spacing,ot=Math.max((Math.min(st.width,st.height)-it)/2,0),at=Math.min(toPercentage(this.options.cutout,ot),1),lt=this._getRingWeight(this.index),{circumference:ct,rotation:ut}=this._getRotationExtents(),{ratioX:dt,ratioY:ht,offsetX:pt,offsetY:mt}=getRatioAndOffset(ut,ct,at),gt=(st.width-it)/dt,ft=(st.height-it)/ht,xt=Math.max(Math.min(gt,ft)/2,0),yt=toDimension(this.options.radius,xt),bt=Math.max(yt*at,0),jt=(yt-bt)/this._getVisibleDatasetWeightTotal();this.offsetX=pt*yt,this.offsetY=mt*yt,rt.total=this.calculateTotal(),this.outerRadius=yt-jt*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-jt*lt,0),this.updateElements(nt,0,nt.length,_e)}_circumference(_e,tt){const st=this.options,rt=this._cachedMeta,nt=this._getCircumference();return tt&&st.animation.animateRotate||!this.chart.getDataVisibility(_e)||rt._parsed[_e]===null||rt.data[_e].hidden?0:this.calculateCircumference(rt._parsed[_e]*nt/TAU)}updateElements(_e,tt,st,rt){const nt=rt==="reset",it=this.chart,ot=it.chartArea,lt=it.options.animation,ct=(ot.left+ot.right)/2,ut=(ot.top+ot.bottom)/2,dt=nt&&lt.animateScale,ht=dt?0:this.innerRadius,pt=dt?0:this.outerRadius,{sharedOptions:mt,includeOptions:gt}=this._getSharedOptions(tt,rt);let ft=this._getRotation(),xt;for(xt=0;xt<tt;++xt)ft+=this._circumference(xt,nt);for(xt=tt;xt<tt+st;++xt){const yt=this._circumference(xt,nt),bt=_e[xt],jt={x:ct+this.offsetX,y:ut+this.offsetY,startAngle:ft,endAngle:ft+yt,circumference:yt,outerRadius:pt,innerRadius:ht};gt&&(jt.options=mt||this.resolveDataElementOptions(xt,bt.active?"active":rt)),ft+=yt,this.updateElement(bt,xt,jt,rt)}}calculateTotal(){const _e=this._cachedMeta,tt=_e.data;let st=0,rt;for(rt=0;rt<tt.length;rt++){const nt=_e._parsed[rt];nt!==null&&!isNaN(nt)&&this.chart.getDataVisibility(rt)&&!tt[rt].hidden&&(st+=Math.abs(nt))}return st}calculateCircumference(_e){const tt=this._cachedMeta.total;return tt>0&&!isNaN(_e)?TAU*(Math.abs(_e)/tt):0}getLabelAndValue(_e){const tt=this._cachedMeta,st=this.chart,rt=st.data.labels||[],nt=formatNumber(tt._parsed[_e],st.options.locale);return{label:rt[_e]||"",value:nt}}getMaxBorderWidth(_e){let tt=0;const st=this.chart;let rt,nt,it,ot,at;if(!_e){for(rt=0,nt=st.data.datasets.length;rt<nt;++rt)if(st.isDatasetVisible(rt)){it=st.getDatasetMeta(rt),_e=it.data,ot=it.controller;break}}if(!_e)return 0;for(rt=0,nt=_e.length;rt<nt;++rt)at=ot.resolveDataElementOptions(rt),at.borderAlign!=="inner"&&(tt=Math.max(tt,at.borderWidth||0,at.hoverBorderWidth||0));return tt}getMaxOffset(_e){let tt=0;for(let st=0,rt=_e.length;st<rt;++st){const nt=this.resolveDataElementOptions(st);tt=Math.max(tt,nt.offset||0,nt.hoverOffset||0)}return tt}_getRingWeightOffset(_e){let tt=0;for(let st=0;st<_e;++st)this.chart.isDatasetVisible(st)&&(tt+=this._getRingWeight(st));return tt}_getRingWeight(_e){return Math.max(valueOrDefault(this.chart.data.datasets[_e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}rs(DoughnutController,"id","doughnut"),rs(DoughnutController,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),rs(DoughnutController,"descriptors",{_scriptable:_e=>_e!=="spacing",_indexable:_e=>_e!=="spacing"&&!_e.startsWith("borderDash")&&!_e.startsWith("hoverBorderDash")}),rs(DoughnutController,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(_e){const tt=_e.data;if(tt.labels.length&&tt.datasets.length){const{labels:{pointStyle:st,color:rt}}=_e.legend.options;return tt.labels.map((nt,it)=>{const at=_e.getDatasetMeta(0).controller.getStyle(it);return{text:nt,fillStyle:at.backgroundColor,strokeStyle:at.borderColor,fontColor:rt,lineWidth:at.borderWidth,pointStyle:st,hidden:!_e.getDataVisibility(it),index:it}})}return[]}},onClick(_e,tt,st){st.chart.toggleDataVisibility(tt.index),st.chart.update()}}}});class LineController extends DatasetController{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(_e){const tt=this._cachedMeta,{dataset:st,data:rt=[],_dataset:nt}=tt,it=this.chart._animationsDisabled;let{start:ot,count:at}=_getStartAndCountOfVisiblePoints(tt,rt,it);this._drawStart=ot,this._drawCount=at,_scaleRangesChanged(tt)&&(ot=0,at=rt.length),st._chart=this.chart,st._datasetIndex=this.index,st._decimated=!!nt._decimated,st.points=rt;const lt=this.resolveDatasetElementOptions(_e);this.options.showLine||(lt.borderWidth=0),lt.segment=this.options.segment,this.updateElement(st,void 0,{animated:!it,options:lt},_e),this.updateElements(rt,ot,at,_e)}updateElements(_e,tt,st,rt){const nt=rt==="reset",{iScale:it,vScale:ot,_stacked:at,_dataset:lt}=this._cachedMeta,{sharedOptions:ct,includeOptions:ut}=this._getSharedOptions(tt,rt),dt=it.axis,ht=ot.axis,{spanGaps:pt,segment:mt}=this.options,gt=isNumber(pt)?pt:Number.POSITIVE_INFINITY,ft=this.chart._animationsDisabled||nt||rt==="none",xt=tt+st,yt=_e.length;let bt=tt>0&&this.getParsed(tt-1);for(let jt=0;jt<yt;++jt){const Ct=_e[jt],St=ft?Ct:{};if(jt<tt||jt>=xt){St.skip=!0;continue}const vt=this.getParsed(jt),Et=isNullOrUndef(vt[ht]),Rt=St[dt]=it.getPixelForValue(vt[dt],jt),$t=St[ht]=nt||Et?ot.getBasePixel():ot.getPixelForValue(at?this.applyStack(ot,vt,at):vt[ht],jt);St.skip=isNaN(Rt)||isNaN($t)||Et,St.stop=jt>0&&Math.abs(vt[dt]-bt[dt])>gt,mt&&(St.parsed=vt,St.raw=lt.data[jt]),ut&&(St.options=ct||this.resolveDataElementOptions(jt,Ct.active?"active":rt)),ft||this.updateElement(Ct,jt,St,rt),bt=vt}}getMaxOverflow(){const _e=this._cachedMeta,tt=_e.dataset,st=tt.options&&tt.options.borderWidth||0,rt=_e.data||[];if(!rt.length)return st;const nt=rt[0].size(this.resolveDataElementOptions(0)),it=rt[rt.length-1].size(this.resolveDataElementOptions(rt.length-1));return Math.max(st,nt,it)/2}draw(){const _e=this._cachedMeta;_e.dataset.updateControlPoints(this.chart.chartArea,_e.iScale.axis),super.draw()}}rs(LineController,"id","line"),rs(LineController,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),rs(LineController,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapterBase{constructor(_e){rs(this,"options");this.options=_e||{}}static override(_e){Object.assign(DateAdapterBase.prototype,_e)}init(){}formats(){return abstract()}parse(){return abstract()}format(){return abstract()}add(){return abstract()}diff(){return abstract()}startOf(){return abstract()}endOf(){return abstract()}}var adapters={_date:DateAdapterBase};function binarySearch(et,_e,tt,st){const{controller:rt,data:nt,_sorted:it}=et,ot=rt._cachedMeta.iScale,at=et.dataset&&et.dataset.options?et.dataset.options.spanGaps:null;if(ot&&_e===ot.axis&&_e!=="r"&&it&&nt.length){const lt=ot._reversePixels?_rlookupByKey:_lookupByKey;if(st){if(rt._sharedOptions){const ct=nt[0],ut=typeof ct.getRange=="function"&&ct.getRange(_e);if(ut){const dt=lt(nt,_e,tt-ut),ht=lt(nt,_e,tt+ut);return{lo:dt.lo,hi:ht.hi}}}}else{const ct=lt(nt,_e,tt);if(at){const{vScale:ut}=rt._cachedMeta,{_parsed:dt}=et,ht=dt.slice(0,ct.lo+1).reverse().findIndex(mt=>!isNullOrUndef(mt[ut.axis]));ct.lo-=Math.max(0,ht);const pt=dt.slice(ct.hi).findIndex(mt=>!isNullOrUndef(mt[ut.axis]));ct.hi+=Math.max(0,pt)}return ct}}return{lo:0,hi:nt.length-1}}function evaluateInteractionItems(et,_e,tt,st,rt){const nt=et.getSortedVisibleDatasetMetas(),it=tt[_e];for(let ot=0,at=nt.length;ot<at;++ot){const{index:lt,data:ct}=nt[ot],{lo:ut,hi:dt}=binarySearch(nt[ot],_e,it,rt);for(let ht=ut;ht<=dt;++ht){const pt=ct[ht];pt.skip||st(pt,lt,ht)}}}function getDistanceMetricForAxis(et){const _e=et.indexOf("x")!==-1,tt=et.indexOf("y")!==-1;return function(st,rt){const nt=_e?Math.abs(st.x-rt.x):0,it=tt?Math.abs(st.y-rt.y):0;return Math.sqrt(Math.pow(nt,2)+Math.pow(it,2))}}function getIntersectItems(et,_e,tt,st,rt){const nt=[];return!rt&&!et.isPointInArea(_e)||evaluateInteractionItems(et,tt,_e,function(ot,at,lt){!rt&&!_isPointInArea(ot,et.chartArea,0)||ot.inRange(_e.x,_e.y,st)&&nt.push({element:ot,datasetIndex:at,index:lt})},!0),nt}function getNearestRadialItems(et,_e,tt,st){let rt=[];function nt(it,ot,at){const{startAngle:lt,endAngle:ct}=it.getProps(["startAngle","endAngle"],st),{angle:ut}=getAngleFromPoint(it,{x:_e.x,y:_e.y});_angleBetween(ut,lt,ct)&&rt.push({element:it,datasetIndex:ot,index:at})}return evaluateInteractionItems(et,tt,_e,nt),rt}function getNearestCartesianItems(et,_e,tt,st,rt,nt){let it=[];const ot=getDistanceMetricForAxis(tt);let at=Number.POSITIVE_INFINITY;function lt(ct,ut,dt){const ht=ct.inRange(_e.x,_e.y,rt);if(st&&!ht)return;const pt=ct.getCenterPoint(rt);if(!(!!nt||et.isPointInArea(pt))&&!ht)return;const gt=ot(_e,pt);gt<at?(it=[{element:ct,datasetIndex:ut,index:dt}],at=gt):gt===at&&it.push({element:ct,datasetIndex:ut,index:dt})}return evaluateInteractionItems(et,tt,_e,lt),it}function getNearestItems(et,_e,tt,st,rt,nt){return!nt&&!et.isPointInArea(_e)?[]:tt==="r"&&!st?getNearestRadialItems(et,_e,tt,rt):getNearestCartesianItems(et,_e,tt,st,rt,nt)}function getAxisItems(et,_e,tt,st,rt){const nt=[],it=tt==="x"?"inXRange":"inYRange";let ot=!1;return evaluateInteractionItems(et,tt,_e,(at,lt,ct)=>{at[it]&&at[it](_e[tt],rt)&&(nt.push({element:at,datasetIndex:lt,index:ct}),ot=ot||at.inRange(_e.x,_e.y,rt))}),st&&!ot?[]:nt}var Interaction={evaluateInteractionItems,modes:{index(et,_e,tt,st){const rt=getRelativePosition(_e,et),nt=tt.axis||"x",it=tt.includeInvisible||!1,ot=tt.intersect?getIntersectItems(et,rt,nt,st,it):getNearestItems(et,rt,nt,!1,st,it),at=[];return ot.length?(et.getSortedVisibleDatasetMetas().forEach(lt=>{const ct=ot[0].index,ut=lt.data[ct];ut&&!ut.skip&&at.push({element:ut,datasetIndex:lt.index,index:ct})}),at):[]},dataset(et,_e,tt,st){const rt=getRelativePosition(_e,et),nt=tt.axis||"xy",it=tt.includeInvisible||!1;let ot=tt.intersect?getIntersectItems(et,rt,nt,st,it):getNearestItems(et,rt,nt,!1,st,it);if(ot.length>0){const at=ot[0].datasetIndex,lt=et.getDatasetMeta(at).data;ot=[];for(let ct=0;ct<lt.length;++ct)ot.push({element:lt[ct],datasetIndex:at,index:ct})}return ot},point(et,_e,tt,st){const rt=getRelativePosition(_e,et),nt=tt.axis||"xy",it=tt.includeInvisible||!1;return getIntersectItems(et,rt,nt,st,it)},nearest(et,_e,tt,st){const rt=getRelativePosition(_e,et),nt=tt.axis||"xy",it=tt.includeInvisible||!1;return getNearestItems(et,rt,nt,tt.intersect,st,it)},x(et,_e,tt,st){const rt=getRelativePosition(_e,et);return getAxisItems(et,rt,"x",tt.intersect,st)},y(et,_e,tt,st){const rt=getRelativePosition(_e,et);return getAxisItems(et,rt,"y",tt.intersect,st)}}};const STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(et,_e){return et.filter(tt=>tt.pos===_e)}function filterDynamicPositionByAxis(et,_e){return et.filter(tt=>STATIC_POSITIONS.indexOf(tt.pos)===-1&&tt.box.axis===_e)}function sortByWeight(et,_e){return et.sort((tt,st)=>{const rt=_e?st:tt,nt=_e?tt:st;return rt.weight===nt.weight?rt.index-nt.index:rt.weight-nt.weight})}function wrapBoxes(et){const _e=[];let tt,st,rt,nt,it,ot;for(tt=0,st=(et||[]).length;tt<st;++tt)rt=et[tt],{position:nt,options:{stack:it,stackWeight:ot=1}}=rt,_e.push({index:tt,box:rt,pos:nt,horizontal:rt.isHorizontal(),weight:rt.weight,stack:it&&nt+it,stackWeight:ot});return _e}function buildStacks(et){const _e={};for(const tt of et){const{stack:st,pos:rt,stackWeight:nt}=tt;if(!st||!STATIC_POSITIONS.includes(rt))continue;const it=_e[st]||(_e[st]={count:0,placed:0,weight:0,size:0});it.count++,it.weight+=nt}return _e}function setLayoutDims(et,_e){const tt=buildStacks(et),{vBoxMaxWidth:st,hBoxMaxHeight:rt}=_e;let nt,it,ot;for(nt=0,it=et.length;nt<it;++nt){ot=et[nt];const{fullSize:at}=ot.box,lt=tt[ot.stack],ct=lt&&ot.stackWeight/lt.weight;ot.horizontal?(ot.width=ct?ct*st:at&&_e.availableWidth,ot.height=rt):(ot.width=st,ot.height=ct?ct*rt:at&&_e.availableHeight)}return tt}function buildLayoutBoxes(et){const _e=wrapBoxes(et),tt=sortByWeight(_e.filter(lt=>lt.box.fullSize),!0),st=sortByWeight(filterByPosition(_e,"left"),!0),rt=sortByWeight(filterByPosition(_e,"right")),nt=sortByWeight(filterByPosition(_e,"top"),!0),it=sortByWeight(filterByPosition(_e,"bottom")),ot=filterDynamicPositionByAxis(_e,"x"),at=filterDynamicPositionByAxis(_e,"y");return{fullSize:tt,leftAndTop:st.concat(nt),rightAndBottom:rt.concat(at).concat(it).concat(ot),chartArea:filterByPosition(_e,"chartArea"),vertical:st.concat(rt).concat(at),horizontal:nt.concat(it).concat(ot)}}function getCombinedMax(et,_e,tt,st){return Math.max(et[tt],_e[tt])+Math.max(et[st],_e[st])}function updateMaxPadding(et,_e){et.top=Math.max(et.top,_e.top),et.left=Math.max(et.left,_e.left),et.bottom=Math.max(et.bottom,_e.bottom),et.right=Math.max(et.right,_e.right)}function updateDims(et,_e,tt,st){const{pos:rt,box:nt}=tt,it=et.maxPadding;if(!isObject$1(rt)){tt.size&&(et[rt]-=tt.size);const ut=st[tt.stack]||{size:0,count:1};ut.size=Math.max(ut.size,tt.horizontal?nt.height:nt.width),tt.size=ut.size/ut.count,et[rt]+=tt.size}nt.getPadding&&updateMaxPadding(it,nt.getPadding());const ot=Math.max(0,_e.outerWidth-getCombinedMax(it,et,"left","right")),at=Math.max(0,_e.outerHeight-getCombinedMax(it,et,"top","bottom")),lt=ot!==et.w,ct=at!==et.h;return et.w=ot,et.h=at,tt.horizontal?{same:lt,other:ct}:{same:ct,other:lt}}function handleMaxPadding(et){const _e=et.maxPadding;function tt(st){const rt=Math.max(_e[st]-et[st],0);return et[st]+=rt,rt}et.y+=tt("top"),et.x+=tt("left"),tt("right"),tt("bottom")}function getMargins(et,_e){const tt=_e.maxPadding;function st(rt){const nt={left:0,top:0,right:0,bottom:0};return rt.forEach(it=>{nt[it]=Math.max(_e[it],tt[it])}),nt}return st(et?["left","right"]:["top","bottom"])}function fitBoxes(et,_e,tt,st){const rt=[];let nt,it,ot,at,lt,ct;for(nt=0,it=et.length,lt=0;nt<it;++nt){ot=et[nt],at=ot.box,at.update(ot.width||_e.w,ot.height||_e.h,getMargins(ot.horizontal,_e));const{same:ut,other:dt}=updateDims(_e,tt,ot,st);lt|=ut&&rt.length,ct=ct||dt,at.fullSize||rt.push(ot)}return lt&&fitBoxes(rt,_e,tt,st)||ct}function setBoxDims(et,_e,tt,st,rt){et.top=tt,et.left=_e,et.right=_e+st,et.bottom=tt+rt,et.width=st,et.height=rt}function placeBoxes(et,_e,tt,st){const rt=tt.padding;let{x:nt,y:it}=_e;for(const ot of et){const at=ot.box,lt=st[ot.stack]||{count:1,placed:0,weight:1},ct=ot.stackWeight/lt.weight||1;if(ot.horizontal){const ut=_e.w*ct,dt=lt.size||at.height;defined(lt.start)&&(it=lt.start),at.fullSize?setBoxDims(at,rt.left,it,tt.outerWidth-rt.right-rt.left,dt):setBoxDims(at,_e.left+lt.placed,it,ut,dt),lt.start=it,lt.placed+=ut,it=at.bottom}else{const ut=_e.h*ct,dt=lt.size||at.width;defined(lt.start)&&(nt=lt.start),at.fullSize?setBoxDims(at,nt,rt.top,dt,tt.outerHeight-rt.bottom-rt.top):setBoxDims(at,nt,_e.top+lt.placed,dt,ut),lt.start=nt,lt.placed+=ut,nt=at.right}}_e.x=nt,_e.y=it}var layouts={addBox(et,_e){et.boxes||(et.boxes=[]),_e.fullSize=_e.fullSize||!1,_e.position=_e.position||"top",_e.weight=_e.weight||0,_e._layers=_e._layers||function(){return[{z:0,draw(tt){_e.draw(tt)}}]},et.boxes.push(_e)},removeBox(et,_e){const tt=et.boxes?et.boxes.indexOf(_e):-1;tt!==-1&&et.boxes.splice(tt,1)},configure(et,_e,tt){_e.fullSize=tt.fullSize,_e.position=tt.position,_e.weight=tt.weight},update(et,_e,tt,st){if(!et)return;const rt=toPadding(et.options.layout.padding),nt=Math.max(_e-rt.width,0),it=Math.max(tt-rt.height,0),ot=buildLayoutBoxes(et.boxes),at=ot.vertical,lt=ot.horizontal;each(et.boxes,mt=>{typeof mt.beforeLayout=="function"&&mt.beforeLayout()});const ct=at.reduce((mt,gt)=>gt.box.options&&gt.box.options.display===!1?mt:mt+1,0)||1,ut=Object.freeze({outerWidth:_e,outerHeight:tt,padding:rt,availableWidth:nt,availableHeight:it,vBoxMaxWidth:nt/2/ct,hBoxMaxHeight:it/2}),dt=Object.assign({},rt);updateMaxPadding(dt,toPadding(st));const ht=Object.assign({maxPadding:dt,w:nt,h:it,x:rt.left,y:rt.top},rt),pt=setLayoutDims(at.concat(lt),ut);fitBoxes(ot.fullSize,ht,ut,pt),fitBoxes(at,ht,ut,pt),fitBoxes(lt,ht,ut,pt)&&fitBoxes(at,ht,ut,pt),handleMaxPadding(ht),placeBoxes(ot.leftAndTop,ht,ut,pt),ht.x+=ht.w,ht.y+=ht.h,placeBoxes(ot.rightAndBottom,ht,ut,pt),et.chartArea={left:ht.left,top:ht.top,right:ht.left+ht.w,bottom:ht.top+ht.h,height:ht.h,width:ht.w},each(ot.chartArea,mt=>{const gt=mt.box;Object.assign(gt,et.chartArea),gt.update(ht.w,ht.h,{left:0,top:0,right:0,bottom:0})})}};class BasePlatform{acquireContext(_e,tt){}releaseContext(_e){return!1}addEventListener(_e,tt,st){}removeEventListener(_e,tt,st){}getDevicePixelRatio(){return 1}getMaximumSize(_e,tt,st,rt){return tt=Math.max(0,tt||_e.width),st=st||_e.height,{width:tt,height:Math.max(0,rt?Math.floor(tt/rt):st)}}isAttached(_e){return!0}updateConfig(_e){}}class BasicPlatform extends BasePlatform{acquireContext(_e){return _e&&_e.getContext&&_e.getContext("2d")||null}updateConfig(_e){_e.options.animation=!1}}const EXPANDO_KEY="$chartjs",EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=et=>et===null||et==="";function initCanvas(et,_e){const tt=et.style,st=et.getAttribute("height"),rt=et.getAttribute("width");if(et[EXPANDO_KEY]={initial:{height:st,width:rt,style:{display:tt.display,height:tt.height,width:tt.width}}},tt.display=tt.display||"block",tt.boxSizing=tt.boxSizing||"border-box",isNullOrEmpty(rt)){const nt=readUsedSize(et,"width");nt!==void 0&&(et.width=nt)}if(isNullOrEmpty(st))if(et.style.height==="")et.height=et.width/(_e||2);else{const nt=readUsedSize(et,"height");nt!==void 0&&(et.height=nt)}return et}const eventListenerOptions=supportsEventListenerOptions?{passive:!0}:!1;function addListener(et,_e,tt){et&&et.addEventListener(_e,tt,eventListenerOptions)}function removeListener(et,_e,tt){et&&et.canvas&&et.canvas.removeEventListener(_e,tt,eventListenerOptions)}function fromNativeEvent(et,_e){const tt=EVENT_TYPES[et.type]||et.type,{x:st,y:rt}=getRelativePosition(et,_e);return{type:tt,chart:_e,native:et,x:st!==void 0?st:null,y:rt!==void 0?rt:null}}function nodeListContains(et,_e){for(const tt of et)if(tt===_e||tt.contains(_e))return!0}function createAttachObserver(et,_e,tt){const st=et.canvas,rt=new MutationObserver(nt=>{let it=!1;for(const ot of nt)it=it||nodeListContains(ot.addedNodes,st),it=it&&!nodeListContains(ot.removedNodes,st);it&&tt()});return rt.observe(document,{childList:!0,subtree:!0}),rt}function createDetachObserver(et,_e,tt){const st=et.canvas,rt=new MutationObserver(nt=>{let it=!1;for(const ot of nt)it=it||nodeListContains(ot.removedNodes,st),it=it&&!nodeListContains(ot.addedNodes,st);it&&tt()});return rt.observe(document,{childList:!0,subtree:!0}),rt}const drpListeningCharts=new Map;let oldDevicePixelRatio=0;function onWindowResize(){const et=window.devicePixelRatio;et!==oldDevicePixelRatio&&(oldDevicePixelRatio=et,drpListeningCharts.forEach((_e,tt)=>{tt.currentDevicePixelRatio!==et&&_e()}))}function listenDevicePixelRatioChanges(et,_e){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(et,_e)}function unlistenDevicePixelRatioChanges(et){drpListeningCharts.delete(et),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}function createResizeObserver(et,_e,tt){const st=et.canvas,rt=st&&_getParentNode(st);if(!rt)return;const nt=throttled((ot,at)=>{const lt=rt.clientWidth;tt(ot,at),lt<rt.clientWidth&&tt()},window),it=new ResizeObserver(ot=>{const at=ot[0],lt=at.contentRect.width,ct=at.contentRect.height;lt===0&&ct===0||nt(lt,ct)});return it.observe(rt),listenDevicePixelRatioChanges(et,nt),it}function releaseObserver(et,_e,tt){tt&&tt.disconnect(),_e==="resize"&&unlistenDevicePixelRatioChanges(et)}function createProxyAndListen(et,_e,tt){const st=et.canvas,rt=throttled(nt=>{et.ctx!==null&&tt(fromNativeEvent(nt,et))},et);return addListener(st,_e,rt),rt}class DomPlatform extends BasePlatform{acquireContext(_e,tt){const st=_e&&_e.getContext&&_e.getContext("2d");return st&&st.canvas===_e?(initCanvas(_e,tt),st):null}releaseContext(_e){const tt=_e.canvas;if(!tt[EXPANDO_KEY])return!1;const st=tt[EXPANDO_KEY].initial;["height","width"].forEach(nt=>{const it=st[nt];isNullOrUndef(it)?tt.removeAttribute(nt):tt.setAttribute(nt,it)});const rt=st.style||{};return Object.keys(rt).forEach(nt=>{tt.style[nt]=rt[nt]}),tt.width=tt.width,delete tt[EXPANDO_KEY],!0}addEventListener(_e,tt,st){this.removeEventListener(_e,tt);const rt=_e.$proxies||(_e.$proxies={}),it={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[tt]||createProxyAndListen;rt[tt]=it(_e,tt,st)}removeEventListener(_e,tt){const st=_e.$proxies||(_e.$proxies={}),rt=st[tt];if(!rt)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[tt]||removeListener)(_e,tt,rt),st[tt]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(_e,tt,st,rt){return getMaximumSize(_e,tt,st,rt)}isAttached(_e){const tt=_e&&_getParentNode(_e);return!!(tt&&tt.isConnected)}}function _detectPlatform(et){return!_isDomSupported()||typeof OffscreenCanvas<"u"&&et instanceof OffscreenCanvas?BasicPlatform:DomPlatform}class Element{constructor(){rs(this,"x");rs(this,"y");rs(this,"active",!1);rs(this,"options");rs(this,"$animations")}tooltipPosition(_e){const{x:tt,y:st}=this.getProps(["x","y"],_e);return{x:tt,y:st}}hasValue(){return isNumber(this.x)&&isNumber(this.y)}getProps(_e,tt){const st=this.$animations;if(!tt||!st)return this;const rt={};return _e.forEach(nt=>{rt[nt]=st[nt]&&st[nt].active()?st[nt]._to:this[nt]}),rt}}rs(Element,"defaults",{}),rs(Element,"defaultRoutes");function autoSkip(et,_e){const tt=et.options.ticks,st=determineMaxTicks(et),rt=Math.min(tt.maxTicksLimit||st,st),nt=tt.major.enabled?getMajorIndices(_e):[],it=nt.length,ot=nt[0],at=nt[it-1],lt=[];if(it>rt)return skipMajors(_e,lt,nt,it/rt),lt;const ct=calculateSpacing(nt,_e,rt);if(it>0){let ut,dt;const ht=it>1?Math.round((at-ot)/(it-1)):null;for(skip(_e,lt,ct,isNullOrUndef(ht)?0:ot-ht,ot),ut=0,dt=it-1;ut<dt;ut++)skip(_e,lt,ct,nt[ut],nt[ut+1]);return skip(_e,lt,ct,at,isNullOrUndef(ht)?_e.length:at+ht),lt}return skip(_e,lt,ct),lt}function determineMaxTicks(et){const _e=et.options.offset,tt=et._tickSize(),st=et._length/tt+(_e?0:1),rt=et._maxLength/tt;return Math.floor(Math.min(st,rt))}function calculateSpacing(et,_e,tt){const st=getEvenSpacing(et),rt=_e.length/tt;if(!st)return Math.max(rt,1);const nt=_factorize(st);for(let it=0,ot=nt.length-1;it<ot;it++){const at=nt[it];if(at>rt)return at}return Math.max(rt,1)}function getMajorIndices(et){const _e=[];let tt,st;for(tt=0,st=et.length;tt<st;tt++)et[tt].major&&_e.push(tt);return _e}function skipMajors(et,_e,tt,st){let rt=0,nt=tt[0],it;for(st=Math.ceil(st),it=0;it<et.length;it++)it===nt&&(_e.push(et[it]),rt++,nt=tt[rt*st])}function skip(et,_e,tt,st,rt){const nt=valueOrDefault(st,0),it=Math.min(valueOrDefault(rt,et.length),et.length);let ot=0,at,lt,ct;for(tt=Math.ceil(tt),rt&&(at=rt-st,tt=at/Math.floor(at/tt)),ct=nt;ct<0;)ot++,ct=Math.round(nt+ot*tt);for(lt=Math.max(nt,0);lt<it;lt++)lt===ct&&(_e.push(et[lt]),ot++,ct=Math.round(nt+ot*tt))}function getEvenSpacing(et){const _e=et.length;let tt,st;if(_e<2)return!1;for(st=et[0],tt=1;tt<_e;++tt)if(et[tt]-et[tt-1]!==st)return!1;return st}const reverseAlign=et=>et==="left"?"right":et==="right"?"left":et,offsetFromEdge=(et,_e,tt)=>_e==="top"||_e==="left"?et[_e]+tt:et[_e]-tt,getTicksLimit=(et,_e)=>Math.min(_e||et,et);function sample(et,_e){const tt=[],st=et.length/_e,rt=et.length;let nt=0;for(;nt<rt;nt+=st)tt.push(et[Math.floor(nt)]);return tt}function getPixelForGridLine(et,_e,tt){const st=et.ticks.length,rt=Math.min(_e,st-1),nt=et._startPixel,it=et._endPixel,ot=1e-6;let at=et.getPixelForTick(rt),lt;if(!(tt&&(st===1?lt=Math.max(at-nt,it-at):_e===0?lt=(et.getPixelForTick(1)-at)/2:lt=(at-et.getPixelForTick(rt-1))/2,at+=rt<_e?lt:-lt,at<nt-ot||at>it+ot)))return at}function garbageCollect(et,_e){each(et,tt=>{const st=tt.gc,rt=st.length/2;let nt;if(rt>_e){for(nt=0;nt<rt;++nt)delete tt.data[st[nt]];st.splice(0,rt)}})}function getTickMarkLength(et){return et.drawTicks?et.tickLength:0}function getTitleHeight(et,_e){if(!et.display)return 0;const tt=toFont(et.font,_e),st=toPadding(et.padding);return(isArray(et.text)?et.text.length:1)*tt.lineHeight+st.height}function createScaleContext(et,_e){return createContext(et,{scale:_e,type:"scale"})}function createTickContext(et,_e,tt){return createContext(et,{tick:tt,index:_e,type:"tick"})}function titleAlign(et,_e,tt){let st=_toLeftRightCenter(et);return(tt&&_e!=="right"||!tt&&_e==="right")&&(st=reverseAlign(st)),st}function titleArgs(et,_e,tt,st){const{top:rt,left:nt,bottom:it,right:ot,chart:at}=et,{chartArea:lt,scales:ct}=at;let ut=0,dt,ht,pt;const mt=it-rt,gt=ot-nt;if(et.isHorizontal()){if(ht=_alignStartEnd(st,nt,ot),isObject$1(tt)){const ft=Object.keys(tt)[0],xt=tt[ft];pt=ct[ft].getPixelForValue(xt)+mt-_e}else tt==="center"?pt=(lt.bottom+lt.top)/2+mt-_e:pt=offsetFromEdge(et,tt,_e);dt=ot-nt}else{if(isObject$1(tt)){const ft=Object.keys(tt)[0],xt=tt[ft];ht=ct[ft].getPixelForValue(xt)-gt+_e}else tt==="center"?ht=(lt.left+lt.right)/2-gt+_e:ht=offsetFromEdge(et,tt,_e);pt=_alignStartEnd(st,it,rt),ut=tt==="left"?-HALF_PI:HALF_PI}return{titleX:ht,titleY:pt,maxWidth:dt,rotation:ut}}class Scale extends Element{constructor(_e){super(),this.id=_e.id,this.type=_e.type,this.options=void 0,this.ctx=_e.ctx,this.chart=_e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(_e){this.options=_e.setContext(this.getContext()),this.axis=_e.axis,this._userMin=this.parse(_e.min),this._userMax=this.parse(_e.max),this._suggestedMin=this.parse(_e.suggestedMin),this._suggestedMax=this.parse(_e.suggestedMax)}parse(_e,tt){return _e}getUserBounds(){let{_userMin:_e,_userMax:tt,_suggestedMin:st,_suggestedMax:rt}=this;return _e=finiteOrDefault(_e,Number.POSITIVE_INFINITY),tt=finiteOrDefault(tt,Number.NEGATIVE_INFINITY),st=finiteOrDefault(st,Number.POSITIVE_INFINITY),rt=finiteOrDefault(rt,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(_e,st),max:finiteOrDefault(tt,rt),minDefined:isNumberFinite(_e),maxDefined:isNumberFinite(tt)}}getMinMax(_e){let{min:tt,max:st,minDefined:rt,maxDefined:nt}=this.getUserBounds(),it;if(rt&&nt)return{min:tt,max:st};const ot=this.getMatchingVisibleMetas();for(let at=0,lt=ot.length;at<lt;++at)it=ot[at].controller.getMinMax(this,_e),rt||(tt=Math.min(tt,it.min)),nt||(st=Math.max(st,it.max));return tt=nt&&tt>st?st:tt,st=rt&&tt>st?tt:st,{min:finiteOrDefault(tt,finiteOrDefault(st,tt)),max:finiteOrDefault(st,finiteOrDefault(tt,st))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const _e=this.chart.data;return this.options.labels||(this.isHorizontal()?_e.xLabels:_e.yLabels)||_e.labels||[]}getLabelItems(_e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(_e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){callback(this.options.beforeUpdate,[this])}update(_e,tt,st){const{beginAtZero:rt,grace:nt,ticks:it}=this.options,ot=it.sampleSize;this.beforeUpdate(),this.maxWidth=_e,this.maxHeight=tt,this._margins=st=Object.assign({left:0,right:0,top:0,bottom:0},st),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+st.left+st.right:this.height+st.top+st.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_addGrace(this,nt,rt),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const at=ot<this.ticks.length;this._convertTicksToLabels(at?sample(this.ticks,ot):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),it.display&&(it.autoSkip||it.source==="auto")&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),at&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let _e=this.options.reverse,tt,st;this.isHorizontal()?(tt=this.left,st=this.right):(tt=this.top,st=this.bottom,_e=!_e),this._startPixel=tt,this._endPixel=st,this._reversePixels=_e,this._length=st-tt,this._alignToPixels=this.options.alignToPixels}afterUpdate(){callback(this.options.afterUpdate,[this])}beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){callback(this.options.afterSetDimensions,[this])}_callHooks(_e){this.chart.notifyPlugins(_e,this.getContext()),callback(this.options[_e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(_e){const tt=this.options.ticks;let st,rt,nt;for(st=0,rt=_e.length;st<rt;st++)nt=_e[st],nt.label=callback(tt.callback,[nt.value,st,_e],this)}afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const _e=this.options,tt=_e.ticks,st=getTicksLimit(this.ticks.length,_e.ticks.maxTicksLimit),rt=tt.minRotation||0,nt=tt.maxRotation;let it=rt,ot,at,lt;if(!this._isVisible()||!tt.display||rt>=nt||st<=1||!this.isHorizontal()){this.labelRotation=rt;return}const ct=this._getLabelSizes(),ut=ct.widest.width,dt=ct.highest.height,ht=_limitValue(this.chart.width-ut,0,this.maxWidth);ot=_e.offset?this.maxWidth/st:ht/(st-1),ut+6>ot&&(ot=ht/(st-(_e.offset?.5:1)),at=this.maxHeight-getTickMarkLength(_e.grid)-tt.padding-getTitleHeight(_e.title,this.chart.options.font),lt=Math.sqrt(ut*ut+dt*dt),it=toDegrees(Math.min(Math.asin(_limitValue((ct.highest.height+6)/ot,-1,1)),Math.asin(_limitValue(at/lt,-1,1))-Math.asin(_limitValue(dt/lt,-1,1)))),it=Math.max(rt,Math.min(nt,it))),this.labelRotation=it}afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){callback(this.options.beforeFit,[this])}fit(){const _e={width:0,height:0},{chart:tt,options:{ticks:st,title:rt,grid:nt}}=this,it=this._isVisible(),ot=this.isHorizontal();if(it){const at=getTitleHeight(rt,tt.options.font);if(ot?(_e.width=this.maxWidth,_e.height=getTickMarkLength(nt)+at):(_e.height=this.maxHeight,_e.width=getTickMarkLength(nt)+at),st.display&&this.ticks.length){const{first:lt,last:ct,widest:ut,highest:dt}=this._getLabelSizes(),ht=st.padding*2,pt=toRadians(this.labelRotation),mt=Math.cos(pt),gt=Math.sin(pt);if(ot){const ft=st.mirror?0:gt*ut.width+mt*dt.height;_e.height=Math.min(this.maxHeight,_e.height+ft+ht)}else{const ft=st.mirror?0:mt*ut.width+gt*dt.height;_e.width=Math.min(this.maxWidth,_e.width+ft+ht)}this._calculatePadding(lt,ct,gt,mt)}}this._handleMargins(),ot?(this.width=this._length=tt.width-this._margins.left-this._margins.right,this.height=_e.height):(this.width=_e.width,this.height=this._length=tt.height-this._margins.top-this._margins.bottom)}_calculatePadding(_e,tt,st,rt){const{ticks:{align:nt,padding:it},position:ot}=this.options,at=this.labelRotation!==0,lt=ot!=="top"&&this.axis==="x";if(this.isHorizontal()){const ct=this.getPixelForTick(0)-this.left,ut=this.right-this.getPixelForTick(this.ticks.length-1);let dt=0,ht=0;at?lt?(dt=rt*_e.width,ht=st*tt.height):(dt=st*_e.height,ht=rt*tt.width):nt==="start"?ht=tt.width:nt==="end"?dt=_e.width:nt!=="inner"&&(dt=_e.width/2,ht=tt.width/2),this.paddingLeft=Math.max((dt-ct+it)*this.width/(this.width-ct),0),this.paddingRight=Math.max((ht-ut+it)*this.width/(this.width-ut),0)}else{let ct=tt.height/2,ut=_e.height/2;nt==="start"?(ct=0,ut=_e.height):nt==="end"&&(ct=tt.height,ut=0),this.paddingTop=ct+it,this.paddingBottom=ut+it}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){callback(this.options.afterFit,[this])}isHorizontal(){const{axis:_e,position:tt}=this.options;return tt==="top"||tt==="bottom"||_e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(_e){this.beforeTickToLabelConversion(),this.generateTickLabels(_e);let tt,st;for(tt=0,st=_e.length;tt<st;tt++)isNullOrUndef(_e[tt].label)&&(_e.splice(tt,1),st--,tt--);this.afterTickToLabelConversion()}_getLabelSizes(){let _e=this._labelSizes;if(!_e){const tt=this.options.ticks.sampleSize;let st=this.ticks;tt<st.length&&(st=sample(st,tt)),this._labelSizes=_e=this._computeLabelSizes(st,st.length,this.options.ticks.maxTicksLimit)}return _e}_computeLabelSizes(_e,tt,st){const{ctx:rt,_longestTextCache:nt}=this,it=[],ot=[],at=Math.floor(tt/getTicksLimit(tt,st));let lt=0,ct=0,ut,dt,ht,pt,mt,gt,ft,xt,yt,bt,jt;for(ut=0;ut<tt;ut+=at){if(pt=_e[ut].label,mt=this._resolveTickFontOptions(ut),rt.font=gt=mt.string,ft=nt[gt]=nt[gt]||{data:{},gc:[]},xt=mt.lineHeight,yt=bt=0,!isNullOrUndef(pt)&&!isArray(pt))yt=_measureText(rt,ft.data,ft.gc,yt,pt),bt=xt;else if(isArray(pt))for(dt=0,ht=pt.length;dt<ht;++dt)jt=pt[dt],!isNullOrUndef(jt)&&!isArray(jt)&&(yt=_measureText(rt,ft.data,ft.gc,yt,jt),bt+=xt);it.push(yt),ot.push(bt),lt=Math.max(yt,lt),ct=Math.max(bt,ct)}garbageCollect(nt,tt);const Ct=it.indexOf(lt),St=ot.indexOf(ct),vt=Et=>({width:it[Et]||0,height:ot[Et]||0});return{first:vt(0),last:vt(tt-1),widest:vt(Ct),highest:vt(St),widths:it,heights:ot}}getLabelForValue(_e){return _e}getPixelForValue(_e,tt){return NaN}getValueForPixel(_e){}getPixelForTick(_e){const tt=this.ticks;return _e<0||_e>tt.length-1?null:this.getPixelForValue(tt[_e].value)}getPixelForDecimal(_e){this._reversePixels&&(_e=1-_e);const tt=this._startPixel+_e*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,tt,0):tt)}getDecimalForPixel(_e){const tt=(_e-this._startPixel)/this._length;return this._reversePixels?1-tt:tt}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:_e,max:tt}=this;return _e<0&&tt<0?tt:_e>0&&tt>0?_e:0}getContext(_e){const tt=this.ticks||[];if(_e>=0&&_e<tt.length){const st=tt[_e];return st.$context||(st.$context=createTickContext(this.getContext(),_e,st))}return this.$context||(this.$context=createScaleContext(this.chart.getContext(),this))}_tickSize(){const _e=this.options.ticks,tt=toRadians(this.labelRotation),st=Math.abs(Math.cos(tt)),rt=Math.abs(Math.sin(tt)),nt=this._getLabelSizes(),it=_e.autoSkipPadding||0,ot=nt?nt.widest.width+it:0,at=nt?nt.highest.height+it:0;return this.isHorizontal()?at*st>ot*rt?ot/st:at/rt:at*rt<ot*st?at/st:ot/rt}_isVisible(){const _e=this.options.display;return _e!=="auto"?!!_e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(_e){const tt=this.axis,st=this.chart,rt=this.options,{grid:nt,position:it,border:ot}=rt,at=nt.offset,lt=this.isHorizontal(),ut=this.ticks.length+(at?1:0),dt=getTickMarkLength(nt),ht=[],pt=ot.setContext(this.getContext()),mt=pt.display?pt.width:0,gt=mt/2,ft=function(Jt){return _alignPixel(st,Jt,mt)};let xt,yt,bt,jt,Ct,St,vt,Et,Rt,$t,At,Xt;if(it==="top")xt=ft(this.bottom),St=this.bottom-dt,Et=xt-gt,$t=ft(_e.top)+gt,Xt=_e.bottom;else if(it==="bottom")xt=ft(this.top),$t=_e.top,Xt=ft(_e.bottom)-gt,St=xt+gt,Et=this.top+dt;else if(it==="left")xt=ft(this.right),Ct=this.right-dt,vt=xt-gt,Rt=ft(_e.left)+gt,At=_e.right;else if(it==="right")xt=ft(this.left),Rt=_e.left,At=ft(_e.right)-gt,Ct=xt+gt,vt=this.left+dt;else if(tt==="x"){if(it==="center")xt=ft((_e.top+_e.bottom)/2+.5);else if(isObject$1(it)){const Jt=Object.keys(it)[0],Yt=it[Jt];xt=ft(this.chart.scales[Jt].getPixelForValue(Yt))}$t=_e.top,Xt=_e.bottom,St=xt+gt,Et=St+dt}else if(tt==="y"){if(it==="center")xt=ft((_e.left+_e.right)/2);else if(isObject$1(it)){const Jt=Object.keys(it)[0],Yt=it[Jt];xt=ft(this.chart.scales[Jt].getPixelForValue(Yt))}Ct=xt-gt,vt=Ct-dt,Rt=_e.left,At=_e.right}const kt=valueOrDefault(rt.ticks.maxTicksLimit,ut),Zt=Math.max(1,Math.ceil(ut/kt));for(yt=0;yt<ut;yt+=Zt){const Jt=this.getContext(yt),Yt=nt.setContext(Jt),wt=ot.setContext(Jt),Tt=Yt.lineWidth,Bt=Yt.color,Wt=wt.dash||[],Mt=wt.dashOffset,qt=Yt.tickWidth,es=Yt.tickColor,Ot=Yt.tickBorderDash||[],It=Yt.tickBorderDashOffset;bt=getPixelForGridLine(this,yt,at),bt!==void 0&&(jt=_alignPixel(st,bt,Tt),lt?Ct=vt=Rt=At=jt:St=Et=$t=Xt=jt,ht.push({tx1:Ct,ty1:St,tx2:vt,ty2:Et,x1:Rt,y1:$t,x2:At,y2:Xt,width:Tt,color:Bt,borderDash:Wt,borderDashOffset:Mt,tickWidth:qt,tickColor:es,tickBorderDash:Ot,tickBorderDashOffset:It}))}return this._ticksLength=ut,this._borderValue=xt,ht}_computeLabelItems(_e){const tt=this.axis,st=this.options,{position:rt,ticks:nt}=st,it=this.isHorizontal(),ot=this.ticks,{align:at,crossAlign:lt,padding:ct,mirror:ut}=nt,dt=getTickMarkLength(st.grid),ht=dt+ct,pt=ut?-ct:ht,mt=-toRadians(this.labelRotation),gt=[];let ft,xt,yt,bt,jt,Ct,St,vt,Et,Rt,$t,At,Xt="middle";if(rt==="top")Ct=this.bottom-pt,St=this._getXAxisLabelAlignment();else if(rt==="bottom")Ct=this.top+pt,St=this._getXAxisLabelAlignment();else if(rt==="left"){const Zt=this._getYAxisLabelAlignment(dt);St=Zt.textAlign,jt=Zt.x}else if(rt==="right"){const Zt=this._getYAxisLabelAlignment(dt);St=Zt.textAlign,jt=Zt.x}else if(tt==="x"){if(rt==="center")Ct=(_e.top+_e.bottom)/2+ht;else if(isObject$1(rt)){const Zt=Object.keys(rt)[0],Jt=rt[Zt];Ct=this.chart.scales[Zt].getPixelForValue(Jt)+ht}St=this._getXAxisLabelAlignment()}else if(tt==="y"){if(rt==="center")jt=(_e.left+_e.right)/2-ht;else if(isObject$1(rt)){const Zt=Object.keys(rt)[0],Jt=rt[Zt];jt=this.chart.scales[Zt].getPixelForValue(Jt)}St=this._getYAxisLabelAlignment(dt).textAlign}tt==="y"&&(at==="start"?Xt="top":at==="end"&&(Xt="bottom"));const kt=this._getLabelSizes();for(ft=0,xt=ot.length;ft<xt;++ft){yt=ot[ft],bt=yt.label;const Zt=nt.setContext(this.getContext(ft));vt=this.getPixelForTick(ft)+nt.labelOffset,Et=this._resolveTickFontOptions(ft),Rt=Et.lineHeight,$t=isArray(bt)?bt.length:1;const Jt=$t/2,Yt=Zt.color,wt=Zt.textStrokeColor,Tt=Zt.textStrokeWidth;let Bt=St;it?(jt=vt,St==="inner"&&(ft===xt-1?Bt=this.options.reverse?"left":"right":ft===0?Bt=this.options.reverse?"right":"left":Bt="center"),rt==="top"?lt==="near"||mt!==0?At=-$t*Rt+Rt/2:lt==="center"?At=-kt.highest.height/2-Jt*Rt+Rt:At=-kt.highest.height+Rt/2:lt==="near"||mt!==0?At=Rt/2:lt==="center"?At=kt.highest.height/2-Jt*Rt:At=kt.highest.height-$t*Rt,ut&&(At*=-1),mt!==0&&!Zt.showLabelBackdrop&&(jt+=Rt/2*Math.sin(mt))):(Ct=vt,At=(1-$t)*Rt/2);let Wt;if(Zt.showLabelBackdrop){const Mt=toPadding(Zt.backdropPadding),qt=kt.heights[ft],es=kt.widths[ft];let Ot=At-Mt.top,It=0-Mt.left;switch(Xt){case"middle":Ot-=qt/2;break;case"bottom":Ot-=qt;break}switch(St){case"center":It-=es/2;break;case"right":It-=es;break;case"inner":ft===xt-1?It-=es:ft>0&&(It-=es/2);break}Wt={left:It,top:Ot,width:es+Mt.width,height:qt+Mt.height,color:Zt.backdropColor}}gt.push({label:bt,font:Et,textOffset:At,options:{rotation:mt,color:Yt,strokeColor:wt,strokeWidth:Tt,textAlign:Bt,textBaseline:Xt,translation:[jt,Ct],backdrop:Wt}})}return gt}_getXAxisLabelAlignment(){const{position:_e,ticks:tt}=this.options;if(-toRadians(this.labelRotation))return _e==="top"?"left":"right";let rt="center";return tt.align==="start"?rt="left":tt.align==="end"?rt="right":tt.align==="inner"&&(rt="inner"),rt}_getYAxisLabelAlignment(_e){const{position:tt,ticks:{crossAlign:st,mirror:rt,padding:nt}}=this.options,it=this._getLabelSizes(),ot=_e+nt,at=it.widest.width;let lt,ct;return tt==="left"?rt?(ct=this.right+nt,st==="near"?lt="left":st==="center"?(lt="center",ct+=at/2):(lt="right",ct+=at)):(ct=this.right-ot,st==="near"?lt="right":st==="center"?(lt="center",ct-=at/2):(lt="left",ct=this.left)):tt==="right"?rt?(ct=this.left+nt,st==="near"?lt="right":st==="center"?(lt="center",ct-=at/2):(lt="left",ct-=at)):(ct=this.left+ot,st==="near"?lt="left":st==="center"?(lt="center",ct+=at/2):(lt="right",ct=this.right)):lt="right",{textAlign:lt,x:ct}}_computeLabelArea(){if(this.options.ticks.mirror)return;const _e=this.chart,tt=this.options.position;if(tt==="left"||tt==="right")return{top:0,left:this.left,bottom:_e.height,right:this.right};if(tt==="top"||tt==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:_e.width}}drawBackground(){const{ctx:_e,options:{backgroundColor:tt},left:st,top:rt,width:nt,height:it}=this;tt&&(_e.save(),_e.fillStyle=tt,_e.fillRect(st,rt,nt,it),_e.restore())}getLineWidthForValue(_e){const tt=this.options.grid;if(!this._isVisible()||!tt.display)return 0;const rt=this.ticks.findIndex(nt=>nt.value===_e);return rt>=0?tt.setContext(this.getContext(rt)).lineWidth:0}drawGrid(_e){const tt=this.options.grid,st=this.ctx,rt=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(_e));let nt,it;const ot=(at,lt,ct)=>{!ct.width||!ct.color||(st.save(),st.lineWidth=ct.width,st.strokeStyle=ct.color,st.setLineDash(ct.borderDash||[]),st.lineDashOffset=ct.borderDashOffset,st.beginPath(),st.moveTo(at.x,at.y),st.lineTo(lt.x,lt.y),st.stroke(),st.restore())};if(tt.display)for(nt=0,it=rt.length;nt<it;++nt){const at=rt[nt];tt.drawOnChartArea&&ot({x:at.x1,y:at.y1},{x:at.x2,y:at.y2},at),tt.drawTicks&&ot({x:at.tx1,y:at.ty1},{x:at.tx2,y:at.ty2},{color:at.tickColor,width:at.tickWidth,borderDash:at.tickBorderDash,borderDashOffset:at.tickBorderDashOffset})}}drawBorder(){const{chart:_e,ctx:tt,options:{border:st,grid:rt}}=this,nt=st.setContext(this.getContext()),it=st.display?nt.width:0;if(!it)return;const ot=rt.setContext(this.getContext(0)).lineWidth,at=this._borderValue;let lt,ct,ut,dt;this.isHorizontal()?(lt=_alignPixel(_e,this.left,it)-it/2,ct=_alignPixel(_e,this.right,ot)+ot/2,ut=dt=at):(ut=_alignPixel(_e,this.top,it)-it/2,dt=_alignPixel(_e,this.bottom,ot)+ot/2,lt=ct=at),tt.save(),tt.lineWidth=nt.width,tt.strokeStyle=nt.color,tt.beginPath(),tt.moveTo(lt,ut),tt.lineTo(ct,dt),tt.stroke(),tt.restore()}drawLabels(_e){if(!this.options.ticks.display)return;const st=this.ctx,rt=this._computeLabelArea();rt&&clipArea(st,rt);const nt=this.getLabelItems(_e);for(const it of nt){const ot=it.options,at=it.font,lt=it.label,ct=it.textOffset;renderText(st,lt,0,ct,at,ot)}rt&&unclipArea(st)}drawTitle(){const{ctx:_e,options:{position:tt,title:st,reverse:rt}}=this;if(!st.display)return;const nt=toFont(st.font),it=toPadding(st.padding),ot=st.align;let at=nt.lineHeight/2;tt==="bottom"||tt==="center"||isObject$1(tt)?(at+=it.bottom,isArray(st.text)&&(at+=nt.lineHeight*(st.text.length-1))):at+=it.top;const{titleX:lt,titleY:ct,maxWidth:ut,rotation:dt}=titleArgs(this,at,tt,ot);renderText(_e,st.text,0,0,nt,{color:st.color,maxWidth:ut,rotation:dt,textAlign:titleAlign(ot,tt,rt),textBaseline:"middle",translation:[lt,ct]})}draw(_e){this._isVisible()&&(this.drawBackground(),this.drawGrid(_e),this.drawBorder(),this.drawTitle(),this.drawLabels(_e))}_layers(){const _e=this.options,tt=_e.ticks&&_e.ticks.z||0,st=valueOrDefault(_e.grid&&_e.grid.z,-1),rt=valueOrDefault(_e.border&&_e.border.z,0);return!this._isVisible()||this.draw!==Scale.prototype.draw?[{z:tt,draw:nt=>{this.draw(nt)}}]:[{z:st,draw:nt=>{this.drawBackground(),this.drawGrid(nt),this.drawTitle()}},{z:rt,draw:()=>{this.drawBorder()}},{z:tt,draw:nt=>{this.drawLabels(nt)}}]}getMatchingVisibleMetas(_e){const tt=this.chart.getSortedVisibleDatasetMetas(),st=this.axis+"AxisID",rt=[];let nt,it;for(nt=0,it=tt.length;nt<it;++nt){const ot=tt[nt];ot[st]===this.id&&(!_e||ot.type===_e)&&rt.push(ot)}return rt}_resolveTickFontOptions(_e){const tt=this.options.ticks.setContext(this.getContext(_e));return toFont(tt.font)}_maxDigits(){const _e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/_e}}class TypedRegistry{constructor(_e,tt,st){this.type=_e,this.scope=tt,this.override=st,this.items=Object.create(null)}isForType(_e){return Object.prototype.isPrototypeOf.call(this.type.prototype,_e.prototype)}register(_e){const tt=Object.getPrototypeOf(_e);let st;isIChartComponent(tt)&&(st=this.register(tt));const rt=this.items,nt=_e.id,it=this.scope+"."+nt;if(!nt)throw new Error("class does not have id: "+_e);return nt in rt||(rt[nt]=_e,registerDefaults(_e,it,st),this.override&&defaults.override(_e.id,_e.overrides)),it}get(_e){return this.items[_e]}unregister(_e){const tt=this.items,st=_e.id,rt=this.scope;st in tt&&delete tt[st],rt&&st in defaults[rt]&&(delete defaults[rt][st],this.override&&delete overrides[st])}}function registerDefaults(et,_e,tt){const st=merge(Object.create(null),[tt?defaults.get(tt):{},defaults.get(_e),et.defaults]);defaults.set(_e,st),et.defaultRoutes&&routeDefaults(_e,et.defaultRoutes),et.descriptors&&defaults.describe(_e,et.descriptors)}function routeDefaults(et,_e){Object.keys(_e).forEach(tt=>{const st=tt.split("."),rt=st.pop(),nt=[et].concat(st).join("."),it=_e[tt].split("."),ot=it.pop(),at=it.join(".");defaults.route(nt,rt,at,ot)})}function isIChartComponent(et){return"id"in et&&"defaults"in et}class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(..._e){this._each("register",_e)}remove(..._e){this._each("unregister",_e)}addControllers(..._e){this._each("register",_e,this.controllers)}addElements(..._e){this._each("register",_e,this.elements)}addPlugins(..._e){this._each("register",_e,this.plugins)}addScales(..._e){this._each("register",_e,this.scales)}getController(_e){return this._get(_e,this.controllers,"controller")}getElement(_e){return this._get(_e,this.elements,"element")}getPlugin(_e){return this._get(_e,this.plugins,"plugin")}getScale(_e){return this._get(_e,this.scales,"scale")}removeControllers(..._e){this._each("unregister",_e,this.controllers)}removeElements(..._e){this._each("unregister",_e,this.elements)}removePlugins(..._e){this._each("unregister",_e,this.plugins)}removeScales(..._e){this._each("unregister",_e,this.scales)}_each(_e,tt,st){[...tt].forEach(rt=>{const nt=st||this._getRegistryForType(rt);st||nt.isForType(rt)||nt===this.plugins&&rt.id?this._exec(_e,nt,rt):each(rt,it=>{const ot=st||this._getRegistryForType(it);this._exec(_e,ot,it)})})}_exec(_e,tt,st){const rt=_capitalize(_e);callback(st["before"+rt],[],st),tt[_e](st),callback(st["after"+rt],[],st)}_getRegistryForType(_e){for(let tt=0;tt<this._typedRegistries.length;tt++){const st=this._typedRegistries[tt];if(st.isForType(_e))return st}return this.plugins}_get(_e,tt,st){const rt=tt.get(_e);if(rt===void 0)throw new Error('"'+_e+'" is not a registered '+st+".");return rt}}var registry=new Registry;class PluginService{constructor(){this._init=[]}notify(_e,tt,st,rt){tt==="beforeInit"&&(this._init=this._createDescriptors(_e,!0),this._notify(this._init,_e,"install"));const nt=rt?this._descriptors(_e).filter(rt):this._descriptors(_e),it=this._notify(nt,_e,tt,st);return tt==="afterDestroy"&&(this._notify(nt,_e,"stop"),this._notify(this._init,_e,"uninstall")),it}_notify(_e,tt,st,rt){rt=rt||{};for(const nt of _e){const it=nt.plugin,ot=it[st],at=[tt,rt,nt.options];if(callback(ot,at,it)===!1&&rt.cancelable)return!1}return!0}invalidate(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(_e){if(this._cache)return this._cache;const tt=this._cache=this._createDescriptors(_e);return this._notifyStateChanges(_e),tt}_createDescriptors(_e,tt){const st=_e&&_e.config,rt=valueOrDefault(st.options&&st.options.plugins,{}),nt=allPlugins(st);return rt===!1&&!tt?[]:createDescriptors(_e,nt,rt,tt)}_notifyStateChanges(_e){const tt=this._oldCache||[],st=this._cache,rt=(nt,it)=>nt.filter(ot=>!it.some(at=>ot.plugin.id===at.plugin.id));this._notify(rt(tt,st),_e,"stop"),this._notify(rt(st,tt),_e,"start")}}function allPlugins(et){const _e={},tt=[],st=Object.keys(registry.plugins.items);for(let nt=0;nt<st.length;nt++)tt.push(registry.getPlugin(st[nt]));const rt=et.plugins||[];for(let nt=0;nt<rt.length;nt++){const it=rt[nt];tt.indexOf(it)===-1&&(tt.push(it),_e[it.id]=!0)}return{plugins:tt,localIds:_e}}function getOpts(et,_e){return!_e&&et===!1?null:et===!0?{}:et}function createDescriptors(et,{plugins:_e,localIds:tt},st,rt){const nt=[],it=et.getContext();for(const ot of _e){const at=ot.id,lt=getOpts(st[at],rt);lt!==null&&nt.push({plugin:ot,options:pluginOpts(et.config,{plugin:ot,local:tt[at]},lt,it)})}return nt}function pluginOpts(et,{plugin:_e,local:tt},st,rt){const nt=et.pluginScopeKeys(_e),it=et.getOptionScopes(st,nt);return tt&&_e.defaults&&it.push(_e.defaults),et.createResolver(it,rt,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(et,_e){const tt=defaults.datasets[et]||{};return((_e.datasets||{})[et]||{}).indexAxis||_e.indexAxis||tt.indexAxis||"x"}function getAxisFromDefaultScaleID(et,_e){let tt=et;return et==="_index_"?tt=_e:et==="_value_"&&(tt=_e==="x"?"y":"x"),tt}function getDefaultScaleIDFromAxis(et,_e){return et===_e?"_index_":"_value_"}function idMatchesAxis(et){if(et==="x"||et==="y"||et==="r")return et}function axisFromPosition(et){if(et==="top"||et==="bottom")return"x";if(et==="left"||et==="right")return"y"}function determineAxis(et,..._e){if(idMatchesAxis(et))return et;for(const tt of _e){const st=tt.axis||axisFromPosition(tt.position)||et.length>1&&idMatchesAxis(et[0].toLowerCase());if(st)return st}throw new Error(`Cannot determine type of '${et}' axis. Please provide 'axis' or 'position' option.`)}function getAxisFromDataset(et,_e,tt){if(tt[_e+"AxisID"]===et)return{axis:_e}}function retrieveAxisFromDatasets(et,_e){if(_e.data&&_e.data.datasets){const tt=_e.data.datasets.filter(st=>st.xAxisID===et||st.yAxisID===et);if(tt.length)return getAxisFromDataset(et,"x",tt[0])||getAxisFromDataset(et,"y",tt[0])}return{}}function mergeScaleConfig(et,_e){const tt=overrides[et.type]||{scales:{}},st=_e.scales||{},rt=getIndexAxis(et.type,_e),nt=Object.create(null);return Object.keys(st).forEach(it=>{const ot=st[it];if(!isObject$1(ot))return console.error(`Invalid scale configuration for scale: ${it}`);if(ot._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${it}`);const at=determineAxis(it,ot,retrieveAxisFromDatasets(it,et),defaults.scales[ot.type]),lt=getDefaultScaleIDFromAxis(at,rt),ct=tt.scales||{};nt[it]=mergeIf(Object.create(null),[{axis:at},ot,ct[at],ct[lt]])}),et.data.datasets.forEach(it=>{const ot=it.type||et.type,at=it.indexAxis||getIndexAxis(ot,_e),ct=(overrides[ot]||{}).scales||{};Object.keys(ct).forEach(ut=>{const dt=getAxisFromDefaultScaleID(ut,at),ht=it[dt+"AxisID"]||dt;nt[ht]=nt[ht]||Object.create(null),mergeIf(nt[ht],[{axis:dt},st[ht],ct[ut]])})}),Object.keys(nt).forEach(it=>{const ot=nt[it];mergeIf(ot,[defaults.scales[ot.type],defaults.scale])}),nt}function initOptions(et){const _e=et.options||(et.options={});_e.plugins=valueOrDefault(_e.plugins,{}),_e.scales=mergeScaleConfig(et,_e)}function initData(et){return et=et||{},et.datasets=et.datasets||[],et.labels=et.labels||[],et}function initConfig(et){return et=et||{},et.data=initData(et.data),initOptions(et),et}const keyCache=new Map,keysCached=new Set;function cachedKeys(et,_e){let tt=keyCache.get(et);return tt||(tt=_e(),keyCache.set(et,tt),keysCached.add(tt)),tt}const addIfFound=(et,_e,tt)=>{const st=resolveObjectKey(_e,tt);st!==void 0&&et.add(st)};class Config{constructor(_e){this._config=initConfig(_e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(_e){this._config.type=_e}get data(){return this._config.data}set data(_e){this._config.data=initData(_e)}get options(){return this._config.options}set options(_e){this._config.options=_e}get plugins(){return this._config.plugins}update(){const _e=this._config;this.clearCache(),initOptions(_e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(_e){return cachedKeys(_e,()=>[[`datasets.${_e}`,""]])}datasetAnimationScopeKeys(_e,tt){return cachedKeys(`${_e}.transition.${tt}`,()=>[[`datasets.${_e}.transitions.${tt}`,`transitions.${tt}`],[`datasets.${_e}`,""]])}datasetElementScopeKeys(_e,tt){return cachedKeys(`${_e}-${tt}`,()=>[[`datasets.${_e}.elements.${tt}`,`datasets.${_e}`,`elements.${tt}`,""]])}pluginScopeKeys(_e){const tt=_e.id,st=this.type;return cachedKeys(`${st}-plugin-${tt}`,()=>[[`plugins.${tt}`,..._e.additionalOptionScopes||[]]])}_cachedScopes(_e,tt){const st=this._scopeCache;let rt=st.get(_e);return(!rt||tt)&&(rt=new Map,st.set(_e,rt)),rt}getOptionScopes(_e,tt,st){const{options:rt,type:nt}=this,it=this._cachedScopes(_e,st),ot=it.get(tt);if(ot)return ot;const at=new Set;tt.forEach(ct=>{_e&&(at.add(_e),ct.forEach(ut=>addIfFound(at,_e,ut))),ct.forEach(ut=>addIfFound(at,rt,ut)),ct.forEach(ut=>addIfFound(at,overrides[nt]||{},ut)),ct.forEach(ut=>addIfFound(at,defaults,ut)),ct.forEach(ut=>addIfFound(at,descriptors,ut))});const lt=Array.from(at);return lt.length===0&&lt.push(Object.create(null)),keysCached.has(tt)&&it.set(tt,lt),lt}chartOptionScopes(){const{options:_e,type:tt}=this;return[_e,overrides[tt]||{},defaults.datasets[tt]||{},{type:tt},defaults,descriptors]}resolveNamedOptions(_e,tt,st,rt=[""]){const nt={$shared:!0},{resolver:it,subPrefixes:ot}=getResolver(this._resolverCache,_e,rt);let at=it;if(needContext(it,tt)){nt.$shared=!1,st=isFunction(st)?st():st;const lt=this.createResolver(_e,st,ot);at=_attachContext(it,st,lt)}for(const lt of tt)nt[lt]=at[lt];return nt}createResolver(_e,tt,st=[""],rt){const{resolver:nt}=getResolver(this._resolverCache,_e,st);return isObject$1(tt)?_attachContext(nt,tt,void 0,rt):nt}}function getResolver(et,_e,tt){let st=et.get(_e);st||(st=new Map,et.set(_e,st));const rt=tt.join();let nt=st.get(rt);return nt||(nt={resolver:_createResolver(_e,tt),subPrefixes:tt.filter(ot=>!ot.toLowerCase().includes("hover"))},st.set(rt,nt)),nt}const hasFunction=et=>isObject$1(et)&&Object.getOwnPropertyNames(et).some(_e=>isFunction(et[_e]));function needContext(et,_e){const{isScriptable:tt,isIndexable:st}=_descriptors(et);for(const rt of _e){const nt=tt(rt),it=st(rt),ot=(it||nt)&&et[rt];if(nt&&(isFunction(ot)||hasFunction(ot))||it&&isArray(ot))return!0}return!1}var version="4.4.9";const KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(et,_e){return et==="top"||et==="bottom"||KNOWN_POSITIONS.indexOf(et)===-1&&_e==="x"}function compare2Level(et,_e){return function(tt,st){return tt[et]===st[et]?tt[_e]-st[_e]:tt[et]-st[et]}}function onAnimationsComplete(et){const _e=et.chart,tt=_e.options.animation;_e.notifyPlugins("afterRender"),callback(tt&&tt.onComplete,[et],_e)}function onAnimationProgress(et){const _e=et.chart,tt=_e.options.animation;callback(tt&&tt.onProgress,[et],_e)}function getCanvas(et){return _isDomSupported()&&typeof et=="string"?et=document.getElementById(et):et&&et.length&&(et=et[0]),et&&et.canvas&&(et=et.canvas),et}const instances={},getChart=et=>{const _e=getCanvas(et);return Object.values(instances).filter(tt=>tt.canvas===_e).pop()};function moveNumericKeys(et,_e,tt){const st=Object.keys(et);for(const rt of st){const nt=+rt;if(nt>=_e){const it=et[rt];delete et[rt],(tt>0||nt>_e)&&(et[nt+tt]=it)}}}function determineLastEvent(et,_e,tt,st){return!tt||et.type==="mouseout"?null:st?_e:et}var ms;let Chart$1=(ms=class{static register(..._e){registry.add(..._e),invalidatePlugins()}static unregister(..._e){registry.remove(..._e),invalidatePlugins()}constructor(_e,tt){const st=this.config=new Config(tt),rt=getCanvas(_e),nt=getChart(rt);if(nt)throw new Error("Canvas is already in use. Chart with ID '"+nt.id+"' must be destroyed before the canvas with ID '"+nt.canvas.id+"' can be reused.");const it=st.createResolver(st.chartOptionScopes(),this.getContext());this.platform=new(st.platform||_detectPlatform(rt)),this.platform.updateConfig(st);const ot=this.platform.acquireContext(rt,it.aspectRatio),at=ot&&ot.canvas,lt=at&&at.height,ct=at&&at.width;if(this.id=uid(),this.ctx=ot,this.canvas=at,this.width=ct,this.height=lt,this._options=it,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=debounce(ut=>this.update(ut),it.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,!ot||!at){console.error("Failed to create chart: can't acquire context from the given item");return}animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:_e,maintainAspectRatio:tt},width:st,height:rt,_aspectRatio:nt}=this;return isNullOrUndef(_e)?tt&&nt?nt:rt?st/rt:null:_e}get data(){return this.config.data}set data(_e){this.config.data=_e}get options(){return this._options}set options(_e){this.config.options=_e}get registry(){return registry}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return clearCanvas(this.canvas,this.ctx),this}stop(){return animator.stop(this),this}resize(_e,tt){animator.running(this)?this._resizeBeforeDraw={width:_e,height:tt}:this._resize(_e,tt)}_resize(_e,tt){const st=this.options,rt=this.canvas,nt=st.maintainAspectRatio&&this.aspectRatio,it=this.platform.getMaximumSize(rt,_e,tt,nt),ot=st.devicePixelRatio||this.platform.getDevicePixelRatio(),at=this.width?"resize":"attach";this.width=it.width,this.height=it.height,this._aspectRatio=this.aspectRatio,retinaScale(this,ot,!0)&&(this.notifyPlugins("resize",{size:it}),callback(st.onResize,[this,it],this),this.attached&&this._doResize(at)&&this.render())}ensureScalesHaveIDs(){const tt=this.options.scales||{};each(tt,(st,rt)=>{st.id=rt})}buildOrUpdateScales(){const _e=this.options,tt=_e.scales,st=this.scales,rt=Object.keys(st).reduce((it,ot)=>(it[ot]=!1,it),{});let nt=[];tt&&(nt=nt.concat(Object.keys(tt).map(it=>{const ot=tt[it],at=determineAxis(it,ot),lt=at==="r",ct=at==="x";return{options:ot,dposition:lt?"chartArea":ct?"bottom":"left",dtype:lt?"radialLinear":ct?"category":"linear"}}))),each(nt,it=>{const ot=it.options,at=ot.id,lt=determineAxis(at,ot),ct=valueOrDefault(ot.type,it.dtype);(ot.position===void 0||positionIsHorizontal(ot.position,lt)!==positionIsHorizontal(it.dposition))&&(ot.position=it.dposition),rt[at]=!0;let ut=null;if(at in st&&st[at].type===ct)ut=st[at];else{const dt=registry.getScale(ct);ut=new dt({id:at,type:ct,ctx:this.ctx,chart:this}),st[ut.id]=ut}ut.init(ot,_e)}),each(rt,(it,ot)=>{it||delete st[ot]}),each(st,it=>{layouts.configure(this,it,it.options),layouts.addBox(this,it)})}_updateMetasets(){const _e=this._metasets,tt=this.data.datasets.length,st=_e.length;if(_e.sort((rt,nt)=>rt.index-nt.index),st>tt){for(let rt=tt;rt<st;++rt)this._destroyDatasetMeta(rt);_e.splice(tt,st-tt)}this._sortedMetasets=_e.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:_e,data:{datasets:tt}}=this;_e.length>tt.length&&delete this._stacks,_e.forEach((st,rt)=>{tt.filter(nt=>nt===st._dataset).length===0&&this._destroyDatasetMeta(rt)})}buildOrUpdateControllers(){const _e=[],tt=this.data.datasets;let st,rt;for(this._removeUnreferencedMetasets(),st=0,rt=tt.length;st<rt;st++){const nt=tt[st];let it=this.getDatasetMeta(st);const ot=nt.type||this.config.type;if(it.type&&it.type!==ot&&(this._destroyDatasetMeta(st),it=this.getDatasetMeta(st)),it.type=ot,it.indexAxis=nt.indexAxis||getIndexAxis(ot,this.options),it.order=nt.order||0,it.index=st,it.label=""+nt.label,it.visible=this.isDatasetVisible(st),it.controller)it.controller.updateIndex(st),it.controller.linkScales();else{const at=registry.getController(ot),{datasetElementType:lt,dataElementType:ct}=defaults.datasets[ot];Object.assign(at,{dataElementType:registry.getElement(ct),datasetElementType:lt&&registry.getElement(lt)}),it.controller=new at(this,st),_e.push(it.controller)}}return this._updateMetasets(),_e}_resetElements(){each(this.data.datasets,(_e,tt)=>{this.getDatasetMeta(tt).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(_e){const tt=this.config;tt.update();const st=this._options=tt.createResolver(tt.chartOptionScopes(),this.getContext()),rt=this._animationsDisabled=!st.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:_e,cancelable:!0})===!1)return;const nt=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let it=0;for(let lt=0,ct=this.data.datasets.length;lt<ct;lt++){const{controller:ut}=this.getDatasetMeta(lt),dt=!rt&&nt.indexOf(ut)===-1;ut.buildOrUpdateElements(dt),it=Math.max(+ut.getMaxOverflow(),it)}it=this._minPadding=st.layout.autoPadding?it:0,this._updateLayout(it),rt||each(nt,lt=>{lt.reset()}),this._updateDatasets(_e),this.notifyPlugins("afterUpdate",{mode:_e}),this._layers.sort(compare2Level("z","_idx"));const{_active:ot,_lastEvent:at}=this;at?this._eventHandler(at,!0):ot.length&&this._updateHoverStyles(ot,ot,!0),this.render()}_updateScales(){each(this.scales,_e=>{layouts.removeBox(this,_e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const _e=this.options,tt=new Set(Object.keys(this._listeners)),st=new Set(_e.events);(!setsEqual(tt,st)||!!this._responsiveListeners!==_e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:_e}=this,tt=this._getUniformDataChanges()||[];for(const{method:st,start:rt,count:nt}of tt){const it=st==="_removeElements"?-nt:nt;moveNumericKeys(_e,rt,it)}}_getUniformDataChanges(){const _e=this._dataChanges;if(!_e||!_e.length)return;this._dataChanges=[];const tt=this.data.datasets.length,st=nt=>new Set(_e.filter(it=>it[0]===nt).map((it,ot)=>ot+","+it.splice(1).join(","))),rt=st(0);for(let nt=1;nt<tt;nt++)if(!setsEqual(rt,st(nt)))return;return Array.from(rt).map(nt=>nt.split(",")).map(nt=>({method:nt[1],start:+nt[2],count:+nt[3]}))}_updateLayout(_e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;layouts.update(this,this.width,this.height,_e);const tt=this.chartArea,st=tt.width<=0||tt.height<=0;this._layers=[],each(this.boxes,rt=>{st&&rt.position==="chartArea"||(rt.configure&&rt.configure(),this._layers.push(...rt._layers()))},this),this._layers.forEach((rt,nt)=>{rt._idx=nt}),this.notifyPlugins("afterLayout")}_updateDatasets(_e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:_e,cancelable:!0})!==!1){for(let tt=0,st=this.data.datasets.length;tt<st;++tt)this.getDatasetMeta(tt).controller.configure();for(let tt=0,st=this.data.datasets.length;tt<st;++tt)this._updateDataset(tt,isFunction(_e)?_e({datasetIndex:tt}):_e);this.notifyPlugins("afterDatasetsUpdate",{mode:_e})}}_updateDataset(_e,tt){const st=this.getDatasetMeta(_e),rt={meta:st,index:_e,mode:tt,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",rt)!==!1&&(st.controller._update(tt),rt.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",rt))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let _e;if(this._resizeBeforeDraw){const{width:st,height:rt}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(st,rt)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const tt=this._layers;for(_e=0;_e<tt.length&&tt[_e].z<=0;++_e)tt[_e].draw(this.chartArea);for(this._drawDatasets();_e<tt.length;++_e)tt[_e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(_e){const tt=this._sortedMetasets,st=[];let rt,nt;for(rt=0,nt=tt.length;rt<nt;++rt){const it=tt[rt];(!_e||it.visible)&&st.push(it)}return st}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const _e=this.getSortedVisibleDatasetMetas();for(let tt=_e.length-1;tt>=0;--tt)this._drawDataset(_e[tt]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(_e){const tt=this.ctx,st={meta:_e,index:_e.index,cancelable:!0},rt=getDatasetClipArea(this,_e);this.notifyPlugins("beforeDatasetDraw",st)!==!1&&(rt&&clipArea(tt,rt),_e.controller.draw(),rt&&unclipArea(tt),st.cancelable=!1,this.notifyPlugins("afterDatasetDraw",st))}isPointInArea(_e){return _isPointInArea(_e,this.chartArea,this._minPadding)}getElementsAtEventForMode(_e,tt,st,rt){const nt=Interaction.modes[tt];return typeof nt=="function"?nt(this,_e,st,rt):[]}getDatasetMeta(_e){const tt=this.data.datasets[_e],st=this._metasets;let rt=st.filter(nt=>nt&&nt._dataset===tt).pop();return rt||(rt={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:tt&&tt.order||0,index:_e,_dataset:tt,_parsed:[],_sorted:!1},st.push(rt)),rt}getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(_e){const tt=this.data.datasets[_e];if(!tt)return!1;const st=this.getDatasetMeta(_e);return typeof st.hidden=="boolean"?!st.hidden:!tt.hidden}setDatasetVisibility(_e,tt){const st=this.getDatasetMeta(_e);st.hidden=!tt}toggleDataVisibility(_e){this._hiddenIndices[_e]=!this._hiddenIndices[_e]}getDataVisibility(_e){return!this._hiddenIndices[_e]}_updateVisibility(_e,tt,st){const rt=st?"show":"hide",nt=this.getDatasetMeta(_e),it=nt.controller._resolveAnimations(void 0,rt);defined(tt)?(nt.data[tt].hidden=!st,this.update()):(this.setDatasetVisibility(_e,st),it.update(nt,{visible:st}),this.update(ot=>ot.datasetIndex===_e?rt:void 0))}hide(_e,tt){this._updateVisibility(_e,tt,!1)}show(_e,tt){this._updateVisibility(_e,tt,!0)}_destroyDatasetMeta(_e){const tt=this._metasets[_e];tt&&tt.controller&&tt.controller._destroy(),delete this._metasets[_e]}_stop(){let _e,tt;for(this.stop(),animator.remove(this),_e=0,tt=this.data.datasets.length;_e<tt;++_e)this._destroyDatasetMeta(_e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:_e,ctx:tt}=this;this._stop(),this.config.clearCache(),_e&&(this.unbindEvents(),clearCanvas(_e,tt),this.platform.releaseContext(tt),this.canvas=null,this.ctx=null),delete instances[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(..._e){return this.canvas.toDataURL(..._e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const _e=this._listeners,tt=this.platform,st=(nt,it)=>{tt.addEventListener(this,nt,it),_e[nt]=it},rt=(nt,it,ot)=>{nt.offsetX=it,nt.offsetY=ot,this._eventHandler(nt)};each(this.options.events,nt=>st(nt,rt))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const _e=this._responsiveListeners,tt=this.platform,st=(at,lt)=>{tt.addEventListener(this,at,lt),_e[at]=lt},rt=(at,lt)=>{_e[at]&&(tt.removeEventListener(this,at,lt),delete _e[at])},nt=(at,lt)=>{this.canvas&&this.resize(at,lt)};let it;const ot=()=>{rt("attach",ot),this.attached=!0,this.resize(),st("resize",nt),st("detach",it)};it=()=>{this.attached=!1,rt("resize",nt),this._stop(),this._resize(0,0),st("attach",ot)},tt.isAttached(this.canvas)?ot():it()}unbindEvents(){each(this._listeners,(_e,tt)=>{this.platform.removeEventListener(this,tt,_e)}),this._listeners={},each(this._responsiveListeners,(_e,tt)=>{this.platform.removeEventListener(this,tt,_e)}),this._responsiveListeners=void 0}updateHoverStyle(_e,tt,st){const rt=st?"set":"remove";let nt,it,ot,at;for(tt==="dataset"&&(nt=this.getDatasetMeta(_e[0].datasetIndex),nt.controller["_"+rt+"DatasetHoverStyle"]()),ot=0,at=_e.length;ot<at;++ot){it=_e[ot];const lt=it&&this.getDatasetMeta(it.datasetIndex).controller;lt&&lt[rt+"HoverStyle"](it.element,it.datasetIndex,it.index)}}getActiveElements(){return this._active||[]}setActiveElements(_e){const tt=this._active||[],st=_e.map(({datasetIndex:nt,index:it})=>{const ot=this.getDatasetMeta(nt);if(!ot)throw new Error("No dataset found at index "+nt);return{datasetIndex:nt,element:ot.data[it],index:it}});!_elementsEqual(st,tt)&&(this._active=st,this._lastEvent=null,this._updateHoverStyles(st,tt))}notifyPlugins(_e,tt,st){return this._plugins.notify(this,_e,tt,st)}isPluginEnabled(_e){return this._plugins._cache.filter(tt=>tt.plugin.id===_e).length===1}_updateHoverStyles(_e,tt,st){const rt=this.options.hover,nt=(at,lt)=>at.filter(ct=>!lt.some(ut=>ct.datasetIndex===ut.datasetIndex&&ct.index===ut.index)),it=nt(tt,_e),ot=st?_e:nt(_e,tt);it.length&&this.updateHoverStyle(it,rt.mode,!1),ot.length&&rt.mode&&this.updateHoverStyle(ot,rt.mode,!0)}_eventHandler(_e,tt){const st={event:_e,replay:tt,cancelable:!0,inChartArea:this.isPointInArea(_e)},rt=it=>(it.options.events||this.options.events).includes(_e.native.type);if(this.notifyPlugins("beforeEvent",st,rt)===!1)return;const nt=this._handleEvent(_e,tt,st.inChartArea);return st.cancelable=!1,this.notifyPlugins("afterEvent",st,rt),(nt||st.changed)&&this.render(),this}_handleEvent(_e,tt,st){const{_active:rt=[],options:nt}=this,it=tt,ot=this._getActiveElements(_e,rt,st,it),at=_isClickEvent(_e),lt=determineLastEvent(_e,this._lastEvent,st,at);st&&(this._lastEvent=null,callback(nt.onHover,[_e,ot,this],this),at&&callback(nt.onClick,[_e,ot,this],this));const ct=!_elementsEqual(ot,rt);return(ct||tt)&&(this._active=ot,this._updateHoverStyles(ot,rt,tt)),this._lastEvent=lt,ct}_getActiveElements(_e,tt,st,rt){if(_e.type==="mouseout")return[];if(!st)return tt;const nt=this.options.hover;return this.getElementsAtEventForMode(_e,nt.mode,nt,rt)}},rs(ms,"defaults",defaults),rs(ms,"instances",instances),rs(ms,"overrides",overrides),rs(ms,"registry",registry),rs(ms,"version",version),rs(ms,"getChart",getChart),ms);function invalidatePlugins(){return each(Chart$1.instances,et=>et._plugins.invalidate())}function clipArc(et,_e,tt){const{startAngle:st,pixelMargin:rt,x:nt,y:it,outerRadius:ot,innerRadius:at}=_e;let lt=rt/ot;et.beginPath(),et.arc(nt,it,ot,st-lt,tt+lt),at>rt?(lt=rt/at,et.arc(nt,it,at,tt+lt,st-lt,!0)):et.arc(nt,it,rt,tt+HALF_PI,st-HALF_PI),et.closePath(),et.clip()}function toRadiusCorners(et){return _readValueToProps(et,["outerStart","outerEnd","innerStart","innerEnd"])}function parseBorderRadius$1(et,_e,tt,st){const rt=toRadiusCorners(et.options.borderRadius),nt=(tt-_e)/2,it=Math.min(nt,st*_e/2),ot=at=>{const lt=(tt-Math.min(nt,at))*st/2;return _limitValue(at,0,Math.min(nt,lt))};return{outerStart:ot(rt.outerStart),outerEnd:ot(rt.outerEnd),innerStart:_limitValue(rt.innerStart,0,it),innerEnd:_limitValue(rt.innerEnd,0,it)}}function rThetaToXY(et,_e,tt,st){return{x:tt+et*Math.cos(_e),y:st+et*Math.sin(_e)}}function pathArc(et,_e,tt,st,rt,nt){const{x:it,y:ot,startAngle:at,pixelMargin:lt,innerRadius:ct}=_e,ut=Math.max(_e.outerRadius+st+tt-lt,0),dt=ct>0?ct+st+tt+lt:0;let ht=0;const pt=rt-at;if(st){const Zt=ct>0?ct-st:0,Jt=ut>0?ut-st:0,Yt=(Zt+Jt)/2,wt=Yt!==0?pt*Yt/(Yt+st):pt;ht=(pt-wt)/2}const mt=Math.max(.001,pt*ut-tt/PI)/ut,gt=(pt-mt)/2,ft=at+gt+ht,xt=rt-gt-ht,{outerStart:yt,outerEnd:bt,innerStart:jt,innerEnd:Ct}=parseBorderRadius$1(_e,dt,ut,xt-ft),St=ut-yt,vt=ut-bt,Et=ft+yt/St,Rt=xt-bt/vt,$t=dt+jt,At=dt+Ct,Xt=ft+jt/$t,kt=xt-Ct/At;if(et.beginPath(),nt){const Zt=(Et+Rt)/2;if(et.arc(it,ot,ut,Et,Zt),et.arc(it,ot,ut,Zt,Rt),bt>0){const Tt=rThetaToXY(vt,Rt,it,ot);et.arc(Tt.x,Tt.y,bt,Rt,xt+HALF_PI)}const Jt=rThetaToXY(At,xt,it,ot);if(et.lineTo(Jt.x,Jt.y),Ct>0){const Tt=rThetaToXY(At,kt,it,ot);et.arc(Tt.x,Tt.y,Ct,xt+HALF_PI,kt+Math.PI)}const Yt=(xt-Ct/dt+(ft+jt/dt))/2;if(et.arc(it,ot,dt,xt-Ct/dt,Yt,!0),et.arc(it,ot,dt,Yt,ft+jt/dt,!0),jt>0){const Tt=rThetaToXY($t,Xt,it,ot);et.arc(Tt.x,Tt.y,jt,Xt+Math.PI,ft-HALF_PI)}const wt=rThetaToXY(St,ft,it,ot);if(et.lineTo(wt.x,wt.y),yt>0){const Tt=rThetaToXY(St,Et,it,ot);et.arc(Tt.x,Tt.y,yt,ft-HALF_PI,Et)}}else{et.moveTo(it,ot);const Zt=Math.cos(Et)*ut+it,Jt=Math.sin(Et)*ut+ot;et.lineTo(Zt,Jt);const Yt=Math.cos(Rt)*ut+it,wt=Math.sin(Rt)*ut+ot;et.lineTo(Yt,wt)}et.closePath()}function drawArc(et,_e,tt,st,rt){const{fullCircles:nt,startAngle:it,circumference:ot}=_e;let at=_e.endAngle;if(nt){pathArc(et,_e,tt,st,at,rt);for(let lt=0;lt<nt;++lt)et.fill();isNaN(ot)||(at=it+(ot%TAU||TAU))}return pathArc(et,_e,tt,st,at,rt),et.fill(),at}function drawBorder(et,_e,tt,st,rt){const{fullCircles:nt,startAngle:it,circumference:ot,options:at}=_e,{borderWidth:lt,borderJoinStyle:ct,borderDash:ut,borderDashOffset:dt}=at,ht=at.borderAlign==="inner";if(!lt)return;et.setLineDash(ut||[]),et.lineDashOffset=dt,ht?(et.lineWidth=lt*2,et.lineJoin=ct||"round"):(et.lineWidth=lt,et.lineJoin=ct||"bevel");let pt=_e.endAngle;if(nt){pathArc(et,_e,tt,st,pt,rt);for(let mt=0;mt<nt;++mt)et.stroke();isNaN(ot)||(pt=it+(ot%TAU||TAU))}ht&&clipArc(et,_e,pt),nt||(pathArc(et,_e,tt,st,pt,rt),et.stroke())}class ArcElement extends Element{constructor(tt){super();rs(this,"circumference");rs(this,"endAngle");rs(this,"fullCircles");rs(this,"innerRadius");rs(this,"outerRadius");rs(this,"pixelMargin");rs(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,tt&&Object.assign(this,tt)}inRange(tt,st,rt){const nt=this.getProps(["x","y"],rt),{angle:it,distance:ot}=getAngleFromPoint(nt,{x:tt,y:st}),{startAngle:at,endAngle:lt,innerRadius:ct,outerRadius:ut,circumference:dt}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],rt),ht=(this.options.spacing+this.options.borderWidth)/2,pt=valueOrDefault(dt,lt-at),mt=_angleBetween(it,at,lt)&&at!==lt,gt=pt>=TAU||mt,ft=_isBetween(ot,ct+ht,ut+ht);return gt&&ft}getCenterPoint(tt){const{x:st,y:rt,startAngle:nt,endAngle:it,innerRadius:ot,outerRadius:at}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],tt),{offset:lt,spacing:ct}=this.options,ut=(nt+it)/2,dt=(ot+at+ct+lt)/2;return{x:st+Math.cos(ut)*dt,y:rt+Math.sin(ut)*dt}}tooltipPosition(tt){return this.getCenterPoint(tt)}draw(tt){const{options:st,circumference:rt}=this,nt=(st.offset||0)/4,it=(st.spacing||0)/2,ot=st.circular;if(this.pixelMargin=st.borderAlign==="inner"?.33:0,this.fullCircles=rt>TAU?Math.floor(rt/TAU):0,rt===0||this.innerRadius<0||this.outerRadius<0)return;tt.save();const at=(this.startAngle+this.endAngle)/2;tt.translate(Math.cos(at)*nt,Math.sin(at)*nt);const lt=1-Math.sin(Math.min(PI,rt||0)),ct=nt*lt;tt.fillStyle=st.backgroundColor,tt.strokeStyle=st.borderColor,drawArc(tt,this,ct,it,ot),drawBorder(tt,this,ct,it,ot),tt.restore()}}rs(ArcElement,"id","arc"),rs(ArcElement,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),rs(ArcElement,"defaultRoutes",{backgroundColor:"backgroundColor"}),rs(ArcElement,"descriptors",{_scriptable:!0,_indexable:tt=>tt!=="borderDash"});function setStyle(et,_e,tt=_e){et.lineCap=valueOrDefault(tt.borderCapStyle,_e.borderCapStyle),et.setLineDash(valueOrDefault(tt.borderDash,_e.borderDash)),et.lineDashOffset=valueOrDefault(tt.borderDashOffset,_e.borderDashOffset),et.lineJoin=valueOrDefault(tt.borderJoinStyle,_e.borderJoinStyle),et.lineWidth=valueOrDefault(tt.borderWidth,_e.borderWidth),et.strokeStyle=valueOrDefault(tt.borderColor,_e.borderColor)}function lineTo(et,_e,tt){et.lineTo(tt.x,tt.y)}function getLineMethod(et){return et.stepped?_steppedLineTo:et.tension||et.cubicInterpolationMode==="monotone"?_bezierCurveTo:lineTo}function pathVars(et,_e,tt={}){const st=et.length,{start:rt=0,end:nt=st-1}=tt,{start:it,end:ot}=_e,at=Math.max(rt,it),lt=Math.min(nt,ot),ct=rt<it&&nt<it||rt>ot&&nt>ot;return{count:st,start:at,loop:_e.loop,ilen:lt<at&&!ct?st+lt-at:lt-at}}function pathSegment(et,_e,tt,st){const{points:rt,options:nt}=_e,{count:it,start:ot,loop:at,ilen:lt}=pathVars(rt,tt,st),ct=getLineMethod(nt);let{move:ut=!0,reverse:dt}=st||{},ht,pt,mt;for(ht=0;ht<=lt;++ht)pt=rt[(ot+(dt?lt-ht:ht))%it],!pt.skip&&(ut?(et.moveTo(pt.x,pt.y),ut=!1):ct(et,mt,pt,dt,nt.stepped),mt=pt);return at&&(pt=rt[(ot+(dt?lt:0))%it],ct(et,mt,pt,dt,nt.stepped)),!!at}function fastPathSegment(et,_e,tt,st){const rt=_e.points,{count:nt,start:it,ilen:ot}=pathVars(rt,tt,st),{move:at=!0,reverse:lt}=st||{};let ct=0,ut=0,dt,ht,pt,mt,gt,ft;const xt=bt=>(it+(lt?ot-bt:bt))%nt,yt=()=>{mt!==gt&&(et.lineTo(ct,gt),et.lineTo(ct,mt),et.lineTo(ct,ft))};for(at&&(ht=rt[xt(0)],et.moveTo(ht.x,ht.y)),dt=0;dt<=ot;++dt){if(ht=rt[xt(dt)],ht.skip)continue;const bt=ht.x,jt=ht.y,Ct=bt|0;Ct===pt?(jt<mt?mt=jt:jt>gt&&(gt=jt),ct=(ut*ct+bt)/++ut):(yt(),et.lineTo(bt,jt),pt=Ct,ut=0,mt=gt=jt),ft=jt}yt()}function _getSegmentMethod(et){const _e=et.options,tt=_e.borderDash&&_e.borderDash.length;return!et._decimated&&!et._loop&&!_e.tension&&_e.cubicInterpolationMode!=="monotone"&&!_e.stepped&&!tt?fastPathSegment:pathSegment}function _getInterpolationMethod(et){return et.stepped?_steppedInterpolation:et.tension||et.cubicInterpolationMode==="monotone"?_bezierInterpolation:_pointInLine}function strokePathWithCache(et,_e,tt,st){let rt=_e._path;rt||(rt=_e._path=new Path2D,_e.path(rt,tt,st)&&rt.closePath()),setStyle(et,_e.options),et.stroke(rt)}function strokePathDirect(et,_e,tt,st){const{segments:rt,options:nt}=_e,it=_getSegmentMethod(_e);for(const ot of rt)setStyle(et,nt,ot.style),et.beginPath(),it(et,_e,ot,{start:tt,end:tt+st-1})&&et.closePath(),et.stroke()}const usePath2D=typeof Path2D=="function";function draw(et,_e,tt,st){usePath2D&&!_e.options.segment?strokePathWithCache(et,_e,tt,st):strokePathDirect(et,_e,tt,st)}class LineElement extends Element{constructor(_e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,_e&&Object.assign(this,_e)}updateControlPoints(_e,tt){const st=this.options;if((st.tension||st.cubicInterpolationMode==="monotone")&&!st.stepped&&!this._pointsUpdated){const rt=st.spanGaps?this._loop:this._fullLoop;_updateBezierControlPoints(this._points,st,_e,rt,tt),this._pointsUpdated=!0}}set points(_e){this._points=_e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_computeSegments(this,this.options.segment))}first(){const _e=this.segments,tt=this.points;return _e.length&&tt[_e[0].start]}last(){const _e=this.segments,tt=this.points,st=_e.length;return st&&tt[_e[st-1].end]}interpolate(_e,tt){const st=this.options,rt=_e[tt],nt=this.points,it=_boundSegments(this,{property:tt,start:rt,end:rt});if(!it.length)return;const ot=[],at=_getInterpolationMethod(st);let lt,ct;for(lt=0,ct=it.length;lt<ct;++lt){const{start:ut,end:dt}=it[lt],ht=nt[ut],pt=nt[dt];if(ht===pt){ot.push(ht);continue}const mt=Math.abs((rt-ht[tt])/(pt[tt]-ht[tt])),gt=at(ht,pt,mt,st.stepped);gt[tt]=_e[tt],ot.push(gt)}return ot.length===1?ot[0]:ot}pathSegment(_e,tt,st){return _getSegmentMethod(this)(_e,this,tt,st)}path(_e,tt,st){const rt=this.segments,nt=_getSegmentMethod(this);let it=this._loop;tt=tt||0,st=st||this.points.length-tt;for(const ot of rt)it&=nt(_e,this,ot,{start:tt,end:tt+st-1});return!!it}draw(_e,tt,st,rt){const nt=this.options||{};(this.points||[]).length&&nt.borderWidth&&(_e.save(),draw(_e,this,st,rt),_e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}rs(LineElement,"id","line"),rs(LineElement,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),rs(LineElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),rs(LineElement,"descriptors",{_scriptable:!0,_indexable:_e=>_e!=="borderDash"&&_e!=="fill"});function inRange$1(et,_e,tt,st){const rt=et.options,{[tt]:nt}=et.getProps([tt],st);return Math.abs(_e-nt)<rt.radius+rt.hitRadius}class PointElement extends Element{constructor(tt){super();rs(this,"parsed");rs(this,"skip");rs(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,tt&&Object.assign(this,tt)}inRange(tt,st,rt){const nt=this.options,{x:it,y:ot}=this.getProps(["x","y"],rt);return Math.pow(tt-it,2)+Math.pow(st-ot,2)<Math.pow(nt.hitRadius+nt.radius,2)}inXRange(tt,st){return inRange$1(this,tt,"x",st)}inYRange(tt,st){return inRange$1(this,tt,"y",st)}getCenterPoint(tt){const{x:st,y:rt}=this.getProps(["x","y"],tt);return{x:st,y:rt}}size(tt){tt=tt||this.options||{};let st=tt.radius||0;st=Math.max(st,st&&tt.hoverRadius||0);const rt=st&&tt.borderWidth||0;return(st+rt)*2}draw(tt,st){const rt=this.options;this.skip||rt.radius<.1||!_isPointInArea(this,st,this.size(rt)/2)||(tt.strokeStyle=rt.borderColor,tt.lineWidth=rt.borderWidth,tt.fillStyle=rt.backgroundColor,drawPoint(tt,rt,this.x,this.y))}getRange(){const tt=this.options||{};return tt.radius+tt.hitRadius}}rs(PointElement,"id","point"),rs(PointElement,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),rs(PointElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function getBarBounds(et,_e){const{x:tt,y:st,base:rt,width:nt,height:it}=et.getProps(["x","y","base","width","height"],_e);let ot,at,lt,ct,ut;return et.horizontal?(ut=it/2,ot=Math.min(tt,rt),at=Math.max(tt,rt),lt=st-ut,ct=st+ut):(ut=nt/2,ot=tt-ut,at=tt+ut,lt=Math.min(st,rt),ct=Math.max(st,rt)),{left:ot,top:lt,right:at,bottom:ct}}function skipOrLimit(et,_e,tt,st){return et?0:_limitValue(_e,tt,st)}function parseBorderWidth(et,_e,tt){const st=et.options.borderWidth,rt=et.borderSkipped,nt=toTRBL(st);return{t:skipOrLimit(rt.top,nt.top,0,tt),r:skipOrLimit(rt.right,nt.right,0,_e),b:skipOrLimit(rt.bottom,nt.bottom,0,tt),l:skipOrLimit(rt.left,nt.left,0,_e)}}function parseBorderRadius(et,_e,tt){const{enableBorderRadius:st}=et.getProps(["enableBorderRadius"]),rt=et.options.borderRadius,nt=toTRBLCorners(rt),it=Math.min(_e,tt),ot=et.borderSkipped,at=st||isObject$1(rt);return{topLeft:skipOrLimit(!at||ot.top||ot.left,nt.topLeft,0,it),topRight:skipOrLimit(!at||ot.top||ot.right,nt.topRight,0,it),bottomLeft:skipOrLimit(!at||ot.bottom||ot.left,nt.bottomLeft,0,it),bottomRight:skipOrLimit(!at||ot.bottom||ot.right,nt.bottomRight,0,it)}}function boundingRects(et){const _e=getBarBounds(et),tt=_e.right-_e.left,st=_e.bottom-_e.top,rt=parseBorderWidth(et,tt/2,st/2),nt=parseBorderRadius(et,tt/2,st/2);return{outer:{x:_e.left,y:_e.top,w:tt,h:st,radius:nt},inner:{x:_e.left+rt.l,y:_e.top+rt.t,w:tt-rt.l-rt.r,h:st-rt.t-rt.b,radius:{topLeft:Math.max(0,nt.topLeft-Math.max(rt.t,rt.l)),topRight:Math.max(0,nt.topRight-Math.max(rt.t,rt.r)),bottomLeft:Math.max(0,nt.bottomLeft-Math.max(rt.b,rt.l)),bottomRight:Math.max(0,nt.bottomRight-Math.max(rt.b,rt.r))}}}}function inRange(et,_e,tt,st){const rt=_e===null,nt=tt===null,ot=et&&!(rt&&nt)&&getBarBounds(et,st);return ot&&(rt||_isBetween(_e,ot.left,ot.right))&&(nt||_isBetween(tt,ot.top,ot.bottom))}function hasRadius(et){return et.topLeft||et.topRight||et.bottomLeft||et.bottomRight}function addNormalRectPath(et,_e){et.rect(_e.x,_e.y,_e.w,_e.h)}function inflateRect(et,_e,tt={}){const st=et.x!==tt.x?-_e:0,rt=et.y!==tt.y?-_e:0,nt=(et.x+et.w!==tt.x+tt.w?_e:0)-st,it=(et.y+et.h!==tt.y+tt.h?_e:0)-rt;return{x:et.x+st,y:et.y+rt,w:et.w+nt,h:et.h+it,radius:et.radius}}class BarElement extends Element{constructor(_e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,_e&&Object.assign(this,_e)}draw(_e){const{inflateAmount:tt,options:{borderColor:st,backgroundColor:rt}}=this,{inner:nt,outer:it}=boundingRects(this),ot=hasRadius(it.radius)?addRoundedRectPath:addNormalRectPath;_e.save(),(it.w!==nt.w||it.h!==nt.h)&&(_e.beginPath(),ot(_e,inflateRect(it,tt,nt)),_e.clip(),ot(_e,inflateRect(nt,-tt,it)),_e.fillStyle=st,_e.fill("evenodd")),_e.beginPath(),ot(_e,inflateRect(nt,tt)),_e.fillStyle=rt,_e.fill(),_e.restore()}inRange(_e,tt,st){return inRange(this,_e,tt,st)}inXRange(_e,tt){return inRange(this,_e,null,tt)}inYRange(_e,tt){return inRange(this,null,_e,tt)}getCenterPoint(_e){const{x:tt,y:st,base:rt,horizontal:nt}=this.getProps(["x","y","base","horizontal"],_e);return{x:nt?(tt+rt)/2:tt,y:nt?st:(st+rt)/2}}getRange(_e){return _e==="x"?this.width/2:this.height/2}}rs(BarElement,"id","bar"),rs(BarElement,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),rs(BarElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function _segments(et,_e,tt){const st=et.segments,rt=et.points,nt=_e.points,it=[];for(const ot of st){let{start:at,end:lt}=ot;lt=_findSegmentEnd(at,lt,rt);const ct=_getBounds(tt,rt[at],rt[lt],ot.loop);if(!_e.segments){it.push({source:ot,target:ct,start:rt[at],end:rt[lt]});continue}const ut=_boundSegments(_e,ct);for(const dt of ut){const ht=_getBounds(tt,nt[dt.start],nt[dt.end],dt.loop),pt=_boundSegment(ot,rt,ht);for(const mt of pt)it.push({source:mt,target:dt,start:{[tt]:_getEdge(ct,ht,"start",Math.max)},end:{[tt]:_getEdge(ct,ht,"end",Math.min)}})}}return it}function _getBounds(et,_e,tt,st){if(st)return;let rt=_e[et],nt=tt[et];return et==="angle"&&(rt=_normalizeAngle(rt),nt=_normalizeAngle(nt)),{property:et,start:rt,end:nt}}function _pointsFromSegments(et,_e){const{x:tt=null,y:st=null}=et||{},rt=_e.points,nt=[];return _e.segments.forEach(({start:it,end:ot})=>{ot=_findSegmentEnd(it,ot,rt);const at=rt[it],lt=rt[ot];st!==null?(nt.push({x:at.x,y:st}),nt.push({x:lt.x,y:st})):tt!==null&&(nt.push({x:tt,y:at.y}),nt.push({x:tt,y:lt.y}))}),nt}function _findSegmentEnd(et,_e,tt){for(;_e>et;_e--){const st=tt[_e];if(!isNaN(st.x)&&!isNaN(st.y))break}return _e}function _getEdge(et,_e,tt,st){return et&&_e?st(et[tt],_e[tt]):et?et[tt]:_e?_e[tt]:0}function _createBoundaryLine(et,_e){let tt=[],st=!1;return isArray(et)?(st=!0,tt=et):tt=_pointsFromSegments(et,_e),tt.length?new LineElement({points:tt,options:{tension:0},_loop:st,_fullLoop:st}):null}function _shouldApplyFill(et){return et&&et.fill!==!1}function _resolveTarget(et,_e,tt){let rt=et[_e].fill;const nt=[_e];let it;if(!tt)return rt;for(;rt!==!1&&nt.indexOf(rt)===-1;){if(!isNumberFinite(rt))return rt;if(it=et[rt],!it)return!1;if(it.visible)return rt;nt.push(rt),rt=it.fill}return!1}function _decodeFill(et,_e,tt){const st=parseFillOption(et);if(isObject$1(st))return isNaN(st.value)?!1:st;let rt=parseFloat(st);return isNumberFinite(rt)&&Math.floor(rt)===rt?decodeTargetIndex(st[0],_e,rt,tt):["origin","start","end","stack","shape"].indexOf(st)>=0&&st}function decodeTargetIndex(et,_e,tt,st){return(et==="-"||et==="+")&&(tt=_e+tt),tt===_e||tt<0||tt>=st?!1:tt}function _getTargetPixel(et,_e){let tt=null;return et==="start"?tt=_e.bottom:et==="end"?tt=_e.top:isObject$1(et)?tt=_e.getPixelForValue(et.value):_e.getBasePixel&&(tt=_e.getBasePixel()),tt}function _getTargetValue(et,_e,tt){let st;return et==="start"?st=tt:et==="end"?st=_e.options.reverse?_e.min:_e.max:isObject$1(et)?st=et.value:st=_e.getBaseValue(),st}function parseFillOption(et){const _e=et.options,tt=_e.fill;let st=valueOrDefault(tt&&tt.target,tt);return st===void 0&&(st=!!_e.backgroundColor),st===!1||st===null?!1:st===!0?"origin":st}function _buildStackLine(et){const{scale:_e,index:tt,line:st}=et,rt=[],nt=st.segments,it=st.points,ot=getLinesBelow(_e,tt);ot.push(_createBoundaryLine({x:null,y:_e.bottom},st));for(let at=0;at<nt.length;at++){const lt=nt[at];for(let ct=lt.start;ct<=lt.end;ct++)addPointsBelow(rt,it[ct],ot)}return new LineElement({points:rt,options:{}})}function getLinesBelow(et,_e){const tt=[],st=et.getMatchingVisibleMetas("line");for(let rt=0;rt<st.length;rt++){const nt=st[rt];if(nt.index===_e)break;nt.hidden||tt.unshift(nt.dataset)}return tt}function addPointsBelow(et,_e,tt){const st=[];for(let rt=0;rt<tt.length;rt++){const nt=tt[rt],{first:it,last:ot,point:at}=findPoint(nt,_e,"x");if(!(!at||it&&ot)){if(it)st.unshift(at);else if(et.push(at),!ot)break}}et.push(...st)}function findPoint(et,_e,tt){const st=et.interpolate(_e,tt);if(!st)return{};const rt=st[tt],nt=et.segments,it=et.points;let ot=!1,at=!1;for(let lt=0;lt<nt.length;lt++){const ct=nt[lt],ut=it[ct.start][tt],dt=it[ct.end][tt];if(_isBetween(rt,ut,dt)){ot=rt===ut,at=rt===dt;break}}return{first:ot,last:at,point:st}}class simpleArc{constructor(_e){this.x=_e.x,this.y=_e.y,this.radius=_e.radius}pathSegment(_e,tt,st){const{x:rt,y:nt,radius:it}=this;return tt=tt||{start:0,end:TAU},_e.arc(rt,nt,it,tt.end,tt.start,!0),!st.bounds}interpolate(_e){const{x:tt,y:st,radius:rt}=this,nt=_e.angle;return{x:tt+Math.cos(nt)*rt,y:st+Math.sin(nt)*rt,angle:nt}}}function _getTarget(et){const{chart:_e,fill:tt,line:st}=et;if(isNumberFinite(tt))return getLineByIndex(_e,tt);if(tt==="stack")return _buildStackLine(et);if(tt==="shape")return!0;const rt=computeBoundary(et);return rt instanceof simpleArc?rt:_createBoundaryLine(rt,st)}function getLineByIndex(et,_e){const tt=et.getDatasetMeta(_e);return tt&&et.isDatasetVisible(_e)?tt.dataset:null}function computeBoundary(et){return(et.scale||{}).getPointPositionForValue?computeCircularBoundary(et):computeLinearBoundary(et)}function computeLinearBoundary(et){const{scale:_e={},fill:tt}=et,st=_getTargetPixel(tt,_e);if(isNumberFinite(st)){const rt=_e.isHorizontal();return{x:rt?st:null,y:rt?null:st}}return null}function computeCircularBoundary(et){const{scale:_e,fill:tt}=et,st=_e.options,rt=_e.getLabels().length,nt=st.reverse?_e.max:_e.min,it=_getTargetValue(tt,_e,nt),ot=[];if(st.grid.circular){const at=_e.getPointPositionForValue(0,nt);return new simpleArc({x:at.x,y:at.y,radius:_e.getDistanceFromCenterForValue(it)})}for(let at=0;at<rt;++at)ot.push(_e.getPointPositionForValue(at,it));return ot}function _drawfill(et,_e,tt){const st=_getTarget(_e),{chart:rt,index:nt,line:it,scale:ot,axis:at}=_e,lt=it.options,ct=lt.fill,ut=lt.backgroundColor,{above:dt=ut,below:ht=ut}=ct||{},pt=rt.getDatasetMeta(nt),mt=getDatasetClipArea(rt,pt);st&&it.points.length&&(clipArea(et,tt),doFill(et,{line:it,target:st,above:dt,below:ht,area:tt,scale:ot,axis:at,clip:mt}),unclipArea(et))}function doFill(et,_e){const{line:tt,target:st,above:rt,below:nt,area:it,scale:ot,clip:at}=_e,lt=tt._loop?"angle":_e.axis;et.save(),lt==="x"&&nt!==rt&&(clipVertical(et,st,it.top),fill(et,{line:tt,target:st,color:rt,scale:ot,property:lt,clip:at}),et.restore(),et.save(),clipVertical(et,st,it.bottom)),fill(et,{line:tt,target:st,color:nt,scale:ot,property:lt,clip:at}),et.restore()}function clipVertical(et,_e,tt){const{segments:st,points:rt}=_e;let nt=!0,it=!1;et.beginPath();for(const ot of st){const{start:at,end:lt}=ot,ct=rt[at],ut=rt[_findSegmentEnd(at,lt,rt)];nt?(et.moveTo(ct.x,ct.y),nt=!1):(et.lineTo(ct.x,tt),et.lineTo(ct.x,ct.y)),it=!!_e.pathSegment(et,ot,{move:it}),it?et.closePath():et.lineTo(ut.x,tt)}et.lineTo(_e.first().x,tt),et.closePath(),et.clip()}function fill(et,_e){const{line:tt,target:st,property:rt,color:nt,scale:it,clip:ot}=_e,at=_segments(tt,st,rt);for(const{source:lt,target:ct,start:ut,end:dt}of at){const{style:{backgroundColor:ht=nt}={}}=lt,pt=st!==!0;et.save(),et.fillStyle=ht,clipBounds(et,it,ot,pt&&_getBounds(rt,ut,dt)),et.beginPath();const mt=!!tt.pathSegment(et,lt);let gt;if(pt){mt?et.closePath():interpolatedLineTo(et,st,dt,rt);const ft=!!st.pathSegment(et,ct,{move:mt,reverse:!0});gt=mt&&ft,gt||interpolatedLineTo(et,st,ut,rt)}et.closePath(),et.fill(gt?"evenodd":"nonzero"),et.restore()}}function clipBounds(et,_e,tt,st){const rt=_e.chart.chartArea,{property:nt,start:it,end:ot}=st||{};if(nt==="x"||nt==="y"){let at,lt,ct,ut;nt==="x"?(at=it,lt=rt.top,ct=ot,ut=rt.bottom):(at=rt.left,lt=it,ct=rt.right,ut=ot),et.beginPath(),tt&&(at=Math.max(at,tt.left),ct=Math.min(ct,tt.right),lt=Math.max(lt,tt.top),ut=Math.min(ut,tt.bottom)),et.rect(at,lt,ct-at,ut-lt),et.clip()}}function interpolatedLineTo(et,_e,tt,st){const rt=_e.interpolate(tt,st);rt&&et.lineTo(rt.x,rt.y)}var index={id:"filler",afterDatasetsUpdate(et,_e,tt){const st=(et.data.datasets||[]).length,rt=[];let nt,it,ot,at;for(it=0;it<st;++it)nt=et.getDatasetMeta(it),ot=nt.dataset,at=null,ot&&ot.options&&ot instanceof LineElement&&(at={visible:et.isDatasetVisible(it),index:it,fill:_decodeFill(ot,it,st),chart:et,axis:nt.controller.options.indexAxis,scale:nt.vScale,line:ot}),nt.$filler=at,rt.push(at);for(it=0;it<st;++it)at=rt[it],!(!at||at.fill===!1)&&(at.fill=_resolveTarget(rt,it,tt.propagate))},beforeDraw(et,_e,tt){const st=tt.drawTime==="beforeDraw",rt=et.getSortedVisibleDatasetMetas(),nt=et.chartArea;for(let it=rt.length-1;it>=0;--it){const ot=rt[it].$filler;ot&&(ot.line.updateControlPoints(nt,ot.axis),st&&ot.fill&&_drawfill(et.ctx,ot,nt))}},beforeDatasetsDraw(et,_e,tt){if(tt.drawTime!=="beforeDatasetsDraw")return;const st=et.getSortedVisibleDatasetMetas();for(let rt=st.length-1;rt>=0;--rt){const nt=st[rt].$filler;_shouldApplyFill(nt)&&_drawfill(et.ctx,nt,et.chartArea)}},beforeDatasetDraw(et,_e,tt){const st=_e.meta.$filler;!_shouldApplyFill(st)||tt.drawTime!=="beforeDatasetDraw"||_drawfill(et.ctx,st,et.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const getBoxSize=(et,_e)=>{let{boxHeight:tt=_e,boxWidth:st=_e}=et;return et.usePointStyle&&(tt=Math.min(tt,_e),st=et.pointStyleWidth||Math.min(st,_e)),{boxWidth:st,boxHeight:tt,itemHeight:Math.max(_e,tt)}},itemsEqual=(et,_e)=>et!==null&&_e!==null&&et.datasetIndex===_e.datasetIndex&&et.index===_e.index;class Legend extends Element{constructor(_e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=_e.chart,this.options=_e.options,this.ctx=_e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(_e,tt,st){this.maxWidth=_e,this.maxHeight=tt,this._margins=st,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const _e=this.options.labels||{};let tt=callback(_e.generateLabels,[this.chart],this)||[];_e.filter&&(tt=tt.filter(st=>_e.filter(st,this.chart.data))),_e.sort&&(tt=tt.sort((st,rt)=>_e.sort(st,rt,this.chart.data))),this.options.reverse&&tt.reverse(),this.legendItems=tt}fit(){const{options:_e,ctx:tt}=this;if(!_e.display){this.width=this.height=0;return}const st=_e.labels,rt=toFont(st.font),nt=rt.size,it=this._computeTitleHeight(),{boxWidth:ot,itemHeight:at}=getBoxSize(st,nt);let lt,ct;tt.font=rt.string,this.isHorizontal()?(lt=this.maxWidth,ct=this._fitRows(it,nt,ot,at)+10):(ct=this.maxHeight,lt=this._fitCols(it,rt,ot,at)+10),this.width=Math.min(lt,_e.maxWidth||this.maxWidth),this.height=Math.min(ct,_e.maxHeight||this.maxHeight)}_fitRows(_e,tt,st,rt){const{ctx:nt,maxWidth:it,options:{labels:{padding:ot}}}=this,at=this.legendHitBoxes=[],lt=this.lineWidths=[0],ct=rt+ot;let ut=_e;nt.textAlign="left",nt.textBaseline="middle";let dt=-1,ht=-ct;return this.legendItems.forEach((pt,mt)=>{const gt=st+tt/2+nt.measureText(pt.text).width;(mt===0||lt[lt.length-1]+gt+2*ot>it)&&(ut+=ct,lt[lt.length-(mt>0?0:1)]=0,ht+=ct,dt++),at[mt]={left:0,top:ht,row:dt,width:gt,height:rt},lt[lt.length-1]+=gt+ot}),ut}_fitCols(_e,tt,st,rt){const{ctx:nt,maxHeight:it,options:{labels:{padding:ot}}}=this,at=this.legendHitBoxes=[],lt=this.columnSizes=[],ct=it-_e;let ut=ot,dt=0,ht=0,pt=0,mt=0;return this.legendItems.forEach((gt,ft)=>{const{itemWidth:xt,itemHeight:yt}=calculateItemSize(st,tt,nt,gt,rt);ft>0&&ht+yt+2*ot>ct&&(ut+=dt+ot,lt.push({width:dt,height:ht}),pt+=dt+ot,mt++,dt=ht=0),at[ft]={left:pt,top:ht,col:mt,width:xt,height:yt},dt=Math.max(dt,xt),ht+=yt+ot}),ut+=dt,lt.push({width:dt,height:ht}),ut}adjustHitBoxes(){if(!this.options.display)return;const _e=this._computeTitleHeight(),{legendHitBoxes:tt,options:{align:st,labels:{padding:rt},rtl:nt}}=this,it=getRtlAdapter(nt,this.left,this.width);if(this.isHorizontal()){let ot=0,at=_alignStartEnd(st,this.left+rt,this.right-this.lineWidths[ot]);for(const lt of tt)ot!==lt.row&&(ot=lt.row,at=_alignStartEnd(st,this.left+rt,this.right-this.lineWidths[ot])),lt.top+=this.top+_e+rt,lt.left=it.leftForLtr(it.x(at),lt.width),at+=lt.width+rt}else{let ot=0,at=_alignStartEnd(st,this.top+_e+rt,this.bottom-this.columnSizes[ot].height);for(const lt of tt)lt.col!==ot&&(ot=lt.col,at=_alignStartEnd(st,this.top+_e+rt,this.bottom-this.columnSizes[ot].height)),lt.top=at,lt.left+=this.left+rt,lt.left=it.leftForLtr(it.x(lt.left),lt.width),at+=lt.height+rt}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const _e=this.ctx;clipArea(_e,this),this._draw(),unclipArea(_e)}}_draw(){const{options:_e,columnSizes:tt,lineWidths:st,ctx:rt}=this,{align:nt,labels:it}=_e,ot=defaults.color,at=getRtlAdapter(_e.rtl,this.left,this.width),lt=toFont(it.font),{padding:ct}=it,ut=lt.size,dt=ut/2;let ht;this.drawTitle(),rt.textAlign=at.textAlign("left"),rt.textBaseline="middle",rt.lineWidth=.5,rt.font=lt.string;const{boxWidth:pt,boxHeight:mt,itemHeight:gt}=getBoxSize(it,ut),ft=function(Ct,St,vt){if(isNaN(pt)||pt<=0||isNaN(mt)||mt<0)return;rt.save();const Et=valueOrDefault(vt.lineWidth,1);if(rt.fillStyle=valueOrDefault(vt.fillStyle,ot),rt.lineCap=valueOrDefault(vt.lineCap,"butt"),rt.lineDashOffset=valueOrDefault(vt.lineDashOffset,0),rt.lineJoin=valueOrDefault(vt.lineJoin,"miter"),rt.lineWidth=Et,rt.strokeStyle=valueOrDefault(vt.strokeStyle,ot),rt.setLineDash(valueOrDefault(vt.lineDash,[])),it.usePointStyle){const Rt={radius:mt*Math.SQRT2/2,pointStyle:vt.pointStyle,rotation:vt.rotation,borderWidth:Et},$t=at.xPlus(Ct,pt/2),At=St+dt;drawPointLegend(rt,Rt,$t,At,it.pointStyleWidth&&pt)}else{const Rt=St+Math.max((ut-mt)/2,0),$t=at.leftForLtr(Ct,pt),At=toTRBLCorners(vt.borderRadius);rt.beginPath(),Object.values(At).some(Xt=>Xt!==0)?addRoundedRectPath(rt,{x:$t,y:Rt,w:pt,h:mt,radius:At}):rt.rect($t,Rt,pt,mt),rt.fill(),Et!==0&&rt.stroke()}rt.restore()},xt=function(Ct,St,vt){renderText(rt,vt.text,Ct,St+gt/2,lt,{strikethrough:vt.hidden,textAlign:at.textAlign(vt.textAlign)})},yt=this.isHorizontal(),bt=this._computeTitleHeight();yt?ht={x:_alignStartEnd(nt,this.left+ct,this.right-st[0]),y:this.top+ct+bt,line:0}:ht={x:this.left+ct,y:_alignStartEnd(nt,this.top+bt+ct,this.bottom-tt[0].height),line:0},overrideTextDirection(this.ctx,_e.textDirection);const jt=gt+ct;this.legendItems.forEach((Ct,St)=>{rt.strokeStyle=Ct.fontColor,rt.fillStyle=Ct.fontColor;const vt=rt.measureText(Ct.text).width,Et=at.textAlign(Ct.textAlign||(Ct.textAlign=it.textAlign)),Rt=pt+dt+vt;let $t=ht.x,At=ht.y;at.setWidth(this.width),yt?St>0&&$t+Rt+ct>this.right&&(At=ht.y+=jt,ht.line++,$t=ht.x=_alignStartEnd(nt,this.left+ct,this.right-st[ht.line])):St>0&&At+jt>this.bottom&&($t=ht.x=$t+tt[ht.line].width+ct,ht.line++,At=ht.y=_alignStartEnd(nt,this.top+bt+ct,this.bottom-tt[ht.line].height));const Xt=at.x($t);if(ft(Xt,At,Ct),$t=_textX(Et,$t+pt+dt,yt?$t+Rt:this.right,_e.rtl),xt(at.x($t),At,Ct),yt)ht.x+=Rt+ct;else if(typeof Ct.text!="string"){const kt=lt.lineHeight;ht.y+=calculateLegendItemHeight(Ct,kt)+ct}else ht.y+=jt}),restoreTextDirection(this.ctx,_e.textDirection)}drawTitle(){const _e=this.options,tt=_e.title,st=toFont(tt.font),rt=toPadding(tt.padding);if(!tt.display)return;const nt=getRtlAdapter(_e.rtl,this.left,this.width),it=this.ctx,ot=tt.position,at=st.size/2,lt=rt.top+at;let ct,ut=this.left,dt=this.width;if(this.isHorizontal())dt=Math.max(...this.lineWidths),ct=this.top+lt,ut=_alignStartEnd(_e.align,ut,this.right-dt);else{const pt=this.columnSizes.reduce((mt,gt)=>Math.max(mt,gt.height),0);ct=lt+_alignStartEnd(_e.align,this.top,this.bottom-pt-_e.labels.padding-this._computeTitleHeight())}const ht=_alignStartEnd(ot,ut,ut+dt);it.textAlign=nt.textAlign(_toLeftRightCenter(ot)),it.textBaseline="middle",it.strokeStyle=tt.color,it.fillStyle=tt.color,it.font=st.string,renderText(it,tt.text,ht,ct,st)}_computeTitleHeight(){const _e=this.options.title,tt=toFont(_e.font),st=toPadding(_e.padding);return _e.display?tt.lineHeight+st.height:0}_getLegendItemAt(_e,tt){let st,rt,nt;if(_isBetween(_e,this.left,this.right)&&_isBetween(tt,this.top,this.bottom)){for(nt=this.legendHitBoxes,st=0;st<nt.length;++st)if(rt=nt[st],_isBetween(_e,rt.left,rt.left+rt.width)&&_isBetween(tt,rt.top,rt.top+rt.height))return this.legendItems[st]}return null}handleEvent(_e){const tt=this.options;if(!isListened(_e.type,tt))return;const st=this._getLegendItemAt(_e.x,_e.y);if(_e.type==="mousemove"||_e.type==="mouseout"){const rt=this._hoveredItem,nt=itemsEqual(rt,st);rt&&!nt&&callback(tt.onLeave,[_e,rt,this],this),this._hoveredItem=st,st&&!nt&&callback(tt.onHover,[_e,st,this],this)}else st&&callback(tt.onClick,[_e,st,this],this)}}function calculateItemSize(et,_e,tt,st,rt){const nt=calculateItemWidth(st,et,_e,tt),it=calculateItemHeight(rt,st,_e.lineHeight);return{itemWidth:nt,itemHeight:it}}function calculateItemWidth(et,_e,tt,st){let rt=et.text;return rt&&typeof rt!="string"&&(rt=rt.reduce((nt,it)=>nt.length>it.length?nt:it)),_e+tt.size/2+st.measureText(rt).width}function calculateItemHeight(et,_e,tt){let st=et;return typeof _e.text!="string"&&(st=calculateLegendItemHeight(_e,tt)),st}function calculateLegendItemHeight(et,_e){const tt=et.text?et.text.length:0;return _e*tt}function isListened(et,_e){return!!((et==="mousemove"||et==="mouseout")&&(_e.onHover||_e.onLeave)||_e.onClick&&(et==="click"||et==="mouseup"))}var plugin_legend={id:"legend",_element:Legend,start(et,_e,tt){const st=et.legend=new Legend({ctx:et.ctx,options:tt,chart:et});layouts.configure(et,st,tt),layouts.addBox(et,st)},stop(et){layouts.removeBox(et,et.legend),delete et.legend},beforeUpdate(et,_e,tt){const st=et.legend;layouts.configure(et,st,tt),st.options=tt},afterUpdate(et){const _e=et.legend;_e.buildLabels(),_e.adjustHitBoxes()},afterEvent(et,_e){_e.replay||et.legend.handleEvent(_e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(et,_e,tt){const st=_e.datasetIndex,rt=tt.chart;rt.isDatasetVisible(st)?(rt.hide(st),_e.hidden=!0):(rt.show(st),_e.hidden=!1)},onHover:null,onLeave:null,labels:{color:et=>et.chart.options.color,boxWidth:40,padding:10,generateLabels(et){const _e=et.data.datasets,{labels:{usePointStyle:tt,pointStyle:st,textAlign:rt,color:nt,useBorderRadius:it,borderRadius:ot}}=et.legend.options;return et._getSortedDatasetMetas().map(at=>{const lt=at.controller.getStyle(tt?0:void 0),ct=toPadding(lt.borderWidth);return{text:_e[at.index].label,fillStyle:lt.backgroundColor,fontColor:nt,hidden:!at.visible,lineCap:lt.borderCapStyle,lineDash:lt.borderDash,lineDashOffset:lt.borderDashOffset,lineJoin:lt.borderJoinStyle,lineWidth:(ct.width+ct.height)/4,strokeStyle:lt.borderColor,pointStyle:st||lt.pointStyle,rotation:lt.rotation,textAlign:rt||lt.textAlign,borderRadius:it&&(ot||lt.borderRadius),datasetIndex:at.index}},this)}},title:{color:et=>et.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:et=>!et.startsWith("on"),labels:{_scriptable:et=>!["generateLabels","filter","sort"].includes(et)}}};class Title extends Element{constructor(_e){super(),this.chart=_e.chart,this.options=_e.options,this.ctx=_e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(_e,tt){const st=this.options;if(this.left=0,this.top=0,!st.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=_e,this.height=this.bottom=tt;const rt=isArray(st.text)?st.text.length:1;this._padding=toPadding(st.padding);const nt=rt*toFont(st.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=nt:this.width=nt}isHorizontal(){const _e=this.options.position;return _e==="top"||_e==="bottom"}_drawArgs(_e){const{top:tt,left:st,bottom:rt,right:nt,options:it}=this,ot=it.align;let at=0,lt,ct,ut;return this.isHorizontal()?(ct=_alignStartEnd(ot,st,nt),ut=tt+_e,lt=nt-st):(it.position==="left"?(ct=st+_e,ut=_alignStartEnd(ot,rt,tt),at=PI*-.5):(ct=nt-_e,ut=_alignStartEnd(ot,tt,rt),at=PI*.5),lt=rt-tt),{titleX:ct,titleY:ut,maxWidth:lt,rotation:at}}draw(){const _e=this.ctx,tt=this.options;if(!tt.display)return;const st=toFont(tt.font),nt=st.lineHeight/2+this._padding.top,{titleX:it,titleY:ot,maxWidth:at,rotation:lt}=this._drawArgs(nt);renderText(_e,tt.text,0,0,st,{color:tt.color,maxWidth:at,rotation:lt,textAlign:_toLeftRightCenter(tt.align),textBaseline:"middle",translation:[it,ot]})}}function createTitle(et,_e){const tt=new Title({ctx:et.ctx,options:_e,chart:et});layouts.configure(et,tt,_e),layouts.addBox(et,tt),et.titleBlock=tt}var plugin_title={id:"title",_element:Title,start(et,_e,tt){createTitle(et,tt)},stop(et){const _e=et.titleBlock;layouts.removeBox(et,_e),delete et.titleBlock},beforeUpdate(et,_e,tt){const st=et.titleBlock;layouts.configure(et,st,tt),st.options=tt},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const positioners={average(et){if(!et.length)return!1;let _e,tt,st=new Set,rt=0,nt=0;for(_e=0,tt=et.length;_e<tt;++_e){const ot=et[_e].element;if(ot&&ot.hasValue()){const at=ot.tooltipPosition();st.add(at.x),rt+=at.y,++nt}}return nt===0||st.size===0?!1:{x:[...st].reduce((ot,at)=>ot+at)/st.size,y:rt/nt}},nearest(et,_e){if(!et.length)return!1;let tt=_e.x,st=_e.y,rt=Number.POSITIVE_INFINITY,nt,it,ot;for(nt=0,it=et.length;nt<it;++nt){const at=et[nt].element;if(at&&at.hasValue()){const lt=at.getCenterPoint(),ct=distanceBetweenPoints(_e,lt);ct<rt&&(rt=ct,ot=at)}}if(ot){const at=ot.tooltipPosition();tt=at.x,st=at.y}return{x:tt,y:st}}};function pushOrConcat(et,_e){return _e&&(isArray(_e)?Array.prototype.push.apply(et,_e):et.push(_e)),et}function splitNewlines(et){return(typeof et=="string"||et instanceof String)&&et.indexOf(`
`)>-1?et.split(`
`):et}function createTooltipItem(et,_e){const{element:tt,datasetIndex:st,index:rt}=_e,nt=et.getDatasetMeta(st).controller,{label:it,value:ot}=nt.getLabelAndValue(rt);return{chart:et,label:it,parsed:nt.getParsed(rt),raw:et.data.datasets[st].data[rt],formattedValue:ot,dataset:nt.getDataset(),dataIndex:rt,datasetIndex:st,element:tt}}function getTooltipSize(et,_e){const tt=et.chart.ctx,{body:st,footer:rt,title:nt}=et,{boxWidth:it,boxHeight:ot}=_e,at=toFont(_e.bodyFont),lt=toFont(_e.titleFont),ct=toFont(_e.footerFont),ut=nt.length,dt=rt.length,ht=st.length,pt=toPadding(_e.padding);let mt=pt.height,gt=0,ft=st.reduce((bt,jt)=>bt+jt.before.length+jt.lines.length+jt.after.length,0);if(ft+=et.beforeBody.length+et.afterBody.length,ut&&(mt+=ut*lt.lineHeight+(ut-1)*_e.titleSpacing+_e.titleMarginBottom),ft){const bt=_e.displayColors?Math.max(ot,at.lineHeight):at.lineHeight;mt+=ht*bt+(ft-ht)*at.lineHeight+(ft-1)*_e.bodySpacing}dt&&(mt+=_e.footerMarginTop+dt*ct.lineHeight+(dt-1)*_e.footerSpacing);let xt=0;const yt=function(bt){gt=Math.max(gt,tt.measureText(bt).width+xt)};return tt.save(),tt.font=lt.string,each(et.title,yt),tt.font=at.string,each(et.beforeBody.concat(et.afterBody),yt),xt=_e.displayColors?it+2+_e.boxPadding:0,each(st,bt=>{each(bt.before,yt),each(bt.lines,yt),each(bt.after,yt)}),xt=0,tt.font=ct.string,each(et.footer,yt),tt.restore(),gt+=pt.width,{width:gt,height:mt}}function determineYAlign(et,_e){const{y:tt,height:st}=_e;return tt<st/2?"top":tt>et.height-st/2?"bottom":"center"}function doesNotFitWithAlign(et,_e,tt,st){const{x:rt,width:nt}=st,it=tt.caretSize+tt.caretPadding;if(et==="left"&&rt+nt+it>_e.width||et==="right"&&rt-nt-it<0)return!0}function determineXAlign(et,_e,tt,st){const{x:rt,width:nt}=tt,{width:it,chartArea:{left:ot,right:at}}=et;let lt="center";return st==="center"?lt=rt<=(ot+at)/2?"left":"right":rt<=nt/2?lt="left":rt>=it-nt/2&&(lt="right"),doesNotFitWithAlign(lt,et,_e,tt)&&(lt="center"),lt}function determineAlignment(et,_e,tt){const st=tt.yAlign||_e.yAlign||determineYAlign(et,tt);return{xAlign:tt.xAlign||_e.xAlign||determineXAlign(et,_e,tt,st),yAlign:st}}function alignX(et,_e){let{x:tt,width:st}=et;return _e==="right"?tt-=st:_e==="center"&&(tt-=st/2),tt}function alignY(et,_e,tt){let{y:st,height:rt}=et;return _e==="top"?st+=tt:_e==="bottom"?st-=rt+tt:st-=rt/2,st}function getBackgroundPoint(et,_e,tt,st){const{caretSize:rt,caretPadding:nt,cornerRadius:it}=et,{xAlign:ot,yAlign:at}=tt,lt=rt+nt,{topLeft:ct,topRight:ut,bottomLeft:dt,bottomRight:ht}=toTRBLCorners(it);let pt=alignX(_e,ot);const mt=alignY(_e,at,lt);return at==="center"?ot==="left"?pt+=lt:ot==="right"&&(pt-=lt):ot==="left"?pt-=Math.max(ct,dt)+rt:ot==="right"&&(pt+=Math.max(ut,ht)+rt),{x:_limitValue(pt,0,st.width-_e.width),y:_limitValue(mt,0,st.height-_e.height)}}function getAlignedX(et,_e,tt){const st=toPadding(tt.padding);return _e==="center"?et.x+et.width/2:_e==="right"?et.x+et.width-st.right:et.x+st.left}function getBeforeAfterBodyLines(et){return pushOrConcat([],splitNewlines(et))}function createTooltipContext(et,_e,tt){return createContext(et,{tooltip:_e,tooltipItems:tt,type:"tooltip"})}function overrideCallbacks(et,_e){const tt=_e&&_e.dataset&&_e.dataset.tooltip&&_e.dataset.tooltip.callbacks;return tt?et.override(tt):et}const defaultCallbacks={beforeTitle:noop,title(et){if(et.length>0){const _e=et[0],tt=_e.chart.data.labels,st=tt?tt.length:0;if(this&&this.options&&this.options.mode==="dataset")return _e.dataset.label||"";if(_e.label)return _e.label;if(st>0&&_e.dataIndex<st)return tt[_e.dataIndex]}return""},afterTitle:noop,beforeBody:noop,beforeLabel:noop,label(et){if(this&&this.options&&this.options.mode==="dataset")return et.label+": "+et.formattedValue||et.formattedValue;let _e=et.dataset.label||"";_e&&(_e+=": ");const tt=et.formattedValue;return isNullOrUndef(tt)||(_e+=tt),_e},labelColor(et){const tt=et.chart.getDatasetMeta(et.datasetIndex).controller.getStyle(et.dataIndex);return{borderColor:tt.borderColor,backgroundColor:tt.backgroundColor,borderWidth:tt.borderWidth,borderDash:tt.borderDash,borderDashOffset:tt.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(et){const tt=et.chart.getDatasetMeta(et.datasetIndex).controller.getStyle(et.dataIndex);return{pointStyle:tt.pointStyle,rotation:tt.rotation}},afterLabel:noop,afterBody:noop,beforeFooter:noop,footer:noop,afterFooter:noop};function invokeCallbackWithFallback(et,_e,tt,st){const rt=et[_e].call(tt,st);return typeof rt>"u"?defaultCallbacks[_e].call(tt,st):rt}class Tooltip extends Element{constructor(_e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=_e.chart,this.options=_e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(_e){this.options=_e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const _e=this._cachedAnimations;if(_e)return _e;const tt=this.chart,st=this.options.setContext(this.getContext()),rt=st.enabled&&tt.options.animation&&st.animations,nt=new Animations(this.chart,rt);return rt._cacheable&&(this._cachedAnimations=Object.freeze(nt)),nt}getContext(){return this.$context||(this.$context=createTooltipContext(this.chart.getContext(),this,this._tooltipItems))}getTitle(_e,tt){const{callbacks:st}=tt,rt=invokeCallbackWithFallback(st,"beforeTitle",this,_e),nt=invokeCallbackWithFallback(st,"title",this,_e),it=invokeCallbackWithFallback(st,"afterTitle",this,_e);let ot=[];return ot=pushOrConcat(ot,splitNewlines(rt)),ot=pushOrConcat(ot,splitNewlines(nt)),ot=pushOrConcat(ot,splitNewlines(it)),ot}getBeforeBody(_e,tt){return getBeforeAfterBodyLines(invokeCallbackWithFallback(tt.callbacks,"beforeBody",this,_e))}getBody(_e,tt){const{callbacks:st}=tt,rt=[];return each(_e,nt=>{const it={before:[],lines:[],after:[]},ot=overrideCallbacks(st,nt);pushOrConcat(it.before,splitNewlines(invokeCallbackWithFallback(ot,"beforeLabel",this,nt))),pushOrConcat(it.lines,invokeCallbackWithFallback(ot,"label",this,nt)),pushOrConcat(it.after,splitNewlines(invokeCallbackWithFallback(ot,"afterLabel",this,nt))),rt.push(it)}),rt}getAfterBody(_e,tt){return getBeforeAfterBodyLines(invokeCallbackWithFallback(tt.callbacks,"afterBody",this,_e))}getFooter(_e,tt){const{callbacks:st}=tt,rt=invokeCallbackWithFallback(st,"beforeFooter",this,_e),nt=invokeCallbackWithFallback(st,"footer",this,_e),it=invokeCallbackWithFallback(st,"afterFooter",this,_e);let ot=[];return ot=pushOrConcat(ot,splitNewlines(rt)),ot=pushOrConcat(ot,splitNewlines(nt)),ot=pushOrConcat(ot,splitNewlines(it)),ot}_createItems(_e){const tt=this._active,st=this.chart.data,rt=[],nt=[],it=[];let ot=[],at,lt;for(at=0,lt=tt.length;at<lt;++at)ot.push(createTooltipItem(this.chart,tt[at]));return _e.filter&&(ot=ot.filter((ct,ut,dt)=>_e.filter(ct,ut,dt,st))),_e.itemSort&&(ot=ot.sort((ct,ut)=>_e.itemSort(ct,ut,st))),each(ot,ct=>{const ut=overrideCallbacks(_e.callbacks,ct);rt.push(invokeCallbackWithFallback(ut,"labelColor",this,ct)),nt.push(invokeCallbackWithFallback(ut,"labelPointStyle",this,ct)),it.push(invokeCallbackWithFallback(ut,"labelTextColor",this,ct))}),this.labelColors=rt,this.labelPointStyles=nt,this.labelTextColors=it,this.dataPoints=ot,ot}update(_e,tt){const st=this.options.setContext(this.getContext()),rt=this._active;let nt,it=[];if(!rt.length)this.opacity!==0&&(nt={opacity:0});else{const ot=positioners[st.position].call(this,rt,this._eventPosition);it=this._createItems(st),this.title=this.getTitle(it,st),this.beforeBody=this.getBeforeBody(it,st),this.body=this.getBody(it,st),this.afterBody=this.getAfterBody(it,st),this.footer=this.getFooter(it,st);const at=this._size=getTooltipSize(this,st),lt=Object.assign({},ot,at),ct=determineAlignment(this.chart,st,lt),ut=getBackgroundPoint(st,lt,ct,this.chart);this.xAlign=ct.xAlign,this.yAlign=ct.yAlign,nt={opacity:1,x:ut.x,y:ut.y,width:at.width,height:at.height,caretX:ot.x,caretY:ot.y}}this._tooltipItems=it,this.$context=void 0,nt&&this._resolveAnimations().update(this,nt),_e&&st.external&&st.external.call(this,{chart:this.chart,tooltip:this,replay:tt})}drawCaret(_e,tt,st,rt){const nt=this.getCaretPosition(_e,st,rt);tt.lineTo(nt.x1,nt.y1),tt.lineTo(nt.x2,nt.y2),tt.lineTo(nt.x3,nt.y3)}getCaretPosition(_e,tt,st){const{xAlign:rt,yAlign:nt}=this,{caretSize:it,cornerRadius:ot}=st,{topLeft:at,topRight:lt,bottomLeft:ct,bottomRight:ut}=toTRBLCorners(ot),{x:dt,y:ht}=_e,{width:pt,height:mt}=tt;let gt,ft,xt,yt,bt,jt;return nt==="center"?(bt=ht+mt/2,rt==="left"?(gt=dt,ft=gt-it,yt=bt+it,jt=bt-it):(gt=dt+pt,ft=gt+it,yt=bt-it,jt=bt+it),xt=gt):(rt==="left"?ft=dt+Math.max(at,ct)+it:rt==="right"?ft=dt+pt-Math.max(lt,ut)-it:ft=this.caretX,nt==="top"?(yt=ht,bt=yt-it,gt=ft-it,xt=ft+it):(yt=ht+mt,bt=yt+it,gt=ft+it,xt=ft-it),jt=yt),{x1:gt,x2:ft,x3:xt,y1:yt,y2:bt,y3:jt}}drawTitle(_e,tt,st){const rt=this.title,nt=rt.length;let it,ot,at;if(nt){const lt=getRtlAdapter(st.rtl,this.x,this.width);for(_e.x=getAlignedX(this,st.titleAlign,st),tt.textAlign=lt.textAlign(st.titleAlign),tt.textBaseline="middle",it=toFont(st.titleFont),ot=st.titleSpacing,tt.fillStyle=st.titleColor,tt.font=it.string,at=0;at<nt;++at)tt.fillText(rt[at],lt.x(_e.x),_e.y+it.lineHeight/2),_e.y+=it.lineHeight+ot,at+1===nt&&(_e.y+=st.titleMarginBottom-ot)}}_drawColorBox(_e,tt,st,rt,nt){const it=this.labelColors[st],ot=this.labelPointStyles[st],{boxHeight:at,boxWidth:lt}=nt,ct=toFont(nt.bodyFont),ut=getAlignedX(this,"left",nt),dt=rt.x(ut),ht=at<ct.lineHeight?(ct.lineHeight-at)/2:0,pt=tt.y+ht;if(nt.usePointStyle){const mt={radius:Math.min(lt,at)/2,pointStyle:ot.pointStyle,rotation:ot.rotation,borderWidth:1},gt=rt.leftForLtr(dt,lt)+lt/2,ft=pt+at/2;_e.strokeStyle=nt.multiKeyBackground,_e.fillStyle=nt.multiKeyBackground,drawPoint(_e,mt,gt,ft),_e.strokeStyle=it.borderColor,_e.fillStyle=it.backgroundColor,drawPoint(_e,mt,gt,ft)}else{_e.lineWidth=isObject$1(it.borderWidth)?Math.max(...Object.values(it.borderWidth)):it.borderWidth||1,_e.strokeStyle=it.borderColor,_e.setLineDash(it.borderDash||[]),_e.lineDashOffset=it.borderDashOffset||0;const mt=rt.leftForLtr(dt,lt),gt=rt.leftForLtr(rt.xPlus(dt,1),lt-2),ft=toTRBLCorners(it.borderRadius);Object.values(ft).some(xt=>xt!==0)?(_e.beginPath(),_e.fillStyle=nt.multiKeyBackground,addRoundedRectPath(_e,{x:mt,y:pt,w:lt,h:at,radius:ft}),_e.fill(),_e.stroke(),_e.fillStyle=it.backgroundColor,_e.beginPath(),addRoundedRectPath(_e,{x:gt,y:pt+1,w:lt-2,h:at-2,radius:ft}),_e.fill()):(_e.fillStyle=nt.multiKeyBackground,_e.fillRect(mt,pt,lt,at),_e.strokeRect(mt,pt,lt,at),_e.fillStyle=it.backgroundColor,_e.fillRect(gt,pt+1,lt-2,at-2))}_e.fillStyle=this.labelTextColors[st]}drawBody(_e,tt,st){const{body:rt}=this,{bodySpacing:nt,bodyAlign:it,displayColors:ot,boxHeight:at,boxWidth:lt,boxPadding:ct}=st,ut=toFont(st.bodyFont);let dt=ut.lineHeight,ht=0;const pt=getRtlAdapter(st.rtl,this.x,this.width),mt=function(vt){tt.fillText(vt,pt.x(_e.x+ht),_e.y+dt/2),_e.y+=dt+nt},gt=pt.textAlign(it);let ft,xt,yt,bt,jt,Ct,St;for(tt.textAlign=it,tt.textBaseline="middle",tt.font=ut.string,_e.x=getAlignedX(this,gt,st),tt.fillStyle=st.bodyColor,each(this.beforeBody,mt),ht=ot&&gt!=="right"?it==="center"?lt/2+ct:lt+2+ct:0,bt=0,Ct=rt.length;bt<Ct;++bt){for(ft=rt[bt],xt=this.labelTextColors[bt],tt.fillStyle=xt,each(ft.before,mt),yt=ft.lines,ot&&yt.length&&(this._drawColorBox(tt,_e,bt,pt,st),dt=Math.max(ut.lineHeight,at)),jt=0,St=yt.length;jt<St;++jt)mt(yt[jt]),dt=ut.lineHeight;each(ft.after,mt)}ht=0,dt=ut.lineHeight,each(this.afterBody,mt),_e.y-=nt}drawFooter(_e,tt,st){const rt=this.footer,nt=rt.length;let it,ot;if(nt){const at=getRtlAdapter(st.rtl,this.x,this.width);for(_e.x=getAlignedX(this,st.footerAlign,st),_e.y+=st.footerMarginTop,tt.textAlign=at.textAlign(st.footerAlign),tt.textBaseline="middle",it=toFont(st.footerFont),tt.fillStyle=st.footerColor,tt.font=it.string,ot=0;ot<nt;++ot)tt.fillText(rt[ot],at.x(_e.x),_e.y+it.lineHeight/2),_e.y+=it.lineHeight+st.footerSpacing}}drawBackground(_e,tt,st,rt){const{xAlign:nt,yAlign:it}=this,{x:ot,y:at}=_e,{width:lt,height:ct}=st,{topLeft:ut,topRight:dt,bottomLeft:ht,bottomRight:pt}=toTRBLCorners(rt.cornerRadius);tt.fillStyle=rt.backgroundColor,tt.strokeStyle=rt.borderColor,tt.lineWidth=rt.borderWidth,tt.beginPath(),tt.moveTo(ot+ut,at),it==="top"&&this.drawCaret(_e,tt,st,rt),tt.lineTo(ot+lt-dt,at),tt.quadraticCurveTo(ot+lt,at,ot+lt,at+dt),it==="center"&&nt==="right"&&this.drawCaret(_e,tt,st,rt),tt.lineTo(ot+lt,at+ct-pt),tt.quadraticCurveTo(ot+lt,at+ct,ot+lt-pt,at+ct),it==="bottom"&&this.drawCaret(_e,tt,st,rt),tt.lineTo(ot+ht,at+ct),tt.quadraticCurveTo(ot,at+ct,ot,at+ct-ht),it==="center"&&nt==="left"&&this.drawCaret(_e,tt,st,rt),tt.lineTo(ot,at+ut),tt.quadraticCurveTo(ot,at,ot+ut,at),tt.closePath(),tt.fill(),rt.borderWidth>0&&tt.stroke()}_updateAnimationTarget(_e){const tt=this.chart,st=this.$animations,rt=st&&st.x,nt=st&&st.y;if(rt||nt){const it=positioners[_e.position].call(this,this._active,this._eventPosition);if(!it)return;const ot=this._size=getTooltipSize(this,_e),at=Object.assign({},it,this._size),lt=determineAlignment(tt,_e,at),ct=getBackgroundPoint(_e,at,lt,tt);(rt._to!==ct.x||nt._to!==ct.y)&&(this.xAlign=lt.xAlign,this.yAlign=lt.yAlign,this.width=ot.width,this.height=ot.height,this.caretX=it.x,this.caretY=it.y,this._resolveAnimations().update(this,ct))}}_willRender(){return!!this.opacity}draw(_e){const tt=this.options.setContext(this.getContext());let st=this.opacity;if(!st)return;this._updateAnimationTarget(tt);const rt={width:this.width,height:this.height},nt={x:this.x,y:this.y};st=Math.abs(st)<.001?0:st;const it=toPadding(tt.padding),ot=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;tt.enabled&&ot&&(_e.save(),_e.globalAlpha=st,this.drawBackground(nt,_e,rt,tt),overrideTextDirection(_e,tt.textDirection),nt.y+=it.top,this.drawTitle(nt,_e,tt),this.drawBody(nt,_e,tt),this.drawFooter(nt,_e,tt),restoreTextDirection(_e,tt.textDirection),_e.restore())}getActiveElements(){return this._active||[]}setActiveElements(_e,tt){const st=this._active,rt=_e.map(({datasetIndex:ot,index:at})=>{const lt=this.chart.getDatasetMeta(ot);if(!lt)throw new Error("Cannot find a dataset at index "+ot);return{datasetIndex:ot,element:lt.data[at],index:at}}),nt=!_elementsEqual(st,rt),it=this._positionChanged(rt,tt);(nt||it)&&(this._active=rt,this._eventPosition=tt,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(_e,tt,st=!0){if(tt&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const rt=this.options,nt=this._active||[],it=this._getActiveElements(_e,nt,tt,st),ot=this._positionChanged(it,_e),at=tt||!_elementsEqual(it,nt)||ot;return at&&(this._active=it,(rt.enabled||rt.external)&&(this._eventPosition={x:_e.x,y:_e.y},this.update(!0,tt))),at}_getActiveElements(_e,tt,st,rt){const nt=this.options;if(_e.type==="mouseout")return[];if(!rt)return tt.filter(ot=>this.chart.data.datasets[ot.datasetIndex]&&this.chart.getDatasetMeta(ot.datasetIndex).controller.getParsed(ot.index)!==void 0);const it=this.chart.getElementsAtEventForMode(_e,nt.mode,nt,st);return nt.reverse&&it.reverse(),it}_positionChanged(_e,tt){const{caretX:st,caretY:rt,options:nt}=this,it=positioners[nt.position].call(this,_e,tt);return it!==!1&&(st!==it.x||rt!==it.y)}}rs(Tooltip,"positioners",positioners);var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners,afterInit(et,_e,tt){tt&&(et.tooltip=new Tooltip({chart:et,options:tt}))},beforeUpdate(et,_e,tt){et.tooltip&&et.tooltip.initialize(tt)},reset(et,_e,tt){et.tooltip&&et.tooltip.initialize(tt)},afterDraw(et){const _e=et.tooltip;if(_e&&_e._willRender()){const tt={tooltip:_e};if(et.notifyPlugins("beforeTooltipDraw",{...tt,cancelable:!0})===!1)return;_e.draw(et.ctx),et.notifyPlugins("afterTooltipDraw",tt)}},afterEvent(et,_e){if(et.tooltip){const tt=_e.replay;et.tooltip.handleEvent(_e.event,tt,_e.inChartArea)&&(_e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(et,_e)=>_e.bodyFont.size,boxWidth:(et,_e)=>_e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:defaultCallbacks},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:et=>et!=="filter"&&et!=="itemSort"&&et!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const addIfString=(et,_e,tt,st)=>(typeof _e=="string"?(tt=et.push(_e)-1,st.unshift({index:tt,label:_e})):isNaN(_e)&&(tt=null),tt);function findOrAddLabel(et,_e,tt,st){const rt=et.indexOf(_e);if(rt===-1)return addIfString(et,_e,tt,st);const nt=et.lastIndexOf(_e);return rt!==nt?tt:rt}const validIndex=(et,_e)=>et===null?null:_limitValue(Math.round(et),0,_e);function _getLabelForValue(et){const _e=this.getLabels();return et>=0&&et<_e.length?_e[et]:et}class CategoryScale extends Scale{constructor(_e){super(_e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(_e){const tt=this._addedLabels;if(tt.length){const st=this.getLabels();for(const{index:rt,label:nt}of tt)st[rt]===nt&&st.splice(rt,1);this._addedLabels=[]}super.init(_e)}parse(_e,tt){if(isNullOrUndef(_e))return null;const st=this.getLabels();return tt=isFinite(tt)&&st[tt]===_e?tt:findOrAddLabel(st,_e,valueOrDefault(tt,_e),this._addedLabels),validIndex(tt,st.length-1)}determineDataLimits(){const{minDefined:_e,maxDefined:tt}=this.getUserBounds();let{min:st,max:rt}=this.getMinMax(!0);this.options.bounds==="ticks"&&(_e||(st=0),tt||(rt=this.getLabels().length-1)),this.min=st,this.max=rt}buildTicks(){const _e=this.min,tt=this.max,st=this.options.offset,rt=[];let nt=this.getLabels();nt=_e===0&&tt===nt.length-1?nt:nt.slice(_e,tt+1),this._valueRange=Math.max(nt.length-(st?0:1),1),this._startValue=this.min-(st?.5:0);for(let it=_e;it<=tt;it++)rt.push({value:it});return rt}getLabelForValue(_e){return _getLabelForValue.call(this,_e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(_e){return typeof _e!="number"&&(_e=this.parse(_e)),_e===null?NaN:this.getPixelForDecimal((_e-this._startValue)/this._valueRange)}getPixelForTick(_e){const tt=this.ticks;return _e<0||_e>tt.length-1?null:this.getPixelForValue(tt[_e].value)}getValueForPixel(_e){return Math.round(this._startValue+this.getDecimalForPixel(_e)*this._valueRange)}getBasePixel(){return this.bottom}}rs(CategoryScale,"id","category"),rs(CategoryScale,"defaults",{ticks:{callback:_getLabelForValue}});function generateTicks$1(et,_e){const tt=[],{bounds:rt,step:nt,min:it,max:ot,precision:at,count:lt,maxTicks:ct,maxDigits:ut,includeBounds:dt}=et,ht=nt||1,pt=ct-1,{min:mt,max:gt}=_e,ft=!isNullOrUndef(it),xt=!isNullOrUndef(ot),yt=!isNullOrUndef(lt),bt=(gt-mt)/(ut+1);let jt=niceNum((gt-mt)/pt/ht)*ht,Ct,St,vt,Et;if(jt<1e-14&&!ft&&!xt)return[{value:mt},{value:gt}];Et=Math.ceil(gt/jt)-Math.floor(mt/jt),Et>pt&&(jt=niceNum(Et*jt/pt/ht)*ht),isNullOrUndef(at)||(Ct=Math.pow(10,at),jt=Math.ceil(jt*Ct)/Ct),rt==="ticks"?(St=Math.floor(mt/jt)*jt,vt=Math.ceil(gt/jt)*jt):(St=mt,vt=gt),ft&&xt&&nt&&almostWhole((ot-it)/nt,jt/1e3)?(Et=Math.round(Math.min((ot-it)/jt,ct)),jt=(ot-it)/Et,St=it,vt=ot):yt?(St=ft?it:St,vt=xt?ot:vt,Et=lt-1,jt=(vt-St)/Et):(Et=(vt-St)/jt,almostEquals(Et,Math.round(Et),jt/1e3)?Et=Math.round(Et):Et=Math.ceil(Et));const Rt=Math.max(_decimalPlaces(jt),_decimalPlaces(St));Ct=Math.pow(10,isNullOrUndef(at)?Rt:at),St=Math.round(St*Ct)/Ct,vt=Math.round(vt*Ct)/Ct;let $t=0;for(ft&&(dt&&St!==it?(tt.push({value:it}),St<it&&$t++,almostEquals(Math.round((St+$t*jt)*Ct)/Ct,it,relativeLabelSize(it,bt,et))&&$t++):St<it&&$t++);$t<Et;++$t){const At=Math.round((St+$t*jt)*Ct)/Ct;if(xt&&At>ot)break;tt.push({value:At})}return xt&&dt&&vt!==ot?tt.length&&almostEquals(tt[tt.length-1].value,ot,relativeLabelSize(ot,bt,et))?tt[tt.length-1].value=ot:tt.push({value:ot}):(!xt||vt===ot)&&tt.push({value:vt}),tt}function relativeLabelSize(et,_e,{horizontal:tt,minRotation:st}){const rt=toRadians(st),nt=(tt?Math.sin(rt):Math.cos(rt))||.001,it=.75*_e*(""+et).length;return Math.min(_e/nt,it)}class LinearScaleBase extends Scale{constructor(_e){super(_e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(_e,tt){return isNullOrUndef(_e)||(typeof _e=="number"||_e instanceof Number)&&!isFinite(+_e)?null:+_e}handleTickRangeOptions(){const{beginAtZero:_e}=this.options,{minDefined:tt,maxDefined:st}=this.getUserBounds();let{min:rt,max:nt}=this;const it=at=>rt=tt?rt:at,ot=at=>nt=st?nt:at;if(_e){const at=sign(rt),lt=sign(nt);at<0&&lt<0?ot(0):at>0&&lt>0&&it(0)}if(rt===nt){let at=nt===0?1:Math.abs(nt*.05);ot(nt+at),_e||it(rt-at)}this.min=rt,this.max=nt}getTickLimit(){const _e=this.options.ticks;let{maxTicksLimit:tt,stepSize:st}=_e,rt;return st?(rt=Math.ceil(this.max/st)-Math.floor(this.min/st)+1,rt>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${st} would result generating up to ${rt} ticks. Limiting to 1000.`),rt=1e3)):(rt=this.computeTickLimit(),tt=tt||11),tt&&(rt=Math.min(tt,rt)),rt}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const _e=this.options,tt=_e.ticks;let st=this.getTickLimit();st=Math.max(2,st);const rt={maxTicks:st,bounds:_e.bounds,min:_e.min,max:_e.max,precision:tt.precision,step:tt.stepSize,count:tt.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:tt.minRotation||0,includeBounds:tt.includeBounds!==!1},nt=this._range||this,it=generateTicks$1(rt,nt);return _e.bounds==="ticks"&&_setMinAndMaxByKey(it,this,"value"),_e.reverse?(it.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),it}configure(){const _e=this.ticks;let tt=this.min,st=this.max;if(super.configure(),this.options.offset&&_e.length){const rt=(st-tt)/Math.max(_e.length-1,1)/2;tt-=rt,st+=rt}this._startValue=tt,this._endValue=st,this._valueRange=st-tt}getLabelForValue(_e){return formatNumber(_e,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{determineDataLimits(){const{min:_e,max:tt}=this.getMinMax(!0);this.min=isNumberFinite(_e)?_e:0,this.max=isNumberFinite(tt)?tt:1,this.handleTickRangeOptions()}computeTickLimit(){const _e=this.isHorizontal(),tt=_e?this.width:this.height,st=toRadians(this.options.ticks.minRotation),rt=(_e?Math.sin(st):Math.cos(st))||.001,nt=this._resolveTickFontOptions(0);return Math.ceil(tt/Math.min(40,nt.lineHeight/rt))}getPixelForValue(_e){return _e===null?NaN:this.getPixelForDecimal((_e-this._startValue)/this._valueRange)}getValueForPixel(_e){return this._startValue+this.getDecimalForPixel(_e)*this._valueRange}}rs(LinearScale,"id","linear"),rs(LinearScale,"defaults",{ticks:{callback:Ticks.formatters.numeric}});const INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(et,_e){return et-_e}function parse(et,_e){if(isNullOrUndef(_e))return null;const tt=et._adapter,{parser:st,round:rt,isoWeekday:nt}=et._parseOpts;let it=_e;return typeof st=="function"&&(it=st(it)),isNumberFinite(it)||(it=typeof st=="string"?tt.parse(it,st):tt.parse(it)),it===null?null:(rt&&(it=rt==="week"&&(isNumber(nt)||nt===!0)?tt.startOf(it,"isoWeek",nt):tt.startOf(it,rt)),+it)}function determineUnitForAutoTicks(et,_e,tt,st){const rt=UNITS.length;for(let nt=UNITS.indexOf(et);nt<rt-1;++nt){const it=INTERVALS[UNITS[nt]],ot=it.steps?it.steps:Number.MAX_SAFE_INTEGER;if(it.common&&Math.ceil((tt-_e)/(ot*it.size))<=st)return UNITS[nt]}return UNITS[rt-1]}function determineUnitForFormatting(et,_e,tt,st,rt){for(let nt=UNITS.length-1;nt>=UNITS.indexOf(tt);nt--){const it=UNITS[nt];if(INTERVALS[it].common&&et._adapter.diff(rt,st,it)>=_e-1)return it}return UNITS[tt?UNITS.indexOf(tt):0]}function determineMajorUnit(et){for(let _e=UNITS.indexOf(et)+1,tt=UNITS.length;_e<tt;++_e)if(INTERVALS[UNITS[_e]].common)return UNITS[_e]}function addTick(et,_e,tt){if(!tt)et[_e]=!0;else if(tt.length){const{lo:st,hi:rt}=_lookup(tt,_e),nt=tt[st]>=_e?tt[st]:tt[rt];et[nt]=!0}}function setMajorTicks(et,_e,tt,st){const rt=et._adapter,nt=+rt.startOf(_e[0].value,st),it=_e[_e.length-1].value;let ot,at;for(ot=nt;ot<=it;ot=+rt.add(ot,1,st))at=tt[ot],at>=0&&(_e[at].major=!0);return _e}function ticksFromTimestamps(et,_e,tt){const st=[],rt={},nt=_e.length;let it,ot;for(it=0;it<nt;++it)ot=_e[it],rt[ot]=it,st.push({value:ot,major:!1});return nt===0||!tt?st:setMajorTicks(et,st,rt,tt)}class TimeScale extends Scale{constructor(_e){super(_e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(_e,tt={}){const st=_e.time||(_e.time={}),rt=this._adapter=new adapters._date(_e.adapters.date);rt.init(tt),mergeIf(st.displayFormats,rt.formats()),this._parseOpts={parser:st.parser,round:st.round,isoWeekday:st.isoWeekday},super.init(_e),this._normalized=tt.normalized}parse(_e,tt){return _e===void 0?null:parse(this,_e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const _e=this.options,tt=this._adapter,st=_e.time.unit||"day";let{min:rt,max:nt,minDefined:it,maxDefined:ot}=this.getUserBounds();function at(lt){!it&&!isNaN(lt.min)&&(rt=Math.min(rt,lt.min)),!ot&&!isNaN(lt.max)&&(nt=Math.max(nt,lt.max))}(!it||!ot)&&(at(this._getLabelBounds()),(_e.bounds!=="ticks"||_e.ticks.source!=="labels")&&at(this.getMinMax(!1))),rt=isNumberFinite(rt)&&!isNaN(rt)?rt:+tt.startOf(Date.now(),st),nt=isNumberFinite(nt)&&!isNaN(nt)?nt:+tt.endOf(Date.now(),st)+1,this.min=Math.min(rt,nt-1),this.max=Math.max(rt+1,nt)}_getLabelBounds(){const _e=this.getLabelTimestamps();let tt=Number.POSITIVE_INFINITY,st=Number.NEGATIVE_INFINITY;return _e.length&&(tt=_e[0],st=_e[_e.length-1]),{min:tt,max:st}}buildTicks(){const _e=this.options,tt=_e.time,st=_e.ticks,rt=st.source==="labels"?this.getLabelTimestamps():this._generate();_e.bounds==="ticks"&&rt.length&&(this.min=this._userMin||rt[0],this.max=this._userMax||rt[rt.length-1]);const nt=this.min,it=this.max,ot=_filterBetween(rt,nt,it);return this._unit=tt.unit||(st.autoSkip?determineUnitForAutoTicks(tt.minUnit,this.min,this.max,this._getLabelCapacity(nt)):determineUnitForFormatting(this,ot.length,tt.minUnit,this.min,this.max)),this._majorUnit=!st.major.enabled||this._unit==="year"?void 0:determineMajorUnit(this._unit),this.initOffsets(rt),_e.reverse&&ot.reverse(),ticksFromTimestamps(this,ot,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(_e=>+_e.value))}initOffsets(_e=[]){let tt=0,st=0,rt,nt;this.options.offset&&_e.length&&(rt=this.getDecimalForValue(_e[0]),_e.length===1?tt=1-rt:tt=(this.getDecimalForValue(_e[1])-rt)/2,nt=this.getDecimalForValue(_e[_e.length-1]),_e.length===1?st=nt:st=(nt-this.getDecimalForValue(_e[_e.length-2]))/2);const it=_e.length<3?.5:.25;tt=_limitValue(tt,0,it),st=_limitValue(st,0,it),this._offsets={start:tt,end:st,factor:1/(tt+1+st)}}_generate(){const _e=this._adapter,tt=this.min,st=this.max,rt=this.options,nt=rt.time,it=nt.unit||determineUnitForAutoTicks(nt.minUnit,tt,st,this._getLabelCapacity(tt)),ot=valueOrDefault(rt.ticks.stepSize,1),at=it==="week"?nt.isoWeekday:!1,lt=isNumber(at)||at===!0,ct={};let ut=tt,dt,ht;if(lt&&(ut=+_e.startOf(ut,"isoWeek",at)),ut=+_e.startOf(ut,lt?"day":it),_e.diff(st,tt,it)>1e5*ot)throw new Error(tt+" and "+st+" are too far apart with stepSize of "+ot+" "+it);const pt=rt.ticks.source==="data"&&this.getDataTimestamps();for(dt=ut,ht=0;dt<st;dt=+_e.add(dt,ot,it),ht++)addTick(ct,dt,pt);return(dt===st||rt.bounds==="ticks"||ht===1)&&addTick(ct,dt,pt),Object.keys(ct).sort(sorter).map(mt=>+mt)}getLabelForValue(_e){const tt=this._adapter,st=this.options.time;return st.tooltipFormat?tt.format(_e,st.tooltipFormat):tt.format(_e,st.displayFormats.datetime)}format(_e,tt){const rt=this.options.time.displayFormats,nt=this._unit,it=tt||rt[nt];return this._adapter.format(_e,it)}_tickFormatFunction(_e,tt,st,rt){const nt=this.options,it=nt.ticks.callback;if(it)return callback(it,[_e,tt,st],this);const ot=nt.time.displayFormats,at=this._unit,lt=this._majorUnit,ct=at&&ot[at],ut=lt&&ot[lt],dt=st[tt],ht=lt&&ut&&dt&&dt.major;return this._adapter.format(_e,rt||(ht?ut:ct))}generateTickLabels(_e){let tt,st,rt;for(tt=0,st=_e.length;tt<st;++tt)rt=_e[tt],rt.label=this._tickFormatFunction(rt.value,tt,_e)}getDecimalForValue(_e){return _e===null?NaN:(_e-this.min)/(this.max-this.min)}getPixelForValue(_e){const tt=this._offsets,st=this.getDecimalForValue(_e);return this.getPixelForDecimal((tt.start+st)*tt.factor)}getValueForPixel(_e){const tt=this._offsets,st=this.getDecimalForPixel(_e)/tt.factor-tt.end;return this.min+st*(this.max-this.min)}_getLabelSize(_e){const tt=this.options.ticks,st=this.ctx.measureText(_e).width,rt=toRadians(this.isHorizontal()?tt.maxRotation:tt.minRotation),nt=Math.cos(rt),it=Math.sin(rt),ot=this._resolveTickFontOptions(0).size;return{w:st*nt+ot*it,h:st*it+ot*nt}}_getLabelCapacity(_e){const tt=this.options.time,st=tt.displayFormats,rt=st[tt.unit]||st.millisecond,nt=this._tickFormatFunction(_e,0,ticksFromTimestamps(this,[_e],this._majorUnit),rt),it=this._getLabelSize(nt),ot=Math.floor(this.isHorizontal()?this.width/it.w:this.height/it.h)-1;return ot>0?ot:1}getDataTimestamps(){let _e=this._cache.data||[],tt,st;if(_e.length)return _e;const rt=this.getMatchingVisibleMetas();if(this._normalized&&rt.length)return this._cache.data=rt[0].controller.getAllParsedValues(this);for(tt=0,st=rt.length;tt<st;++tt)_e=_e.concat(rt[tt].controller.getAllParsedValues(this));return this._cache.data=this.normalize(_e)}getLabelTimestamps(){const _e=this._cache.labels||[];let tt,st;if(_e.length)return _e;const rt=this.getLabels();for(tt=0,st=rt.length;tt<st;++tt)_e.push(parse(this,rt[tt]));return this._cache.labels=this._normalized?_e:this.normalize(_e)}normalize(_e){return _arrayUnique(_e.sort(sorter))}}rs(TimeScale,"id","time"),rs(TimeScale,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function interpolate(et,_e,tt){let st=0,rt=et.length-1,nt,it,ot,at;tt?(_e>=et[st].pos&&_e<=et[rt].pos&&({lo:st,hi:rt}=_lookupByKey(et,"pos",_e)),{pos:nt,time:ot}=et[st],{pos:it,time:at}=et[rt]):(_e>=et[st].time&&_e<=et[rt].time&&({lo:st,hi:rt}=_lookupByKey(et,"time",_e)),{time:nt,pos:ot}=et[st],{time:it,pos:at}=et[rt]);const lt=it-nt;return lt?ot+(at-ot)*(_e-nt)/lt:ot}class TimeSeriesScale extends TimeScale{constructor(_e){super(_e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const _e=this._getTimestampsForTable(),tt=this._table=this.buildLookupTable(_e);this._minPos=interpolate(tt,this.min),this._tableRange=interpolate(tt,this.max)-this._minPos,super.initOffsets(_e)}buildLookupTable(_e){const{min:tt,max:st}=this,rt=[],nt=[];let it,ot,at,lt,ct;for(it=0,ot=_e.length;it<ot;++it)lt=_e[it],lt>=tt&&lt<=st&&rt.push(lt);if(rt.length<2)return[{time:tt,pos:0},{time:st,pos:1}];for(it=0,ot=rt.length;it<ot;++it)ct=rt[it+1],at=rt[it-1],lt=rt[it],Math.round((ct+at)/2)!==lt&&nt.push({time:lt,pos:it/(ot-1)});return nt}_generate(){const _e=this.min,tt=this.max;let st=super.getDataTimestamps();return(!st.includes(_e)||!st.length)&&st.splice(0,0,_e),(!st.includes(tt)||st.length===1)&&st.push(tt),st.sort((rt,nt)=>rt-nt)}_getTimestampsForTable(){let _e=this._cache.all||[];if(_e.length)return _e;const tt=this.getDataTimestamps(),st=this.getLabelTimestamps();return tt.length&&st.length?_e=this.normalize(tt.concat(st)):_e=tt.length?tt:st,_e=this._cache.all=_e,_e}getDecimalForValue(_e){return(interpolate(this._table,_e)-this._minPos)/this._tableRange}getValueForPixel(_e){const tt=this._offsets,st=this.getDecimalForPixel(_e)/tt.factor-tt.end;return interpolate(this._table,st*this._tableRange+this._minPos,!0)}}rs(TimeSeriesScale,"id","timeseries"),rs(TimeSeriesScale,"defaults",TimeScale.defaults);const defaultDatasetIdKey="label";function reforwardRef(et,_e){typeof et=="function"?et(_e):et&&(et.current=_e)}function setOptions(et,_e){const tt=et.options;tt&&_e&&Object.assign(tt,_e)}function setLabels(et,_e){et.labels=_e}function setDatasets(et,_e){let tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:defaultDatasetIdKey;const st=[];et.datasets=_e.map(rt=>{const nt=et.datasets.find(it=>it[tt]===rt[tt]);return!nt||!rt.data||st.includes(nt)?{...rt}:(st.push(nt),Object.assign(nt,rt),nt)})}function cloneData(et){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:defaultDatasetIdKey;const tt={labels:[],datasets:[]};return setLabels(tt,et.labels),setDatasets(tt,et.datasets,_e),tt}function ChartComponent(et,_e){const{height:tt=150,width:st=300,redraw:rt=!1,datasetIdKey:nt,type:it,data:ot,options:at,plugins:lt=[],fallbackContent:ct,updateMode:ut,...dt}=et,ht=reactExports.useRef(null),pt=reactExports.useRef(null),mt=()=>{ht.current&&(pt.current=new Chart$1(ht.current,{type:it,data:cloneData(ot,nt),options:at&&{...at},plugins:lt}),reforwardRef(_e,pt.current))},gt=()=>{reforwardRef(_e,null),pt.current&&(pt.current.destroy(),pt.current=null)};return reactExports.useEffect(()=>{!rt&&pt.current&&at&&setOptions(pt.current,at)},[rt,at]),reactExports.useEffect(()=>{!rt&&pt.current&&setLabels(pt.current.config.data,ot.labels)},[rt,ot.labels]),reactExports.useEffect(()=>{!rt&&pt.current&&ot.datasets&&setDatasets(pt.current.config.data,ot.datasets,nt)},[rt,ot.datasets]),reactExports.useEffect(()=>{pt.current&&(rt?(gt(),setTimeout(mt)):pt.current.update(ut))},[rt,at,ot.labels,ot.datasets,ut]),reactExports.useEffect(()=>{pt.current&&(gt(),setTimeout(mt))},[it]),reactExports.useEffect(()=>(mt(),()=>gt()),[]),React.createElement("canvas",{ref:ht,role:"img",height:tt,width:st,...dt},ct)}const Chart=reactExports.forwardRef(ChartComponent);function createTypedChart(et,_e){return Chart$1.register(_e),reactExports.forwardRef((tt,st)=>React.createElement(Chart,{...tt,ref:st,type:et}))}const Line=createTypedChart("line",LineController),Bar=createTypedChart("bar",BarController),Doughnut=createTypedChart("doughnut",DoughnutController);Chart$1.register(CategoryScale,LinearScale,PointElement,LineElement,BarElement,ArcElement,plugin_title,plugin_tooltip,plugin_legend,index);const Dashboard=()=>{const{products:et,supplierProducts:_e,getBestSupplierForProduct:tt,loading:st,refreshData:rt}=useAppContext(),[nt,it]=reactExports.useState(!1),ot=async()=>{try{it(!0),await rt()}catch(ft){console.error("Error refreshing data:",ft)}finally{it(!1)}},at=reactExports.useMemo(()=>et.length>0,[et]),lt=reactExports.useMemo(()=>{if(!et.length)return{totalProducts:0,multiSupplierProducts:0,avgProfitMargin:0,totalMonthlyProfit:0};const ft=et.length,yt=et.filter(vt=>_e.some(Et=>Et.product_id===vt.id)).filter(vt=>_e.filter(Et=>Et.product_id===vt.id).length>1).length;let bt=0,jt=0,Ct=0;et.forEach(vt=>{const Et=tt(vt.id);if(Et){const Rt=vt.salePrice-vt.amazonFee-Et.cost,$t=Rt*vt.unitsSold,At=Rt/vt.salePrice*100;At>0&&(bt+=At,Ct++),jt+=$t}});const St=Ct>0?bt/Ct:0;return{totalProducts:ft,multiSupplierProducts:yt,avgProfitMargin:St,totalMonthlyProfit:jt}},[et,_e,tt]),ct=reactExports.useMemo(()=>{const ft=(xt,yt=10)=>{const bt=Math.random()>.3;return{value:`${Math.floor(Math.random()*yt)+1}% from last month`,isPositive:bt}};return{totalProducts:ft(lt.totalProducts),avgProfitMargin:ft(lt.avgProfitMargin,5),multiSupplierProducts:ft(lt.multiSupplierProducts),totalMonthlyProfit:ft(lt.totalMonthlyProfit,7)}},[lt]),ut=reactExports.useMemo(()=>{const ft=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],xt=new Date().getMonth(),yt=[],bt=[];for(let jt=5;jt>=0;jt--){const Ct=(xt-jt+12)%12;yt.push(ft[Ct]);const St=et.reduce((Et,Rt)=>Et+Rt.salePrice*Rt.unitsSold,0),vt=.8+Math.random()*.4;bt.push(Math.round(St*vt))}return{labels:yt,data:bt}},[et]),dt=reactExports.useMemo(()=>{const ft=new Map;et.forEach(yt=>{const bt=tt(yt.id);if(bt){const Ct=(yt.salePrice-yt.amazonFee-bt.cost)*yt.unitsSold;ft.has(yt.brand)||ft.set(yt.brand,0),ft.set(yt.brand,ft.get(yt.brand)+Ct)}});const xt=[...ft.entries()].sort((yt,bt)=>bt[1]-yt[1]).slice(0,5);return{labels:xt.map(([yt])=>yt),data:xt.map(([,yt])=>yt)}},[et,tt]),ht=reactExports.useMemo(()=>{const ft=[{label:"Loss",min:-1/0,max:0},{label:"0-10%",min:0,max:10},{label:"11-20%",min:10,max:20},{label:"21-30%",min:20,max:30},{label:"31-40%",min:30,max:40},{label:"Over 40%",min:40,max:1/0}],xt=ft.map(()=>0);return et.forEach(yt=>{const bt=tt(yt.id);if(bt){const Ct=(yt.salePrice-yt.amazonFee-bt.cost)/yt.salePrice*100,St=ft.findIndex(vt=>Ct>vt.min&&Ct<=vt.max);St!==-1&&xt[St]++}}),{labels:ft.map(yt=>yt.label),data:xt}},[et,tt]),pt=reactExports.useMemo(()=>({labels:ut.labels,datasets:[{label:"Sales Revenue",data:ut.data,borderColor:"#3182ce",backgroundColor:"rgba(49, 130, 206, 0.1)",borderWidth:2,tension:.3,fill:!0}]}),[ut]),mt=reactExports.useMemo(()=>({labels:dt.labels,datasets:[{label:"Monthly Profit",data:dt.data,backgroundColor:["rgba(49, 130, 206, 0.7)","rgba(72, 187, 120, 0.7)","rgba(237, 100, 166, 0.7)","rgba(246, 173, 85, 0.7)","rgba(121, 134, 203, 0.7)"],borderColor:["#3182ce","#48bb78","#ed64a6","#f6ad55","#7986cb"],borderWidth:1}]}),[dt]),gt=reactExports.useMemo(()=>({labels:ht.labels,datasets:[{data:ht.data,backgroundColor:["rgba(239, 68, 68, 0.7)","rgba(249, 115, 22, 0.7)","rgba(234, 179, 8, 0.7)","rgba(132, 204, 22, 0.7)","rgba(34, 197, 94, 0.7)","rgba(16, 185, 129, 0.7)"],borderColor:["#ef4444","#f97316","#eab308","#84cc16","#22c55e","#10b981"],borderWidth:1}]}),[ht]);return st||nt?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-[70vh]",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600",children:nt?"Refreshing dashboard data...":"Loading dashboard data..."})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),jsxRuntimeExports.jsxs("button",{onClick:ot,className:"flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors",children:[jsxRuntimeExports.jsx(RefreshCcw,{size:16}),"Refresh Data"]})]}),at?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[jsxRuntimeExports.jsx(StatCard,{title:"Total Products",value:lt.totalProducts.toLocaleString(),icon:jsxRuntimeExports.jsx(Package,{className:"text-blue-600"}),trend:ct.totalProducts,bgColor:"bg-blue-100"}),jsxRuntimeExports.jsx(StatCard,{title:"Avg. Profit Margin",value:`${lt.avgProfitMargin.toFixed(1)}%`,icon:jsxRuntimeExports.jsx(Percent,{className:"text-green-600"}),trend:ct.avgProfitMargin,bgColor:"bg-green-100"}),jsxRuntimeExports.jsx(StatCard,{title:"Multi-Supplier Products",value:lt.multiSupplierProducts.toLocaleString(),icon:jsxRuntimeExports.jsx(Truck,{className:"text-purple-600"}),trend:ct.multiSupplierProducts,bgColor:"bg-purple-100"}),jsxRuntimeExports.jsx(StatCard,{title:"Monthly Profit",value:`$${lt.totalMonthlyProfit.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}`,icon:jsxRuntimeExports.jsx(DollarSign,{className:"text-amber-600"}),trend:ct.totalMonthlyProfit,bgColor:"bg-amber-100"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[jsxRuntimeExports.jsx(ChartCard,{title:"Monthly Sales Overview",children:jsxRuntimeExports.jsx(Line,{data:pt,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(ft){return`$${Number(ft.raw).toLocaleString()}`}}}},scales:{y:{beginAtZero:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"},ticks:{callback:function(ft){return"$"+Number(ft).toLocaleString()}}},x:{grid:{display:!1}}}}})}),jsxRuntimeExports.jsx(ChartCard,{title:"Top Brands by Profit",children:jsxRuntimeExports.jsx(Bar,{data:mt,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(ft){return`$${Number(ft.raw).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}`}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(ft){return"$"+Number(ft).toLocaleString()}},grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"}},x:{grid:{display:!1}}}}})})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 gap-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Profit Margin Distribution"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row",children:[jsxRuntimeExports.jsx("div",{className:"md:w-1/2 h-[300px] flex items-center justify-center",children:jsxRuntimeExports.jsx(Doughnut,{data:gt,options:{responsive:!0,maintainAspectRatio:!1,cutout:"60%",plugins:{legend:{position:"right",labels:{boxWidth:15,padding:15}},tooltip:{callbacks:{label:function(ft){return`${ft.label}: ${ft.raw} products`}}}}}})}),jsxRuntimeExports.jsxs("div",{className:"md:w-1/2 mt-6 md:mt-0",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-3",children:"Profit Margin Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4",children:"This chart shows the distribution of products by profit margin ranges. Products are categorized based on their calculated profit margins using the best available supplier."}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:ht.labels.map((ft,xt)=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"inline-block w-3 h-3 mr-2 rounded-full",style:{backgroundColor:gt.datasets[0].backgroundColor[xt]}}),jsxRuntimeExports.jsx("span",{children:ft})]}),jsxRuntimeExports.jsxs("div",{className:"font-medium",children:[ht.data[xt]," products",et.length>0&&jsxRuntimeExports.jsxs("span",{className:"text-gray-500 ml-1",children:["(",(ht.data[xt]/et.length*100).toFixed(1),"%)"]})]})]},ft))})]})]})]})})]}):jsxRuntimeExports.jsx(EmptyState,{message:"No product data available",suggestion:"Import some products or add them manually to see dashboard statistics."})]})},Tabs=({tabs:et,defaultActiveTab:_e})=>{const[tt,st]=reactExports.useState(_e||et[0].id);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"flex mb-4 border-b",children:et.map(rt=>jsxRuntimeExports.jsx("button",{className:`tab-button px-4 py-2 font-medium transition-all ${tt===rt.id?"active bg-white border-b-2 border-blue-500 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>st(rt.id),children:rt.label},rt.id))}),jsxRuntimeExports.jsx("div",{className:"tab-content p-4 bg-white rounded-b-lg shadow-sm",children:et.map(rt=>jsxRuntimeExports.jsx("div",{className:tt===rt.id?"block":"hidden",children:rt.content},rt.id))})]})},Button=({children:et,variant:_e="primary",onClick:tt,className:st="",type:rt="button",disabled:nt=!1})=>{const it="px-4 py-2 rounded font-medium transition-colors",ot={primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-teal-500 hover:bg-teal-600 text-white",danger:"bg-red-600 hover:bg-red-700 text-white"},at=nt?"opacity-50 cursor-not-allowed":"";return jsxRuntimeExports.jsx("button",{type:rt,className:`${it} ${ot[_e]} ${at} ${st}`,onClick:tt,disabled:nt,children:et})},LoadingOverlay=({message:et="Loading...",progress:_e})=>{const tt=_e!==void 0&&_e>=0,[st,rt]=reactExports.useState(_e||0);reactExports.useEffect(()=>{if(tt&&_e!==void 0)if(_e>st+5){const ct=setInterval(()=>{rt(ut=>{const dt=Math.min(ut+1,_e);return dt>=_e&&clearInterval(ct),dt})},50);return()=>clearInterval(ct)}else rt(_e)},[_e,tt]);const[nt,it]=reactExports.useState(0);reactExports.useEffect(()=>{const ct=setInterval(()=>{it(ut=>ut+1)},1e3);return()=>clearInterval(ct)},[]);const ot=tt&&st>10&&nt>5,at=()=>{if(!ot)return"";const ct=nt/st*100,ut=Math.max(0,ct-nt);if(ut<60)return`${Math.ceil(ut)} seconds remaining`;if(ut<3600)return`${Math.ceil(ut/60)} minutes remaining`;{const dt=Math.floor(ut/3600),ht=Math.ceil(ut%3600/60);return`${dt}h ${ht}m remaining`}},lt=()=>tt?st<30?"bg-blue-500":st<70?"bg-sky-600":st<100?"bg-blue-700":"bg-green-600":"bg-gray-400";return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl flex flex-col items-center",style:{minWidth:"400px",maxWidth:"90%"},children:[jsxRuntimeExports.jsxs("div",{className:"mb-6 flex items-center justify-center relative",children:[jsxRuntimeExports.jsx(Loader2,{className:"h-20 w-20 text-blue-600 animate-spin"}),tt&&jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsxs("span",{className:"text-2xl font-bold text-blue-700",children:[Math.round(st),"%"]})})]}),jsxRuntimeExports.jsx("div",{className:"w-full mb-4",children:jsxRuntimeExports.jsx("div",{className:"relative pt-1",children:jsxRuntimeExports.jsx("div",{className:"overflow-hidden h-5 mb-2 text-xs flex rounded-full bg-blue-100 shadow-inner",children:jsxRuntimeExports.jsx("div",{style:{width:`${st}%`},className:`shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center rounded-full transition-all duration-500 ease-out ${lt()} ${tt?"":"animate-pulse"}`})})})}),jsxRuntimeExports.jsxs("div",{className:"w-full text-center mb-3",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-800 font-semibold text-lg",children:et}),ot&&jsxRuntimeExports.jsx("p",{className:"text-blue-600 font-medium text-sm mt-1",children:at()})]}),jsxRuntimeExports.jsx("div",{className:"w-full border-t border-gray-200 pt-3 mt-2",children:jsxRuntimeExports.jsxs("p",{className:"text-gray-500 text-sm text-center",children:["Time elapsed: ",Math.floor(nt/60),"m ",nt%60,"s"]})}),!ot&&nt>10&&jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm mt-2 italic",children:st<100?"Processing your data, please wait...":"Almost done!"})]})})},ProductMatchBadge$1=({matchMethod:et,className:_e="",size:tt="md"})=>{const st=tt==="sm"?"px-1.5 py-0.5 text-[10px]":"px-2.5 py-0.5 text-xs";return!et||et==="none"?jsxRuntimeExports.jsx("span",{className:`inline-flex items-center ${st} rounded-full font-medium bg-red-100 text-red-800 ${_e}`,children:"No Match"}):et==="ean"?jsxRuntimeExports.jsx("span",{className:`inline-flex items-center ${st} rounded-full font-medium bg-green-100 text-green-800 ${_e}`,children:"EAN Match"}):et==="mpn"?jsxRuntimeExports.jsxs("span",{className:`inline-flex items-center ${st} rounded-full font-medium bg-blue-100 text-blue-800 ${_e}`,children:[jsxRuntimeExports.jsx("span",{className:"font-bold mr-1",children:"MPN"})," Match"]}):et==="name"?jsxRuntimeExports.jsx("span",{className:`inline-flex items-center ${st} rounded-full font-medium bg-orange-100 text-orange-800 ${_e}`,children:"Name Match"}):jsxRuntimeExports.jsx("span",{className:`inline-flex items-center ${st} rounded-full font-medium bg-gray-100 text-gray-800 ${_e}`,children:et})},SuccessModal=({isOpen:et,onClose:_e,title:tt,message:st,details:rt=[]})=>et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow-xl w-96 max-w-lg",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-4",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"text-green-500 w-8 h-8 mr-3"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold",children:tt})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4",children:st}),rt.length>0&&jsxRuntimeExports.jsx("div",{className:"bg-gray-50 rounded p-4 mb-4",children:rt.map((nt,it)=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-2 last:mb-0",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-600",children:[nt.label,":"]}),nt.matchMethod?jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"font-medium mr-2",children:nt.value}),jsxRuntimeExports.jsx(ProductMatchBadge$1,{matchMethod:nt.matchMethod,size:"sm"})]}):jsxRuntimeExports.jsx("span",{className:`font-medium ${nt.color||""}`,children:nt.value})]},it))}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx(Button,{onClick:_e,children:"Close"})})]})})}):null;var papaparse_min={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(et,_e){((tt,st)=>{et.exports=st()})(commonjsGlobal,function tt(){var st=typeof self<"u"?self:typeof window<"u"?window:st!==void 0?st:{},rt,nt=!st.document&&!!st.postMessage,it=st.IS_PAPA_WORKER||!1,ot={},at=0,lt={};function ct(vt){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(Et){var Rt=jt(Et);Rt.chunkSize=parseInt(Rt.chunkSize),Et.step||Et.chunk||(Rt.chunkSize=null),this._handle=new mt(Rt),(this._handle.streamer=this)._config=Rt}).call(this,vt),this.parseChunk=function(Et,Rt){var $t=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<$t){let Xt=this._config.newline;Xt||(At=this._config.quoteChar||'"',Xt=this._handle.guessLineEndings(Et,At)),Et=[...Et.split(Xt).slice($t)].join(Xt)}this.isFirstChunk&&St(this._config.beforeFirstChunk)&&(At=this._config.beforeFirstChunk(Et))!==void 0&&(Et=At),this.isFirstChunk=!1,this._halted=!1;var $t=this._partialLine+Et,At=(this._partialLine="",this._handle.parse($t,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(Et=At.meta.cursor,$t=(this._finished||(this._partialLine=$t.substring(Et-this._baseIndex),this._baseIndex=Et),At&&At.data&&(this._rowCount+=At.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),it)st.postMessage({results:At,workerId:lt.WORKER_ID,finished:$t});else if(St(this._config.chunk)&&!Rt){if(this._config.chunk(At,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=At=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(At.data),this._completeResults.errors=this._completeResults.errors.concat(At.errors),this._completeResults.meta=At.meta),this._completed||!$t||!St(this._config.complete)||At&&At.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),$t||At&&At.meta.paused||this._nextChunk(),At}this._halted=!0},this._sendError=function(Et){St(this._config.error)?this._config.error(Et):it&&this._config.error&&st.postMessage({workerId:lt.WORKER_ID,error:Et,finished:!1})}}function ut(vt){var Et;(vt=vt||{}).chunkSize||(vt.chunkSize=lt.RemoteChunkSize),ct.call(this,vt),this._nextChunk=nt?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(Rt){this._input=Rt,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(Et=new XMLHttpRequest,this._config.withCredentials&&(Et.withCredentials=this._config.withCredentials),nt||(Et.onload=Ct(this._chunkLoaded,this),Et.onerror=Ct(this._chunkError,this)),Et.open(this._config.downloadRequestBody?"POST":"GET",this._input,!nt),this._config.downloadRequestHeaders){var Rt,$t=this._config.downloadRequestHeaders;for(Rt in $t)Et.setRequestHeader(Rt,$t[Rt])}var At;this._config.chunkSize&&(At=this._start+this._config.chunkSize-1,Et.setRequestHeader("Range","bytes="+this._start+"-"+At));try{Et.send(this._config.downloadRequestBody)}catch(Xt){this._chunkError(Xt.message)}nt&&Et.status===0&&this._chunkError()}},this._chunkLoaded=function(){Et.readyState===4&&(Et.status<200||400<=Et.status?this._chunkError():(this._start+=this._config.chunkSize||Et.responseText.length,this._finished=!this._config.chunkSize||this._start>=(Rt=>(Rt=Rt.getResponseHeader("Content-Range"))!==null?parseInt(Rt.substring(Rt.lastIndexOf("/")+1)):-1)(Et),this.parseChunk(Et.responseText)))},this._chunkError=function(Rt){Rt=Et.statusText||Rt,this._sendError(new Error(Rt))}}function dt(vt){(vt=vt||{}).chunkSize||(vt.chunkSize=lt.LocalChunkSize),ct.call(this,vt);var Et,Rt,$t=typeof FileReader<"u";this.stream=function(At){this._input=At,Rt=At.slice||At.webkitSlice||At.mozSlice,$t?((Et=new FileReader).onload=Ct(this._chunkLoaded,this),Et.onerror=Ct(this._chunkError,this)):Et=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var At=this._input,Xt=(this._config.chunkSize&&(Xt=Math.min(this._start+this._config.chunkSize,this._input.size),At=Rt.call(At,this._start,Xt)),Et.readAsText(At,this._config.encoding));$t||this._chunkLoaded({target:{result:Xt}})},this._chunkLoaded=function(At){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(At.target.result)},this._chunkError=function(){this._sendError(Et.error)}}function ht(vt){var Et;ct.call(this,vt=vt||{}),this.stream=function(Rt){return Et=Rt,this._nextChunk()},this._nextChunk=function(){var Rt,$t;if(!this._finished)return Rt=this._config.chunkSize,Et=Rt?($t=Et.substring(0,Rt),Et.substring(Rt)):($t=Et,""),this._finished=!Et,this.parseChunk($t)}}function pt(vt){ct.call(this,vt=vt||{});var Et=[],Rt=!0,$t=!1;this.pause=function(){ct.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){ct.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(At){this._input=At,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){$t&&Et.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),Et.length?this.parseChunk(Et.shift()):Rt=!0},this._streamData=Ct(function(At){try{Et.push(typeof At=="string"?At:At.toString(this._config.encoding)),Rt&&(Rt=!1,this._checkIsFinished(),this.parseChunk(Et.shift()))}catch(Xt){this._streamError(Xt)}},this),this._streamError=Ct(function(At){this._streamCleanUp(),this._sendError(At)},this),this._streamEnd=Ct(function(){this._streamCleanUp(),$t=!0,this._streamData("")},this),this._streamCleanUp=Ct(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function mt(vt){var Et,Rt,$t,At,Xt=Math.pow(2,53),kt=-Xt,Zt=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Jt=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Yt=this,wt=0,Tt=0,Bt=!1,Wt=!1,Mt=[],qt={data:[],errors:[],meta:{}};function es(Nt){return vt.skipEmptyLines==="greedy"?Nt.join("").trim()==="":Nt.length===1&&Nt[0].length===0}function Ot(){if(qt&&$t&&(zt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+lt.DefaultDelimiter+"'"),$t=!1),vt.skipEmptyLines&&(qt.data=qt.data.filter(function(Ut){return!es(Ut)})),It()){let Ut=function(ss,as){St(vt.transformHeader)&&(ss=vt.transformHeader(ss,as)),Mt.push(ss)};if(qt)if(Array.isArray(qt.data[0])){for(var Nt=0;It()&&Nt<qt.data.length;Nt++)qt.data[Nt].forEach(Ut);qt.data.splice(0,1)}else qt.data.forEach(Ut)}function Lt(Ut,ss){for(var as=vt.header?{}:[],Dt=0;Dt<Ut.length;Dt++){var Gt=Dt,Pt=Ut[Dt],Pt=((Vt,Ft)=>(Ht=>(vt.dynamicTypingFunction&&vt.dynamicTyping[Ht]===void 0&&(vt.dynamicTyping[Ht]=vt.dynamicTypingFunction(Ht)),(vt.dynamicTyping[Ht]||vt.dynamicTyping)===!0))(Vt)?Ft==="true"||Ft==="TRUE"||Ft!=="false"&&Ft!=="FALSE"&&((Ht=>{if(Zt.test(Ht)&&(Ht=parseFloat(Ht),kt<Ht&&Ht<Xt))return 1})(Ft)?parseFloat(Ft):Jt.test(Ft)?new Date(Ft):Ft===""?null:Ft):Ft)(Gt=vt.header?Dt>=Mt.length?"__parsed_extra":Mt[Dt]:Gt,Pt=vt.transform?vt.transform(Pt,Gt):Pt);Gt==="__parsed_extra"?(as[Gt]=as[Gt]||[],as[Gt].push(Pt)):as[Gt]=Pt}return vt.header&&(Dt>Mt.length?zt("FieldMismatch","TooManyFields","Too many fields: expected "+Mt.length+" fields but parsed "+Dt,Tt+ss):Dt<Mt.length&&zt("FieldMismatch","TooFewFields","Too few fields: expected "+Mt.length+" fields but parsed "+Dt,Tt+ss)),as}var Kt;qt&&(vt.header||vt.dynamicTyping||vt.transform)&&(Kt=1,!qt.data.length||Array.isArray(qt.data[0])?(qt.data=qt.data.map(Lt),Kt=qt.data.length):qt.data=Lt(qt.data,0),vt.header&&qt.meta&&(qt.meta.fields=Mt),Tt+=Kt)}function It(){return vt.header&&Mt.length===0}function zt(Nt,Lt,Kt,Ut){Nt={type:Nt,code:Lt,message:Kt},Ut!==void 0&&(Nt.row=Ut),qt.errors.push(Nt)}St(vt.step)&&(At=vt.step,vt.step=function(Nt){qt=Nt,It()?Ot():(Ot(),qt.data.length!==0&&(wt+=Nt.data.length,vt.preview&&wt>vt.preview?Rt.abort():(qt.data=qt.data[0],At(qt,Yt))))}),this.parse=function(Nt,Lt,Kt){var Ut=vt.quoteChar||'"',Ut=(vt.newline||(vt.newline=this.guessLineEndings(Nt,Ut)),$t=!1,vt.delimiter?St(vt.delimiter)&&(vt.delimiter=vt.delimiter(Nt),qt.meta.delimiter=vt.delimiter):((Ut=((ss,as,Dt,Gt,Pt)=>{var Vt,Ft,Ht,is;Pt=Pt||[",","	","|",";",lt.RECORD_SEP,lt.UNIT_SEP];for(var os=0;os<Pt.length;os++){for(var ls,Qt=Pt[os],ts=0,ns=0,cs=0,us=(Ht=void 0,new ft({comments:Gt,delimiter:Qt,newline:as,preview:10}).parse(ss)),ds=0;ds<us.data.length;ds++)Dt&&es(us.data[ds])?cs++:(ls=us.data[ds].length,ns+=ls,Ht===void 0?Ht=ls:0<ls&&(ts+=Math.abs(ls-Ht),Ht=ls));0<us.data.length&&(ns/=us.data.length-cs),(Ft===void 0||ts<=Ft)&&(is===void 0||is<ns)&&1.99<ns&&(Ft=ts,Vt=Qt,is=ns)}return{successful:!!(vt.delimiter=Vt),bestDelimiter:Vt}})(Nt,vt.newline,vt.skipEmptyLines,vt.comments,vt.delimitersToGuess)).successful?vt.delimiter=Ut.bestDelimiter:($t=!0,vt.delimiter=lt.DefaultDelimiter),qt.meta.delimiter=vt.delimiter),jt(vt));return vt.preview&&vt.header&&Ut.preview++,Et=Nt,Rt=new ft(Ut),qt=Rt.parse(Et,Lt,Kt),Ot(),Bt?{meta:{paused:!0}}:qt||{meta:{paused:!1}}},this.paused=function(){return Bt},this.pause=function(){Bt=!0,Rt.abort(),Et=St(vt.chunk)?"":Et.substring(Rt.getCharIndex())},this.resume=function(){Yt.streamer._halted?(Bt=!1,Yt.streamer.parseChunk(Et,!0)):setTimeout(Yt.resume,3)},this.aborted=function(){return Wt},this.abort=function(){Wt=!0,Rt.abort(),qt.meta.aborted=!0,St(vt.complete)&&vt.complete(qt),Et=""},this.guessLineEndings=function(ss,Ut){ss=ss.substring(0,1048576);var Ut=new RegExp(gt(Ut)+"([^]*?)"+gt(Ut),"gm"),Kt=(ss=ss.replace(Ut,"")).split("\r"),Ut=ss.split(`
`),ss=1<Ut.length&&Ut[0].length<Kt[0].length;if(Kt.length===1||ss)return`
`;for(var as=0,Dt=0;Dt<Kt.length;Dt++)Kt[Dt][0]===`
`&&as++;return as>=Kt.length/2?`\r
`:"\r"}}function gt(vt){return vt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ft(vt){var Et=(vt=vt||{}).delimiter,Rt=vt.newline,$t=vt.comments,At=vt.step,Xt=vt.preview,kt=vt.fastMode,Zt=null,Jt=!1,Yt=vt.quoteChar==null?'"':vt.quoteChar,wt=Yt;if(vt.escapeChar!==void 0&&(wt=vt.escapeChar),(typeof Et!="string"||-1<lt.BAD_DELIMITERS.indexOf(Et))&&(Et=","),$t===Et)throw new Error("Comment character same as delimiter");$t===!0?$t="#":(typeof $t!="string"||-1<lt.BAD_DELIMITERS.indexOf($t))&&($t=!1),Rt!==`
`&&Rt!=="\r"&&Rt!==`\r
`&&(Rt=`
`);var Tt=0,Bt=!1;this.parse=function(Wt,Mt,qt){if(typeof Wt!="string")throw new Error("Input must be a string");var es=Wt.length,Ot=Et.length,It=Rt.length,zt=$t.length,Nt=St(At),Lt=[],Kt=[],Ut=[],ss=Tt=0;if(!Wt)return ts();if(kt||kt!==!1&&Wt.indexOf(Yt)===-1){for(var as=Wt.split(Rt),Dt=0;Dt<as.length;Dt++){if(Ut=as[Dt],Tt+=Ut.length,Dt!==as.length-1)Tt+=Rt.length;else if(qt)return ts();if(!$t||Ut.substring(0,zt)!==$t){if(Nt){if(Lt=[],is(Ut.split(Et)),ns(),Bt)return ts()}else is(Ut.split(Et));if(Xt&&Xt<=Dt)return Lt=Lt.slice(0,Xt),ts(!0)}}return ts()}for(var Gt=Wt.indexOf(Et,Tt),Pt=Wt.indexOf(Rt,Tt),Vt=new RegExp(gt(wt)+gt(Yt),"g"),Ft=Wt.indexOf(Yt,Tt);;)if(Wt[Tt]===Yt)for(Ft=Tt,Tt++;;){if((Ft=Wt.indexOf(Yt,Ft+1))===-1)return qt||Kt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Lt.length,index:Tt}),ls();if(Ft===es-1)return ls(Wt.substring(Tt,Ft).replace(Vt,Yt));if(Yt===wt&&Wt[Ft+1]===wt)Ft++;else if(Yt===wt||Ft===0||Wt[Ft-1]!==wt){Gt!==-1&&Gt<Ft+1&&(Gt=Wt.indexOf(Et,Ft+1));var Ht=os((Pt=Pt!==-1&&Pt<Ft+1?Wt.indexOf(Rt,Ft+1):Pt)===-1?Gt:Math.min(Gt,Pt));if(Wt.substr(Ft+1+Ht,Ot)===Et){Ut.push(Wt.substring(Tt,Ft).replace(Vt,Yt)),Wt[Tt=Ft+1+Ht+Ot]!==Yt&&(Ft=Wt.indexOf(Yt,Tt)),Gt=Wt.indexOf(Et,Tt),Pt=Wt.indexOf(Rt,Tt);break}if(Ht=os(Pt),Wt.substring(Ft+1+Ht,Ft+1+Ht+It)===Rt){if(Ut.push(Wt.substring(Tt,Ft).replace(Vt,Yt)),Qt(Ft+1+Ht+It),Gt=Wt.indexOf(Et,Tt),Ft=Wt.indexOf(Yt,Tt),Nt&&(ns(),Bt))return ts();if(Xt&&Lt.length>=Xt)return ts(!0);break}Kt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Lt.length,index:Tt}),Ft++}}else if($t&&Ut.length===0&&Wt.substring(Tt,Tt+zt)===$t){if(Pt===-1)return ts();Tt=Pt+It,Pt=Wt.indexOf(Rt,Tt),Gt=Wt.indexOf(Et,Tt)}else if(Gt!==-1&&(Gt<Pt||Pt===-1))Ut.push(Wt.substring(Tt,Gt)),Tt=Gt+Ot,Gt=Wt.indexOf(Et,Tt);else{if(Pt===-1)break;if(Ut.push(Wt.substring(Tt,Pt)),Qt(Pt+It),Nt&&(ns(),Bt))return ts();if(Xt&&Lt.length>=Xt)return ts(!0)}return ls();function is(cs){Lt.push(cs),ss=Tt}function os(cs){var us=0;return us=cs!==-1&&(cs=Wt.substring(Ft+1,cs))&&cs.trim()===""?cs.length:us}function ls(cs){return qt||(cs===void 0&&(cs=Wt.substring(Tt)),Ut.push(cs),Tt=es,is(Ut),Nt&&ns()),ts()}function Qt(cs){Tt=cs,is(Ut),Ut=[],Pt=Wt.indexOf(Rt,Tt)}function ts(cs){if(vt.header&&!Mt&&Lt.length&&!Jt){var us=Lt[0],ds={},ps=new Set(us);let ys=!1;for(let fs=0;fs<us.length;fs++){let hs=us[fs];if(ds[hs=St(vt.transformHeader)?vt.transformHeader(hs,fs):hs]){let xs,gs=ds[hs];for(;xs=hs+"_"+gs,gs++,ps.has(xs););ps.add(xs),us[fs]=xs,ds[hs]++,ys=!0,(Zt=Zt===null?{}:Zt)[xs]=hs}else ds[hs]=1,us[fs]=hs;ps.add(hs)}ys&&console.warn("Duplicate headers found and renamed."),Jt=!0}return{data:Lt,errors:Kt,meta:{delimiter:Et,linebreak:Rt,aborted:Bt,truncated:!!cs,cursor:ss+(Mt||0),renamedHeaders:Zt}}}function ns(){At(ts()),Lt=[],Kt=[]}},this.abort=function(){Bt=!0},this.getCharIndex=function(){return Tt}}function xt(vt){var Et=vt.data,Rt=ot[Et.workerId],$t=!1;if(Et.error)Rt.userError(Et.error,Et.file);else if(Et.results&&Et.results.data){var At={abort:function(){$t=!0,yt(Et.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:bt,resume:bt};if(St(Rt.userStep)){for(var Xt=0;Xt<Et.results.data.length&&(Rt.userStep({data:Et.results.data[Xt],errors:Et.results.errors,meta:Et.results.meta},At),!$t);Xt++);delete Et.results}else St(Rt.userChunk)&&(Rt.userChunk(Et.results,At,Et.file),delete Et.results)}Et.finished&&!$t&&yt(Et.workerId,Et.results)}function yt(vt,Et){var Rt=ot[vt];St(Rt.userComplete)&&Rt.userComplete(Et),Rt.terminate(),delete ot[vt]}function bt(){throw new Error("Not implemented.")}function jt(vt){if(typeof vt!="object"||vt===null)return vt;var Et,Rt=Array.isArray(vt)?[]:{};for(Et in vt)Rt[Et]=jt(vt[Et]);return Rt}function Ct(vt,Et){return function(){vt.apply(Et,arguments)}}function St(vt){return typeof vt=="function"}return lt.parse=function(vt,Et){var Rt=(Et=Et||{}).dynamicTyping||!1;if(St(Rt)&&(Et.dynamicTypingFunction=Rt,Rt={}),Et.dynamicTyping=Rt,Et.transform=!!St(Et.transform)&&Et.transform,!Et.worker||!lt.WORKERS_SUPPORTED)return Rt=null,lt.NODE_STREAM_INPUT,typeof vt=="string"?(vt=($t=>$t.charCodeAt(0)!==65279?$t:$t.slice(1))(vt),Rt=new(Et.download?ut:ht)(Et)):vt.readable===!0&&St(vt.read)&&St(vt.on)?Rt=new pt(Et):(st.File&&vt instanceof File||vt instanceof Object)&&(Rt=new dt(Et)),Rt.stream(vt);(Rt=(()=>{var $t;return!!lt.WORKERS_SUPPORTED&&($t=(()=>{var At=st.URL||st.webkitURL||null,Xt=tt.toString();return lt.BLOB_URL||(lt.BLOB_URL=At.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Xt,")();"],{type:"text/javascript"})))})(),($t=new st.Worker($t)).onmessage=xt,$t.id=at++,ot[$t.id]=$t)})()).userStep=Et.step,Rt.userChunk=Et.chunk,Rt.userComplete=Et.complete,Rt.userError=Et.error,Et.step=St(Et.step),Et.chunk=St(Et.chunk),Et.complete=St(Et.complete),Et.error=St(Et.error),delete Et.worker,Rt.postMessage({input:vt,config:Et,workerId:Rt.id})},lt.unparse=function(vt,Et){var Rt=!1,$t=!0,At=",",Xt=`\r
`,kt='"',Zt=kt+kt,Jt=!1,Yt=null,wt=!1,Tt=((()=>{if(typeof Et=="object"){if(typeof Et.delimiter!="string"||lt.BAD_DELIMITERS.filter(function(Mt){return Et.delimiter.indexOf(Mt)!==-1}).length||(At=Et.delimiter),typeof Et.quotes!="boolean"&&typeof Et.quotes!="function"&&!Array.isArray(Et.quotes)||(Rt=Et.quotes),typeof Et.skipEmptyLines!="boolean"&&typeof Et.skipEmptyLines!="string"||(Jt=Et.skipEmptyLines),typeof Et.newline=="string"&&(Xt=Et.newline),typeof Et.quoteChar=="string"&&(kt=Et.quoteChar),typeof Et.header=="boolean"&&($t=Et.header),Array.isArray(Et.columns)){if(Et.columns.length===0)throw new Error("Option columns is empty");Yt=Et.columns}Et.escapeChar!==void 0&&(Zt=Et.escapeChar+kt),Et.escapeFormulae instanceof RegExp?wt=Et.escapeFormulae:typeof Et.escapeFormulae=="boolean"&&Et.escapeFormulae&&(wt=/^[=+\-@\t\r].*$/)}})(),new RegExp(gt(kt),"g"));if(typeof vt=="string"&&(vt=JSON.parse(vt)),Array.isArray(vt)){if(!vt.length||Array.isArray(vt[0]))return Bt(null,vt,Jt);if(typeof vt[0]=="object")return Bt(Yt||Object.keys(vt[0]),vt,Jt)}else if(typeof vt=="object")return typeof vt.data=="string"&&(vt.data=JSON.parse(vt.data)),Array.isArray(vt.data)&&(vt.fields||(vt.fields=vt.meta&&vt.meta.fields||Yt),vt.fields||(vt.fields=Array.isArray(vt.data[0])?vt.fields:typeof vt.data[0]=="object"?Object.keys(vt.data[0]):[]),Array.isArray(vt.data[0])||typeof vt.data[0]=="object"||(vt.data=[vt.data])),Bt(vt.fields||[],vt.data||[],Jt);throw new Error("Unable to serialize unrecognized input");function Bt(Mt,qt,es){var Ot="",It=(typeof Mt=="string"&&(Mt=JSON.parse(Mt)),typeof qt=="string"&&(qt=JSON.parse(qt)),Array.isArray(Mt)&&0<Mt.length),zt=!Array.isArray(qt[0]);if(It&&$t){for(var Nt=0;Nt<Mt.length;Nt++)0<Nt&&(Ot+=At),Ot+=Wt(Mt[Nt],Nt);0<qt.length&&(Ot+=Xt)}for(var Lt=0;Lt<qt.length;Lt++){var Kt=(It?Mt:qt[Lt]).length,Ut=!1,ss=It?Object.keys(qt[Lt]).length===0:qt[Lt].length===0;if(es&&!It&&(Ut=es==="greedy"?qt[Lt].join("").trim()==="":qt[Lt].length===1&&qt[Lt][0].length===0),es==="greedy"&&It){for(var as=[],Dt=0;Dt<Kt;Dt++){var Gt=zt?Mt[Dt]:Dt;as.push(qt[Lt][Gt])}Ut=as.join("").trim()===""}if(!Ut){for(var Pt=0;Pt<Kt;Pt++){0<Pt&&!ss&&(Ot+=At);var Vt=It&&zt?Mt[Pt]:Pt;Ot+=Wt(qt[Lt][Vt],Pt)}Lt<qt.length-1&&(!es||0<Kt&&!ss)&&(Ot+=Xt)}}return Ot}function Wt(Mt,qt){var es,Ot;return Mt==null?"":Mt.constructor===Date?JSON.stringify(Mt).slice(1,25):(Ot=!1,wt&&typeof Mt=="string"&&wt.test(Mt)&&(Mt="'"+Mt,Ot=!0),es=Mt.toString().replace(Tt,Zt),(Ot=Ot||Rt===!0||typeof Rt=="function"&&Rt(Mt,qt)||Array.isArray(Rt)&&Rt[qt]||((It,zt)=>{for(var Nt=0;Nt<zt.length;Nt++)if(-1<It.indexOf(zt[Nt]))return!0;return!1})(es,lt.BAD_DELIMITERS)||-1<es.indexOf(At)||es.charAt(0)===" "||es.charAt(es.length-1)===" ")?kt+es+kt:es)}},lt.RECORD_SEP="",lt.UNIT_SEP="",lt.BYTE_ORDER_MARK="\uFEFF",lt.BAD_DELIMITERS=["\r",`
`,'"',lt.BYTE_ORDER_MARK],lt.WORKERS_SUPPORTED=!nt&&!!st.Worker,lt.NODE_STREAM_INPUT=1,lt.LocalChunkSize=10485760,lt.RemoteChunkSize=5242880,lt.DefaultDelimiter=",",lt.Parser=ft,lt.ParserHandle=mt,lt.NetworkStreamer=ut,lt.FileStreamer=dt,lt.StringStreamer=ht,lt.ReadableStreamStreamer=pt,st.jQuery&&((rt=st.jQuery).fn.parse=function(vt){var Et=vt.config||{},Rt=[];return this.each(function(Xt){if(!(rt(this).prop("tagName").toUpperCase()==="INPUT"&&rt(this).attr("type").toLowerCase()==="file"&&st.FileReader)||!this.files||this.files.length===0)return!0;for(var kt=0;kt<this.files.length;kt++)Rt.push({file:this.files[kt],inputElem:this,instanceConfig:rt.extend({},Et)})}),$t(),this;function $t(){if(Rt.length===0)St(vt.complete)&&vt.complete();else{var Xt,kt,Zt,Jt,Yt=Rt[0];if(St(vt.before)){var wt=vt.before(Yt.file,Yt.inputElem);if(typeof wt=="object"){if(wt.action==="abort")return Xt="AbortError",kt=Yt.file,Zt=Yt.inputElem,Jt=wt.reason,void(St(vt.error)&&vt.error({name:Xt},kt,Zt,Jt));if(wt.action==="skip")return void At();typeof wt.config=="object"&&(Yt.instanceConfig=rt.extend(Yt.instanceConfig,wt.config))}else if(wt==="skip")return void At()}var Tt=Yt.instanceConfig.complete;Yt.instanceConfig.complete=function(Bt){St(Tt)&&Tt(Bt,Yt.file,Yt.inputElem),At()},lt.parse(Yt.file,Yt.instanceConfig)}}function At(){Rt.splice(0,1),$t()}}),it&&(st.onmessage=function(vt){vt=vt.data,lt.WORKER_ID===void 0&&vt&&(lt.WORKER_ID=vt.workerId),typeof vt.input=="string"?st.postMessage({workerId:lt.WORKER_ID,results:lt.parse(vt.input,vt.config),finished:!0}):(st.File&&vt.input instanceof File||vt.input instanceof Object)&&(vt=lt.parse(vt.input,vt.config))&&st.postMessage({workerId:lt.WORKER_ID,results:vt,finished:!0})}),(ut.prototype=Object.create(ct.prototype)).constructor=ut,(dt.prototype=Object.create(ct.prototype)).constructor=dt,(ht.prototype=Object.create(ht.prototype)).constructor=ht,(pt.prototype=Object.create(ct.prototype)).constructor=pt,lt})})(papaparse_min);var papaparse_minExports=papaparse_min.exports;const Papa=getDefaultExportFromCjs(papaparse_minExports),parseCSV=async et=>(console.log(" CSV PARSE: Starting CSV parsing for file:",et.name),new Promise((_e,tt)=>{const st=new FileReader;st.onload=rt=>{var nt;try{if(!((nt=rt.target)!=null&&nt.result)){console.error(" CSV PARSE: FileReader result is null or undefined"),tt(new Error("Failed to read file contents"));return}const it=rt.target.result;console.log(` CSV PARSE: Loaded file content (${it.length} characters)`),it.length>1e3&&console.log(" CSV PARSE: First 500 characters preview:",it.substring(0,500)),Papa.parse(it,{header:!0,skipEmptyLines:!0,complete:ot=>{var at;console.log(` CSV PARSE: Parsing complete. Found ${ot.data.length} rows and ${((at=ot.meta.fields)==null?void 0:at.length)||0} columns`),console.log(" CSV PARSE: Column headers:",ot.meta.fields),ot.errors.length>0&&(console.warn(` CSV PARSE: Found ${ot.errors.length} parsing errors:`),ot.errors.slice(0,5).forEach(lt=>{console.warn(`  - Row ${lt.row}: ${lt.message}`)})),ot.data.length>0?(console.log(" CSV PARSE: Sample of first row:",ot.data[0]),_e(ot.data)):(console.error(" CSV PARSE: No data rows found in CSV"),tt(new Error("No data rows found in CSV file")))},error:ot=>{console.error(" CSV PARSE: Error parsing CSV:",ot),tt(ot)}})}catch(it){console.error(" CSV PARSE: Exception during CSV parsing:",it),tt(it)}},st.onerror=rt=>{console.error(" CSV PARSE: FileReader error:",rt),tt(new Error("Failed to read file"))},st.readAsText(et)})),validateRequiredFields=et=>{if(!et||et.length===0)return console.error(" CSV VALIDATE: No data rows found in CSV"),!1;console.log(` CSV VALIDATE: Validating CSV data with ${et.length} rows`);const _e=et[0];if(!_e||typeof _e!="object")return console.error(" CSV VALIDATE: First row is not a valid object"),!1;const tt=Object.keys(_e);if(console.log(" CSV VALIDATE: Columns found in first row:",tt),tt.length===0)return console.error(" CSV VALIDATE: No columns found in CSV data"),!1;const st=Math.min(et.length,5);console.log(` CSV VALIDATE: Checking first ${st} rows for empty values in key columns`);for(let rt=0;rt<st;rt++){const nt=et[rt],it=tt.filter(ot=>{const at=nt[ot];return at==null||at===""});it.length>0&&console.warn(` CSV VALIDATE: Row ${rt+1} has empty values in columns:`,it)}return console.log(" CSV VALIDATE: Basic validation passed"),!0},autoMapProductColumns=et=>{const _e={Title:["title","product_name","name","item_name","product_title"],EAN:["ean","barcode","upc","product_id","sku","asin"],Brand:["brand","brand_name","manufacturer"],"Sale Price":["sale_price","price","selling_price","amazon_price"],"Amazon Fee":["amazon_fee","fee","fees","fba_fee","referral_fee"],"Buy Box Price":["buy_box_price","buybox","buy_box","winning_price"],"Units Sold":["units_sold","sales","monthly_sales","quantity_sold","sold"],Category:["category","product_category","department","niche"],Rating:["rating","product_rating","star_rating","stars"],"Review Count":["review_count","reviews","review","num_reviews","number_of_reviews"]},tt={},st=new Set;return et.forEach(rt=>{const nt=normalizeColumnName$1(rt);for(const[it,ot]of Object.entries(_e))if(ot.includes(nt)&&!st.has(rt)){tt[it]=rt,st.add(rt);break}}),et.forEach(rt=>{if(st.has(rt))return;const nt=normalizeColumnName$1(rt);for(const[it,ot]of Object.entries(_e))if(!tt[it]&&ot.some(lt=>nt.includes(lt)||lt.includes(nt))){tt[it]=rt,st.add(rt);break}}),tt},normalizeColumnName$1=et=>et.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").trim(),API_URL$1=(()=>{const et="http://localhost:3001";return!et.startsWith("http://")&&!et.startsWith("https://")?`http://${et}`:et})();console.log("AmazonImport component loaded");console.log("API_URL configured as:",API_URL$1);console.log("Environment variable value:",void 0);const REQUIRED_FIELDS$1=["Brand","Sale Price"],AmazonImport=()=>{const{customAttributes:et}=useAppContext(),{addImportRecord:_e}=useImportHistory(),[tt,st]=reactExports.useState(1),[rt,nt]=reactExports.useState([]),[it,ot]=reactExports.useState({}),[at,lt]=reactExports.useState(""),[ct,ut]=reactExports.useState(!1),[dt,ht]=reactExports.useState(!1),[pt,mt]=reactExports.useState(""),[gt,ft]=reactExports.useState(null),[xt,yt]=reactExports.useState({totalRecords:0,successfulImports:0,failedImports:0}),[bt,jt]=reactExports.useState(null),[Ct,St]=reactExports.useState("Processing data..."),[vt,Et]=reactExports.useState(0),[Rt,$t]=reactExports.useState(500),[At,Xt]=reactExports.useState(null),[kt,Zt]=reactExports.useState(!1),[Jt,Yt]=reactExports.useState(!1),[wt,Tt]=reactExports.useState(0),[Bt,Wt]=reactExports.useState(null),Mt=et.filter(Pt=>Pt.forType==="product"&&Pt.required).map(Pt=>Pt.name),qt=et.filter(Pt=>Pt.forType==="product").map(Pt=>Pt.name),es=[...REQUIRED_FIELDS$1,...Mt],Ot=()=>{st(1),nt([]),ot({}),lt(""),mt(""),jt(null),yt({totalRecords:0,successfulImports:0,failedImports:0});const Pt=document.getElementById("amazonFileInput");Pt&&(Pt.value="")},It=()=>{console.log("Closing success modal and cleaning up resources..."),ht(!1),At&&(console.log(`Clearing poll interval ${At}`),window.clearInterval(At),Xt(null)),ut(!1),Et(0),St("Processing data..."),jt(null),Ot()},zt=async Pt=>{try{console.log(`Checking job status for ID: ${Pt} from ${API_URL$1}/api/upload/status/${Pt}`);let Vt=3,Ft;for(;Vt>0;)try{const os=new AbortController,ls=setTimeout(()=>{console.log("Status check timeout reached, aborting fetch"),os.abort(new DOMException("The operation was aborted due to timeout","TimeoutError"))},6e4);if(Ft=await fetch(`${API_URL$1}/api/upload/status/${Pt}`,{signal:os.signal,headers:{Accept:"application/json","Cache-Control":"no-cache, no-store"}}),clearTimeout(ls),Ft.ok){console.log(`Job status fetch successful: ${Ft.status}`);break}else if(console.warn(`Job status fetch returned ${Ft.status}, retries left: ${Vt-1}`),Vt--,Vt>0){const Qt=(4-Vt)*3e3;console.log(`Waiting ${Qt}ms before retry...`),St(`Server busy, retrying in ${Math.round(Qt/1e3)}s... (Import continues in background)`),await new Promise(ts=>setTimeout(ts,Qt))}}catch(os){os instanceof Error?(console.log(`Fetch error during status check: ${os.name} - ${os.message}`),console.log("Error details:",os)):console.log(`Fetch error during status check: ${String(os)}`);const ls=os instanceof Error&&(os.name==="AbortError"||os.message.includes("abort")||os.message.includes("time")),Qt=os instanceof Error&&(os.message.includes("network")||os.message.includes("connection")||os.message.includes("offline"));if(Vt--,Vt>0){const ts=ls||Qt?8e3:(4-Vt)*3e3;console.log(`Waiting ${ts}ms before retry ${3-Vt}/3`),St(`Server is busy. Retrying status check in ${Math.round(ts/1e3)} seconds...`),await new Promise(ns=>setTimeout(ns,ts))}else return console.log("Status check failed but continuing to assume processing is happening"),St("Job is processing in the background. Status updates may be delayed..."),"processing"}if(!Ft||!Ft.ok)return console.log("Status check failed after all retries, but continuing polling"),Ft&&Ft.status===502?St("Import is progressing in the background. Server is busy (502 Bad Gateway). Updates will resume when server responds..."):St("Import is progressing in the background. Updates delayed due to server load..."),"processing";let Ht;try{const os=await Ft.text();Ht=JSON.parse(os)}catch(os){return console.error("Error parsing response:",os),"processing"}const is=Ht.progress||0;if(Et(os=>Math.max(os,is)),Ht.status==="processing"?is<20?St(`Processing files... (${is}%). This may take several minutes for large files.`):is<60?St(`Processing data... (${is}%). Please wait.`):St(Ht.message||`Processing file... (${is}%)`):St(Ht.message||"Processing file..."),console.log(`Job status update: ${Ht.status}, progress: ${is}%, message: ${Ht.message}`),Ht.status==="completed"){if(Et(100),St("Import completed successfully!"),Ht.results){console.log("Received final results:",Ht.results);const os=Ht.results.totalRecords||0,ls=Ht.results.successfulImports||0,Qt=Ht.results.failedImports||os-ls;yt({totalRecords:os,successfulImports:ls,failedImports:Qt}),_e({type:"Amazon Data",file_name:pt,status:"Completed",total_records:os,successful_records:ls,failed_records:Qt,error_message:""}).catch(ts=>console.error("Failed to record import history:",ts))}return setTimeout(()=>{ht(!0),setTimeout(()=>{ut(!1),jt(null)},300)},1500),"completed"}return Ht.status==="processing"&&is<5&&(console.log("Processing large file - progress updates may be slow"),Ct==="Processing file..."&&St("Processing large file - this may take several minutes...")),Ht.status==="failed"?(Et(100),St(`Error: ${Ht.message||"Import failed"}`),setTimeout(()=>{ut(!1),jt(null),lt(Ht.message||"Import failed")},2e3),"failed"):Ht.status}catch(Vt){return console.error("Error in job status check:",Vt),St("Job is processing in the background. Updates will resume when server responds..."),"processing"}};reactExports.useEffect(()=>{let Pt=null,Vt=!0,Ft=0,Ht=2e3,is=[],os=0,ls=null;bt&&Bt===null&&(Wt(Date.now()),ls=window.setInterval(()=>{if(!Vt||!bt)return;os+=1;const ns=Math.floor((Date.now()-(Bt||Date.now()))/1e3);Tt(ns),os>=180&&!kt&&!Jt&&(console.log("Import taking longer than expected, showing timeout warning"),Zt(!0),Yt(!0),St(`Import has been running for ${Math.floor(ns/60)} minutes. You can wait or cancel.`)),os>=900&&!Jt&&(console.error("Import timed out after 15 minutes"),St("Import operation timed out after 15 minutes."),ut(!1),jt(null),lt("Import operation timed out after 15 minutes. Please try again with a smaller file or contact support."),ls&&window.clearInterval(ls),At&&window.clearInterval(At))},1e3),is.push(ls));const Qt=()=>{is.forEach(ns=>window.clearTimeout(ns)),is=[],ls&&window.clearInterval(ls)},ts=ns=>{if(!Vt||!bt)return null;const cs=window.setTimeout(async()=>{if(!(!Vt||!bt)){console.log(`Polling job status for job: ${bt} (interval: ${ns}ms)`);try{const us=await zt(bt);if(!Vt)return;if(console.log(`Job status poll returned: ${us}`),us==="completed"||us==="failed"){console.log("Auto-stopping polling due to job completion"),Ft=0;return}Ft>0&&(Ft=0,Ht=Math.max(2e3,Ht*.7),console.log(`Decreased polling interval to ${Ht}ms`));const ds=ts(Ht);ds&&(is.push(ds),Pt=ds)}catch(us){if(console.error("Error during job status polling:",us),!Vt)return;Ft++,Ht=Math.min(3e4,Ht*1.5),console.log(`Increased polling interval to ${Ht}ms after error`),us instanceof Error&&us.message.includes("502")?St("Server is experiencing high load (502 error). Your import continues in the background."):Ft>3&&St(`Network issues detected. Import continues in background. Retrying in ${Math.round(Ht/1e3)}s...`);const ds=ts(Ht);ds&&(is.push(ds),Pt=ds)}}},ns);return is.push(cs),cs};if(bt){console.log(`Setting up polling for job status updates: JobID ${bt}`);const ns=window.setTimeout(async()=>{try{await zt(bt);const cs=ts(Ht);cs&&(Pt=cs)}catch(cs){console.error("Error during initial job status check:",cs);const us=ts(Ht);us&&(Pt=us)}},1e3);is.push(ns)}return()=>{console.log("Cleaning up job status polling"),Vt=!1,Qt(),Pt&&(window.clearTimeout(Pt),console.log(`Cleared timeout ${Pt}`)),Wt(null),Tt(0)}},[bt,St,Et,ut,ht,lt,_e,yt,jt,pt,Bt,kt,Jt]);const Nt=async Pt=>{try{console.log("Starting server-side processing for file:",Pt.name),ut(!0),Et(0),St("Preparing file upload..."),Wt(Date.now()),Tt(0),Zt(!1);const Vt=Pt.size/(1024*1024);Vt>50&&(console.warn(`Very large file detected: ${Vt.toFixed(2)}MB. This may take longer to process.`),St(`Large file detected (${Vt.toFixed(2)}MB). Upload may take several minutes...`));const Ft=new FormData;Ft.append("file",Pt),Ft.append("batchSize",Rt.toString()),Object.keys(it).length>0&&(Ft.append("fieldMapping",JSON.stringify(it)),console.log("Including field mapping in upload:",it)),Ft.append("useBulkImport","true"),Et(3),St("Starting file upload with optimized bulk import..."),console.log(`Uploading to server endpoint: ${API_URL$1}/api/upload/product`);try{const Ht=Math.max(6e4,Math.min(3e5,Pt.size/1e4));console.log(`Setting upload timeout to ${(Ht/1e3).toFixed(0)} seconds based on file size`);const is=new AbortController,os=setTimeout(()=>{console.log("Upload timeout reached, aborting fetch"),is.abort(new DOMException("The operation was aborted due to timeout","TimeoutError"))},Ht);console.log("Starting fetch request to server...");const ls=await fetch(`${API_URL$1}/api/upload/product`,{method:"POST",body:Ft,signal:is.signal});clearTimeout(os),console.log("Server response status:",ls.status);const Qt=await ls.text();console.log("Raw server response:",Qt);let ts;try{ts=JSON.parse(Qt)}catch(ns){throw console.error("Failed to parse server response as JSON:",ns),new Error(`Server returned invalid JSON response: ${Qt.substring(0,100)}...`)}if(!ls.ok)throw console.error("Server returned error:",ts),ls.status===413?new Error("File is too large. Please reduce the file size and try again."):ls.status===504||ls.status===502?new Error("Server timeout. The file is likely too large for the server to process. Try with a smaller file."):new Error(ts.error||`Upload failed with status ${ls.status}: ${ts.details||""}`);if(ts.jobId)console.log("Job ID received from server:",ts.jobId),jt(ts.jobId),Vt>10?St(`Processing large file (${Vt.toFixed(2)}MB) on server. This may take several minutes...`):St("Processing file on server..."),setTimeout(()=>{zt(ts.jobId).catch(ns=>{console.log("Initial status check failed, will retry during polling:",ns)})},1e3);else throw new Error("No job ID returned from server")}catch(Ht){throw Ht instanceof Error&&Ht.name==="AbortError"?(console.error("Network request timed out - server might be busy with large file"),new Error("Upload timed out. Your file might be too large for the server to handle. Try reducing the file size or try again later.")):Ht instanceof Error&&Ht.message.includes("502")?new Error("Server Gateway Error (502). The server might be overloaded. Please try again with a smaller file or try later."):(console.error("Fetch error details:",Ht),Ht instanceof Error&&Ht.message.includes("Failed to fetch")?new Error("Could not connect to the server. Please check your network connection and ensure the server is running."):Ht)}}catch(Vt){console.error("Error in handleServerFileUpload:",Vt),Et(100);const Ft=Vt instanceof Error?Vt.message:"Unknown error";St(`Error: ${Ft}`),setTimeout(()=>{ut(!1),lt(Ft),jt(null),Wt(null),Tt(0),Zt(!1)},2e3)}},Lt=async Pt=>{var Ht;if(bt||ct){console.warn("Upload attempted while another import is in progress"),lt("Please wait for the current import to complete before starting a new one.");return}console.log(" AMAZON IMPORT UPLOAD HANDLER TRIGGERED ");let Vt=null;if("dataTransfer"in Pt?(Pt.preventDefault(),Vt=Pt.dataTransfer.files[0]):Vt=((Ht=Pt.target.files)==null?void 0:Ht[0])||null,!Vt){lt("Please select a file");return}if(!Vt.name.endsWith(".csv")){lt("Please upload a CSV file");return}lt(""),mt(Vt.name),ft(Vt);const Ft=(Vt.size/(1024*1024)).toFixed(2);console.log("File upload detected:",{fileName:Vt.name,fileSize:Vt.size,fileSizeMB:Ft+" MB"});try{console.log("Testing server connection...");try{const ls=await fetch(`${API_URL$1}/api/health`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(5e3)});if(console.log("Health check response:",ls.status),!ls.ok)throw new Error(`Server responded with error status: ${ls.status}`);console.log("Server connection successful")}catch(ls){throw console.error("Server connection test failed:",ls),new Error(`Cannot connect to server at ${API_URL$1}. Please ensure the server is running and API_URL (${API_URL$1}) is correct.`)}console.log("Parsing CSV file for mapping preview..."),ut(!0),Et(10),St("Parsing CSV file...");const is=await parseCSV(Vt);if(!validateRequiredFields(is)){lt("CSV file appears to be empty or invalid"),ut(!1);return}Et(30),St("Auto-mapping columns...");const os=await autoMapProductColumns(Object.keys(is[0]));ot(os),Et(100),nt(is),st(2),lt(""),ut(!1),console.log("CSV parsed and ready for mapping. Server-side processing will be used for final import.")}catch(is){console.error("Error processing file:",is),lt(is instanceof Error?is.message:"Cannot process the file"),ut(!1)}},Kt=Pt=>{Pt.preventDefault()},Ut=(Pt,Vt)=>{ot(Ft=>({...Ft,[Pt]:Vt}))},ss=async()=>{try{ut(!0),Et(5),St("Validating field mappings..."),lt("");const Pt=[];for(const Vt of es)it[Vt]||Pt.push(Vt);if(Pt.length>0){lt(`Please map the following required fields: ${Pt.join(", ")}`),ut(!1);return}console.log("Mapping complete, proceeding with server-side processing..."),gt?await Nt(gt):(lt("No file selected. Please upload a file first."),ut(!1))}catch(Pt){console.error("Error during import process:",Pt);const Vt=Pt instanceof Error?Pt.message:"Unknown error during import process";Et(100),St(`Error: ${Vt}`),pt&&await _e({type:"Amazon Data",file_name:pt,status:"Failed",total_records:rt.length,successful_records:0,failed_records:rt.length,error_message:Vt}),setTimeout(()=>{ut(!1),lt(Vt)},1500)}finally{}},as=Pt=>{const Vt=parseInt(Pt.target.value);!isNaN(Vt)&&Vt>0&&$t(Vt)},Dt=async()=>{if(Yt(!1),bt)try{console.log(`Sending cancel request to server for job ${bt}`),St("Cancelling import operation...");const Pt=await fetch(`${API_URL$1}/api/upload/cancel/${bt}`,{method:"POST",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});Pt.ok?console.log("Server acknowledged cancellation request"):console.warn("Server returned error on cancellation request:",Pt.status)}catch(Pt){console.error("Error sending cancellation request to server:",Pt)}ut(!1),jt(null),Et(0),St("Processing data..."),Wt(null),Tt(0),Zt(!1),lt("Import cancelled by user. The file might be too large or the server might be busy.")},Gt=()=>{Yt(!1),St(`Import is continuing to process in the background (${Math.floor(wt/60)}:${wt%60} elapsed)...`)};return jsxRuntimeExports.jsxs("div",{children:[ct&&jsxRuntimeExports.jsx(LoadingOverlay,{message:Ct,progress:vt}),jsxRuntimeExports.jsx(SuccessModal,{isOpen:dt,onClose:It,title:"Import Completed Successfully",message:"Your product data has been imported into the system.",details:[{label:"Total Records",value:xt.totalRecords},{label:"Successfully Imported",value:xt.successfulImports},{label:"Failed",value:xt.failedImports}]}),Jt&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow-xl w-96 max-w-lg",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-4",children:[jsxRuntimeExports.jsx("svg",{className:"w-8 h-8 text-yellow-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold",children:"Import Taking Longer Than Expected"})]}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 mb-4",children:["Your import has been running for ",Math.floor(wt/60)," minutes and ",wt%60," seconds. This could be due to a large file size or high server load."]}),jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 p-3 rounded-md mb-4 text-sm text-yellow-800",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"Options:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[jsxRuntimeExports.jsx("li",{children:"Continue waiting - The import will keep processing"}),jsxRuntimeExports.jsx("li",{children:"Cancel - Stop the import and try again later"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-3",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:Dt,children:"Cancel Import"}),jsxRuntimeExports.jsx(Button,{onClick:Gt,children:"Continue Waiting"})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"steps flex mb-6",children:[jsxRuntimeExports.jsx("div",{className:`step flex-1 p-3 text-center mr-1 rounded ${tt===1?"step-active bg-blue-500 text-white":"bg-gray-200"}`,children:"1. Upload File"}),jsxRuntimeExports.jsx("div",{className:`step flex-1 p-3 text-center mr-1 rounded ${tt===2?"step-active bg-blue-500 text-white":"bg-gray-200"}`,children:"2. Map Fields"}),jsxRuntimeExports.jsx("div",{className:`step flex-1 p-3 text-center rounded ${tt===3?"step-active bg-blue-500 text-white":"bg-gray-200"}`,children:"3. Import Data"})]}),at&&jsxRuntimeExports.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:at}),tt===1&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Import Amazon Product Data"}),jsxRuntimeExports.jsx("p",{className:"mb-4",children:"Upload a CSV file containing your Amazon product data."}),jsxRuntimeExports.jsxs("div",{className:"dropzone border-2 border-dashed border-gray-300 rounded-lg p-10 text-center cursor-pointer hover:border-blue-500 transition-colors",onDrop:Lt,onDragOver:Kt,onClick:()=>{var Pt;return(Pt=document.getElementById("amazonFileInput"))==null?void 0:Pt.click()},children:[jsxRuntimeExports.jsx("input",{type:"file",id:"amazonFileInput",className:"hidden",accept:".csv",onChange:Lt}),jsxRuntimeExports.jsx(UploadCloud,{className:"mx-auto h-12 w-12 text-gray-400 mb-3"}),jsxRuntimeExports.jsxs("p",{children:["Drag and drop your CSV file here, or ",jsxRuntimeExports.jsx("span",{className:"text-blue-500",children:"browse"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Supported format: .csv"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500",children:"Required fields: "}),jsxRuntimeExports.jsx("span",{className:"text-sm text-blue-600",children:REQUIRED_FIELDS$1.join(", ")})]}),jsxRuntimeExports.jsxs(Button,{className:"flex items-center",children:[jsxRuntimeExports.jsx(Download,{size:16,className:"mr-1"})," Download Template"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 border rounded-md p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-3",children:"Performance Settings"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-3",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"useBulkImport",checked:!0,readOnly:!0,className:"mr-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),jsxRuntimeExports.jsx("label",{htmlFor:"useBulkImport",className:"text-sm font-medium",children:"Use optimized bulk import (5-10x faster)"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"New"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("label",{htmlFor:"batchSize",className:"mr-2 text-sm",children:"Batch Size:"}),jsxRuntimeExports.jsx("input",{type:"number",id:"batchSize",className:"w-24 border p-2 rounded",min:"10",max:"1000",value:Rt,onChange:as}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Adjust for better performance with bulk import. Higher values can increase throughput."})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Files are processed using PostgreSQL's COPY command for optimal performance and memory efficiency."})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 bg-blue-50 p-3 rounded-md border border-blue-100 flex items-start",children:[jsxRuntimeExports.jsx(Info,{size:18,className:"text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-blue-800",children:[jsxRuntimeExports.jsx("p",{className:"font-medium mb-1",children:"Data Validation Note:"}),jsxRuntimeExports.jsx("p",{children:"We only validate required fields during import. Non-required fields can be left empty or contain any value."})]})]})]}),tt===2&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Map CSV Fields to System Fields"}),jsxRuntimeExports.jsx("p",{className:"mb-4",children:"Review and adjust the automatic field mapping if needed."}),jsxRuntimeExports.jsxs("table",{className:"w-full mb-4",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left",children:"System Field"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left",children:"Your CSV Column"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left",children:"Sample Data"})]})}),jsxRuntimeExports.jsxs("tbody",{children:[REQUIRED_FIELDS$1.map(Pt=>{var Vt;return jsxRuntimeExports.jsxs("tr",{className:"border-t",children:[jsxRuntimeExports.jsxs("td",{className:"px-4 py-2",children:[jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})," ",Pt]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:jsxRuntimeExports.jsxs("select",{className:"w-full border p-2 rounded",value:it[Pt]||"",onChange:Ft=>Ut(Pt,Ft.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select column..."}),Object.keys(rt[0]||{}).map(Ft=>jsxRuntimeExports.jsx("option",{value:Ft,children:Ft},Ft))]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:((Vt=rt[0])==null?void 0:Vt[it[Pt]])||"-"})]},Pt)}),Mt.map(Pt=>{var Vt;return jsxRuntimeExports.jsxs("tr",{className:"border-t",children:[jsxRuntimeExports.jsxs("td",{className:"px-4 py-2",children:[jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})," ",Pt," ",jsxRuntimeExports.jsx("span",{className:"text-xs text-blue-500",children:"(Custom)"})]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:jsxRuntimeExports.jsxs("select",{className:"w-full border p-2 rounded",value:it[Pt]||"",onChange:Ft=>Ut(Pt,Ft.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select column..."}),Object.keys(rt[0]||{}).map(Ft=>jsxRuntimeExports.jsx("option",{value:Ft,children:Ft},Ft))]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:((Vt=rt[0])==null?void 0:Vt[it[Pt]])||"-"})]},Pt)}),jsxRuntimeExports.jsx("tr",{className:"border-t bg-gray-50",children:jsxRuntimeExports.jsx("td",{colSpan:3,className:"px-4 py-2 font-medium",children:"Optional Fields"})}),["Amazon Fee","Category","Rating","Review Count"].map(Pt=>{var Vt;return jsxRuntimeExports.jsxs("tr",{className:"border-t",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:Pt}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:jsxRuntimeExports.jsxs("select",{className:"w-full border p-2 rounded",value:it[Pt]||"",onChange:Ft=>Ut(Pt,Ft.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select column..."}),Object.keys(rt[0]||{}).map(Ft=>jsxRuntimeExports.jsx("option",{value:Ft,children:Ft},Ft))]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:((Vt=rt[0])==null?void 0:Vt[it[Pt]])||"-"})]},Pt)}),qt.filter(Pt=>!Mt.includes(Pt)).map(Pt=>{var Vt;return jsxRuntimeExports.jsxs("tr",{className:"border-t",children:[jsxRuntimeExports.jsxs("td",{className:"px-4 py-2",children:[Pt," ",jsxRuntimeExports.jsx("span",{className:"text-xs text-blue-500",children:"(Custom)"})]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:jsxRuntimeExports.jsxs("select",{className:"w-full border p-2 rounded",value:it[Pt]||"",onChange:Ft=>Ut(Pt,Ft.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select column..."}),Object.keys(rt[0]||{}).map(Ft=>jsxRuntimeExports.jsx("option",{value:Ft,children:Ft},Ft))]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:((Vt=rt[0])==null?void 0:Vt[it[Pt]])||"-"})]},Pt)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-6",children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"flex items-center",onClick:()=>st(1),children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16,className:"mr-1"})," Back"]}),jsxRuntimeExports.jsxs(Button,{className:"flex items-center",onClick:()=>st(3),disabled:!es.every(Pt=>it[Pt]),children:["Continue ",jsxRuntimeExports.jsx(ArrowRight,{size:16,className:"ml-1"})]})]})]}),tt===3&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Data Preview and Import"}),jsxRuntimeExports.jsx("p",{className:"mb-4",children:"Review your data before importing into the system."}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto mb-6",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsx("tr",{children:es.map(Pt=>jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left",children:Pt},Pt))})}),jsxRuntimeExports.jsx("tbody",{children:rt.slice(0,5).map((Pt,Vt)=>jsxRuntimeExports.jsx("tr",{className:"border-t",children:es.map(Ft=>jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:Pt[it[Ft]]},Ft))},Vt))})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-4 rounded mb-6",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-2 text-blue-800",children:"Import Summary"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm",children:[jsxRuntimeExports.jsxs("li",{className:"mb-1",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Total records:"})," ",rt.length]}),jsxRuntimeExports.jsxs("li",{className:"mb-1",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Validation:"})," Only required fields will be validated"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-6",children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"flex items-center",onClick:()=>st(2),children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16,className:"mr-1"})," Back to Mapping"]}),jsxRuntimeExports.jsxs(Button,{variant:"primary",className:"flex items-center",onClick:ss,disabled:ct,children:[ct?"Processing...":"Import Data"," ",!ct&&jsxRuntimeExports.jsx(ArrowRight,{size:16,className:"ml-1"})]})]})]})]})};var MatchMethod=(et=>(et.EAN="ean",et.MPN="mpn",et.NAME="name",et))(MatchMethod||{});const normalizeColumnName=et=>et.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),autoMapSupplierColumns=async et=>{const _e={"Supplier Name":["supplier_name","supplier","vendor_name","vendor","company_name","company"],EAN:["ean","barcode","upc","product_id","sku","asin","gtin"],MPN:["mpn","manufacturer_part_number","part_number","part_no","manufacturer_number"],"Product Name":["product_name","title","item_name","product_title","product","item"],Cost:["cost","unit_cost","price","supplier_cost","wholesale_price"],MOQ:["moq","minimum_order_quantity","min_order","minimum_qty"],"Lead Time":["lead_time","leadtime","delivery_time","processing_time"],"Payment Terms":["payment_terms","terms","payment","payment_conditions"]},{data:tt,error:st}=await supabase.from("custom_attributes").select("*").eq("for_type","supplier");st?console.error("Error fetching custom attributes:",st):tt&&tt.forEach(it=>{const ot=normalizeColumnName(it.name);_e[it.name]=[ot,...ot.split("_")]});const rt={},nt=new Set;return et.forEach(it=>{const ot=normalizeColumnName(it);for(const[at,lt]of Object.entries(_e))if(lt.includes(ot)&&!nt.has(it)){rt[at]=it,nt.add(it);break}}),et.forEach(it=>{if(nt.has(it))return;const ot=normalizeColumnName(it);for(const[at,lt]of Object.entries(_e))if(!rt[at]&&lt.some(ut=>ot.includes(ut)||ut.includes(ot))){rt[at]=it,nt.add(it);break}}),rt},API_URL=(()=>{const et="http://localhost:3001";return!et.startsWith("http://")&&!et.startsWith("https://")?`http://${et}`:et})();console.log("SupplierImport component loaded");console.log("API_URL configured as:",API_URL);console.log("Environment variable value:",void 0);const REQUIRED_FIELDS=["Supplier Name","Cost"],SupplierImport=()=>{const{customAttributes:et,refreshData:_e}=useAppContext();useImportHistory();const[tt,st]=reactExports.useState(1),[rt,nt]=reactExports.useState([]),[it,ot]=reactExports.useState({}),[at,lt]=reactExports.useState(""),[ct,ut]=reactExports.useState(!1),[dt,ht]=reactExports.useState(!1),[pt,mt]=reactExports.useState(""),[gt,ft]=reactExports.useState({totalRecords:0,successfulImports:0,failedImports:0,suppliersAdded:0}),[xt,yt]=reactExports.useState({useEan:!0,useMpn:!0,useName:!1,priority:[MatchMethod.EAN,MatchMethod.MPN,MatchMethod.NAME]}),[bt,jt]=reactExports.useState({}),[Ct,St]=reactExports.useState({totalMatched:0,byMethod:{}}),[vt,Et]=reactExports.useState(null),[Rt,$t]=reactExports.useState("Processing data..."),[At,Xt]=reactExports.useState(0),[kt,Zt]=reactExports.useState(250),[Jt,Yt]=reactExports.useState(null),[wt,Tt]=reactExports.useState(null),Bt=et.filter(Dt=>Dt.forType==="supplier"&&Dt.required).map(Dt=>Dt.name),Wt=et.filter(Dt=>Dt.forType==="supplier").map(Dt=>Dt.name),Mt=[...REQUIRED_FIELDS,...Bt],qt=()=>{st(1),nt([]),ot({}),lt(""),mt(""),Et(null),ft({totalRecords:0,successfulImports:0,failedImports:0,suppliersAdded:0});const Dt=document.getElementById("supplierFileInput");Dt&&(Dt.value="")},es=()=>{ht(!1),Et(null),Jt&&(window.clearInterval(Jt),Yt(null));const Dt=setTimeout(()=>{},0);for(let Gt=0;Gt<Dt;Gt++)clearTimeout(Gt);ut(!1),Xt(0),$t("Processing data..."),qt()};reactExports.useEffect(()=>{if(vt){console.log(`Setting up polling for job status updates: JobID ${vt}`);const Dt=window.setInterval(()=>{console.log(`Polling job status for job: ${vt}`),Ot(vt).then(Gt=>{console.log(`Job status poll returned: ${Gt}`)}).catch(Gt=>{console.error("Error during job status polling:",Gt)})},1500);return Yt(Dt),()=>{console.log(`Cleaning up job status polling interval: ${Dt}`),window.clearInterval(Dt),Yt(null)}}else Jt&&(console.log(`Clearing existing poll interval: ${Jt}`),window.clearInterval(Jt),Yt(null))},[vt]);const Ot=async Dt=>{var Gt,Pt,Vt;if(Dt&&!dt)try{const Ht=await(await fetch(`${API_URL}/api/upload/status/${Dt}`)).json();if(console.log("Job status response:",Ht),Ht.status==="completed"){if(Jt&&(console.log(`Clearing poll interval ${Jt} because job completed`),window.clearInterval(Jt),Yt(null)),ut(!1),console.log("Job completed with results:",Ht.results),Ht.results){if(ft({totalRecords:Ht.results.totalRecords||0,successfulImports:Ht.results.successfulImports||0,failedImports:Ht.results.failedImports||0,suppliersAdded:Ht.results.suppliersAdded||0}),Ht.results.matchStats){console.log("Match statistics received from server:",Ht.results.matchStats);const is={totalMatched:Ht.results.matchStats.totalMatched||0,byMethod:{[MatchMethod.EAN]:((Gt=Ht.results.matchStats.byMethod)==null?void 0:Gt.ean)||0,[MatchMethod.MPN]:((Pt=Ht.results.matchStats.byMethod)==null?void 0:Pt.mpn)||0,[MatchMethod.NAME]:((Vt=Ht.results.matchStats.byMethod)==null?void 0:Vt.name)||0}};console.log("Processed match stats:",is),St(is)}else console.warn("No match statistics found in results"),St({totalMatched:0,byMethod:{[MatchMethod.EAN]:0,[MatchMethod.MPN]:0,[MatchMethod.NAME]:0}});dt||(Et(null),ht(!0)),_e&&(console.log("Refreshing data after successful import"),_e())}}else Ht.status==="failed"?(Jt&&(window.clearInterval(Jt),Yt(null)),ut(!1),lt(Ht.message||"Import failed")):(Xt(Ht.progress||0),!dt&&Jt&&setTimeout(()=>Ot(Dt),2e3))}catch(Ft){console.error("Error checking job status:",Ft),ut(!1),lt("Failed to check import status"),Jt&&(window.clearInterval(Jt),Yt(null))}},It=async Dt=>{var Vt;if(vt||ct){console.warn("Upload attempted while another import is in progress"),lt("Please wait for the current import to complete before starting a new one.");return}console.log(" SUPPLIER UPLOAD HANDLER TRIGGERED ");let Gt=null;if("dataTransfer"in Dt?(Dt.preventDefault(),Gt=Dt.dataTransfer.files[0]):Gt=((Vt=Dt.target.files)==null?void 0:Vt[0])||null,!Gt){lt("Please select a file");return}if(!Gt.name.endsWith(".csv")){lt("Please upload a CSV file");return}lt(""),mt(Gt.name),Tt(Gt);const Pt=(Gt.size/(1024*1024)).toFixed(2);console.log("File upload detected:",{fileName:Gt.name,fileSize:Gt.size,fileSizeMB:Pt+" MB"});try{console.log("Testing server connection...");const Ft=await fetch(`${API_URL}/api/health`,{method:"GET",headers:{Accept:"application/json"}}).catch(os=>{throw console.error("Server connection test failed:",os),new Error(`Cannot connect to server at ${API_URL}. Is it running?`)});if(console.log("Health check response:",Ft.status),!Ft.ok)throw new Error(`Server responded with error status: ${Ft.status}`);console.log("Server connection successful"),console.log("Parsing CSV file for mapping preview..."),ut(!0),Xt(10),$t("Parsing CSV file...");const Ht=await parseCSV(Gt);if(!validateRequiredFields(Ht)){lt("CSV file appears to be empty or invalid"),ut(!1);return}Xt(30),$t("Auto-mapping columns...");const is=await autoMapSupplierColumns(Object.keys(Ht[0]));ot(is),Xt(100),nt(Ht),st(2),lt(""),ut(!1),console.log("CSV parsed and ready for mapping. Server-side processing will be used for final import.")}catch(Ft){console.error("Error processing file:",Ft),lt(Ft instanceof Error?Ft.message:"Cannot process the file"),ut(!1)}},zt=Dt=>{Dt.preventDefault()},Nt=(Dt,Gt)=>{ot(Pt=>({...Pt,[Dt]:Gt}))},Lt=(Dt,Gt)=>{yt(Pt=>{const Vt={...Pt,[Dt]:Gt};if(!Vt.useEan&&!Vt.useMpn&&!Vt.useName&&(Vt[Dt]=!0),Gt){const Ft=Dt==="useEan"?MatchMethod.EAN:Dt==="useMpn"?MatchMethod.MPN:MatchMethod.NAME;Pt.priority.includes(Ft)||(Vt.priority=[...Pt.priority,Ft])}else{const Ft=Dt==="useEan"?MatchMethod.EAN:Dt==="useMpn"?MatchMethod.MPN:MatchMethod.NAME;Vt.priority=Pt.priority.filter(Ht=>Ht!==Ft)}return Vt})},Kt=(Dt,Gt)=>{yt(Pt=>{const Vt=Pt.priority.indexOf(Dt);if(Vt===-1||Gt==="up"&&Vt===0||Gt==="down"&&Vt===Pt.priority.length-1)return Pt;const Ft=[...Pt.priority],Ht=Gt==="up"?Vt-1:Vt+1;return[Ft[Vt],Ft[Ht]]=[Ft[Ht],Ft[Vt]],{...Pt,priority:Ft}})},Ut=Dt=>{const Gt=parseInt(Dt.target.value);!isNaN(Gt)&&Gt>0&&Zt(Gt)},ss=(Dt,Gt)=>{jt(Pt=>({...Pt,[Dt]:Gt}))},as=async()=>{try{ut(!0),lt(""),$t("Importing supplier data..."),Xt(5);const Dt={};bt.ean&&bt.ean!==""&&(Dt.ean=bt.ean),bt.mpn&&bt.mpn!==""&&(Dt.mpn=bt.mpn),bt.name&&bt.name!==""&&(Dt.name=bt.name);const Gt={fieldMapping:JSON.stringify(it),matchOptions:JSON.stringify(xt),batchSize:kt.toString(),matchColumnMapping:Object.keys(Dt).length>0?JSON.stringify(Dt):void 0};if(wt){const Pt=new FormData;Pt.append("file",wt),Object.entries(Gt).forEach(([Ht,is])=>{is!==void 0&&Pt.append(Ht,is)});const Vt=await fetch(`${API_URL}/api/upload/supplier`,{method:"POST",body:Pt});if(!Vt.ok){const Ht=await Vt.json();throw new Error(Ht.error||"Failed to upload file")}const Ft=await Vt.json();if(Ft.jobId){Et(Ft.jobId);const Ht=window.setInterval(()=>Ot(Ft.jobId),2e3);Yt(Ht)}else throw new Error("No job ID returned from server")}else throw new Error("No file reference available for upload")}catch(Dt){console.error("Import error:",Dt),lt(`Import failed: ${Dt instanceof Error?Dt.message:"Unknown error"}`),ut(!1)}};return jsxRuntimeExports.jsxs("div",{className:"container mx-auto p-4",children:[ct&&jsxRuntimeExports.jsx(LoadingOverlay,{message:Rt,progress:At}),jsxRuntimeExports.jsx(SuccessModal,{isOpen:dt,onClose:es,title:"Supplier Import Completed",message:"Your supplier data has been successfully imported into the system.",details:[{label:"Total Records",value:gt.totalRecords},{label:"Successfully Imported",value:gt.successfulImports},{label:"Failed",value:gt.failedImports},{label:"New Suppliers Added",value:gt.suppliersAdded},{label:"Matched by EAN",value:Ct.byMethod[MatchMethod.EAN]||0,matchMethod:MatchMethod.EAN},{label:"Matched by MPN",value:Ct.byMethod[MatchMethod.MPN]||0,matchMethod:MatchMethod.MPN},{label:"Matched by Name",value:Ct.byMethod[MatchMethod.NAME]||0,matchMethod:MatchMethod.NAME}]}),jsxRuntimeExports.jsxs("div",{className:"steps flex mb-6",children:[jsxRuntimeExports.jsx("div",{className:`step flex-1 p-3 text-center mr-1 rounded ${tt===1?"step-active bg-blue-500 text-white":"bg-gray-200"}`,children:"1. Upload File"}),jsxRuntimeExports.jsx("div",{className:`step flex-1 p-3 text-center mr-1 rounded ${tt===2?"step-active bg-blue-500 text-white":"bg-gray-200"}`,children:"2. Map Fields"}),jsxRuntimeExports.jsx("div",{className:`step flex-1 p-3 text-center rounded ${tt===3?"step-active bg-blue-500 text-white":"bg-gray-200"}`,children:"3. Configure Product Matching"})]}),at&&jsxRuntimeExports.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:at}),tt===1&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Import Supplier Data"}),jsxRuntimeExports.jsx("p",{className:"mb-4",children:"Upload a CSV file containing your supplier cost data."}),jsxRuntimeExports.jsxs("div",{className:"dropzone border-2 border-dashed border-gray-300 rounded-lg p-10 text-center cursor-pointer hover:border-blue-500 transition-colors",onDrop:It,onDragOver:zt,onClick:()=>{var Dt;return(Dt=document.getElementById("supplierFileInput"))==null?void 0:Dt.click()},children:[jsxRuntimeExports.jsx("input",{type:"file",id:"supplierFileInput",className:"hidden",accept:".csv",onChange:It}),jsxRuntimeExports.jsx(UploadCloud,{className:"mx-auto h-12 w-12 text-gray-400 mb-3"}),jsxRuntimeExports.jsxs("p",{children:["Drag and drop your CSV file here, or ",jsxRuntimeExports.jsx("span",{className:"text-blue-500",children:"browse"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Supported format: .csv"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500",children:"Required fields: "}),jsxRuntimeExports.jsx("span",{className:"text-sm text-blue-600",children:REQUIRED_FIELDS.join(", ")})]}),jsxRuntimeExports.jsxs(Button,{className:"flex items-center",children:[jsxRuntimeExports.jsx(Download,{size:16,className:"mr-1"})," Download Template"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 bg-blue-50 p-3 rounded-md border border-blue-100 flex items-start",children:[jsxRuntimeExports.jsx(Info,{size:18,className:"text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-blue-800",children:[jsxRuntimeExports.jsx("p",{className:"font-medium mb-1",children:"Data Validation Note:"}),jsxRuntimeExports.jsx("p",{children:"We only validate required fields during import. Non-required fields can be left empty or contain any value."})]})]})]}),tt===2&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Map CSV Fields to System Fields"}),jsxRuntimeExports.jsx("p",{className:"mb-4",children:"Review and adjust the automatic field mapping if needed."}),jsxRuntimeExports.jsxs("table",{className:"w-full mb-4",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left",children:"System Field"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left",children:"Your CSV Column"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left",children:"Sample Data"})]})}),jsxRuntimeExports.jsxs("tbody",{children:[REQUIRED_FIELDS.map(Dt=>{var Gt;return jsxRuntimeExports.jsxs("tr",{className:"border-t",children:[jsxRuntimeExports.jsxs("td",{className:"px-4 py-2",children:[jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})," ",Dt]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:jsxRuntimeExports.jsxs("select",{className:"w-full border p-2 rounded",value:it[Dt]||"",onChange:Pt=>Nt(Dt,Pt.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select column..."}),Object.keys(rt[0]||{}).map(Pt=>jsxRuntimeExports.jsx("option",{value:Pt,children:Pt},Pt))]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:((Gt=rt[0])==null?void 0:Gt[it[Dt]])||"-"})]},Dt)}),Bt.map(Dt=>{var Gt;return jsxRuntimeExports.jsxs("tr",{className:"border-t",children:[jsxRuntimeExports.jsxs("td",{className:"px-4 py-2",children:[jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})," ",Dt," ",jsxRuntimeExports.jsx("span",{className:"text-xs text-blue-500",children:"(Custom)"})]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:jsxRuntimeExports.jsxs("select",{className:"w-full border p-2 rounded",value:it[Dt]||"",onChange:Pt=>Nt(Dt,Pt.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select column..."}),Object.keys(rt[0]||{}).map(Pt=>jsxRuntimeExports.jsx("option",{value:Pt,children:Pt},Pt))]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:((Gt=rt[0])==null?void 0:Gt[it[Dt]])||"-"})]},Dt)}),jsxRuntimeExports.jsx("tr",{className:"border-t bg-gray-50",children:jsxRuntimeExports.jsx("td",{colSpan:3,className:"px-4 py-2 font-medium",children:"Optional Fields"})}),["MOQ","Lead Time","Payment Terms"].map(Dt=>{var Gt;return jsxRuntimeExports.jsxs("tr",{className:"border-t",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:Dt}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:jsxRuntimeExports.jsxs("select",{className:"w-full border p-2 rounded",value:it[Dt]||"",onChange:Pt=>Nt(Dt,Pt.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select column..."}),Object.keys(rt[0]||{}).map(Pt=>jsxRuntimeExports.jsx("option",{value:Pt,children:Pt},Pt))]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:((Gt=rt[0])==null?void 0:Gt[it[Dt]])||"-"})]},Dt)}),Wt.filter(Dt=>!Bt.includes(Dt)).map(Dt=>{var Gt;return jsxRuntimeExports.jsxs("tr",{className:"border-t",children:[jsxRuntimeExports.jsxs("td",{className:"px-4 py-2",children:[Dt," ",jsxRuntimeExports.jsx("span",{className:"text-xs text-blue-500",children:"(Custom)"})]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:jsxRuntimeExports.jsxs("select",{className:"w-full border p-2 rounded",value:it[Dt]||"",onChange:Pt=>Nt(Dt,Pt.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select column..."}),Object.keys(rt[0]||{}).map(Pt=>jsxRuntimeExports.jsx("option",{value:Pt,children:Pt},Pt))]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:((Gt=rt[0])==null?void 0:Gt[it[Dt]])||"-"})]},Dt)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-6",children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"flex items-center",onClick:()=>st(1),children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16,className:"mr-1"})," Back"]}),jsxRuntimeExports.jsxs(Button,{className:"flex items-center",onClick:()=>st(3),disabled:!Mt.every(Dt=>it[Dt]),children:["Continue ",jsxRuntimeExports.jsx(ArrowRight,{size:16,className:"ml-1"})]})]})]}),tt===3&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Configure Product Matching"}),jsxRuntimeExports.jsx("p",{className:"mb-4",children:"Choose how supplier products will be matched with existing products in the system."}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-4 mb-6 rounded-md border border-blue-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start mb-2",children:[jsxRuntimeExports.jsx(Info,{size:18,className:"text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-blue-800",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"About Product Matching"}),jsxRuntimeExports.jsx("p",{children:"Products will be matched in order of priority based on the methods you select below."})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 pl-7",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-1",children:[jsxRuntimeExports.jsx("div",{className:"w-8 text-center",children:jsxRuntimeExports.jsx("span",{className:"inline-block w-5 h-5 bg-green-500 text-white rounded-full text-xs flex items-center justify-center",children:"1"})}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-sm font-medium",children:"Exact matches with high confidence"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-1",children:[jsxRuntimeExports.jsx("div",{className:"w-8 text-center",children:jsxRuntimeExports.jsx("span",{className:"inline-block w-5 h-5 bg-yellow-500 text-white rounded-full text-xs flex items-center justify-center",children:"2"})}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-sm font-medium",children:"Good matches with medium confidence"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-8 text-center",children:jsxRuntimeExports.jsx("span",{className:"inline-block w-5 h-5 bg-red-500 text-white rounded-full text-xs flex items-center justify-center",children:"3"})}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-sm font-medium",children:"Name-based matches with low confidence"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"border rounded-md p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-3",children:"Available Matching Methods"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"useEan",className:"h-4 w-4 text-blue-600",checked:xt.useEan,onChange:Dt=>Lt("useEan",Dt.target.checked)}),jsxRuntimeExports.jsxs("div",{className:"ml-3",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"useEan",className:"font-medium",children:["EAN/UPC Matching",jsxRuntimeExports.jsx("span",{className:"ml-2 inline-block px-2 py-0.5 bg-green-100 text-green-800 text-xs rounded",children:"High Confidence"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:["Match using column: ",jsxRuntimeExports.jsx("span",{className:"font-mono",children:it.EAN||"Not mapped"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-blue-600 block mb-1",children:"Select custom column for EAN matching:"}),jsxRuntimeExports.jsxs("select",{className:"w-full border p-1 rounded text-sm",value:bt.ean||it.EAN||"",onChange:Dt=>ss("ean",Dt.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Use default mapping"}),Object.keys(rt[0]||{}).map(Dt=>jsxRuntimeExports.jsx("option",{value:Dt,children:Dt},Dt))]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"useMpn",className:"h-4 w-4 text-blue-600",checked:xt.useMpn,onChange:Dt=>Lt("useMpn",Dt.target.checked)}),jsxRuntimeExports.jsxs("div",{className:"ml-3",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"useMpn",className:"font-medium",children:["MPN Matching",jsxRuntimeExports.jsx("span",{className:"ml-2 inline-block px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded",children:"Medium Confidence"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:["Match using column: ",jsxRuntimeExports.jsx("span",{className:"font-mono",children:it.MPN||"Not mapped"}),!it.MPN&&jsxRuntimeExports.jsxs("span",{className:"text-orange-500 ml-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{size:14,className:"inline mr-1"}),"No column mapped"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-blue-600 block mb-1",children:"Select custom column for MPN matching:"}),jsxRuntimeExports.jsxs("select",{className:"w-full border p-1 rounded text-sm",value:bt.mpn||it.MPN||"",onChange:Dt=>ss("mpn",Dt.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Use default mapping"}),Object.keys(rt[0]||{}).map(Dt=>jsxRuntimeExports.jsx("option",{value:Dt,children:Dt},Dt))]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"useName",className:"h-4 w-4 text-blue-600",checked:xt.useName,onChange:Dt=>Lt("useName",Dt.target.checked)}),jsxRuntimeExports.jsxs("div",{className:"ml-3",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"useName",className:"font-medium",children:["Product Name Matching",jsxRuntimeExports.jsx("span",{className:"ml-2 inline-block px-2 py-0.5 bg-red-100 text-red-800 text-xs rounded",children:"Low Confidence"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:["Match using column: ",jsxRuntimeExports.jsx("span",{className:"font-mono",children:it["Product Name"]||"Not mapped"}),!it["Product Name"]&&jsxRuntimeExports.jsxs("span",{className:"text-orange-500 ml-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{size:14,className:"inline mr-1"}),"No column mapped"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-blue-600 block mb-1",children:"Select custom column for Name matching:"}),jsxRuntimeExports.jsxs("select",{className:"w-full border p-1 rounded text-sm",value:bt.name||it["Product Name"]||"",onChange:Dt=>ss("name",Dt.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Use default mapping"}),Object.keys(rt[0]||{}).map(Dt=>jsxRuntimeExports.jsx("option",{value:Dt,children:Dt},Dt))]})]})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"border rounded-md p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-3",children:"Matching Priority"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Drag to reorder how matching methods will be applied. Products will be matched using the first method that finds a match."}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:xt.priority.map((Dt,Gt)=>{if(Dt===MatchMethod.EAN&&!xt.useEan||Dt===MatchMethod.MPN&&!xt.useMpn||Dt===MatchMethod.NAME&&!xt.useName)return null;let Pt="",Vt="",Ft="";return Dt===MatchMethod.EAN?(Pt="EAN/UPC Matching",Vt="High",Ft="bg-green-100 text-green-800"):Dt===MatchMethod.MPN?(Pt="MPN Matching",Vt="Medium",Ft="bg-yellow-100 text-yellow-800"):(Pt="Product Name Matching",Vt="Low",Ft="bg-red-100 text-red-800"),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 border rounded",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"inline-block w-5 h-5 bg-gray-700 text-white rounded-full text-xs flex items-center justify-center mr-2",children:Gt+1}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:Pt}),jsxRuntimeExports.jsxs("span",{className:`ml-2 text-xs px-2 py-0.5 rounded ${Ft}`,children:[Vt," Confidence"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-1",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Kt(Dt,"up"),disabled:Gt===0,className:`p-1 rounded hover:bg-gray-200 ${Gt===0?"opacity-50 cursor-not-allowed":""}`,children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Kt(Dt,"down"),disabled:Gt===xt.priority.filter(Ht=>Ht===MatchMethod.EAN&&xt.useEan||Ht===MatchMethod.MPN&&xt.useMpn||Ht===MatchMethod.NAME&&xt.useName).length-1,className:`p-1 rounded hover:bg-gray-200 ${Gt===xt.priority.filter(Ht=>Ht===MatchMethod.EAN&&xt.useEan||Ht===MatchMethod.MPN&&xt.useMpn||Ht===MatchMethod.NAME&&xt.useName).length-1?"opacity-50 cursor-not-allowed":""}`,children:""})]})]},Dt)})})]})]}),jsxRuntimeExports.jsxs("div",{className:"border rounded-md p-4 mt-6",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-3",children:"Performance Settings for Large Files"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-3",children:[jsxRuntimeExports.jsx("label",{htmlFor:"batchSize",className:"mr-2 text-sm",children:"Batch Size:"}),jsxRuntimeExports.jsx("input",{type:"number",id:"batchSize",className:"w-24 border p-2 rounded",min:"50",max:"1000",value:kt,onChange:Ut}),jsxRuntimeExports.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["Adjust for file size and network stability. ",jsxRuntimeExports.jsx("strong",{children:"Recommended:"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:"Small Files (<5,000 rows)"}),jsxRuntimeExports.jsx("div",{children:"Batch Size: 100-200"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600",children:"Fast processing, low memory"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:"Medium Files (5,000-30,000 rows)"}),jsxRuntimeExports.jsx("div",{children:"Batch Size: 200-400"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600",children:"Balanced performance"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-orange-50 p-2 rounded border border-orange-200",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:"Large Files (>30,000 rows)"}),jsxRuntimeExports.jsx("div",{children:"Batch Size: 300-800"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-orange-600",children:"More memory needed"})]})]}),rt.length>3e4&&jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 p-3 rounded-md border border-yellow-200 flex items-start mb-3",children:[jsxRuntimeExports.jsx(AlertTriangle,{size:18,className:"text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"font-medium text-yellow-800",children:["Large File Detected (",rt.length.toLocaleString()," rows)"]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-yellow-700",children:"Processing may take several minutes and require significant memory."})]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 mt-2",children:jsxRuntimeExports.jsx("p",{className:"mb-1",children:"Higher batch sizes can significantly improve import speed but may cause timeouts on slower systems."})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-6",children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"flex items-center",onClick:()=>st(2),children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16,className:"mr-1"})," Back"]}),jsxRuntimeExports.jsxs(Button,{variant:"primary",className:"flex items-center",onClick:as,disabled:ct,children:[ct?"Processing...":"Import Data"," ",!ct&&jsxRuntimeExports.jsx(ArrowRight,{size:16,className:"ml-1"})]})]})]})]})},Table=({headers:et,children:_e,className:tt=""})=>jsxRuntimeExports.jsx("div",{className:`overflow-x-auto ${tt}`,children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsx("tr",{children:et.map((st,rt)=>jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 bg-gray-50 border-b",children:st},rt))})}),jsxRuntimeExports.jsx("tbody",{children:_e})]})}),ImportHistory=()=>{const{importHistory:et,loading:_e,error:tt,deleteImportRecord:st,refreshHistory:rt}=useImportHistory(),[nt,it]=reactExports.useState(!1),[ot,at]=reactExports.useState(!1),lt=async()=>{try{at(!0),await rt()}catch(pt){console.error("Failed to refresh import history:",pt)}finally{at(!1)}};if(_e||ot)return jsxRuntimeExports.jsx(LoadingOverlay,{message:ot?"Refreshing import history...":"Loading import history..."});const ct=async pt=>{if(window.confirm("Are you sure you want to delete this import record?"))try{it(!0),await st(pt)}catch(mt){console.error("Failed to delete import record:",mt),alert("Failed to delete import record")}finally{it(!1)}},ut=pt=>{switch(pt){case"Completed":return jsxRuntimeExports.jsx(CheckCircle,{size:16,className:"mr-1 text-green-600"});case"Failed":return jsxRuntimeExports.jsx(AlertCircle,{size:16,className:"mr-1 text-red-600"});case"In Progress":return jsxRuntimeExports.jsx(Clock,{size:16,className:"mr-1 text-blue-600"});default:return null}},dt=pt=>{switch(pt){case"Completed":return"text-green-600";case"Failed":return"text-red-600";case"In Progress":return"text-blue-600";default:return""}},ht=()=>tt?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Database,{className:"h-12 w-12 mx-auto text-gray-400 mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4",children:"Error connecting to database. The import_history table may not exist."}),jsxRuntimeExports.jsxs("p",{className:"text-gray-500 text-sm mb-4",children:["Error: ",tt.message]}),jsxRuntimeExports.jsx(Button,{onClick:lt,className:"mx-auto",children:"Retry"})]}):jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(Database,{className:"h-12 w-12 mx-auto text-gray-400 mb-3"}),jsxRuntimeExports.jsx("p",{children:"No import history available"})]});return jsxRuntimeExports.jsxs("div",{children:[nt&&jsxRuntimeExports.jsx(LoadingOverlay,{message:"Deleting record..."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Import History"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"View all previous data imports and their status."})]}),jsxRuntimeExports.jsxs(Button,{className:"flex items-center",onClick:lt,children:[jsxRuntimeExports.jsx(Clock,{size:16,className:"mr-1"})," Refresh"]})]}),!et||et.length===0?ht():jsxRuntimeExports.jsx(Table,{headers:["Date","Type","File Name","Status","Records","Success","Failed","Actions"],children:et.map(pt=>jsxRuntimeExports.jsxs("tr",{className:"border-t",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:new Date(pt.created_at).toLocaleString()}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:pt.type}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:pt.file_name}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:jsxRuntimeExports.jsxs("span",{className:`flex items-center ${dt(pt.status)}`,children:[ut(pt.status)," ",pt.status]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:pt.total_records.toLocaleString()}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:pt.successful_records.toLocaleString()}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:pt.failed_records.toLocaleString()}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-2",children:[pt.error_message&&jsxRuntimeExports.jsxs("button",{className:"text-blue-600 hover:underline mr-2 flex items-center",onClick:()=>alert(`Error: ${pt.error_message}`),children:[jsxRuntimeExports.jsx(Eye,{size:16,className:"mr-1"})," View Error"]}),jsxRuntimeExports.jsxs("button",{className:"text-red-600 hover:underline flex items-center",onClick:()=>ct(pt.id),children:[jsxRuntimeExports.jsx(Trash2,{size:16,className:"mr-1"})," Delete"]})]})]},pt.id))})]})},ImportData=()=>{const et=[{id:"amazon-import",label:"Amazon Data Import",content:jsxRuntimeExports.jsx(AmazonImport,{})},{id:"supplier-import",label:"Supplier Data Import",content:jsxRuntimeExports.jsx(SupplierImport,{})},{id:"import-history",label:"Import History",content:jsxRuntimeExports.jsx(ImportHistory,{})}];return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Import Data"}),jsxRuntimeExports.jsx(Tabs,{tabs:et,defaultActiveTab:"amazon-import"})]})},Card=({children:et,className:_e=""})=>jsxRuntimeExports.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 ${_e}`,children:et}),ProductMatchBadge=({matchMethod:et,className:_e=""})=>{let tt="",st="",rt="",nt=null;switch(et){case MatchMethod.EAN:tt="EAN",st="bg-green-100 text-green-800 border-green-200",rt="Matched by EAN/UPC (High Confidence)";break;case MatchMethod.MPN:tt="MPN",st="bg-yellow-100 text-yellow-800 border-yellow-200",rt="Matched by Manufacturer Part Number (Medium Confidence)";break;case MatchMethod.NAME:tt="Name",st="bg-red-100 text-red-800 border-red-200",rt="Matched by Product Name (Low Confidence) - Please verify this match",nt=jsxRuntimeExports.jsx(AlertTriangle,{size:12,className:"inline-block ml-1"});break;default:tt="Unknown",st="bg-gray-100 text-gray-800 border-gray-200",rt="Unknown match method"}return jsxRuntimeExports.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium border ${st} ${_e}`,title:rt,children:[tt,nt]})},ProductRow=({product:et})=>{const{getSuppliersForProduct:_e,getBestSupplierForProduct:tt}=useAppContext(),st=_e(et.id),rt=tt(et.id),nt=(at,lt,ct)=>{if(at<=0||!lt)return 0;const ut=at-lt-ct;return Math.round(ut/at*100)},it=rt!=null&&rt.cost?`$${rt.cost.toFixed(2)}`:"-",ot=rt!=null&&rt.cost?nt(et.salePrice,rt.cost,et.amazonFee):0;return jsxRuntimeExports.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3 font-medium",children:et.title}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:et.ean}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:et.brand}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-3",children:["$",et.salePrice.toFixed(2)]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:et.unitsSold.toLocaleString()}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-3",children:["$",et.amazonFee.toFixed(2)]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-1",children:[jsxRuntimeExports.jsxs("span",{className:"supplier-badge bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-semibold",children:[st.length," supplier",st.length!==1?"s":""]}),(rt==null?void 0:rt.match_method)&&jsxRuntimeExports.jsx(ProductMatchBadge,{matchMethod:rt.match_method})]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:it}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-3",children:[jsxRuntimeExports.jsxs("div",{className:"font-medium",children:[ot,"%"]}),jsxRuntimeExports.jsx("div",{className:"profit-indicator h-2 bg-gradient-to-r from-red-500 via-yellow-500 to-green-500 rounded",children:jsxRuntimeExports.jsx("div",{className:"profit-marker w-2.5 h-2.5 bg-blue-600 rounded-full relative -top-[3px]",style:{marginLeft:`${Math.min(Math.max(ot,0),100)}%`}})})]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsxs(Link$1,{to:`/products/${et.id}`,className:"text-blue-600 hover:underline flex items-center",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:"mr-1"})," View"]})})]})},Products=()=>{const{products:et,loading:_e,error:tt,refreshData:st,totalProductCount:rt}=useAppContext(),[nt,it]=reactExports.useState(""),[ot,at]=reactExports.useState(1),[lt,ct]=reactExports.useState(""),[ut,dt]=reactExports.useState(""),[ht,pt]=reactExports.useState({min:0,max:1e3}),[mt,gt]=reactExports.useState(null),[ft,xt]=reactExports.useState(""),[yt,bt]=reactExports.useState("asc"),[jt,Ct]=reactExports.useState(!1),[St,vt]=reactExports.useState(!1),[Et,Rt]=reactExports.useState(null),[$t,At]=reactExports.useState("Loading products from database..."),Xt=10;reactExports.useEffect(()=>{Ot()},[]);const kt=reactExports.useMemo(()=>{const Nt=new Set(et.map(Lt=>Lt.brand));return Array.from(Nt).sort()},[et]),Zt=reactExports.useMemo(()=>{const Nt=new Set(et.map(Lt=>Lt.category).filter(Lt=>Lt!=null));return Array.from(Nt).sort()},[et]),Jt=reactExports.useMemo(()=>{if(et.length===0)return{min:0,max:1e3};const Nt=et.map(Lt=>Lt.salePrice);return{min:Math.floor(Math.min(...Nt)),max:Math.ceil(Math.max(...Nt))}},[et]);reactExports.useEffect(()=>{et.length>0&&pt(Jt)},[Jt]),reactExports.useEffect(()=>{const Nt=console.log;return console.log=function(...Lt){Nt.apply(console,Lt);const Kt=Lt.join(" ");(Kt.includes("Fetching batch")||Kt.includes("Fetched"))&&At(Kt)},()=>{console.log=Nt}},[]);const Yt=reactExports.useMemo(()=>et.filter(Nt=>{const Lt=Nt.title.toLowerCase().includes(nt.toLowerCase())||Nt.ean.includes(nt)||Nt.mpn&&Nt.mpn.toLowerCase().includes(nt.toLowerCase())||Nt.brand.toLowerCase().includes(nt.toLowerCase()),Kt=lt?Nt.brand===lt:!0,Ut=ut?Nt.category===ut:!0,ss=Nt.salePrice>=ht.min&&Nt.salePrice<=ht.max,{getSuppliersForProduct:as}=useAppContext(),Dt=as(Nt.id),Gt=mt===null?!0:mt?Dt.length>0:Dt.length===0;return Lt&&Kt&&Ut&&ss&&Gt}),[et,nt,lt,ut,ht,mt]),wt=reactExports.useMemo(()=>ft?[...Yt].sort((Nt,Lt)=>{let Kt=0;const{getSuppliersForProduct:Ut,getBestSupplierForProduct:ss}=useAppContext();switch(ft){case"price":Kt=Nt.salePrice-Lt.salePrice;break;case"units":Kt=Nt.unitsSold-Lt.unitsSold;break;case"profit":{const as=ss(Nt.id),Dt=ss(Lt.id),Gt=as?Nt.salePrice-Nt.amazonFee-as.cost:0,Pt=Dt?Lt.salePrice-Lt.amazonFee-Dt.cost:0;Kt=Gt-Pt;break}case"brand":Kt=Nt.brand.localeCompare(Lt.brand);break}return yt==="asc"?Kt:-Kt}):Yt,[Yt,ft,yt]),Tt=Math.ceil(wt.length/Xt),Bt=(ot-1)*Xt,Wt=wt.slice(Bt,Bt+Xt),Mt=Nt=>{Nt.preventDefault(),at(1)},qt=Nt=>{Nt>0&&Nt<=Tt&&at(Nt)},es=Nt=>{ft===Nt?bt(yt==="asc"?"desc":"asc"):(xt(Nt),bt("asc"))},Ot=async()=>{try{vt(!0),At("Starting to refresh products from database..."),await st(),Rt(new Date)}catch(Nt){console.error("Error refreshing data:",Nt)}finally{vt(!1)}},It=()=>{ct(""),dt(""),it(""),pt(Jt),gt(null),xt(""),bt("asc"),at(1)},zt=()=>{let Nt=0;return lt&&Nt++,ut&&Nt++,(ht.min>Jt.min||ht.max<Jt.max)&&Nt++,mt!==null&&Nt++,ft&&Nt++,Nt};return _e||St?jsxRuntimeExports.jsx(LoadingOverlay,{message:St?"Refreshing products from database...":$t}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-bold",children:["Products (",et.length,")"]}),rt>0&&rt>et.length&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:["Displaying ",et.length," of ",rt," total products in database"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[Et&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500",children:["Last refreshed: ",Et.toLocaleTimeString()]}),jsxRuntimeExports.jsxs(Button,{onClick:Ot,className:"flex items-center text-sm",children:[jsxRuntimeExports.jsx(RefreshCcw,{size:14,className:"mr-1.5"})," Refresh Data"]})]})]}),tt&&jsxRuntimeExports.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 flex items-center",children:[jsxRuntimeExports.jsx(AlertTriangle,{size:18,className:"mr-2"}),"Error loading products: ",tt.message,jsxRuntimeExports.jsx(Button,{onClick:Ot,variant:"secondary",className:"ml-auto text-xs",children:"Try Again"})]}),et.length===0&&!_e&&!tt&&jsxRuntimeExports.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-6 py-4 rounded mb-4 flex items-start",children:[jsxRuntimeExports.jsx(Database,{size:20,className:"mr-3 mt-1"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"No products found in database"}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1",children:"Try importing products from the Import menu or create products manually."})]})]}),jsxRuntimeExports.jsxs(Card,{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsxs("form",{onSubmit:Mt,className:"flex w-full md:w-auto relative",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search products by name, EAN, MPN, or brand...",className:"border pl-9 pr-4 py-2 rounded w-full md:w-80",value:nt,onChange:Nt=>it(Nt.target.value)}),jsxRuntimeExports.jsx(Search,{size:16,className:"absolute left-3 top-2.5 text-gray-400"}),nt&&jsxRuntimeExports.jsx("button",{type:"button",className:"absolute right-10 top-2.5 text-gray-400 hover:text-gray-700",onClick:()=>it(""),children:jsxRuntimeExports.jsx(X$1,{size:16})}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"ml-2 text-sm",children:"Search"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mr-2 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 mr-1",children:"Total:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:Yt.length}),zt()>0&&jsxRuntimeExports.jsxs("span",{className:"ml-1 text-blue-600",children:["(",zt()," filter",zt()!==1?"s":"",")"]})]}),jsxRuntimeExports.jsxs(Button,{variant:jt?"primary":"secondary",className:"flex items-center text-sm",onClick:()=>Ct(!jt),children:[jsxRuntimeExports.jsx(Filter,{size:14,className:"mr-1.5"}),jt?"Hide Filters":"Show Filters"]})]})]}),jt&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-gray-50 rounded-md mb-3 border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),jsxRuntimeExports.jsxs("select",{className:"border p-2 rounded w-full bg-white",value:lt,onChange:Nt=>ct(Nt.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"All Brands"}),kt.map(Nt=>jsxRuntimeExports.jsx("option",{value:Nt,children:Nt},Nt))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),jsxRuntimeExports.jsxs("select",{className:"border p-2 rounded w-full bg-white",value:ut,onChange:Nt=>dt(Nt.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"All Categories"}),Zt.map(Nt=>jsxRuntimeExports.jsx("option",{value:Nt,children:Nt},Nt))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price Range ($",ht.min," - $",ht.max,")"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"range",min:Jt.min,max:Jt.max,value:ht.min,onChange:Nt=>pt({...ht,min:Number(Nt.target.value)}),className:"w-full"}),jsxRuntimeExports.jsx("input",{type:"range",min:Jt.min,max:Jt.max,value:ht.max,onChange:Nt=>pt({...ht,max:Number(Nt.target.value)}),className:"w-full"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Status"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",checked:mt===null,onChange:()=>gt(null),className:"mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"All Products"})]}),jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",checked:mt===!0,onChange:()=>gt(!0),className:"mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"With Suppliers"})]}),jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",checked:mt===!1,onChange:()=>gt(!1),className:"mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Without Suppliers"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-200",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:"Sort By:"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:ft==="brand"?"primary":"secondary",className:"flex items-center text-xs px-2 py-1",onClick:()=>es("brand"),children:[jsxRuntimeExports.jsx(ArrowDownAZ,{size:14,className:"mr-1"}),"Brand",ft==="brand"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:yt==="asc"?"":""})]}),jsxRuntimeExports.jsxs(Button,{variant:ft==="price"?"primary":"secondary",className:"flex items-center text-xs px-2 py-1",onClick:()=>es("price"),children:[jsxRuntimeExports.jsx(DollarSign,{size:14,className:"mr-1"}),"Price",ft==="price"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:yt==="asc"?"":""})]}),jsxRuntimeExports.jsxs(Button,{variant:ft==="units"?"primary":"secondary",className:"flex items-center text-xs px-2 py-1",onClick:()=>es("units"),children:[jsxRuntimeExports.jsx(ArrowDownUp,{size:14,className:"mr-1"}),"Units Sold",ft==="units"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:yt==="asc"?"":""})]}),jsxRuntimeExports.jsxs(Button,{variant:ft==="profit"?"primary":"secondary",className:"flex items-center text-xs px-2 py-1",onClick:()=>es("profit"),children:[jsxRuntimeExports.jsx(Briefcase,{size:14,className:"mr-1"}),"Profit",ft==="profit"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:yt==="asc"?"":""})]}),zt()>0&&jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"flex items-center text-xs px-2 py-1 ml-2 border-red-300 text-red-700 hover:bg-red-50",onClick:It,children:[jsxRuntimeExports.jsx(X$1,{size:14,className:"mr-1"})," Clear All"]})]})]})]}),Yt.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded",children:[jsxRuntimeExports.jsx("div",{className:"font-medium mb-1",children:"No products found matching your criteria"}),jsxRuntimeExports.jsx("div",{className:"text-sm",children:"Try adjusting your filters or search term"}),zt()>0&&jsxRuntimeExports.jsx(Button,{variant:"secondary",className:"mt-3 text-sm",onClick:It,children:"Clear All Filters"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Table,{headers:["Product","EAN","Brand","Sale Price","Units Sold","Amazon Fee","Suppliers","Best Cost","Profit Margin","Actions"],children:Wt.map(Nt=>jsxRuntimeExports.jsx(ProductRow,{product:Nt},Nt.id))}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-3 mt-4 pt-3 border-t border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 order-2 sm:order-1",children:["Showing ",Yt.length>0?Bt+1:0,"-",Math.min(Bt+Xt,Yt.length)," of ",Yt.length," products"]}),Tt>1&&jsxRuntimeExports.jsxs("div",{className:"flex order-1 sm:order-2",children:[jsxRuntimeExports.jsx("button",{className:"border p-1.5 rounded-l hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",onClick:()=>qt(ot-1),disabled:ot===1,children:jsxRuntimeExports.jsx(ChevronLeft,{size:16})}),Array.from({length:Math.min(5,Tt)},(Nt,Lt)=>{let Kt=[];if(Tt<=5?Kt=Array.from({length:Tt},(Ut,ss)=>ss+1):ot<=3?Kt=[1,2,3,4,"...",Tt]:ot>=Tt-2?Kt=[1,"...",Tt-3,Tt-2,Tt-1,Tt]:Kt=[1,"...",ot-1,ot,ot+1,"...",Tt],Lt<Kt.length){const Ut=Kt[Lt];return Ut==="..."?jsxRuntimeExports.jsx("span",{className:"p-1.5 text-sm",children:"..."},`ellipsis-${Lt}`):jsxRuntimeExports.jsx("button",{className:`border p-1.5 min-w-[32px] ${ot===Ut?"bg-blue-500 text-white border-blue-500":"hover:bg-gray-100"} ${Lt===0?"rounded-l":""} ${Lt===Kt.length-1?"rounded-r":""}`,onClick:()=>qt(Number(Ut)),children:Ut},`page-${Ut}`)}return null}),jsxRuntimeExports.jsx("button",{className:"border p-1.5 rounded-r hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",onClick:()=>qt(ot+1),disabled:ot===Tt,children:jsxRuntimeExports.jsx(ChevronRight,{size:16})})]})]})]})]})]})},SupplierModal=({isOpen:et,onClose:_e,supplier:tt,onUpdate:st})=>{const{addSupplier:rt,updateSupplier:nt}=useAppContext(),[it,ot]=reactExports.useState(""),[at,lt]=reactExports.useState(!1),[ct,ut]=reactExports.useState("");reactExports.useEffect(()=>{ot(tt?tt.name:""),ut("")},[tt]);const dt=async ht=>{if(ht.preventDefault(),ut(""),!it.trim()){ut("Supplier name is required");return}try{lt(!0),tt?(await nt(tt.id,{name:it}),st&&await st()):await rt({name:it}),_e()}catch(pt){ut(pt instanceof Error?pt.message:"An error occurred")}finally{lt(!1)}};return et?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black opacity-50"}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center border-b p-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:tt?"Edit Supplier":"Add New Supplier"}),jsxRuntimeExports.jsx("button",{onClick:_e,className:"text-gray-500 hover:text-gray-700",children:jsxRuntimeExports.jsx(X$1,{size:20})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:dt,className:"p-4",children:[ct&&jsxRuntimeExports.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:ct}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-2",htmlFor:"name",children:"Supplier Name"}),jsxRuntimeExports.jsx("input",{id:"name",type:"text",className:"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",value:it,onChange:ht=>ot(ht.target.value),placeholder:"Enter supplier name"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"secondary",onClick:_e,disabled:at,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:at,children:at?tt?"Updating...":"Adding...":tt?"Update Supplier":"Add Supplier"})]})]})]})]}):null},Suppliers=()=>{const{suppliers:et,supplierProducts:_e,loading:tt,refreshData:st,deleteSupplier:rt}=useAppContext(),[nt,it]=reactExports.useState(""),[ot,at]=reactExports.useState(!1),[lt,ct]=reactExports.useState(!1),[ut,dt]=reactExports.useState(!1),[ht,pt]=reactExports.useState(null),[mt,gt]=reactExports.useState(null),[ft,xt]=reactExports.useState(!1),[yt,bt]=reactExports.useState(""),[jt,Ct]=reactExports.useState("asc"),[St,vt]=reactExports.useState({min:0,max:1e3}),[Et,Rt]=reactExports.useState(null),$t=Nt=>_e.filter(Lt=>Lt.supplier_id===Nt).length,At=reactExports.useMemo(()=>{if(et.length===0)return{min:0,max:100};const Nt=et.map(Lt=>$t(Lt.id));return{min:0,max:Math.max(...Nt,10)}},[et,_e]);reactExports.useEffect(()=>{vt(At)},[At]);const Xt=async()=>{try{at(!0),await st()}catch(Nt){console.error("Error refreshing data:",Nt)}finally{at(!1)}},kt=()=>{pt(null),ct(!0)},Zt=Nt=>{pt(Nt),ct(!0)},Jt=()=>{ct(!1)},Yt=async Nt=>{const Lt=$t(Nt.id);if(Lt>0){gt(`Cannot delete "${Nt.name}" because it has ${Lt} associated products.`);return}try{dt(!0),await rt(Nt.id),gt(null)}catch(Kt){console.error("Error deleting supplier:",Kt),gt("Failed to delete supplier. Please try again.")}finally{dt(!1)}};reactExports.useEffect(()=>{if(mt){const Nt=setTimeout(()=>{gt(null)},5e3);return()=>clearTimeout(Nt)}},[mt]);const wt=Nt=>({productCount:$t(Nt),avgCost:Tt(Nt),bestValueCount:Bt(Nt)}),Tt=Nt=>{const Lt=_e.filter(Ut=>Ut.supplier_id===Nt);return Lt.length===0?0:Lt.reduce((Ut,ss)=>Ut+ss.cost,0)/Lt.length},Bt=Nt=>{let Lt=0;const Kt=new Map;return _e.forEach(Ut=>{if(Ut.product_id){Kt.has(Ut.product_id)||Kt.set(Ut.product_id,[]);const ss=Kt.get(Ut.product_id);ss&&ss.push(Ut)}}),Kt.forEach(Ut=>{Ut.length>0&&Ut.reduce((as,Dt)=>Dt.cost<as.cost?Dt:as).supplier_id===Nt&&Lt++}),Lt},Wt=Nt=>_e.some(Lt=>Lt.supplier_id===Nt&&Lt.product_id!==null),Mt=reactExports.useMemo(()=>et.filter(Nt=>{const Lt=Nt.name.toLowerCase().includes(nt.toLowerCase()),Kt=wt(Nt.id),Ut=Kt.productCount>=St.min&&Kt.productCount<=St.max,ss=Et===null?!0:Et?Wt(Nt.id):!Wt(Nt.id);return Lt&&Ut&&ss}),[et,nt,St,Et,_e]),qt=reactExports.useMemo(()=>yt?[...Mt].sort((Nt,Lt)=>{let Kt=0;const Ut=wt(Nt.id),ss=wt(Lt.id);switch(yt){case"name":Kt=Nt.name.localeCompare(Lt.name);break;case"products":Kt=Ut.productCount-ss.productCount;break;case"cost":Kt=Ut.avgCost-ss.avgCost;break;case"bestValue":Kt=Ut.bestValueCount-ss.bestValueCount;break}return jt==="asc"?Kt:-Kt}):Mt,[Mt,yt,jt]),es=Nt=>{Nt.preventDefault()},Ot=Nt=>{yt===Nt?Ct(jt==="asc"?"desc":"asc"):(bt(Nt),Ct("asc"))},It=()=>{it(""),vt(At),Rt(null),bt(""),Ct("asc")},zt=()=>{let Nt=0;return nt&&Nt++,(St.min>At.min||St.max<At.max)&&Nt++,Et!==null&&Nt++,yt&&Nt++,Nt};return tt||ot||ut?jsxRuntimeExports.jsx(LoadingOverlay,{message:ut?"Deleting supplier...":ot?"Refreshing supplier data...":"Loading suppliers..."}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-bold",children:["Suppliers (",et.length,")"]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:Xt,variant:"secondary",className:"flex items-center text-sm",children:[jsxRuntimeExports.jsx(RefreshCcw,{size:14,className:"mr-1.5"}),"Refresh"]}),jsxRuntimeExports.jsxs(Button,{onClick:kt,className:"flex items-center text-sm",children:[jsxRuntimeExports.jsx(PlusCircle,{size:14,className:"mr-1.5"}),"Add Supplier"]})]})]}),mt&&jsxRuntimeExports.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:mt}),jsxRuntimeExports.jsxs(Card,{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsxs("form",{onSubmit:es,className:"flex w-full md:w-auto relative",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search suppliers by name...",className:"border pl-9 pr-4 py-2 rounded w-full md:w-80",value:nt,onChange:Nt=>it(Nt.target.value)}),jsxRuntimeExports.jsx(Search,{size:16,className:"absolute left-3 top-2.5 text-gray-400"}),nt&&jsxRuntimeExports.jsx("button",{type:"button",className:"absolute right-10 top-2.5 text-gray-400 hover:text-gray-700",onClick:()=>it(""),children:jsxRuntimeExports.jsx(X$1,{size:16})}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"ml-2 text-sm",children:"Search"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mr-2 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 mr-1",children:"Total:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:Mt.length}),zt()>0&&jsxRuntimeExports.jsxs("span",{className:"ml-1 text-blue-600",children:["(",zt()," filter",zt()!==1?"s":"",")"]})]}),jsxRuntimeExports.jsxs(Button,{variant:ft?"primary":"secondary",className:"flex items-center text-sm",onClick:()=>xt(!ft),children:[jsxRuntimeExports.jsx(Filter,{size:14,className:"mr-1.5"}),ft?"Hide Filters":"Show Filters"]})]})]}),ft&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-gray-50 rounded-md mb-3 border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Product Count Range (",St.min," - ",St.max,")"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"range",min:At.min,max:At.max,value:St.min,onChange:Nt=>vt({...St,min:Number(Nt.target.value)}),className:"w-full"}),jsxRuntimeExports.jsx("input",{type:"range",min:At.min,max:At.max,value:St.max,onChange:Nt=>vt({...St,max:Number(Nt.target.value)}),className:"w-full"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Match Status"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",checked:Et===null,onChange:()=>Rt(null),className:"mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"All Suppliers"})]}),jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",checked:Et===!0,onChange:()=>Rt(!0),className:"mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"With Matched Products"})]}),jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",checked:Et===!1,onChange:()=>Rt(!1),className:"mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Without Matched Products"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-200",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:"Sort By:"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:yt==="name"?"primary":"secondary",className:"flex items-center text-xs px-2 py-1",onClick:()=>Ot("name"),children:[jsxRuntimeExports.jsx(ArrowDownAZ,{size:14,className:"mr-1"}),"Name",yt==="name"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:jt==="asc"?"":""})]}),jsxRuntimeExports.jsxs(Button,{variant:yt==="products"?"primary":"secondary",className:"flex items-center text-xs px-2 py-1",onClick:()=>Ot("products"),children:[jsxRuntimeExports.jsx(Package,{size:14,className:"mr-1"}),"Products",yt==="products"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:jt==="asc"?"":""})]}),jsxRuntimeExports.jsxs(Button,{variant:yt==="cost"?"primary":"secondary",className:"flex items-center text-xs px-2 py-1",onClick:()=>Ot("cost"),children:[jsxRuntimeExports.jsx(DollarSign,{size:14,className:"mr-1"}),"Avg. Cost",yt==="cost"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:jt==="asc"?"":""})]}),jsxRuntimeExports.jsxs(Button,{variant:yt==="bestValue"?"primary":"secondary",className:"flex items-center text-xs px-2 py-1",onClick:()=>Ot("bestValue"),children:[jsxRuntimeExports.jsx(ShoppingCart,{size:14,className:"mr-1"}),"Best Value",yt==="bestValue"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:jt==="asc"?"":""})]}),zt()>0&&jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"flex items-center text-xs px-2 py-1 ml-2 border-red-300 text-red-700 hover:bg-red-50",onClick:It,children:[jsxRuntimeExports.jsx(X$1,{size:14,className:"mr-1"})," Clear All"]})]})]})]}),et.length===0?jsxRuntimeExports.jsx(EmptyState,{message:"No suppliers found",suggestion:"Add a supplier or import supplier data to get started."}):Mt.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded",children:[jsxRuntimeExports.jsx("div",{className:"font-medium mb-1",children:"No suppliers found matching your criteria"}),jsxRuntimeExports.jsx("div",{className:"text-sm",children:"Try adjusting your filters or search term"}),zt()>0&&jsxRuntimeExports.jsx(Button,{variant:"secondary",className:"mt-3 text-sm",onClick:It,children:"Clear All Filters"})]}):jsxRuntimeExports.jsx(Table,{headers:["Supplier Name","Products","Avg. Cost","Best Value Count","Actions"],children:qt.map(Nt=>{const Lt=wt(Nt.id),Kt=Wt(Nt.id);return jsxRuntimeExports.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3 font-medium",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Link$1,{to:`/suppliers/${Nt.id}`,className:"text-blue-600 hover:text-blue-800 hover:underline",children:Nt.name}),Kt&&jsxRuntimeExports.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Matched"})]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx("span",{className:"font-medium",children:Lt.productCount})}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-3",children:["$",Lt.avgCost.toFixed(2)]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:Lt.bestValueCount}),Lt.bestValueCount>0&&jsxRuntimeExports.jsxs("span",{className:"ml-1 text-xs text-green-600",children:["(",(Lt.bestValueCount/Lt.productCount*100).toFixed(0),"%)"]})]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsx(Link$1,{to:`/suppliers/${Nt.id}`,className:"text-blue-600 hover:text-blue-800",title:"View supplier details",children:jsxRuntimeExports.jsx(Eye,{size:16})}),jsxRuntimeExports.jsx("button",{className:"text-blue-600 hover:text-blue-800",onClick:()=>Zt(Nt),title:"Edit supplier",children:jsxRuntimeExports.jsx(SquarePen,{size:16})}),jsxRuntimeExports.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>Yt(Nt),disabled:$t(Nt.id)>0,title:$t(Nt.id)>0?"Cannot delete supplier with associated products":"Delete supplier",children:jsxRuntimeExports.jsx(Trash2,{size:16,className:$t(Nt.id)>0?"opacity-30":""})})]})})]},Nt.id)})})]}),lt&&jsxRuntimeExports.jsx(SupplierModal,{isOpen:lt,onClose:Jt,supplier:ht})]})},SupplierProducts=({supplierId:et})=>{const _e=useNavigate(),{supplierProducts:tt,products:st}=useAppContext(),[rt,nt]=reactExports.useState("all"),[it,ot]=reactExports.useState(null),[at,lt]=reactExports.useState(""),[ct,ut]=reactExports.useState(!1),[dt,ht]=reactExports.useState(""),[pt,mt]=reactExports.useState("asc"),[gt,ft]=reactExports.useState({min:0,max:1e3}),[xt,yt]=reactExports.useState(null),bt=reactExports.useMemo(()=>tt.filter(wt=>wt.supplier_id===et),[tt,et]),jt=reactExports.useMemo(()=>{if(bt.length===0)return{min:0,max:100};const wt=bt.map(Tt=>Tt.cost);return{min:Math.floor(Math.min(...wt)),max:Math.ceil(Math.max(...wt,10))}},[bt]);reactExports.useState(()=>{ft(jt)});const Ct=reactExports.useMemo(()=>rt==="matched"?bt.filter(wt=>wt.product_id!==null):rt==="unmatched"?bt.filter(wt=>wt.product_id===null):bt,[bt,rt]),St=reactExports.useMemo(()=>{console.log(`Processing ${Ct.length} supplier products for display`);const wt={ean:0,mpn:0,name:0,none:0};return Ct.forEach(Tt=>{const Bt=Tt.match_method||"none";wt[Bt]=(wt[Bt]||0)+1,Bt==="mpn"&&console.log(`Found MPN match: ${Tt.mpn} for product_id: ${Tt.product_id}`)}),console.log("Match method counts:",wt),Ct.map(Tt=>{if(Tt.product_id){const Bt=st.find(Wt=>Wt.id===Tt.product_id);if(Bt){const Wt=Bt.salePrice-Bt.amazonFee-Tt.cost,Mt=Wt/Bt.salePrice*100;return{...Tt,product:Bt,productName:Bt.title||"-",productEan:Bt.ean||"-",productMpn:Bt.mpn||"-",profitPerUnit:Wt,profitMargin:Mt}}}return{...Tt,product:null,productName:Tt.product_name||"-",productEan:Tt.ean||"-",productMpn:Tt.mpn||"-",profitPerUnit:0,profitMargin:0}})},[Ct,st]),vt=reactExports.useMemo(()=>St.filter(wt=>{const Tt=at===""||wt.productName.toLowerCase().includes(at.toLowerCase())||wt.productEan.includes(at)||wt.mpn&&wt.mpn.toLowerCase().includes(at.toLowerCase())||wt.productMpn&&wt.productMpn.toLowerCase().includes(at.toLowerCase()),Bt=wt.cost>=gt.min&&wt.cost<=gt.max,Wt=xt===null||wt.match_method===xt;return Tt&&Bt&&Wt}),[St,at,gt,xt]),Et=reactExports.useMemo(()=>dt?[...vt].sort((wt,Tt)=>{let Bt=0;switch(dt){case"name":Bt=wt.productName.localeCompare(Tt.productName);break;case"cost":Bt=wt.cost-Tt.cost;break;case"price":const Wt=wt.product?wt.product.salePrice:0,Mt=Tt.product?Tt.product.salePrice:0;Bt=Wt-Mt;break;case"profit":Bt=wt.profitPerUnit-Tt.profitPerUnit;break;case"margin":Bt=wt.profitMargin-Tt.profitMargin;break}return pt==="asc"?Bt:-Bt}):vt,[vt,dt,pt]),Rt=reactExports.useMemo(()=>{const wt=bt.length,Tt=bt.filter(Wt=>Wt.product_id!==null).length,Bt=wt-Tt;return{total:wt,matched:Tt,unmatched:Bt}},[bt]),$t=reactExports.useMemo(()=>{const wt=new Set(bt.map(Tt=>Tt.match_method));return Array.from(wt).filter(Boolean)},[bt]),At=reactExports.useMemo(()=>["Product Name","EAN","MPN","Cost","Match Status","Sale Price","Profit","Margin","Actions"],[]),Xt=wt=>{ot(wt===it?null:wt)},kt=wt=>{wt.preventDefault()},Zt=wt=>{dt===wt?mt(pt==="asc"?"desc":"asc"):(ht(wt),mt("asc"))},Jt=()=>{lt(""),yt(null),ft(jt),ht(""),mt("asc")},Yt=()=>{let wt=0;return at&&wt++,(gt.min>jt.min||gt.max<jt.max)&&wt++,xt!==null&&wt++,dt&&wt++,wt};return jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Products from this Supplier"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsxs(Button,{variant:rt==="all"?"primary":"secondary",onClick:()=>nt("all"),className:"text-sm",children:["All (",Rt.total,")"]}),jsxRuntimeExports.jsxs(Button,{variant:rt==="matched"?"primary":"secondary",onClick:()=>nt("matched"),className:"text-sm",children:["Matched (",Rt.matched,")"]}),jsxRuntimeExports.jsxs(Button,{variant:rt==="unmatched"?"primary":"secondary",onClick:()=>nt("unmatched"),className:"text-sm",children:["Unmatched (",Rt.unmatched,")"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-3",children:[jsxRuntimeExports.jsxs("form",{onSubmit:kt,className:"flex w-full md:w-auto relative",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search by name, EAN, or MPN...",className:"border pl-9 pr-4 py-2 rounded w-full md:w-80",value:at,onChange:wt=>lt(wt.target.value)}),jsxRuntimeExports.jsx(Search,{size:16,className:"absolute left-3 top-2.5 text-gray-400"}),at&&jsxRuntimeExports.jsx("button",{type:"button",className:"absolute right-10 top-2.5 text-gray-400 hover:text-gray-700",onClick:()=>lt(""),children:jsxRuntimeExports.jsx(X$1,{size:16})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mr-2 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 mr-1",children:"Found:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:Et.length}),Yt()>0&&jsxRuntimeExports.jsxs("span",{className:"ml-1 text-blue-600",children:["(",Yt()," filter",Yt()!==1?"s":"",")"]})]}),jsxRuntimeExports.jsxs(Button,{variant:ct?"primary":"secondary",className:"flex items-center text-sm",onClick:()=>ut(!ct),children:[jsxRuntimeExports.jsx(Filter,{size:14,className:"mr-1.5"}),ct?"Hide Filters":"Show Filters"]})]})]}),ct&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-gray-50 rounded-md mb-3 border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Cost Range ($",gt.min," - $",gt.max,")"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"range",min:jt.min,max:jt.max,value:gt.min,onChange:wt=>ft({...gt,min:Number(wt.target.value)}),className:"w-full"}),jsxRuntimeExports.jsx("input",{type:"range",min:jt.min,max:jt.max,value:gt.max,onChange:wt=>ft({...gt,max:Number(wt.target.value)}),className:"w-full"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Match Method"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:xt===null?"primary":"secondary",className:"text-xs py-1",onClick:()=>yt(null),children:"All Methods"}),$t.map(wt=>jsxRuntimeExports.jsxs(Button,{variant:xt===wt?"primary":"secondary",className:"text-xs py-1",onClick:()=>yt(wt),children:[wt.charAt(0).toUpperCase()+wt.slice(1)," Match"]},wt)),rt==="unmatched"&&jsxRuntimeExports.jsx(Button,{variant:xt==="none"?"primary":"secondary",className:"text-xs py-1",onClick:()=>yt("none"),children:"No Match"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-200",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:"Sort By:"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:dt==="name"?"primary":"secondary",className:"flex items-center text-xs px-2 py-1",onClick:()=>Zt("name"),children:[jsxRuntimeExports.jsx(ArrowDownAZ,{size:14,className:"mr-1"}),"Name",dt==="name"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:pt==="asc"?"":""})]}),jsxRuntimeExports.jsxs(Button,{variant:dt==="cost"?"primary":"secondary",className:"flex items-center text-xs px-2 py-1",onClick:()=>Zt("cost"),children:[jsxRuntimeExports.jsx(DollarSign,{size:14,className:"mr-1"}),"Cost",dt==="cost"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:pt==="asc"?"":""})]}),jsxRuntimeExports.jsxs(Button,{variant:dt==="price"?"primary":"secondary",className:"flex items-center text-xs px-2 py-1",onClick:()=>Zt("price"),children:[jsxRuntimeExports.jsx(Tag,{size:14,className:"mr-1"}),"Price",dt==="price"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:pt==="asc"?"":""})]}),jsxRuntimeExports.jsxs(Button,{variant:dt==="profit"?"primary":"secondary",className:"flex items-center text-xs px-2 py-1",onClick:()=>Zt("profit"),children:[jsxRuntimeExports.jsx(TrendingUp,{size:14,className:"mr-1"}),"Profit",dt==="profit"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:pt==="asc"?"":""})]}),Yt()>0&&jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"flex items-center text-xs px-2 py-1 ml-2 border-red-300 text-red-700 hover:bg-red-50",onClick:Jt,children:[jsxRuntimeExports.jsx(X$1,{size:14,className:"mr-1"})," Clear All"]})]})]})]}),Et.length===0?jsxRuntimeExports.jsx(EmptyState,{message:`No ${rt} products found matching your criteria`,suggestion:Yt()>0?"Try adjusting your filters or search term":rt==="matched"?"This supplier doesn't have any matched products. Try importing products or manually associating them.":rt==="unmatched"?"All products for this supplier have been matched.":"Add products through product import or manually associate products with this supplier."}):jsxRuntimeExports.jsx(Table,{headers:At,children:Et.map(wt=>{var Tt;return jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsxs("tr",{className:`border-t ${it===wt.id?"bg-blue-50":""} hover:bg-gray-50`,children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3 font-medium",children:wt.productName}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:wt.productEan||"-"}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:((Tt=wt.product)==null?void 0:Tt.mpn)||wt.mpn||"-"}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-3",children:["$",wt.cost.toFixed(2)]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx(ProductMatchBadge$1,{matchMethod:wt.match_method})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:wt.product?`$${wt.product.salePrice.toFixed(2)}`:"-"}),jsxRuntimeExports.jsx("td",{className:`px-4 py-3 ${wt.product?wt.profitPerUnit>=0?"text-green-600":"text-red-600":"text-gray-400"}`,children:wt.product?`$${wt.profitPerUnit.toFixed(2)}`:"-"}),jsxRuntimeExports.jsx("td",{className:`px-4 py-3 ${wt.product?wt.profitMargin>=0?"text-green-600":"text-red-600":"text-gray-400"}`,children:wt.product?`${wt.profitMargin.toFixed(1)}%`:"-"}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:wt.product?jsxRuntimeExports.jsxs(Button,{onClick:()=>_e(`/products/${wt.product.id}`),variant:"secondary",className:"flex items-center gap-2 text-sm py-1",children:[jsxRuntimeExports.jsx(Package,{size:14}),"View Product"]}):jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"flex items-center gap-2 text-sm py-1 bg-blue-50 text-blue-800 border-blue-200 hover:bg-blue-100",onClick:()=>Xt(wt.id),children:[jsxRuntimeExports.jsx(Info,{size:14}),it===wt.id?"Hide Details":"View Details"]})})]}),!wt.product&&it===wt.id&&jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:9,className:"px-0 py-0 border-t border-blue-100",children:jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-b from-blue-50 to-white p-4 rounded-md shadow-inner",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("h4",{className:"text-base font-semibold text-blue-900 flex items-center",children:[jsxRuntimeExports.jsx(Info,{size:16,className:"mr-2 text-blue-500"}),"Product Details"]}),jsxRuntimeExports.jsx("div",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:"Unmatched Product"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-blue-100",children:[jsxRuntimeExports.jsx("h5",{className:"font-medium text-blue-900 mb-1.5 pb-1.5 border-b border-blue-100 text-sm",children:"Basic Info"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 uppercase mb-0.5",children:"Product Name"}),jsxRuntimeExports.jsx("p",{className:"font-medium text-sm",children:wt.productName})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 uppercase mb-0.5",children:"EAN / Barcode"}),jsxRuntimeExports.jsx("p",{className:"font-mono text-xs bg-gray-50 p-1 rounded",children:wt.ean||"-"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 uppercase mb-0.5",children:"MPN"}),jsxRuntimeExports.jsx("p",{className:"font-mono text-xs bg-gray-50 p-1 rounded",children:wt.mpn||"-"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-blue-100",children:[jsxRuntimeExports.jsx("h5",{className:"font-medium text-blue-900 mb-1.5 pb-1.5 border-b border-blue-100 text-sm",children:"Ordering Info"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 uppercase mb-0.5",children:"Cost"}),jsxRuntimeExports.jsxs("p",{className:"font-medium text-sm text-green-700",children:["$",wt.cost.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 uppercase mb-0.5",children:"MOQ"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-sm",children:wt.moq||"1"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"units"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 uppercase mb-0.5",children:"Lead Time"}),jsxRuntimeExports.jsx("p",{className:"font-medium text-sm",children:wt.lead_time||"-"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-blue-100",children:[jsxRuntimeExports.jsx("h5",{className:"font-medium text-blue-900 mb-1.5 pb-1.5 border-b border-blue-100 text-sm",children:"Additional Info"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 uppercase mb-0.5",children:"Payment Terms"}),jsxRuntimeExports.jsx("p",{className:"font-medium text-sm",children:wt.payment_terms||"-"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 uppercase mb-0.5",children:"Last Updated"}),jsxRuntimeExports.jsx("p",{className:"font-medium text-sm",children:new Date(wt.updated_at||Date.now()).toLocaleDateString()})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 pt-2 border-t border-blue-100 flex justify-between items-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-700 flex items-center",children:[jsxRuntimeExports.jsx(ExternalLink,{size:14,className:"mr-1.5"}),"This product needs to be matched with a catalog product"]}),jsxRuntimeExports.jsxs(Button,{variant:"primary",className:"flex items-center gap-2 text-sm",onClick:()=>alert("This functionality will be implemented soon"),children:[jsxRuntimeExports.jsx(Link,{size:14})," Find Matches"]})]})]})})})]},wt.id)})})]})};let e={data:""},t=et=>typeof window=="object"?((et?et.querySelector("#_goober"):window._goober)||Object.assign((et||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:et||e,l=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,a=/\/\*[^]*?\*\/|  +/g,n$1=/\n+/g,o=(et,_e)=>{let tt="",st="",rt="";for(let nt in et){let it=et[nt];nt[0]=="@"?nt[1]=="i"?tt=nt+" "+it+";":st+=nt[1]=="f"?o(it,nt):nt+"{"+o(it,nt[1]=="k"?"":_e)+"}":typeof it=="object"?st+=o(it,_e?_e.replace(/([^,])+/g,ot=>nt.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,at=>/&/.test(at)?at.replace(/&/g,ot):ot?ot+" "+at:at)):nt):it!=null&&(nt=/^--/.test(nt)?nt:nt.replace(/[A-Z]/g,"-$&").toLowerCase(),rt+=o.p?o.p(nt,it):nt+":"+it+";")}return tt+(_e&&rt?_e+"{"+rt+"}":rt)+st},c={},s=et=>{if(typeof et=="object"){let _e="";for(let tt in et)_e+=tt+s(et[tt]);return _e}return et},i=(et,_e,tt,st,rt)=>{let nt=s(et),it=c[nt]||(c[nt]=(at=>{let lt=0,ct=11;for(;lt<at.length;)ct=101*ct+at.charCodeAt(lt++)>>>0;return"go"+ct})(nt));if(!c[it]){let at=nt!==et?et:(lt=>{let ct,ut,dt=[{}];for(;ct=l.exec(lt.replace(a,""));)ct[4]?dt.shift():ct[3]?(ut=ct[3].replace(n$1," ").trim(),dt.unshift(dt[0][ut]=dt[0][ut]||{})):dt[0][ct[1]]=ct[2].replace(n$1," ").trim();return dt[0]})(et);c[it]=o(rt?{["@keyframes "+it]:at}:at,tt?"":"."+it)}let ot=tt&&c.g?c.g:null;return tt&&(c.g=c[it]),((at,lt,ct,ut)=>{ut?lt.data=lt.data.replace(ut,at):lt.data.indexOf(at)===-1&&(lt.data=ct?at+lt.data:lt.data+at)})(c[it],_e,st,ot),it},p=(et,_e,tt)=>et.reduce((st,rt,nt)=>{let it=_e[nt];if(it&&it.call){let ot=it(tt),at=ot&&ot.props&&ot.props.className||/^go/.test(ot)&&ot;it=at?"."+at:ot&&typeof ot=="object"?ot.props?"":o(ot,""):ot===!1?"":ot}return st+rt+(it??"")},"");function u$1(et){let _e=this||{},tt=et.call?et(_e.p):et;return i(tt.unshift?tt.raw?p(tt,[].slice.call(arguments,1),_e.p):tt.reduce((st,rt)=>Object.assign(st,rt&&rt.call?rt(_e.p):rt),{}):tt,t(_e.target),_e.g,_e.o,_e.k)}let d,f,g;u$1.bind({g:1});let h$1=u$1.bind({k:1});function m(et,_e,tt,st){o.p=_e,d=et,f=tt,g=st}function j(et,_e){let tt=this||{};return function(){let st=arguments;function rt(nt,it){let ot=Object.assign({},nt),at=ot.className||rt.className;tt.p=Object.assign({theme:f&&f()},ot),tt.o=/ *go\d+/.test(at),ot.className=u$1.apply(tt,st)+(at?" "+at:"");let lt=et;return et[0]&&(lt=ot.as||et,delete ot.as),g&&lt[0]&&g(ot),d(lt,ot)}return rt}}var W=et=>typeof et=="function",T=(et,_e)=>W(et)?et(_e):et,U=(()=>{let et=0;return()=>(++et).toString()})(),b=(()=>{let et;return()=>{if(et===void 0&&typeof window<"u"){let _e=matchMedia("(prefers-reduced-motion: reduce)");et=!_e||_e.matches}return et}})(),Q=20,S=new Map,X=1e3,$=et=>{if(S.has(et))return;let _e=setTimeout(()=>{S.delete(et),u({type:4,toastId:et})},X);S.set(et,_e)},J=et=>{let _e=S.get(et);_e&&clearTimeout(_e)},v=(et,_e)=>{switch(_e.type){case 0:return{...et,toasts:[_e.toast,...et.toasts].slice(0,Q)};case 1:return _e.toast.id&&J(_e.toast.id),{...et,toasts:et.toasts.map(nt=>nt.id===_e.toast.id?{...nt,..._e.toast}:nt)};case 2:let{toast:tt}=_e;return et.toasts.find(nt=>nt.id===tt.id)?v(et,{type:1,toast:tt}):v(et,{type:0,toast:tt});case 3:let{toastId:st}=_e;return st?$(st):et.toasts.forEach(nt=>{$(nt.id)}),{...et,toasts:et.toasts.map(nt=>nt.id===st||st===void 0?{...nt,visible:!1}:nt)};case 4:return _e.toastId===void 0?{...et,toasts:[]}:{...et,toasts:et.toasts.filter(nt=>nt.id!==_e.toastId)};case 5:return{...et,pausedAt:_e.time};case 6:let rt=_e.time-(et.pausedAt||0);return{...et,pausedAt:void 0,toasts:et.toasts.map(nt=>({...nt,pauseDuration:nt.pauseDuration+rt}))}}},A=[],P={toasts:[],pausedAt:void 0},u=et=>{P=v(P,et),A.forEach(_e=>{_e(P)})},Y={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},I=(et={})=>{let[_e,tt]=reactExports.useState(P);reactExports.useEffect(()=>(A.push(tt),()=>{let rt=A.indexOf(tt);rt>-1&&A.splice(rt,1)}),[_e]);let st=_e.toasts.map(rt=>{var nt,it;return{...et,...et[rt.type],...rt,duration:rt.duration||((nt=et[rt.type])==null?void 0:nt.duration)||(et==null?void 0:et.duration)||Y[rt.type],style:{...et.style,...(it=et[rt.type])==null?void 0:it.style,...rt.style}}});return{..._e,toasts:st}},G=(et,_e="blank",tt)=>({createdAt:Date.now(),visible:!0,type:_e,ariaProps:{role:"status","aria-live":"polite"},message:et,pauseDuration:0,...tt,id:(tt==null?void 0:tt.id)||U()}),h=et=>(_e,tt)=>{let st=G(_e,et,tt);return u({type:2,toast:st}),st.id},n=(et,_e)=>h("blank")(et,_e);n.error=h("error");n.success=h("success");n.loading=h("loading");n.custom=h("custom");n.dismiss=et=>{u({type:3,toastId:et})};n.remove=et=>u({type:4,toastId:et});n.promise=(et,_e,tt)=>{let st=n.loading(_e.loading,{...tt,...tt==null?void 0:tt.loading});return et.then(rt=>(n.success(T(_e.success,rt),{id:st,...tt,...tt==null?void 0:tt.success}),rt)).catch(rt=>{n.error(T(_e.error,rt),{id:st,...tt,...tt==null?void 0:tt.error})}),et};var Z=(et,_e)=>{u({type:1,toast:{id:et,height:_e}})},ee=()=>{u({type:5,time:Date.now()})},D=et=>{let{toasts:_e,pausedAt:tt}=I(et);reactExports.useEffect(()=>{if(tt)return;let nt=Date.now(),it=_e.map(ot=>{if(ot.duration===1/0)return;let at=(ot.duration||0)+ot.pauseDuration-(nt-ot.createdAt);if(at<0){ot.visible&&n.dismiss(ot.id);return}return setTimeout(()=>n.dismiss(ot.id),at)});return()=>{it.forEach(ot=>ot&&clearTimeout(ot))}},[_e,tt]);let st=reactExports.useCallback(()=>{tt&&u({type:6,time:Date.now()})},[tt]),rt=reactExports.useCallback((nt,it)=>{let{reverseOrder:ot=!1,gutter:at=8,defaultPosition:lt}=it||{},ct=_e.filter(ht=>(ht.position||lt)===(nt.position||lt)&&ht.height),ut=ct.findIndex(ht=>ht.id===nt.id),dt=ct.filter((ht,pt)=>pt<ut&&ht.visible).length;return ct.filter(ht=>ht.visible).slice(...ot?[dt+1]:[0,dt]).reduce((ht,pt)=>ht+(pt.height||0)+at,0)},[_e]);return{toasts:_e,handlers:{updateHeight:Z,startPause:ee,endPause:st,calculateOffset:rt}}},oe=h$1`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,re=h$1`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,se=h$1`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,_=j("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${et=>et.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${oe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${re} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${et=>et.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${se} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ne=h$1`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,V=j("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${et=>et.secondary||"#e0e0e0"};
  border-right-color: ${et=>et.primary||"#616161"};
  animation: ${ne} 1s linear infinite;
`,pe=h$1`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,de=h$1`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,w=j("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${et=>et.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${de} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${et=>et.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ue=j("div")`
  position: absolute;
`,le=j("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Te=h$1`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,fe=j("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Te} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,M=({toast:et})=>{let{icon:_e,type:tt,iconTheme:st}=et;return _e!==void 0?typeof _e=="string"?reactExports.createElement(fe,null,_e):_e:tt==="blank"?null:reactExports.createElement(le,null,reactExports.createElement(V,{...st}),tt!=="loading"&&reactExports.createElement(ue,null,tt==="error"?reactExports.createElement(_,{...st}):reactExports.createElement(w,{...st})))},ye=et=>`
0% {transform: translate3d(0,${et*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,ge=et=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${et*-150}%,-1px) scale(.6); opacity:0;}
`,he="0%{opacity:0;} 100%{opacity:1;}",xe="0%{opacity:1;} 100%{opacity:0;}",be=j("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Se=j("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Ae=(et,_e)=>{let tt=et.includes("top")?1:-1,[st,rt]=b()?[he,xe]:[ye(tt),ge(tt)];return{animation:_e?`${h$1(st)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${h$1(rt)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},F=reactExports.memo(({toast:et,position:_e,style:tt,children:st})=>{let rt=et.height?Ae(et.position||_e||"top-center",et.visible):{opacity:0},nt=reactExports.createElement(M,{toast:et}),it=reactExports.createElement(Se,{...et.ariaProps},T(et.message,et));return reactExports.createElement(be,{className:et.className,style:{...rt,...tt,...et.style}},typeof st=="function"?st({icon:nt,message:it}):reactExports.createElement(reactExports.Fragment,null,nt,it))});m(reactExports.createElement);var Ee=({id:et,className:_e,style:tt,onHeightUpdate:st,children:rt})=>{let nt=reactExports.useCallback(it=>{if(it){let ot=()=>{let at=it.getBoundingClientRect().height;st(et,at)};ot(),new MutationObserver(ot).observe(it,{subtree:!0,childList:!0,characterData:!0})}},[et,st]);return reactExports.createElement("div",{ref:nt,className:_e,style:tt},rt)},Re=(et,_e)=>{let tt=et.includes("top"),st=tt?{top:0}:{bottom:0},rt=et.includes("center")?{justifyContent:"center"}:et.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:b()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${_e*(tt?1:-1)}px)`,...st,...rt}},ve=u$1`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,O=16,Ie=({reverseOrder:et,position:_e="top-center",toastOptions:tt,gutter:st,children:rt,containerStyle:nt,containerClassName:it})=>{let{toasts:ot,handlers:at}=D(tt);return reactExports.createElement("div",{style:{position:"fixed",zIndex:9999,top:O,left:O,right:O,bottom:O,pointerEvents:"none",...nt},className:it,onMouseEnter:at.startPause,onMouseLeave:at.endPause},ot.map(lt=>{let ct=lt.position||_e,ut=at.calculateOffset(lt,{reverseOrder:et,gutter:st,defaultPosition:_e}),dt=Re(ct,ut);return reactExports.createElement(Ee,{id:lt.id,key:lt.id,onHeightUpdate:at.updateHeight,className:lt.visible?ve:"",style:dt},lt.type==="custom"?T(lt.message,lt):rt?rt(lt):reactExports.createElement(F,{toast:lt,position:ct}))}))},_t=n;const SupplierDetail=()=>{const{id:et}=useParams(),_e=useNavigate(),{suppliers:tt,supplierProducts:st,products:rt,loading:nt,refreshData:it,getEntityAttributes:ot,setAttributeValue:at,updateSupplier:lt}=useAppContext(),[ct,ut]=reactExports.useState(!1),[dt,ht]=reactExports.useState(!1),[pt,mt]=reactExports.useState(!1),[gt,ft]=reactExports.useState(null),[xt,yt]=reactExports.useState(!1),[bt,jt]=reactExports.useState(!1),[Ct,St]=reactExports.useState(null),[vt,Et]=reactExports.useState(!1),Rt=reactExports.useMemo(()=>et||"",[et]),$t=reactExports.useCallback(async()=>{try{console.log("SupplierDetail: Loading data for supplier ID:",Rt),ut(!0),ft(null),await it();const Mt=tt.some(qt=>qt.id===Rt);mt(!Mt),Mt||(console.error(`Supplier with ID ${Rt} not found after data refresh`),ft(`Supplier with ID ${Rt} not found in the database.`)),yt(!0)}catch(Mt){console.error("Error refreshing data in SupplierDetail:",Mt),ft("Failed to load supplier data. Please try again.")}finally{ut(!1)}},[Rt,it,tt]);reactExports.useEffect(()=>{let Mt=!0;return!xt&&Rt&&Mt&&(console.log("SupplierDetail: Starting data fetch for ID:",Rt),$t()),()=>{Mt=!1}},[Rt,$t,xt]),reactExports.useEffect(()=>{if(xt&&tt.length>0){console.log("SupplierDetail: Current suppliers list:",tt),console.log("SupplierDetail: Looking for supplier with ID:",Rt);const Mt=tt.find(qt=>qt.id===Rt);Mt?console.log("SupplierDetail: Found supplier:",Mt):console.error("SupplierDetail: Supplier not found in suppliers list")}},[xt,tt,Rt]);const At=tt.find(Mt=>Mt.id===Rt),Xt=st.filter(Mt=>Mt.supplier_id===Rt),kt=reactExports.useMemo(()=>Xt.filter(Mt=>Mt.product_id).map(Mt=>{const qt=rt.find(It=>It.id===Mt.product_id);if(!qt)return null;const es=qt.salePrice-qt.amazonFee-Mt.cost,Ot=es/qt.salePrice*100;return{...Mt,product:qt,profitPerUnit:es,profitMargin:Ot}}).filter(Boolean),[Xt,rt]);reactExports.useEffect(()=>{At&&(bt||!Ct)&&St({...At,name:At.name})},[At,bt,Ct]);const Zt=(Mt,qt)=>{St(es=>({...es,[Mt]:qt}))},Jt=async()=>{if(Ct)try{if(Et(!0),!Ct.name){_t.error("Supplier name is required");return}await lt(Rt,{name:Ct.name}),await it(),_t.success("Supplier updated successfully"),jt(!1)}catch(Mt){console.error("Error updating supplier:",Mt),_t.error("Failed to update supplier")}finally{Et(!1)}},Yt=()=>{At&&St({...At,name:At.name}),jt(!1)},wt=async()=>{try{ut(!0),yt(!1),await $t()}catch(Mt){console.error("Error refreshing data:",Mt),ut(!1)}},Tt=()=>{ht(!0)},Bt=()=>{ht(!1)},Wt=reactExports.useMemo(()=>{if(kt.length===0)return{avgCost:0,avgMargin:0};const Mt=kt.filter(zt=>zt!==null),qt=Mt.reduce((zt,Nt)=>zt+Nt.cost,0),es=Mt.length>0?qt/Mt.length:0,Ot=Mt.reduce((zt,Nt)=>zt+Nt.profitMargin,0),It=Mt.length>0?Ot/Mt.length:0;return{avgCost:es,avgMargin:It}},[kt]);return nt||ct||vt?jsxRuntimeExports.jsx(LoadingOverlay,{message:vt?"Saving supplier data...":ct?"Refreshing supplier data...":"Loading supplier details..."}):pt?jsxRuntimeExports.jsxs("div",{className:"text-center py-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Supplier Not Found"}),jsxRuntimeExports.jsx("p",{className:"mb-3",children:gt}),jsxRuntimeExports.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-4 rounded-md mb-5 text-left max-w-lg mx-auto",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold text-amber-800 mb-2",children:"Diagnostic Information:"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-amber-800 space-y-1",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Supplier ID:"})," ",Rt||"Not provided"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Suppliers loaded:"})," ",tt.length]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Loading state:"})," ",nt?"Loading":"Not loading"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Available IDs:"})," ",tt.length>0?tt.slice(0,3).map(Mt=>Mt.id).join(", ")+(tt.length>3?"...":""):"None"]})]})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>_e("/suppliers"),className:"flex items-center mx-auto",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16,className:"mr-2"})," Back to Suppliers"]})]}):At?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"mr-4",onClick:()=>_e("/suppliers"),children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16,className:"mr-2"})," Back"]}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold",children:"Supplier Details"})]}),jsxRuntimeExports.jsx("div",{className:"flex space-x-2",children:bt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",onClick:Yt,className:"flex items-center",children:[jsxRuntimeExports.jsx(X$1,{size:16,className:"mr-2"})," Cancel"]}),jsxRuntimeExports.jsxs(Button,{onClick:Jt,className:"flex items-center bg-green-600 hover:bg-green-700",children:[jsxRuntimeExports.jsx(Save,{size:16,className:"mr-2"})," Save"]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Button,{onClick:wt,className:"flex items-center",children:[jsxRuntimeExports.jsx(RefreshCcw,{size:16,className:"mr-2"})," Refresh"]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>jt(!0),className:"flex items-center",variant:"secondary",children:[jsxRuntimeExports.jsx(SquarePen,{size:16,className:"mr-2"})," Edit"]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"col-span-2",children:jsxRuntimeExports.jsxs(Card,{children:[bt?jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:(Ct==null?void 0:Ct.name)||"",onChange:Mt=>Zt("name",Mt.target.value),className:"w-full border p-2 rounded",placeholder:"Enter supplier name"})]}):jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-4",children:At.name}),jsxRuntimeExports.jsxs("div",{className:"text-gray-600 mb-2",children:["ID: ",At.id]}),jsxRuntimeExports.jsxs("div",{className:"text-gray-600",children:["Added: ",new Date().toLocaleDateString()]})]})}),jsxRuntimeExports.jsx("div",{className:"col-span-3",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Supplier Statistics"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:"Products"}),jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold",children:kt.length})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:"Avg. Cost"}),jsxRuntimeExports.jsxs("div",{className:"text-lg font-semibold",children:["$",Wt.avgCost.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:"Avg. Margin"}),jsxRuntimeExports.jsxs("div",{className:"text-lg font-semibold",children:[Wt.avgMargin.toFixed(1),"%"]})]})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"md:col-span-2",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-start mb-4",children:bt?jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:(Ct==null?void 0:Ct.name)||"",onChange:Mt=>Zt("name",Mt.target.value),className:"w-full border p-2 rounded",placeholder:"Enter supplier name"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold",children:At==null?void 0:At.name}),jsxRuntimeExports.jsxs(Button,{variant:"secondary",onClick:Tt,className:"flex items-center",children:[jsxRuntimeExports.jsx(SquarePen,{size:16,className:"mr-2"})," Edit"]})]})}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"This page shows details about the supplier and their products."}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-4 rounded mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Supplier Overview"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Products:"})," ",kt.length]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Average Cost:"})," $",Wt.avgCost.toFixed(2)]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Average Margin:"})," ",Wt.avgMargin.toFixed(1),"%"]})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"md:col-span-2",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Custom Attributes"}),(()=>{const Mt=ot((At==null?void 0:At.id)||"","supplier");return Mt.length===0?jsxRuntimeExports.jsx("div",{className:"text-gray-500 text-sm",children:"No custom attributes defined. Add custom attributes in the Settings menu."}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:Mt.map(({attribute:qt,value:es})=>{const Ot=async zt=>{try{await at(qt.id,(At==null?void 0:At.id)||"",zt)}catch(Nt){console.error("Error updating attribute value:",Nt)}};let It;switch(qt.type){case"Number":It=jsxRuntimeExports.jsx("input",{type:"number",value:es!==null?es:"",onChange:zt=>Ot(Number(zt.target.value)),className:"border p-2 rounded w-full"});break;case"Date":It=jsxRuntimeExports.jsx("input",{type:"date",value:es||"",onChange:zt=>Ot(zt.target.value),className:"border p-2 rounded w-full"});break;case"Yes/No":It=jsxRuntimeExports.jsxs("select",{value:es===!0?"true":"false",onChange:zt=>Ot(zt.target.value==="true"),className:"border p-2 rounded w-full",children:[jsxRuntimeExports.jsx("option",{value:"false",children:"No"}),jsxRuntimeExports.jsx("option",{value:"true",children:"Yes"})]});break;case"Selection":It=jsxRuntimeExports.jsx("input",{type:"text",value:es||"",onChange:zt=>Ot(zt.target.value),className:"border p-2 rounded w-full"});break;case"Text":default:It=jsxRuntimeExports.jsx("input",{type:"text",value:es||"",onChange:zt=>Ot(zt.target.value),className:"border p-2 rounded w-full"})}return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-1",children:jsxRuntimeExports.jsxs("label",{className:"text-sm font-medium",children:[qt.name,qt.required&&jsxRuntimeExports.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})}),It]},qt.id)})})})()]})})]}),jsxRuntimeExports.jsx(SupplierProducts,{supplierId:At.id}),dt&&jsxRuntimeExports.jsx(SupplierModal,{isOpen:dt,onClose:Bt,supplier:At,onUpdate:$t})]}):jsxRuntimeExports.jsx(LoadingOverlay,{message:"Finding supplier..."})},ProductAttributes=()=>{const{customAttributes:et,addCustomAttribute:_e,updateCustomAttribute:tt,deleteCustomAttribute:st}=useAppContext(),[rt,nt]=reactExports.useState(""),[it,ot]=reactExports.useState("Text"),[at,lt]=reactExports.useState(!1),[ct,ut]=reactExports.useState(""),[dt,ht]=reactExports.useState(!1),[pt,mt]=reactExports.useState(null),[gt,ft]=reactExports.useState(!1),[xt,yt]=reactExports.useState(null),[bt,jt]=reactExports.useState(!1),Ct=et.filter(kt=>kt.forType==="product");reactExports.useEffect(()=>{switch(it){case"Number":ut(0);break;case"Date":ut("");break;case"Yes/No":ut(!1);break;case"Selection":case"Text":default:ut("");break}},[it]);const St=()=>{nt(""),ot("Text"),lt(!1),ut(""),ht(!1),mt(null),yt(null),dt||jt(!1)},vt=(kt,Zt)=>kt==null?"-":Zt==="Yes/No"?kt?"Yes":"No":Zt==="Date"&&kt?new Date(kt).toLocaleDateString():kt.toString(),Et=async()=>{if(!rt.trim()){yt("Attribute name is required");return}try{ft(!0),yt(null);const kt={name:rt,type:it,defaultValue:ct,required:at,forType:"product"};dt&&pt?await tt(pt,kt):await _e(kt),St()}catch(kt){console.error("Error saving attribute:",kt),yt("Failed to save attribute")}finally{ft(!1)}},Rt=kt=>{nt(kt.name),ot(kt.type),lt(kt.required),ut(kt.defaultValue!==null?kt.defaultValue:""),ht(!0),mt(kt.id),jt(!0)},$t=async kt=>{if(window.confirm("Are you sure you want to delete this attribute? This will also remove all values associated with it."))try{ft(!0),await st(kt)}catch(Zt){console.error("Error deleting attribute:",Zt),yt("Failed to delete attribute")}finally{ft(!1)}},At=()=>{switch(it){case"Number":return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"number",placeholder:"Default value",className:"border border-gray-300 p-2 rounded w-full shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-all",value:ct,onChange:kt=>ut(Number(kt.target.value))}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none whitespace-nowrap",children:"Default numeric value"})]});case"Date":return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"date",className:"border border-gray-300 p-2 rounded w-full shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-all",value:ct,onChange:kt=>ut(kt.target.value)}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none whitespace-nowrap",children:"Default date"})]});case"Yes/No":return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("select",{className:"border border-gray-300 p-2 rounded w-full shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-all appearance-none bg-no-repeat bg-right pr-8",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundSize:"1.5em 1.5em"},value:ct===!0?"true":"false",onChange:kt=>ut(kt.target.value==="true"),children:[jsxRuntimeExports.jsx("option",{value:"false",children:"No"}),jsxRuntimeExports.jsx("option",{value:"true",children:"Yes"})]}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none whitespace-nowrap",children:"Default boolean value"})]});case"Selection":return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Default selection value",className:"border border-gray-300 p-2 rounded w-full shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-all",value:ct,onChange:kt=>ut(kt.target.value)}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none whitespace-nowrap",children:"Default selection option"})]});case"Text":default:return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Default value",className:"border border-gray-300 p-2 rounded w-full shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-all",value:ct,onChange:kt=>ut(kt.target.value)}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none whitespace-nowrap",children:"Default text value"})]})}},Xt=()=>{bt?St():jt(!0)};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(Card,{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Amazon Product Attributes"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mt-1",children:"Define additional attributes to track for your Amazon products."})]}),jsxRuntimeExports.jsx(Button,{onClick:Xt,className:`flex items-center ${bt?"bg-red-500 hover:bg-red-600":"bg-blue-500 hover:bg-blue-600"} text-white`,children:bt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(X$1,{size:18,className:"mr-1"})," Cancel"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Plus,{size:18,className:"mr-1"})," Add New Attribute"]})})]}),xt&&jsxRuntimeExports.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4 flex items-center",children:[jsxRuntimeExports.jsx(AlertCircle,{size:18,className:"mr-2"}),xt]}),bt&&jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6 border border-blue-100 shadow-sm",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:dt?"Edit Attribute":"Add New Attribute"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attribute Name*"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. Color, Weight, Material",className:"border border-gray-300 p-2 rounded w-full shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-all",value:rt,onChange:kt=>nt(kt.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Attribute Type",jsxRuntimeExports.jsxs("span",{className:"inline-block ml-1 cursor-help group relative",children:[jsxRuntimeExports.jsx(HelpCircle,{size:14,className:"text-gray-400"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none w-48 text-center",children:"Choose the data type for this attribute"})]})]}),jsxRuntimeExports.jsxs("select",{className:"border border-gray-300 p-2 rounded w-full shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-all appearance-none bg-no-repeat bg-right pr-8",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundSize:"1.5em 1.5em"},value:it,onChange:kt=>ot(kt.target.value),children:[jsxRuntimeExports.jsx("option",{value:"Text",children:"Text"}),jsxRuntimeExports.jsx("option",{value:"Number",children:"Number"}),jsxRuntimeExports.jsx("option",{value:"Date",children:"Date"}),jsxRuntimeExports.jsx("option",{value:"Yes/No",children:"Yes/No"}),jsxRuntimeExports.jsx("option",{value:"Selection",children:"Selection"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Default Value",jsxRuntimeExports.jsxs("span",{className:"inline-block ml-1 cursor-help group relative",children:[jsxRuntimeExports.jsx(HelpCircle,{size:14,className:"text-gray-400"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none w-48 text-center",children:"Set a default value that will be used if none is provided"})]})]}),At()]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Required",jsxRuntimeExports.jsxs("span",{className:"inline-block ml-1 cursor-help group relative",children:[jsxRuntimeExports.jsx(HelpCircle,{size:14,className:"text-gray-400"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none w-48 text-center",children:"If enabled, this attribute must be provided during import"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center h-10",children:jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"sr-only peer",checked:at,onChange:kt=>lt(kt.target.checked)}),jsxRuntimeExports.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),jsxRuntimeExports.jsx("span",{className:"ms-3 text-sm",children:at?"Required":"Optional"})]})})]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end mt-4",children:jsxRuntimeExports.jsx(Button,{onClick:Et,disabled:gt||!rt.trim(),className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:gt?"Saving...":dt?"Update Attribute":"Add Attribute"})})]})]}),jsxRuntimeExports.jsxs(Table,{headers:["Attribute Name","Type","Default Value","Required","Actions"],children:[Ct.map(kt=>jsxRuntimeExports.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:kt.name}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-medium",children:kt.type})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:vt(kt.defaultValue,kt.type)}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:kt.required?jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:[jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 mr-1"})," Required"]}):jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs",children:[jsxRuntimeExports.jsx(X$1,{className:"w-3 h-3 mr-1"})," Optional"]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsxs("button",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",onClick:()=>Rt(kt),children:[jsxRuntimeExports.jsx(SquarePen,{size:14,className:"mr-1"})," Edit"]}),jsxRuntimeExports.jsxs("button",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",onClick:()=>$t(kt.id),children:[jsxRuntimeExports.jsx(Trash2,{size:14,className:"mr-1"})," Delete"]})]})})]},kt.id)),Ct.length===0&&jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-gray-500",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(AlertCircle,{size:24,className:"text-gray-400 mb-2"}),jsxRuntimeExports.jsx("p",{children:"No custom attributes defined. Add your first attribute above."})]})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-4 rounded mb-6 border border-blue-100",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-blue-800 mb-2 flex items-center",children:[jsxRuntimeExports.jsx(HelpCircle,{size:16,className:"mr-2"}),"Custom Attributes Usage"]}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Custom attributes can be used to:"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm list-disc pl-6 mt-2 space-y-1 text-blue-900",children:[jsxRuntimeExports.jsx("li",{children:"Filter products in the dashboard"}),jsxRuntimeExports.jsx("li",{children:"Include additional columns in your reports"}),jsxRuntimeExports.jsx("li",{children:"Set up advanced profit calculations"}),jsxRuntimeExports.jsx("li",{children:"Create custom segments for analysis"}),jsxRuntimeExports.jsx("li",{children:"Apply validation rules during data import"})]})]})]})},SupplierAttributes=()=>{const{customAttributes:et,addCustomAttribute:_e,updateCustomAttribute:tt,deleteCustomAttribute:st}=useAppContext(),[rt,nt]=reactExports.useState(""),[it,ot]=reactExports.useState("Text"),[at,lt]=reactExports.useState(!1),[ct,ut]=reactExports.useState(""),[dt,ht]=reactExports.useState(!1),[pt,mt]=reactExports.useState(null),[gt,ft]=reactExports.useState(!1),[xt,yt]=reactExports.useState(null),[bt,jt]=reactExports.useState(!1),Ct=et.filter(kt=>kt.forType==="supplier");reactExports.useEffect(()=>{switch(it){case"Number":ut(0);break;case"Date":ut("");break;case"Yes/No":ut(!1);break;case"Selection":case"Text":default:ut("");break}},[it]);const St=()=>{nt(""),ot("Text"),lt(!1),ut(""),ht(!1),mt(null),yt(null),dt||jt(!1)},vt=(kt,Zt)=>kt==null?"-":Zt==="Yes/No"?kt?"Yes":"No":Zt==="Date"&&kt?new Date(kt).toLocaleDateString():kt.toString(),Et=async()=>{if(!rt.trim()){yt("Attribute name is required");return}try{ft(!0),yt(null);const kt={name:rt,type:it,defaultValue:ct,required:at,forType:"supplier"};dt&&pt?await tt(pt,kt):await _e(kt),St()}catch(kt){console.error("Error saving attribute:",kt),yt("Failed to save attribute")}finally{ft(!1)}},Rt=kt=>{nt(kt.name),ot(kt.type),lt(kt.required),ut(kt.defaultValue!==null?kt.defaultValue:""),ht(!0),mt(kt.id),jt(!0)},$t=async kt=>{if(window.confirm("Are you sure you want to delete this attribute? This will also remove all values associated with it."))try{ft(!0),await st(kt)}catch(Zt){console.error("Error deleting attribute:",Zt),yt("Failed to delete attribute")}finally{ft(!1)}},At=()=>{switch(it){case"Number":return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"number",placeholder:"Default value",className:"border border-gray-300 p-2 rounded w-full shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-all",value:ct,onChange:kt=>ut(Number(kt.target.value))}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none whitespace-nowrap",children:"Default numeric value"})]});case"Date":return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"date",className:"border border-gray-300 p-2 rounded w-full shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-all",value:ct,onChange:kt=>ut(kt.target.value)}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none whitespace-nowrap",children:"Default date"})]});case"Yes/No":return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("select",{className:"border border-gray-300 p-2 rounded w-full shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-all appearance-none bg-no-repeat bg-right pr-8",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundSize:"1.5em 1.5em"},value:ct===!0?"true":"false",onChange:kt=>ut(kt.target.value==="true"),children:[jsxRuntimeExports.jsx("option",{value:"false",children:"No"}),jsxRuntimeExports.jsx("option",{value:"true",children:"Yes"})]}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none whitespace-nowrap",children:"Default boolean value"})]});case"Selection":return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Default selection value",className:"border border-gray-300 p-2 rounded w-full shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-all",value:ct,onChange:kt=>ut(kt.target.value)}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none whitespace-nowrap",children:"Default selection option"})]});case"Text":default:return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Default value",className:"border border-gray-300 p-2 rounded w-full shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-all",value:ct,onChange:kt=>ut(kt.target.value)}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none whitespace-nowrap",children:"Default text value"})]})}},Xt=()=>{bt?St():jt(!0)};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(Card,{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Supplier Attributes"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mt-1",children:"Define additional attributes to track for your suppliers."})]}),jsxRuntimeExports.jsx(Button,{onClick:Xt,className:`flex items-center ${bt?"bg-red-500 hover:bg-red-600":"bg-blue-500 hover:bg-blue-600"} text-white`,children:bt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(X$1,{size:18,className:"mr-1"})," Cancel"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Plus,{size:18,className:"mr-1"})," Add New Attribute"]})})]}),xt&&jsxRuntimeExports.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4 flex items-center",children:[jsxRuntimeExports.jsx(AlertCircle,{size:18,className:"mr-2"}),xt]}),bt&&jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6 border border-blue-100 shadow-sm",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:dt?"Edit Attribute":"Add New Attribute"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attribute Name*"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. Location, Payment Method, Contact Person",className:"border border-gray-300 p-2 rounded w-full shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-all",value:rt,onChange:kt=>nt(kt.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Attribute Type",jsxRuntimeExports.jsxs("span",{className:"inline-block ml-1 cursor-help group relative",children:[jsxRuntimeExports.jsx(HelpCircle,{size:14,className:"text-gray-400"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none w-48 text-center",children:"Choose the data type for this attribute"})]})]}),jsxRuntimeExports.jsxs("select",{className:"border border-gray-300 p-2 rounded w-full shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-all appearance-none bg-no-repeat bg-right pr-8",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundSize:"1.5em 1.5em"},value:it,onChange:kt=>ot(kt.target.value),children:[jsxRuntimeExports.jsx("option",{value:"Text",children:"Text"}),jsxRuntimeExports.jsx("option",{value:"Number",children:"Number"}),jsxRuntimeExports.jsx("option",{value:"Date",children:"Date"}),jsxRuntimeExports.jsx("option",{value:"Yes/No",children:"Yes/No"}),jsxRuntimeExports.jsx("option",{value:"Selection",children:"Selection"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Default Value",jsxRuntimeExports.jsxs("span",{className:"inline-block ml-1 cursor-help group relative",children:[jsxRuntimeExports.jsx(HelpCircle,{size:14,className:"text-gray-400"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none w-48 text-center",children:"Set a default value that will be used if none is provided"})]})]}),At()]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Required",jsxRuntimeExports.jsxs("span",{className:"inline-block ml-1 cursor-help group relative",children:[jsxRuntimeExports.jsx(HelpCircle,{size:14,className:"text-gray-400"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity px-2 py-1 text-xs bg-gray-800 text-white rounded pointer-events-none w-48 text-center",children:"If enabled, this attribute must be provided during import"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center h-10",children:jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"sr-only peer",checked:at,onChange:kt=>lt(kt.target.checked)}),jsxRuntimeExports.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),jsxRuntimeExports.jsx("span",{className:"ms-3 text-sm",children:at?"Required":"Optional"})]})})]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end mt-4",children:jsxRuntimeExports.jsx(Button,{onClick:Et,disabled:gt||!rt.trim(),className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:gt?"Saving...":dt?"Update Attribute":"Add Attribute"})})]})]}),jsxRuntimeExports.jsxs(Table,{headers:["Attribute Name","Type","Default Value","Required","Actions"],children:[Ct.map(kt=>jsxRuntimeExports.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:kt.name}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-medium",children:kt.type})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:vt(kt.defaultValue,kt.type)}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:kt.required?jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:[jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 mr-1"})," Required"]}):jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs",children:[jsxRuntimeExports.jsx(X$1,{className:"w-3 h-3 mr-1"})," Optional"]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsxs("button",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",onClick:()=>Rt(kt),children:[jsxRuntimeExports.jsx(SquarePen,{size:14,className:"mr-1"})," Edit"]}),jsxRuntimeExports.jsxs("button",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",onClick:()=>$t(kt.id),children:[jsxRuntimeExports.jsx(Trash2,{size:14,className:"mr-1"})," Delete"]})]})})]},kt.id)),Ct.length===0&&jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-gray-500",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(AlertCircle,{size:24,className:"text-gray-400 mb-2"}),jsxRuntimeExports.jsx("p",{children:"No custom attributes defined. Add your first attribute above."})]})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-4 rounded mb-6 border border-blue-100",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-blue-800 mb-2 flex items-center",children:[jsxRuntimeExports.jsx(HelpCircle,{size:16,className:"mr-2"}),"Custom Attributes Usage"]}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Custom attributes can be used to:"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm list-disc pl-6 mt-2 space-y-1 text-blue-900",children:[jsxRuntimeExports.jsx("li",{children:"Track additional supplier information"}),jsxRuntimeExports.jsx("li",{children:"Filter and segment suppliers in reports"}),jsxRuntimeExports.jsx("li",{children:"Include key supplier data in dashboards"}),jsxRuntimeExports.jsx("li",{children:"Create supplier performance metrics"}),jsxRuntimeExports.jsx("li",{children:"Apply validation rules during data import"})]})]})]})},CustomAttributes=()=>{const et=[{id:"product-attributes",label:"Amazon Product Attributes",content:jsxRuntimeExports.jsx(ProductAttributes,{})},{id:"supplier-attributes",label:"Supplier Attributes",content:jsxRuntimeExports.jsx(SupplierAttributes,{})}];return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Custom Attributes"}),jsxRuntimeExports.jsx(Tabs,{tabs:et,defaultActiveTab:"product-attributes"})]})},DndContext=reactExports.createContext({dragDropManager:void 0});function formatProdErrorMessage(et){return"Minified Redux error #"+et+"; visit https://redux.js.org/Errors?code="+et+" for the full message or use the non-minified dev environment for full errors. "}var $$observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject(et){if(typeof et!="object"||et===null)return!1;for(var _e=et;Object.getPrototypeOf(_e)!==null;)_e=Object.getPrototypeOf(_e);return Object.getPrototypeOf(et)===_e}function createStore(et,_e,tt){var st;if(typeof _e=="function"&&typeof tt=="function"||typeof tt=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage(0));if(typeof _e=="function"&&typeof tt>"u"&&(tt=_e,_e=void 0),typeof tt<"u"){if(typeof tt!="function")throw new Error(formatProdErrorMessage(1));return tt(createStore)(et,_e)}if(typeof et!="function")throw new Error(formatProdErrorMessage(2));var rt=et,nt=_e,it=[],ot=it,at=!1;function lt(){ot===it&&(ot=it.slice())}function ct(){if(at)throw new Error(formatProdErrorMessage(3));return nt}function ut(mt){if(typeof mt!="function")throw new Error(formatProdErrorMessage(4));if(at)throw new Error(formatProdErrorMessage(5));var gt=!0;return lt(),ot.push(mt),function(){if(gt){if(at)throw new Error(formatProdErrorMessage(6));gt=!1,lt();var xt=ot.indexOf(mt);ot.splice(xt,1),it=null}}}function dt(mt){if(!isPlainObject(mt))throw new Error(formatProdErrorMessage(7));if(typeof mt.type>"u")throw new Error(formatProdErrorMessage(8));if(at)throw new Error(formatProdErrorMessage(9));try{at=!0,nt=rt(nt,mt)}finally{at=!1}for(var gt=it=ot,ft=0;ft<gt.length;ft++){var xt=gt[ft];xt()}return mt}function ht(mt){if(typeof mt!="function")throw new Error(formatProdErrorMessage(10));rt=mt,dt({type:ActionTypes.REPLACE})}function pt(){var mt,gt=ut;return mt={subscribe:function(xt){if(typeof xt!="object"||xt===null)throw new Error(formatProdErrorMessage(11));function yt(){xt.next&&xt.next(ct())}yt();var bt=gt(yt);return{unsubscribe:bt}}},mt[$$observable]=function(){return this},mt}return dt({type:ActionTypes.INIT}),st={dispatch:dt,subscribe:ut,getState:ct,replaceReducer:ht},st[$$observable]=pt,st}function invariant(et,_e,...tt){if(isProduction()&&_e===void 0)throw new Error("invariant requires an error message argument");if(!et){let st;if(_e===void 0)st=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let rt=0;st=new Error(_e.replace(/%s/g,function(){return tt[rt++]})),st.name="Invariant Violation"}throw st.framesToPop=1,st}}function isProduction(){return typeof process<"u"&&!0}function get(et,_e,tt){return _e.split(".").reduce((st,rt)=>st&&st[rt]?st[rt]:tt||null,et)}function without$1(et,_e){return et.filter(tt=>tt!==_e)}function isObject(et){return typeof et=="object"}function xor(et,_e){const tt=new Map,st=nt=>{tt.set(nt,tt.has(nt)?tt.get(nt)+1:1)};et.forEach(st),_e.forEach(st);const rt=[];return tt.forEach((nt,it)=>{nt===1&&rt.push(it)}),rt}function intersection(et,_e){return et.filter(tt=>_e.indexOf(tt)>-1)}const INIT_COORDS="dnd-core/INIT_COORDS",BEGIN_DRAG="dnd-core/BEGIN_DRAG",PUBLISH_DRAG_SOURCE="dnd-core/PUBLISH_DRAG_SOURCE",HOVER="dnd-core/HOVER",DROP="dnd-core/DROP",END_DRAG="dnd-core/END_DRAG";function setClientOffset(et,_e){return{type:INIT_COORDS,payload:{sourceClientOffset:_e||null,clientOffset:et||null}}}const ResetCoordinatesAction={type:INIT_COORDS,payload:{clientOffset:null,sourceClientOffset:null}};function createBeginDrag(et){return function(tt=[],st={publishSource:!0}){const{publishSource:rt=!0,clientOffset:nt,getSourceClientOffset:it}=st,ot=et.getMonitor(),at=et.getRegistry();et.dispatch(setClientOffset(nt)),verifyInvariants$1(tt,ot,at);const lt=getDraggableSource(tt,ot);if(lt==null){et.dispatch(ResetCoordinatesAction);return}let ct=null;if(nt){if(!it)throw new Error("getSourceClientOffset must be defined");verifyGetSourceClientOffsetIsFunction(it),ct=it(lt)}et.dispatch(setClientOffset(nt,ct));const dt=at.getSource(lt).beginDrag(ot,lt);if(dt==null)return;verifyItemIsObject(dt),at.pinSource(lt);const ht=at.getSourceType(lt);return{type:BEGIN_DRAG,payload:{itemType:ht,item:dt,sourceId:lt,clientOffset:nt||null,sourceClientOffset:ct||null,isSourcePublic:!!rt}}}}function verifyInvariants$1(et,_e,tt){invariant(!_e.isDragging(),"Cannot call beginDrag while dragging."),et.forEach(function(st){invariant(tt.getSource(st),"Expected sourceIds to be registered.")})}function verifyGetSourceClientOffsetIsFunction(et){invariant(typeof et=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function verifyItemIsObject(et){invariant(isObject(et),"Item must be an object.")}function getDraggableSource(et,_e){let tt=null;for(let st=et.length-1;st>=0;st--)if(_e.canDragSource(et[st])){tt=et[st];break}return tt}function _defineProperty$4(et,_e,tt){return _e in et?Object.defineProperty(et,_e,{value:tt,enumerable:!0,configurable:!0,writable:!0}):et[_e]=tt,et}function _objectSpread$4(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e]!=null?arguments[_e]:{},st=Object.keys(tt);typeof Object.getOwnPropertySymbols=="function"&&(st=st.concat(Object.getOwnPropertySymbols(tt).filter(function(rt){return Object.getOwnPropertyDescriptor(tt,rt).enumerable}))),st.forEach(function(rt){_defineProperty$4(et,rt,tt[rt])})}return et}function createDrop(et){return function(tt={}){const st=et.getMonitor(),rt=et.getRegistry();verifyInvariants(st),getDroppableTargets(st).forEach((it,ot)=>{const at=determineDropResult(it,ot,rt,st),lt={type:DROP,payload:{dropResult:_objectSpread$4({},tt,at)}};et.dispatch(lt)})}}function verifyInvariants(et){invariant(et.isDragging(),"Cannot call drop while not dragging."),invariant(!et.didDrop(),"Cannot call drop twice during one drag operation.")}function determineDropResult(et,_e,tt,st){const rt=tt.getTarget(et);let nt=rt?rt.drop(st,et):void 0;return verifyDropResultType(nt),typeof nt>"u"&&(nt=_e===0?{}:st.getDropResult()),nt}function verifyDropResultType(et){invariant(typeof et>"u"||isObject(et),"Drop result must either be an object or undefined.")}function getDroppableTargets(et){const _e=et.getTargetIds().filter(et.canDropOnTarget,et);return _e.reverse(),_e}function createEndDrag(et){return function(){const tt=et.getMonitor(),st=et.getRegistry();verifyIsDragging(tt);const rt=tt.getSourceId();return rt!=null&&(st.getSource(rt,!0).endDrag(tt,rt),st.unpinSource()),{type:END_DRAG}}}function verifyIsDragging(et){invariant(et.isDragging(),"Cannot call endDrag while not dragging.")}function matchesType(et,_e){return _e===null?et===null:Array.isArray(et)?et.some(tt=>tt===_e):et===_e}function createHover(et){return function(tt,{clientOffset:st}={}){verifyTargetIdsIsArray(tt);const rt=tt.slice(0),nt=et.getMonitor(),it=et.getRegistry(),ot=nt.getItemType();return removeNonMatchingTargetIds(rt,it,ot),checkInvariants(rt,nt,it),hoverAllTargets(rt,nt,it),{type:HOVER,payload:{targetIds:rt,clientOffset:st||null}}}}function verifyTargetIdsIsArray(et){invariant(Array.isArray(et),"Expected targetIds to be an array.")}function checkInvariants(et,_e,tt){invariant(_e.isDragging(),"Cannot call hover while not dragging."),invariant(!_e.didDrop(),"Cannot call hover after drop.");for(let st=0;st<et.length;st++){const rt=et[st];invariant(et.lastIndexOf(rt)===st,"Expected targetIds to be unique in the passed array.");const nt=tt.getTarget(rt);invariant(nt,"Expected targetIds to be registered.")}}function removeNonMatchingTargetIds(et,_e,tt){for(let st=et.length-1;st>=0;st--){const rt=et[st],nt=_e.getTargetType(rt);matchesType(nt,tt)||et.splice(st,1)}}function hoverAllTargets(et,_e,tt){et.forEach(function(st){tt.getTarget(st).hover(_e,st)})}function createPublishDragSource(et){return function(){if(et.getMonitor().isDragging())return{type:PUBLISH_DRAG_SOURCE}}}function createDragDropActions(et){return{beginDrag:createBeginDrag(et),publishDragSource:createPublishDragSource(et),hover:createHover(et),drop:createDrop(et),endDrag:createEndDrag(et)}}class DragDropManagerImpl{receiveBackend(_e){this.backend=_e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const _e=this,{dispatch:tt}=this.store;function st(nt){return(...it)=>{const ot=nt.apply(_e,it);typeof ot<"u"&&tt(ot)}}const rt=createDragDropActions(this);return Object.keys(rt).reduce((nt,it)=>{const ot=rt[it];return nt[it]=st(ot),nt},{})}dispatch(_e){this.store.dispatch(_e)}constructor(_e,tt){this.isSetUp=!1,this.handleRefCountChange=()=>{const st=this.store.getState().refCount>0;this.backend&&(st&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!st&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=_e,this.monitor=tt,_e.subscribe(this.handleRefCountChange)}}function add(et,_e){return{x:et.x+_e.x,y:et.y+_e.y}}function subtract(et,_e){return{x:et.x-_e.x,y:et.y-_e.y}}function getSourceClientOffset(et){const{clientOffset:_e,initialClientOffset:tt,initialSourceClientOffset:st}=et;return!_e||!tt||!st?null:subtract(add(_e,st),tt)}function getDifferenceFromInitialOffset(et){const{clientOffset:_e,initialClientOffset:tt}=et;return!_e||!tt?null:subtract(_e,tt)}const NONE=[],ALL=[];NONE.__IS_NONE__=!0;ALL.__IS_ALL__=!0;function areDirty(et,_e){return et===NONE?!1:et===ALL||typeof _e>"u"?!0:intersection(_e,et).length>0}class DragDropMonitorImpl{subscribeToStateChange(_e,tt={}){const{handlerIds:st}=tt;invariant(typeof _e=="function","listener must be a function."),invariant(typeof st>"u"||Array.isArray(st),"handlerIds, when specified, must be an array of strings.");let rt=this.store.getState().stateId;const nt=()=>{const it=this.store.getState(),ot=it.stateId;try{ot===rt||ot===rt+1&&!areDirty(it.dirtyHandlerIds,st)||_e()}finally{rt=ot}};return this.store.subscribe(nt)}subscribeToOffsetChange(_e){invariant(typeof _e=="function","listener must be a function.");let tt=this.store.getState().dragOffset;const st=()=>{const rt=this.store.getState().dragOffset;rt!==tt&&(tt=rt,_e())};return this.store.subscribe(st)}canDragSource(_e){if(!_e)return!1;const tt=this.registry.getSource(_e);return invariant(tt,`Expected to find a valid source. sourceId=${_e}`),this.isDragging()?!1:tt.canDrag(this,_e)}canDropOnTarget(_e){if(!_e)return!1;const tt=this.registry.getTarget(_e);if(invariant(tt,`Expected to find a valid target. targetId=${_e}`),!this.isDragging()||this.didDrop())return!1;const st=this.registry.getTargetType(_e),rt=this.getItemType();return matchesType(st,rt)&&tt.canDrop(this,_e)}isDragging(){return!!this.getItemType()}isDraggingSource(_e){if(!_e)return!1;const tt=this.registry.getSource(_e,!0);if(invariant(tt,`Expected to find a valid source. sourceId=${_e}`),!this.isDragging()||!this.isSourcePublic())return!1;const st=this.registry.getSourceType(_e),rt=this.getItemType();return st!==rt?!1:tt.isDragging(this,_e)}isOverTarget(_e,tt={shallow:!1}){if(!_e)return!1;const{shallow:st}=tt;if(!this.isDragging())return!1;const rt=this.registry.getTargetType(_e),nt=this.getItemType();if(nt&&!matchesType(rt,nt))return!1;const it=this.getTargetIds();if(!it.length)return!1;const ot=it.indexOf(_e);return st?ot===it.length-1:ot>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return getSourceClientOffset(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return getDifferenceFromInitialOffset(this.store.getState().dragOffset)}constructor(_e,tt){this.store=_e,this.registry=tt}}const scope=typeof global<"u"?global:self,BrowserMutationObserver=scope.MutationObserver||scope.WebKitMutationObserver;function makeRequestCallFromTimer(et){return function(){const tt=setTimeout(rt,0),st=setInterval(rt,50);function rt(){clearTimeout(tt),clearInterval(st),et()}}}function makeRequestCallFromMutationObserver(et){let _e=1;const tt=new BrowserMutationObserver(et),st=document.createTextNode("");return tt.observe(st,{characterData:!0}),function(){_e=-_e,st.data=_e}}const makeRequestCall=typeof BrowserMutationObserver=="function"?makeRequestCallFromMutationObserver:makeRequestCallFromTimer;class AsapQueue{enqueueTask(_e){const{queue:tt,requestFlush:st}=this;tt.length||(st(),this.flushing=!0),tt[tt.length]=_e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:_e}=this;for(;this.index<_e.length;){const tt=this.index;if(this.index++,_e[tt].call(),this.index>this.capacity){for(let st=0,rt=_e.length-this.index;st<rt;st++)_e[st]=_e[st+this.index];_e.length-=this.index,this.index=0}}_e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=_e=>{this.pendingErrors.push(_e),this.requestErrorThrow()},this.requestFlush=makeRequestCall(this.flush),this.requestErrorThrow=makeRequestCallFromTimer(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class RawTask{call(){try{this.task&&this.task()}catch(_e){this.onError(_e)}finally{this.task=null,this.release(this)}}constructor(_e,tt){this.onError=_e,this.release=tt,this.task=null}}class TaskFactory{create(_e){const tt=this.freeTasks,st=tt.length?tt.pop():new RawTask(this.onError,rt=>tt[tt.length]=rt);return st.task=_e,st}constructor(_e){this.onError=_e,this.freeTasks=[]}}const asapQueue=new AsapQueue,taskFactory=new TaskFactory(asapQueue.registerPendingError);function asap(et){asapQueue.enqueueTask(taskFactory.create(et))}const ADD_SOURCE="dnd-core/ADD_SOURCE",ADD_TARGET="dnd-core/ADD_TARGET",REMOVE_SOURCE="dnd-core/REMOVE_SOURCE",REMOVE_TARGET="dnd-core/REMOVE_TARGET";function addSource(et){return{type:ADD_SOURCE,payload:{sourceId:et}}}function addTarget(et){return{type:ADD_TARGET,payload:{targetId:et}}}function removeSource(et){return{type:REMOVE_SOURCE,payload:{sourceId:et}}}function removeTarget(et){return{type:REMOVE_TARGET,payload:{targetId:et}}}function validateSourceContract(et){invariant(typeof et.canDrag=="function","Expected canDrag to be a function."),invariant(typeof et.beginDrag=="function","Expected beginDrag to be a function."),invariant(typeof et.endDrag=="function","Expected endDrag to be a function.")}function validateTargetContract(et){invariant(typeof et.canDrop=="function","Expected canDrop to be a function."),invariant(typeof et.hover=="function","Expected hover to be a function."),invariant(typeof et.drop=="function","Expected beginDrag to be a function.")}function validateType(et,_e){if(_e&&Array.isArray(et)){et.forEach(tt=>validateType(tt,!1));return}invariant(typeof et=="string"||typeof et=="symbol",_e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var HandlerRole;(function(et){et.SOURCE="SOURCE",et.TARGET="TARGET"})(HandlerRole||(HandlerRole={}));let nextUniqueId=0;function getNextUniqueId(){return nextUniqueId++}function getNextHandlerId(et){const _e=getNextUniqueId().toString();switch(et){case HandlerRole.SOURCE:return`S${_e}`;case HandlerRole.TARGET:return`T${_e}`;default:throw new Error(`Unknown Handler Role: ${et}`)}}function parseRoleFromHandlerId(et){switch(et[0]){case"S":return HandlerRole.SOURCE;case"T":return HandlerRole.TARGET;default:throw new Error(`Cannot parse handler ID: ${et}`)}}function mapContainsValue(et,_e){const tt=et.entries();let st=!1;do{const{done:rt,value:[,nt]}=tt.next();if(nt===_e)return!0;st=!!rt}while(!st);return!1}class HandlerRegistryImpl{addSource(_e,tt){validateType(_e),validateSourceContract(tt);const st=this.addHandler(HandlerRole.SOURCE,_e,tt);return this.store.dispatch(addSource(st)),st}addTarget(_e,tt){validateType(_e,!0),validateTargetContract(tt);const st=this.addHandler(HandlerRole.TARGET,_e,tt);return this.store.dispatch(addTarget(st)),st}containsHandler(_e){return mapContainsValue(this.dragSources,_e)||mapContainsValue(this.dropTargets,_e)}getSource(_e,tt=!1){return invariant(this.isSourceId(_e),"Expected a valid source ID."),tt&&_e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(_e)}getTarget(_e){return invariant(this.isTargetId(_e),"Expected a valid target ID."),this.dropTargets.get(_e)}getSourceType(_e){return invariant(this.isSourceId(_e),"Expected a valid source ID."),this.types.get(_e)}getTargetType(_e){return invariant(this.isTargetId(_e),"Expected a valid target ID."),this.types.get(_e)}isSourceId(_e){return parseRoleFromHandlerId(_e)===HandlerRole.SOURCE}isTargetId(_e){return parseRoleFromHandlerId(_e)===HandlerRole.TARGET}removeSource(_e){invariant(this.getSource(_e),"Expected an existing source."),this.store.dispatch(removeSource(_e)),asap(()=>{this.dragSources.delete(_e),this.types.delete(_e)})}removeTarget(_e){invariant(this.getTarget(_e),"Expected an existing target."),this.store.dispatch(removeTarget(_e)),this.dropTargets.delete(_e),this.types.delete(_e)}pinSource(_e){const tt=this.getSource(_e);invariant(tt,"Expected an existing source."),this.pinnedSourceId=_e,this.pinnedSource=tt}unpinSource(){invariant(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(_e,tt,st){const rt=getNextHandlerId(_e);return this.types.set(rt,tt),_e===HandlerRole.SOURCE?this.dragSources.set(rt,st):_e===HandlerRole.TARGET&&this.dropTargets.set(rt,st),rt}constructor(_e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=_e}}const strictEquality=(et,_e)=>et===_e;function areCoordsEqual(et,_e){return!et&&!_e?!0:!et||!_e?!1:et.x===_e.x&&et.y===_e.y}function areArraysEqual(et,_e,tt=strictEquality){if(et.length!==_e.length)return!1;for(let st=0;st<et.length;++st)if(!tt(et[st],_e[st]))return!1;return!0}function reduce$5(et=NONE,_e){switch(_e.type){case HOVER:break;case ADD_SOURCE:case ADD_TARGET:case REMOVE_TARGET:case REMOVE_SOURCE:return NONE;case BEGIN_DRAG:case PUBLISH_DRAG_SOURCE:case END_DRAG:case DROP:default:return ALL}const{targetIds:tt=[],prevTargetIds:st=[]}=_e.payload,rt=xor(tt,st);if(!(rt.length>0||!areArraysEqual(tt,st)))return NONE;const it=st[st.length-1],ot=tt[tt.length-1];return it!==ot&&(it&&rt.push(it),ot&&rt.push(ot)),rt}function _defineProperty$3(et,_e,tt){return _e in et?Object.defineProperty(et,_e,{value:tt,enumerable:!0,configurable:!0,writable:!0}):et[_e]=tt,et}function _objectSpread$3(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e]!=null?arguments[_e]:{},st=Object.keys(tt);typeof Object.getOwnPropertySymbols=="function"&&(st=st.concat(Object.getOwnPropertySymbols(tt).filter(function(rt){return Object.getOwnPropertyDescriptor(tt,rt).enumerable}))),st.forEach(function(rt){_defineProperty$3(et,rt,tt[rt])})}return et}const initialState$1={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function reduce$4(et=initialState$1,_e){const{payload:tt}=_e;switch(_e.type){case INIT_COORDS:case BEGIN_DRAG:return{initialSourceClientOffset:tt.sourceClientOffset,initialClientOffset:tt.clientOffset,clientOffset:tt.clientOffset};case HOVER:return areCoordsEqual(et.clientOffset,tt.clientOffset)?et:_objectSpread$3({},et,{clientOffset:tt.clientOffset});case END_DRAG:case DROP:return initialState$1;default:return et}}function _defineProperty$2(et,_e,tt){return _e in et?Object.defineProperty(et,_e,{value:tt,enumerable:!0,configurable:!0,writable:!0}):et[_e]=tt,et}function _objectSpread$2(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e]!=null?arguments[_e]:{},st=Object.keys(tt);typeof Object.getOwnPropertySymbols=="function"&&(st=st.concat(Object.getOwnPropertySymbols(tt).filter(function(rt){return Object.getOwnPropertyDescriptor(tt,rt).enumerable}))),st.forEach(function(rt){_defineProperty$2(et,rt,tt[rt])})}return et}const initialState={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function reduce$3(et=initialState,_e){const{payload:tt}=_e;switch(_e.type){case BEGIN_DRAG:return _objectSpread$2({},et,{itemType:tt.itemType,item:tt.item,sourceId:tt.sourceId,isSourcePublic:tt.isSourcePublic,dropResult:null,didDrop:!1});case PUBLISH_DRAG_SOURCE:return _objectSpread$2({},et,{isSourcePublic:!0});case HOVER:return _objectSpread$2({},et,{targetIds:tt.targetIds});case REMOVE_TARGET:return et.targetIds.indexOf(tt.targetId)===-1?et:_objectSpread$2({},et,{targetIds:without$1(et.targetIds,tt.targetId)});case DROP:return _objectSpread$2({},et,{dropResult:tt.dropResult,didDrop:!0,targetIds:[]});case END_DRAG:return _objectSpread$2({},et,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return et}}function reduce$2(et=0,_e){switch(_e.type){case ADD_SOURCE:case ADD_TARGET:return et+1;case REMOVE_SOURCE:case REMOVE_TARGET:return et-1;default:return et}}function reduce$1(et=0){return et+1}function _defineProperty$1(et,_e,tt){return _e in et?Object.defineProperty(et,_e,{value:tt,enumerable:!0,configurable:!0,writable:!0}):et[_e]=tt,et}function _objectSpread$1(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e]!=null?arguments[_e]:{},st=Object.keys(tt);typeof Object.getOwnPropertySymbols=="function"&&(st=st.concat(Object.getOwnPropertySymbols(tt).filter(function(rt){return Object.getOwnPropertyDescriptor(tt,rt).enumerable}))),st.forEach(function(rt){_defineProperty$1(et,rt,tt[rt])})}return et}function reduce(et={},_e){return{dirtyHandlerIds:reduce$5(et.dirtyHandlerIds,{type:_e.type,payload:_objectSpread$1({},_e.payload,{prevTargetIds:get(et,"dragOperation.targetIds",[])})}),dragOffset:reduce$4(et.dragOffset,_e),refCount:reduce$2(et.refCount,_e),dragOperation:reduce$3(et.dragOperation,_e),stateId:reduce$1(et.stateId)}}function createDragDropManager(et,_e=void 0,tt={},st=!1){const rt=makeStoreInstance(st),nt=new DragDropMonitorImpl(rt,new HandlerRegistryImpl(rt)),it=new DragDropManagerImpl(rt,nt),ot=et(it,_e,tt);return it.receiveBackend(ot),it}function makeStoreInstance(et){const _e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return createStore(reduce,et&&_e&&_e({name:"dnd-core",instanceId:"dnd-core"}))}function _objectWithoutProperties(et,_e){if(et==null)return{};var tt=_objectWithoutPropertiesLoose(et,_e),st,rt;if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(et);for(rt=0;rt<nt.length;rt++)st=nt[rt],!(_e.indexOf(st)>=0)&&Object.prototype.propertyIsEnumerable.call(et,st)&&(tt[st]=et[st])}return tt}function _objectWithoutPropertiesLoose(et,_e){if(et==null)return{};var tt={},st=Object.keys(et),rt,nt;for(nt=0;nt<st.length;nt++)rt=st[nt],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}let refCount=0;const INSTANCE_SYM=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var DndProvider=reactExports.memo(function(_e){var{children:tt}=_e,st=_objectWithoutProperties(_e,["children"]);const[rt,nt]=getDndContextValue(st);return reactExports.useEffect(()=>{if(nt){const it=getGlobalContext();return++refCount,()=>{--refCount===0&&(it[INSTANCE_SYM]=null)}}},[]),jsxRuntimeExports.jsx(DndContext.Provider,{value:rt,children:tt})});function getDndContextValue(et){if("manager"in et)return[{dragDropManager:et.manager},!1];const _e=createSingletonDndContext(et.backend,et.context,et.options,et.debugMode),tt=!et.context;return[_e,tt]}function createSingletonDndContext(et,_e=getGlobalContext(),tt,st){const rt=_e;return rt[INSTANCE_SYM]||(rt[INSTANCE_SYM]={dragDropManager:createDragDropManager(et,_e,tt,st)}),rt[INSTANCE_SYM]}function getGlobalContext(){return typeof global<"u"?global:window}var fastDeepEqual=function et(_e,tt){if(_e===tt)return!0;if(_e&&tt&&typeof _e=="object"&&typeof tt=="object"){if(_e.constructor!==tt.constructor)return!1;var st,rt,nt;if(Array.isArray(_e)){if(st=_e.length,st!=tt.length)return!1;for(rt=st;rt--!==0;)if(!et(_e[rt],tt[rt]))return!1;return!0}if(_e.constructor===RegExp)return _e.source===tt.source&&_e.flags===tt.flags;if(_e.valueOf!==Object.prototype.valueOf)return _e.valueOf()===tt.valueOf();if(_e.toString!==Object.prototype.toString)return _e.toString()===tt.toString();if(nt=Object.keys(_e),st=nt.length,st!==Object.keys(tt).length)return!1;for(rt=st;rt--!==0;)if(!Object.prototype.hasOwnProperty.call(tt,nt[rt]))return!1;for(rt=st;rt--!==0;){var it=nt[rt];if(!et(_e[it],tt[it]))return!1}return!0}return _e!==_e&&tt!==tt};const equal=getDefaultExportFromCjs(fastDeepEqual),useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useCollector(et,_e,tt){const[st,rt]=reactExports.useState(()=>_e(et)),nt=reactExports.useCallback(()=>{const it=_e(et);equal(st,it)||(rt(it),tt&&tt())},[st,et,tt]);return useIsomorphicLayoutEffect(nt),[st,nt]}function useMonitorOutput(et,_e,tt){const[st,rt]=useCollector(et,_e,tt);return useIsomorphicLayoutEffect(function(){const it=et.getHandlerId();if(it!=null)return et.subscribeToStateChange(rt,{handlerIds:[it]})},[et,rt]),st}function useCollectedProps(et,_e,tt){return useMonitorOutput(_e,et||(()=>({})),()=>tt.reconnect())}function useOptionalFactory(et,_e){const tt=[];return typeof et!="function"&&tt.push(et),reactExports.useMemo(()=>typeof et=="function"?et():et,tt)}function useConnectDragSource(et){return reactExports.useMemo(()=>et.hooks.dragSource(),[et])}function useConnectDragPreview(et){return reactExports.useMemo(()=>et.hooks.dragPreview(),[et])}let isCallingCanDrag=!1,isCallingIsDragging=!1;class DragSourceMonitorImpl{receiveHandlerId(_e){this.sourceId=_e}getHandlerId(){return this.sourceId}canDrag(){invariant(!isCallingCanDrag,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return isCallingCanDrag=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{isCallingCanDrag=!1}}isDragging(){if(!this.sourceId)return!1;invariant(!isCallingIsDragging,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return isCallingIsDragging=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{isCallingIsDragging=!1}}subscribeToStateChange(_e,tt){return this.internalMonitor.subscribeToStateChange(_e,tt)}isDraggingSource(_e){return this.internalMonitor.isDraggingSource(_e)}isOverTarget(_e,tt){return this.internalMonitor.isOverTarget(_e,tt)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(_e){return this.internalMonitor.subscribeToOffsetChange(_e)}canDragSource(_e){return this.internalMonitor.canDragSource(_e)}canDropOnTarget(_e){return this.internalMonitor.canDropOnTarget(_e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(_e){this.sourceId=null,this.internalMonitor=_e.getMonitor()}}let isCallingCanDrop=!1;class DropTargetMonitorImpl{receiveHandlerId(_e){this.targetId=_e}getHandlerId(){return this.targetId}subscribeToStateChange(_e,tt){return this.internalMonitor.subscribeToStateChange(_e,tt)}canDrop(){if(!this.targetId)return!1;invariant(!isCallingCanDrop,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return isCallingCanDrop=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{isCallingCanDrop=!1}}isOver(_e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,_e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(_e){this.targetId=null,this.internalMonitor=_e.getMonitor()}}function registerTarget(et,_e,tt){const st=tt.getRegistry(),rt=st.addTarget(et,_e);return[rt,()=>st.removeTarget(rt)]}function registerSource(et,_e,tt){const st=tt.getRegistry(),rt=st.addSource(et,_e);return[rt,()=>st.removeSource(rt)]}function shallowEqual(et,_e,tt,st){let rt;if(rt!==void 0)return!!rt;if(et===_e)return!0;if(typeof et!="object"||!et||typeof _e!="object"||!_e)return!1;const nt=Object.keys(et),it=Object.keys(_e);if(nt.length!==it.length)return!1;const ot=Object.prototype.hasOwnProperty.bind(_e);for(let at=0;at<nt.length;at++){const lt=nt[at];if(!ot(lt))return!1;const ct=et[lt],ut=_e[lt];if(rt=void 0,rt===!1||rt===void 0&&ct!==ut)return!1}return!0}function isRef(et){return et!==null&&typeof et=="object"&&Object.prototype.hasOwnProperty.call(et,"current")}function throwIfCompositeComponentElement(et){if(typeof et.type=="string")return;const _e=et.type.displayName||et.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${_e} into a <div>, or turn it into a drag source or a drop target itself.`)}function wrapHookToRecognizeElement(et){return(_e=null,tt=null)=>{if(!reactExports.isValidElement(_e)){const nt=_e;return et(nt,tt),nt}const st=_e;return throwIfCompositeComponentElement(st),cloneWithRef(st,tt?nt=>et(nt,tt):et)}}function wrapConnectorHooks(et){const _e={};return Object.keys(et).forEach(tt=>{const st=et[tt];if(tt.endsWith("Ref"))_e[tt]=et[tt];else{const rt=wrapHookToRecognizeElement(st);_e[tt]=()=>rt}}),_e}function setRef(et,_e){typeof et=="function"?et(_e):et.current=_e}function cloneWithRef(et,_e){const tt=et.ref;return invariant(typeof tt!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),tt?reactExports.cloneElement(et,{ref:st=>{setRef(tt,st),setRef(_e,st)}}):reactExports.cloneElement(et,{ref:_e})}class SourceConnector{receiveHandlerId(_e){this.handlerId!==_e&&(this.handlerId=_e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(_e){this.dragSourceOptionsInternal=_e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(_e){this.dragPreviewOptionsInternal=_e}reconnect(){const _e=this.reconnectDragSource();this.reconnectDragPreview(_e)}reconnectDragSource(){const _e=this.dragSource,tt=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return tt&&this.disconnectDragSource(),this.handlerId?_e?(tt&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=_e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,_e,this.dragSourceOptions)),tt):(this.lastConnectedDragSource=_e,tt):tt}reconnectDragPreview(_e=!1){const tt=this.dragPreview,st=_e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(st&&this.disconnectDragPreview(),!!this.handlerId){if(!tt){this.lastConnectedDragPreview=tt;return}st&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=tt,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,tt,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!shallowEqual(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!shallowEqual(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(_e){this.hooks=wrapConnectorHooks({dragSource:(tt,st)=>{this.clearDragSource(),this.dragSourceOptions=st||null,isRef(tt)?this.dragSourceRef=tt:this.dragSourceNode=tt,this.reconnectDragSource()},dragPreview:(tt,st)=>{this.clearDragPreview(),this.dragPreviewOptions=st||null,isRef(tt)?this.dragPreviewRef=tt:this.dragPreviewNode=tt,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=_e}}class TargetConnector{get connectTarget(){return this.dropTarget}reconnect(){const _e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();_e&&this.disconnectDropTarget();const tt=this.dropTarget;if(this.handlerId){if(!tt){this.lastConnectedDropTarget=tt;return}_e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=tt,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,tt,this.dropTargetOptions))}}receiveHandlerId(_e){_e!==this.handlerId&&(this.handlerId=_e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(_e){this.dropTargetOptionsInternal=_e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!shallowEqual(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(_e){this.hooks=wrapConnectorHooks({dropTarget:(tt,st)=>{this.clearDropTarget(),this.dropTargetOptions=st,isRef(tt)?this.dropTargetRef=tt:this.dropTargetNode=tt,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=_e}}function useDragDropManager(){const{dragDropManager:et}=reactExports.useContext(DndContext);return invariant(et!=null,"Expected drag drop context"),et}function useDragSourceConnector(et,_e){const tt=useDragDropManager(),st=reactExports.useMemo(()=>new SourceConnector(tt.getBackend()),[tt]);return useIsomorphicLayoutEffect(()=>(st.dragSourceOptions=et||null,st.reconnect(),()=>st.disconnectDragSource()),[st,et]),useIsomorphicLayoutEffect(()=>(st.dragPreviewOptions=_e||null,st.reconnect(),()=>st.disconnectDragPreview()),[st,_e]),st}function useDragSourceMonitor(){const et=useDragDropManager();return reactExports.useMemo(()=>new DragSourceMonitorImpl(et),[et])}class DragSourceImpl{beginDrag(){const _e=this.spec,tt=this.monitor;let st=null;return typeof _e.item=="object"?st=_e.item:typeof _e.item=="function"?st=_e.item(tt):st={},st??null}canDrag(){const _e=this.spec,tt=this.monitor;return typeof _e.canDrag=="boolean"?_e.canDrag:typeof _e.canDrag=="function"?_e.canDrag(tt):!0}isDragging(_e,tt){const st=this.spec,rt=this.monitor,{isDragging:nt}=st;return nt?nt(rt):tt===_e.getSourceId()}endDrag(){const _e=this.spec,tt=this.monitor,st=this.connector,{end:rt}=_e;rt&&rt(tt.getItem(),tt),st.reconnect()}constructor(_e,tt,st){this.spec=_e,this.monitor=tt,this.connector=st}}function useDragSource(et,_e,tt){const st=reactExports.useMemo(()=>new DragSourceImpl(et,_e,tt),[_e,tt]);return reactExports.useEffect(()=>{st.spec=et},[et]),st}function useDragType(et){return reactExports.useMemo(()=>{const _e=et.type;return invariant(_e!=null,"spec.type must be defined"),_e},[et])}function useRegisteredDragSource(et,_e,tt){const st=useDragDropManager(),rt=useDragSource(et,_e,tt),nt=useDragType(et);useIsomorphicLayoutEffect(function(){if(nt!=null){const[ot,at]=registerSource(nt,rt,st);return _e.receiveHandlerId(ot),tt.receiveHandlerId(ot),at}},[st,_e,tt,rt,nt])}function useDrag(et,_e){const tt=useOptionalFactory(et);invariant(!tt.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const st=useDragSourceMonitor(),rt=useDragSourceConnector(tt.options,tt.previewOptions);return useRegisteredDragSource(tt,st,rt),[useCollectedProps(tt.collect,st,rt),useConnectDragSource(rt),useConnectDragPreview(rt)]}function useConnectDropTarget(et){return reactExports.useMemo(()=>et.hooks.dropTarget(),[et])}function useDropTargetConnector(et){const _e=useDragDropManager(),tt=reactExports.useMemo(()=>new TargetConnector(_e.getBackend()),[_e]);return useIsomorphicLayoutEffect(()=>(tt.dropTargetOptions=et||null,tt.reconnect(),()=>tt.disconnectDropTarget()),[et]),tt}function useDropTargetMonitor(){const et=useDragDropManager();return reactExports.useMemo(()=>new DropTargetMonitorImpl(et),[et])}function useAccept(et){const{accept:_e}=et;return reactExports.useMemo(()=>(invariant(et.accept!=null,"accept must be defined"),Array.isArray(_e)?_e:[_e]),[_e])}class DropTargetImpl{canDrop(){const _e=this.spec,tt=this.monitor;return _e.canDrop?_e.canDrop(tt.getItem(),tt):!0}hover(){const _e=this.spec,tt=this.monitor;_e.hover&&_e.hover(tt.getItem(),tt)}drop(){const _e=this.spec,tt=this.monitor;if(_e.drop)return _e.drop(tt.getItem(),tt)}constructor(_e,tt){this.spec=_e,this.monitor=tt}}function useDropTarget(et,_e){const tt=reactExports.useMemo(()=>new DropTargetImpl(et,_e),[_e]);return reactExports.useEffect(()=>{tt.spec=et},[et]),tt}function useRegisteredDropTarget(et,_e,tt){const st=useDragDropManager(),rt=useDropTarget(et,_e),nt=useAccept(et);useIsomorphicLayoutEffect(function(){const[ot,at]=registerTarget(nt,rt,st);return _e.receiveHandlerId(ot),tt.receiveHandlerId(ot),at},[st,_e,rt,tt,nt.map(it=>it.toString()).join("|")])}function useDrop(et,_e){const tt=useOptionalFactory(et),st=useDropTargetMonitor(),rt=useDropTargetConnector(tt.options);return useRegisteredDropTarget(tt,st,rt),[useCollectedProps(tt.collect,st,rt),useConnectDropTarget(rt)]}function memoize(et){let _e=null;return()=>(_e==null&&(_e=et()),_e)}function without(et,_e){return et.filter(tt=>tt!==_e)}function union(et,_e){const tt=new Set,st=nt=>tt.add(nt);et.forEach(st),_e.forEach(st);const rt=[];return tt.forEach(nt=>rt.push(nt)),rt}class EnterLeaveCounter{enter(_e){const tt=this.entered.length,st=rt=>this.isNodeInDocument(rt)&&(!rt.contains||rt.contains(_e));return this.entered=union(this.entered.filter(st),[_e]),tt===0&&this.entered.length>0}leave(_e){const tt=this.entered.length;return this.entered=without(this.entered.filter(this.isNodeInDocument),_e),tt>0&&this.entered.length===0}reset(){this.entered=[]}constructor(_e){this.entered=[],this.isNodeInDocument=_e}}class NativeDragSource{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(_e=>{Object.defineProperty(this.item,_e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${_e}" until the drop event.`),null}})})}loadDataTransfer(_e){if(_e){const tt={};Object.keys(this.config.exposeProperties).forEach(st=>{const rt=this.config.exposeProperties[st];rt!=null&&(tt[st]={value:rt(_e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,tt)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(_e,tt){return tt===_e.getSourceId()}endDrag(){}constructor(_e){this.config=_e,this.item={},this.initializeExposedProperties()}}const FILE="__NATIVE_FILE__",URL$1="__NATIVE_URL__",TEXT="__NATIVE_TEXT__",HTML="__NATIVE_HTML__",NativeTypes=Object.freeze(Object.defineProperty({__proto__:null,FILE,HTML,TEXT,URL:URL$1},Symbol.toStringTag,{value:"Module"}));function getDataFromDataTransfer(et,_e,tt){const st=_e.reduce((rt,nt)=>rt||et.getData(nt),"");return st??tt}const nativeTypesConfig={[FILE]:{exposeProperties:{files:et=>Array.prototype.slice.call(et.files),items:et=>et.items,dataTransfer:et=>et},matchesTypes:["Files"]},[HTML]:{exposeProperties:{html:(et,_e)=>getDataFromDataTransfer(et,_e,""),dataTransfer:et=>et},matchesTypes:["Html","text/html"]},[URL$1]:{exposeProperties:{urls:(et,_e)=>getDataFromDataTransfer(et,_e,"").split(`
`),dataTransfer:et=>et},matchesTypes:["Url","text/uri-list"]},[TEXT]:{exposeProperties:{text:(et,_e)=>getDataFromDataTransfer(et,_e,""),dataTransfer:et=>et},matchesTypes:["Text","text/plain"]}};function createNativeDragSource(et,_e){const tt=nativeTypesConfig[et];if(!tt)throw new Error(`native type ${et} has no configuration`);const st=new NativeDragSource(tt);return st.loadDataTransfer(_e),st}function matchNativeItemType(et){if(!et)return null;const _e=Array.prototype.slice.call(et.types||[]);return Object.keys(nativeTypesConfig).filter(tt=>{const st=nativeTypesConfig[tt];return st!=null&&st.matchesTypes?st.matchesTypes.some(rt=>_e.indexOf(rt)>-1):!1})[0]||null}const isFirefox=memoize(()=>/firefox/i.test(navigator.userAgent)),isSafari=memoize(()=>!!window.safari);class MonotonicInterpolant{interpolate(_e){const{xs:tt,ys:st,c1s:rt,c2s:nt,c3s:it}=this;let ot=tt.length-1;if(_e===tt[ot])return st[ot];let at=0,lt=it.length-1,ct;for(;at<=lt;){ct=Math.floor(.5*(at+lt));const ht=tt[ct];if(ht<_e)at=ct+1;else if(ht>_e)lt=ct-1;else return st[ct]}ot=Math.max(0,lt);const ut=_e-tt[ot],dt=ut*ut;return st[ot]+rt[ot]*ut+nt[ot]*dt+it[ot]*ut*dt}constructor(_e,tt){const{length:st}=_e,rt=[];for(let ht=0;ht<st;ht++)rt.push(ht);rt.sort((ht,pt)=>_e[ht]<_e[pt]?-1:1);const nt=[],it=[];let ot,at;for(let ht=0;ht<st-1;ht++)ot=_e[ht+1]-_e[ht],at=tt[ht+1]-tt[ht],nt.push(ot),it.push(at/ot);const lt=[it[0]];for(let ht=0;ht<nt.length-1;ht++){const pt=it[ht],mt=it[ht+1];if(pt*mt<=0)lt.push(0);else{ot=nt[ht];const gt=nt[ht+1],ft=ot+gt;lt.push(3*ft/((ft+gt)/pt+(ft+ot)/mt))}}lt.push(it[it.length-1]);const ct=[],ut=[];let dt;for(let ht=0;ht<lt.length-1;ht++){dt=it[ht];const pt=lt[ht],mt=1/nt[ht],gt=pt+lt[ht+1]-dt-dt;ct.push((dt-pt-gt)*mt),ut.push(gt*mt*mt)}this.xs=_e,this.ys=tt,this.c1s=lt,this.c2s=ct,this.c3s=ut}}const ELEMENT_NODE=1;function getNodeClientOffset(et){const _e=et.nodeType===ELEMENT_NODE?et:et.parentElement;if(!_e)return null;const{top:tt,left:st}=_e.getBoundingClientRect();return{x:st,y:tt}}function getEventClientOffset(et){return{x:et.clientX,y:et.clientY}}function isImageNode(et){var _e;return et.nodeName==="IMG"&&(isFirefox()||!(!((_e=document.documentElement)===null||_e===void 0)&&_e.contains(et)))}function getDragPreviewSize(et,_e,tt,st){let rt=et?_e.width:tt,nt=et?_e.height:st;return isSafari()&&et&&(nt/=window.devicePixelRatio,rt/=window.devicePixelRatio),{dragPreviewWidth:rt,dragPreviewHeight:nt}}function getDragPreviewOffset(et,_e,tt,st,rt){const nt=isImageNode(_e),ot=getNodeClientOffset(nt?et:_e),at={x:tt.x-ot.x,y:tt.y-ot.y},{offsetWidth:lt,offsetHeight:ct}=et,{anchorX:ut,anchorY:dt}=st,{dragPreviewWidth:ht,dragPreviewHeight:pt}=getDragPreviewSize(nt,_e,lt,ct),mt=()=>{let Ct=new MonotonicInterpolant([0,.5,1],[at.y,at.y/ct*pt,at.y+pt-ct]).interpolate(dt);return isSafari()&&nt&&(Ct+=(window.devicePixelRatio-1)*pt),Ct},gt=()=>new MonotonicInterpolant([0,.5,1],[at.x,at.x/lt*ht,at.x+ht-lt]).interpolate(ut),{offsetX:ft,offsetY:xt}=rt,yt=ft===0||ft,bt=xt===0||xt;return{x:yt?ft:gt(),y:bt?xt:mt()}}class OptionsReader{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var _e;return!((_e=this.globalContext)===null||_e===void 0)&&_e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var _e;return((_e=this.optionsArgs)===null||_e===void 0?void 0:_e.rootElement)||this.window}constructor(_e,tt){this.ownerDocument=null,this.globalContext=_e,this.optionsArgs=tt}}function _defineProperty(et,_e,tt){return _e in et?Object.defineProperty(et,_e,{value:tt,enumerable:!0,configurable:!0,writable:!0}):et[_e]=tt,et}function _objectSpread(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e]!=null?arguments[_e]:{},st=Object.keys(tt);typeof Object.getOwnPropertySymbols=="function"&&(st=st.concat(Object.getOwnPropertySymbols(tt).filter(function(rt){return Object.getOwnPropertyDescriptor(tt,rt).enumerable}))),st.forEach(function(rt){_defineProperty(et,rt,tt[rt])})}return et}class HTML5BackendImpl{profile(){var _e,tt;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((_e=this.dragStartSourceIds)===null||_e===void 0?void 0:_e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((tt=this.dragOverTargetIds)===null||tt===void 0?void 0:tt.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const _e=this.rootElement;if(_e!==void 0){if(_e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");_e.__isReactDndBackendSetUp=!0,this.addEventListeners(_e)}}teardown(){const _e=this.rootElement;if(_e!==void 0&&(_e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var tt;(tt=this.window)===null||tt===void 0||tt.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(_e,tt,st){return this.sourcePreviewNodeOptions.set(_e,st),this.sourcePreviewNodes.set(_e,tt),()=>{this.sourcePreviewNodes.delete(_e),this.sourcePreviewNodeOptions.delete(_e)}}connectDragSource(_e,tt,st){this.sourceNodes.set(_e,tt),this.sourceNodeOptions.set(_e,st);const rt=it=>this.handleDragStart(it,_e),nt=it=>this.handleSelectStart(it);return tt.setAttribute("draggable","true"),tt.addEventListener("dragstart",rt),tt.addEventListener("selectstart",nt),()=>{this.sourceNodes.delete(_e),this.sourceNodeOptions.delete(_e),tt.removeEventListener("dragstart",rt),tt.removeEventListener("selectstart",nt),tt.setAttribute("draggable","false")}}connectDropTarget(_e,tt){const st=it=>this.handleDragEnter(it,_e),rt=it=>this.handleDragOver(it,_e),nt=it=>this.handleDrop(it,_e);return tt.addEventListener("dragenter",st),tt.addEventListener("dragover",rt),tt.addEventListener("drop",nt),()=>{tt.removeEventListener("dragenter",st),tt.removeEventListener("dragover",rt),tt.removeEventListener("drop",nt)}}addEventListeners(_e){_e.addEventListener&&(_e.addEventListener("dragstart",this.handleTopDragStart),_e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),_e.addEventListener("dragend",this.handleTopDragEndCapture,!0),_e.addEventListener("dragenter",this.handleTopDragEnter),_e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),_e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),_e.addEventListener("dragover",this.handleTopDragOver),_e.addEventListener("dragover",this.handleTopDragOverCapture,!0),_e.addEventListener("drop",this.handleTopDrop),_e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(_e){_e.removeEventListener&&(_e.removeEventListener("dragstart",this.handleTopDragStart),_e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),_e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),_e.removeEventListener("dragenter",this.handleTopDragEnter),_e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),_e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),_e.removeEventListener("dragover",this.handleTopDragOver),_e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),_e.removeEventListener("drop",this.handleTopDrop),_e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const _e=this.monitor.getSourceId(),tt=this.sourceNodeOptions.get(_e);return _objectSpread({dropEffect:this.altKeyPressed?"copy":"move"},tt||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const _e=this.monitor.getSourceId(),tt=this.sourcePreviewNodeOptions.get(_e);return _objectSpread({anchorX:.5,anchorY:.5,captureDraggingState:!1},tt||{})}isDraggingNativeItem(){const _e=this.monitor.getItemType();return Object.keys(NativeTypes).some(tt=>NativeTypes[tt]===_e)}beginDragNativeItem(_e,tt){this.clearCurrentDragSourceNode(),this.currentNativeSource=createNativeDragSource(_e,tt),this.currentNativeHandle=this.registry.addSource(_e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(_e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=_e;const tt=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var st;return(st=this.rootElement)===null||st===void 0?void 0:st.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},tt)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var _e;(_e=this.window)===null||_e===void 0||_e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(_e,tt){_e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(tt))}handleDragEnter(_e,tt){this.dragEnterTargetIds.unshift(tt)}handleDragOver(_e,tt){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(tt)}handleDrop(_e,tt){this.dropTargetIds.unshift(tt)}constructor(_e,tt,st){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=rt=>{const nt=this.sourceNodes.get(rt);return nt&&getNodeClientOffset(nt)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=rt=>!!(rt&&this.document&&this.document.body&&this.document.body.contains(rt)),this.endDragIfSourceWasRemovedFromDOM=()=>{const rt=this.currentDragSourceNode;rt==null||this.isNodeInDocument(rt)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=rt=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(rt||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=rt=>{if(rt.defaultPrevented)return;const{dragStartSourceIds:nt}=this;this.dragStartSourceIds=null;const it=getEventClientOffset(rt);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(nt||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:it});const{dataTransfer:ot}=rt,at=matchNativeItemType(ot);if(this.monitor.isDragging()){if(ot&&typeof ot.setDragImage=="function"){const ct=this.monitor.getSourceId(),ut=this.sourceNodes.get(ct),dt=this.sourcePreviewNodes.get(ct)||ut;if(dt){const{anchorX:ht,anchorY:pt,offsetX:mt,offsetY:gt}=this.getCurrentSourcePreviewNodeOptions(),yt=getDragPreviewOffset(ut,dt,it,{anchorX:ht,anchorY:pt},{offsetX:mt,offsetY:gt});ot.setDragImage(dt,yt.x,yt.y)}}try{ot==null||ot.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(rt.target);const{captureDraggingState:lt}=this.getCurrentSourcePreviewNodeOptions();lt?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(at)this.beginDragNativeItem(at);else{if(ot&&!ot.types&&(rt.target&&!rt.target.hasAttribute||!rt.target.hasAttribute("draggable")))return;rt.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=rt=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var nt;(nt=this.currentNativeSource)===null||nt===void 0||nt.loadDataTransfer(rt.dataTransfer)}if(!this.enterLeaveCounter.enter(rt.target)||this.monitor.isDragging())return;const{dataTransfer:ot}=rt,at=matchNativeItemType(ot);at&&this.beginDragNativeItem(at,ot)},this.handleTopDragEnter=rt=>{const{dragEnterTargetIds:nt}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=rt.altKey,nt.length>0&&this.actions.hover(nt,{clientOffset:getEventClientOffset(rt)}),nt.some(ot=>this.monitor.canDropOnTarget(ot))&&(rt.preventDefault(),rt.dataTransfer&&(rt.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=rt=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var nt;(nt=this.currentNativeSource)===null||nt===void 0||nt.loadDataTransfer(rt.dataTransfer)}},this.handleTopDragOver=rt=>{const{dragOverTargetIds:nt}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){rt.preventDefault(),rt.dataTransfer&&(rt.dataTransfer.dropEffect="none");return}this.altKeyPressed=rt.altKey,this.lastClientOffset=getEventClientOffset(rt),this.scheduleHover(nt),(nt||[]).some(ot=>this.monitor.canDropOnTarget(ot))?(rt.preventDefault(),rt.dataTransfer&&(rt.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?rt.preventDefault():(rt.preventDefault(),rt.dataTransfer&&(rt.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=rt=>{this.isDraggingNativeItem()&&rt.preventDefault(),this.enterLeaveCounter.leave(rt.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=rt=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var nt;rt.preventDefault(),(nt=this.currentNativeSource)===null||nt===void 0||nt.loadDataTransfer(rt.dataTransfer)}else matchNativeItemType(rt.dataTransfer)&&rt.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=rt=>{const{dropTargetIds:nt}=this;this.dropTargetIds=[],this.actions.hover(nt,{clientOffset:getEventClientOffset(rt)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=rt=>{const nt=rt.target;typeof nt.dragDrop=="function"&&(nt.tagName==="INPUT"||nt.tagName==="SELECT"||nt.tagName==="TEXTAREA"||nt.isContentEditable||(rt.preventDefault(),nt.dragDrop()))},this.options=new OptionsReader(tt,st),this.actions=_e.getActions(),this.monitor=_e.getMonitor(),this.registry=_e.getRegistry(),this.enterLeaveCounter=new EnterLeaveCounter(this.isNodeInDocument)}}const HTML5Backend=function(_e,tt,st){return new HTML5BackendImpl(_e,tt,st)},FormulaItemComponent=({item:et,index:_e,moveItem:tt,removeItem:st,editItem:rt})=>{const[nt,it]=reactExports.useState(!1),[ot,at]=reactExports.useState(et.value),[{isDragging:lt},ct]=useDrag({type:"formula-item",item:()=>({index:_e}),collect:pt=>({isDragging:pt.isDragging()})}),[,ut]=useDrop({accept:"formula-item",hover:pt=>{pt.index!==_e&&(tt(pt.index,_e),pt.index=_e)}}),dt=()=>{let pt="px-3 py-2 rounded-lg flex items-center text-sm font-medium mr-2 mb-2 ";switch(lt&&(pt+="opacity-50 "),et.type){case"field":return pt+"bg-blue-100 text-blue-800 border border-blue-300";case"customAttribute":return pt+"bg-purple-100 text-purple-800 border border-purple-300";case"operator":return pt+"bg-gray-200 text-gray-800 border border-gray-300";case"constant":return pt+"bg-green-100 text-green-800 border border-green-300";default:return pt+"bg-gray-100"}},ht=()=>{rt&&et.type==="constant"&&rt(_e,ot),it(!1)};return jsxRuntimeExports.jsx("div",{ref:pt=>ct(ut(pt)),className:dt(),style:{cursor:"move"},children:et.type==="constant"&&nt?jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"number",className:"w-20 px-2 py-1 border rounded-md text-sm mr-2",value:ot,onChange:pt=>at(pt.target.value),onClick:pt=>pt.stopPropagation(),autoFocus:!0}),jsxRuntimeExports.jsx("button",{onClick:pt=>{pt.stopPropagation(),ht()},className:"text-green-600 hover:text-green-800",children:jsxRuntimeExports.jsx(Save,{size:14})})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MoveVertical,{size:14,className:"mr-2 text-gray-500"}),jsxRuntimeExports.jsx("span",{children:et.displayValue||et.value}),et.type==="constant"&&jsxRuntimeExports.jsx("button",{onClick:pt=>{pt.stopPropagation(),it(!0)},className:"ml-2 text-blue-600 hover:text-blue-800",children:jsxRuntimeExports.jsx(Pen,{size:14})}),jsxRuntimeExports.jsx("button",{onClick:pt=>{pt.stopPropagation(),st(_e)},className:"ml-2 text-red-600 hover:text-red-800",children:jsxRuntimeExports.jsx(X$1,{size:14})})]})})},ProfitFormulaEditor=()=>{var et;const{products,getBestSupplierForProduct,customAttributes}=useAppContext(),FORMULA_STORAGE_KEY="profit-formula-items",[formulaItems,setFormulaItems]=reactExports.useState(()=>{const _e=localStorage.getItem(FORMULA_STORAGE_KEY);if(_e)try{return JSON.parse(_e)}catch(tt){console.error("Failed to parse saved formula",tt)}return[{id:"1",type:"field",value:"salePrice",displayValue:"Sale Price"},{id:"2",type:"operator",value:"-",displayValue:"-"},{id:"3",type:"field",value:"amazonFee",displayValue:"Amazon Fee"},{id:"4",type:"operator",value:"-",displayValue:"-"},{id:"5",type:"field",value:"supplierCost",displayValue:"Supplier Cost"}]}),[isSaved,setIsSaved]=reactExports.useState(!0),[formulaError,setFormulaError]=reactExports.useState(null),[showFieldMenu,setShowFieldMenu]=reactExports.useState(!1),[showOperatorMenu,setShowOperatorMenu]=reactExports.useState(!1),[showConstantInput,setShowConstantInput]=reactExports.useState(!1),[constantValue,setConstantValue]=reactExports.useState("0"),[isCalculating,setIsCalculating]=reactExports.useState(!1),[dataResults,setDataResults]=reactExports.useState([]),[showResultsTable,setShowResultsTable]=reactExports.useState(!1),[sortField,setSortField]=reactExports.useState("profit"),[sortDirection,setSortDirection]=reactExports.useState("desc"),[exampleProduct,setExampleProduct]=reactExports.useState(null),[calculationResult]=reactExports.useState(null),standardFields=[{value:"salePrice",displayValue:"Sale Price"},{value:"amazonFee",displayValue:"Amazon Fee"},{value:"supplierCost",displayValue:"Supplier Cost"},{value:"buyBoxPrice",displayValue:"Buy Box Price"},{value:"unitsSold",displayValue:"Units Sold"}],numericCustomAttributes=customAttributes.filter(_e=>_e.forType==="product"&&_e.type==="Number").map(_e=>({value:`attr_${_e.id}`,displayValue:_e.name,attributeId:_e.id})),operators=[{value:"+",displayValue:"+"},{value:"-",displayValue:"-"},{value:"*",displayValue:""},{value:"/",displayValue:""},{value:"(",displayValue:"("},{value:")",displayValue:")"}];reactExports.useEffect(()=>{(()=>{const tt=products.find(st=>getBestSupplierForProduct(st.id)!==void 0);if(tt){const st=getBestSupplierForProduct(tt.id);st&&setExampleProduct({...tt,supplierCost:st.cost})}})()},[products,getBestSupplierForProduct]),reactExports.useEffect(()=>{setIsSaved(!1),validateFormula()},[formulaItems]);const calculateAllProductProfits=reactExports.useCallback(()=>{if(!(formulaError||formulaItems.length===0)){setIsCalculating(!0);try{const results=[];products.forEach(product=>{const bestSupplier=getBestSupplierForProduct(product.id);if(!bestSupplier)return;const values={salePrice:product.salePrice||0,amazonFee:product.amazonFee||0,supplierCost:bestSupplier.cost||0,buyBoxPrice:product.buyBoxPrice||0,unitsSold:product.unitsSold||0},customValues={};numericCustomAttributes.forEach(_e=>{var nt,it;const tt=_e.attributeId,st=((it=(nt=product.attributes)==null?void 0:nt.find(ot=>ot.attributeId===tt))==null?void 0:it.value)||0,rt=typeof st=="number"?st:0;values[`attr_${tt}`]=rt,customValues[_e.displayValue]=rt});let formulaStr="";formulaItems.forEach(_e=>{_e.type==="field"||_e.type==="customAttribute"?formulaStr+=values[_e.value]||0:(_e.type==="operator"||_e.type==="constant")&&(formulaStr+=_e.value)});try{const profit=eval(formulaStr),profitMargin=profit/product.salePrice*100;results.push({productId:product.id,productTitle:product.title,salePrice:product.salePrice,amazonFee:product.amazonFee,supplierCost:bestSupplier.cost,customValues,profit,profitMargin})}catch(_e){console.error(`Error calculating profit for product ${product.title}:`,_e)}}),setDataResults(results),setShowResultsTable(!0)}catch(_e){console.error("Error calculating profits:",_e)}finally{setIsCalculating(!1)}}},[products,getBestSupplierForProduct,formulaItems,formulaError,numericCustomAttributes]),sortedResults=reactExports.useMemo(()=>dataResults.length?[...dataResults].sort((_e,tt)=>{let st,rt;return sortField==="productTitle"?(st=_e.productTitle,rt=tt.productTitle,sortDirection==="asc"?st.localeCompare(rt):rt.localeCompare(st)):(st=_e[sortField],rt=tt[sortField],sortDirection==="asc"?st-rt:rt-st)}):[],[dataResults,sortField,sortDirection]),handleSort=_e=>{sortField===_e?setSortDirection(sortDirection==="asc"?"desc":"asc"):(setSortField(_e),setSortDirection("desc"))},profitStats=reactExports.useMemo(()=>{if(!dataResults.length)return{avg:0,min:0,max:0,total:0};const _e=dataResults.map(it=>it.profit),tt=_e.reduce((it,ot)=>it+ot,0),st=tt/_e.length,rt=Math.min(..._e),nt=Math.max(..._e);return{avg:st,min:rt,max:nt,total:tt}},[dataResults]),exportToCSV=()=>{if(!dataResults.length)return;const st=[["Product Title","Sale Price","Amazon Fee","Supplier Cost",...Object.keys(dataResults[0].customValues),"Profit","Profit Margin (%)"].join(","),...sortedResults.map(ot=>[`"${ot.productTitle.replace(/"/g,'""')}"`,ot.salePrice.toFixed(2),ot.amazonFee.toFixed(2),ot.supplierCost.toFixed(2),...Object.values(ot.customValues).map(lt=>lt.toFixed(2)),ot.profit.toFixed(2),ot.profitMargin.toFixed(2)].join(","))].join(`
`),rt=new Blob([st],{type:"text/csv;charset=utf-8;"}),nt=URL.createObjectURL(rt),it=document.createElement("a");it.setAttribute("href",nt),it.setAttribute("download",`profit-analysis-${new Date().toISOString().slice(0,10)}.csv`),it.style.visibility="hidden",document.body.appendChild(it),it.click(),document.body.removeChild(it)},moveItem=reactExports.useCallback((_e,tt)=>{setFormulaItems(st=>{const rt=[...st],nt=rt[_e];return rt.splice(_e,1),rt.splice(tt,0,nt),rt})},[]),addField=_e=>{const tt={id:Date.now().toString(),type:_e.value.startsWith("attr_")?"customAttribute":"field",value:_e.value,displayValue:_e.displayValue};setFormulaItems([...formulaItems,tt]),setShowFieldMenu(!1)},addOperator=_e=>{const tt={id:Date.now().toString(),type:"operator",value:_e.value,displayValue:_e.displayValue};setFormulaItems([...formulaItems,tt]),setShowOperatorMenu(!1)},addConstant=()=>{if(!isNaN(Number(constantValue))){const _e={id:Date.now().toString(),type:"constant",value:constantValue,displayValue:constantValue};setFormulaItems([...formulaItems,_e]),setConstantValue("0"),setShowConstantInput(!1)}},removeItem=_e=>{setFormulaItems(formulaItems.filter((tt,st)=>st!==_e))},editItem=(_e,tt)=>{setFormulaItems(st=>{const rt=[...st];return rt[_e].type==="constant"&&(rt[_e]={...rt[_e],value:tt,displayValue:tt}),rt})},saveFormula=()=>{localStorage.setItem(FORMULA_STORAGE_KEY,JSON.stringify(formulaItems)),setIsSaved(!0)},resetFormula=()=>{if(window.confirm("Are you sure you want to reset the formula to default?")){const _e=[{id:"1",type:"field",value:"salePrice",displayValue:"Sale Price"},{id:"2",type:"operator",value:"-",displayValue:"-"},{id:"3",type:"field",value:"amazonFee",displayValue:"Amazon Fee"},{id:"4",type:"operator",value:"-",displayValue:"-"},{id:"5",type:"field",value:"supplierCost",displayValue:"Supplier Cost"}];setFormulaItems(_e),localStorage.setItem(FORMULA_STORAGE_KEY,JSON.stringify(_e)),setIsSaved(!0),setFormulaError(null)}},validateFormula=()=>{if(formulaItems.length===0){setFormulaError("Formula cannot be empty");return}let _e=0;if(formulaItems.forEach(st=>{if(st.value==="("&&_e++,st.value===")"&&_e--,_e<0){setFormulaError("Unbalanced parentheses");return}}),_e!==0){setFormulaError("Unbalanced parentheses");return}let tt=!1;for(let st=0;st<formulaItems.length-1;st++)if(formulaItems[st].type==="operator"&&formulaItems[st+1].type==="operator"&&formulaItems[st].value!=="("&&formulaItems[st+1].value!==")"){tt=!0;break}if(tt){setFormulaError("Formula contains consecutive operators");return}setFormulaError(null)};return jsxRuntimeExports.jsx(DndProvider,{backend:HTML5Backend,children:jsxRuntimeExports.jsxs(Card,{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold",children:"Profit Calculation Formula"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Create a custom formula to calculate profit for your products."})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",onClick:resetFormula,className:"flex items-center",children:[jsxRuntimeExports.jsx(AlertCircle,{size:16,className:"mr-1"})," Reset"]}),jsxRuntimeExports.jsxs(Button,{onClick:saveFormula,disabled:isSaved||!!formulaError,className:"flex items-center",children:[jsxRuntimeExports.jsx(Save,{size:16,className:"mr-1"})," ",isSaved?"Saved":"Save Formula"]})]})]}),formulaError&&jsxRuntimeExports.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4 flex items-center",children:[jsxRuntimeExports.jsx(AlertCircle,{size:18,className:"mr-2"}),formulaError]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-4 rounded mb-6 border border-gray-200",children:[jsxRuntimeExports.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[jsxRuntimeExports.jsx(Calculator,{size:18,className:"mr-2 text-blue-600"}),"Current Formula"]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap min-h-16 p-3 bg-white rounded border border-gray-300 mb-4",children:formulaItems.length>0?formulaItems.map((_e,tt)=>jsxRuntimeExports.jsx(FormulaItemComponent,{item:_e,index:tt,moveItem,removeItem,editItem},_e.id)):jsxRuntimeExports.jsx("div",{className:"text-gray-500 italic",children:"Your formula will appear here. Add fields, operators, and constants below."})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"flex items-center",onClick:()=>{setShowFieldMenu(!showFieldMenu),setShowOperatorMenu(!1),setShowConstantInput(!1)},children:[jsxRuntimeExports.jsx(PlusCircle,{size:16,className:"mr-1"})," Add Field"]}),showFieldMenu&&jsxRuntimeExports.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white shadow-lg rounded-lg border border-gray-200 z-10 w-64",children:[jsxRuntimeExports.jsx("div",{className:"p-2 border-b border-gray-200 bg-gray-50",children:jsxRuntimeExports.jsx("h5",{className:"font-medium",children:"Standard Fields"})}),jsxRuntimeExports.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[standardFields.map(_e=>jsxRuntimeExports.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",onClick:()=>addField(_e),children:[jsxRuntimeExports.jsx("span",{className:"w-8 h-5 bg-blue-100 rounded-sm mr-2 inline-block"}),_e.displayValue]},_e.value)),numericCustomAttributes.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"p-2 border-b border-t border-gray-200 bg-gray-50",children:jsxRuntimeExports.jsx("h5",{className:"font-medium",children:"Custom Attributes"})}),numericCustomAttributes.map(_e=>jsxRuntimeExports.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",onClick:()=>addField(_e),children:[jsxRuntimeExports.jsx("span",{className:"w-8 h-5 bg-purple-100 rounded-sm mr-2 inline-block"}),_e.displayValue]},_e.value))]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"flex items-center",onClick:()=>{setShowOperatorMenu(!showOperatorMenu),setShowFieldMenu(!1),setShowConstantInput(!1)},children:[jsxRuntimeExports.jsx(PlusCircle,{size:16,className:"mr-1"})," Add Operator"]}),showOperatorMenu&&jsxRuntimeExports.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white shadow-lg rounded-lg border border-gray-200 z-10 w-48",children:[jsxRuntimeExports.jsx("div",{className:"p-2 border-b border-gray-200 bg-gray-50",children:jsxRuntimeExports.jsx("h5",{className:"font-medium",children:"Operators"})}),jsxRuntimeExports.jsx("div",{children:operators.map(_e=>jsxRuntimeExports.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",onClick:()=>addOperator(_e),children:[jsxRuntimeExports.jsx("span",{className:"w-8 h-5 bg-gray-200 rounded-sm mr-2 flex items-center justify-center font-bold",children:_e.displayValue}),_e.value==="+"&&"Addition",_e.value==="-"&&"Subtraction",_e.value==="*"&&"Multiplication",_e.value==="/"&&"Division",_e.value==="("&&"Open Parenthesis",_e.value===")"&&"Close Parenthesis"]},_e.value))})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"flex items-center",onClick:()=>{setShowConstantInput(!showConstantInput),setShowFieldMenu(!1),setShowOperatorMenu(!1)},children:[jsxRuntimeExports.jsx(PlusCircle,{size:16,className:"mr-1"})," Add Constant"]}),showConstantInput&&jsxRuntimeExports.jsx("div",{className:"absolute left-0 top-full mt-1 bg-white shadow-lg rounded-lg border border-gray-200 z-10 w-64 p-3",children:jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("input",{type:"number",className:"border border-gray-300 rounded p-2 flex-grow",value:constantValue,onChange:_e=>setConstantValue(_e.target.value),placeholder:"Enter a number",autoFocus:!0}),jsxRuntimeExports.jsx(Button,{onClick:addConstant,children:"Add"})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 flex items-start",children:[jsxRuntimeExports.jsx(Info,{size:16,className:"mr-1 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"mb-1",children:"Create your formula by adding fields, operators, and constants. Drag items to rearrange them."}),jsxRuntimeExports.jsx("p",{children:"Example: (Sale Price - Amazon Fee - Supplier Cost) * 0.9"})]})]})]}),calculationResult&&exampleProduct&&jsxRuntimeExports.jsxs("div",{className:"border-t pt-4 mt-4",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold mb-3 flex items-center",children:[jsxRuntimeExports.jsx(Calculator,{size:18,className:"mr-2 text-green-600"}),"Example Calculation"]}),jsxRuntimeExports.jsxs("p",{className:"mb-2 text-sm",children:["Using product: ",jsxRuntimeExports.jsx("span",{className:"font-medium",children:exampleProduct.title})]}),jsxRuntimeExports.jsx("div",{className:"bg-gray-50 p-4 rounded mb-4 border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h5",{className:"font-medium mb-2",children:"Values Used"}),calculationResult.steps.slice(0,-1).map((_e,tt)=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between py-1 border-b",children:[jsxRuntimeExports.jsxs("span",{children:[_e.description,":"]}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:["$",_e.value.toFixed(2)]})]},tt))]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h5",{className:"font-medium mb-2",children:"Formula Result"}),jsxRuntimeExports.jsxs("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("div",{className:"text-sm mb-1",children:"Your Formula:"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:formulaItems.map(_e=>_e.displayValue).join(" ")})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center py-2 border-t border-green-200",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Net Profit:"}),jsxRuntimeExports.jsxs("span",{className:"text-lg font-bold text-green-700",children:["$",calculationResult.result.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center py-2 border-t border-green-200",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Profit Margin:"}),jsxRuntimeExports.jsxs("span",{className:"text-lg font-bold text-green-700",children:[(calculationResult.result/exampleProduct.salePrice*100).toFixed(1),"%"]})]})]})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"border-t pt-4 mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-3",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold flex items-center",children:[jsxRuntimeExports.jsx(Calculator,{size:18,className:"mr-2 text-blue-600"}),"Real Data Calculations"]}),jsxRuntimeExports.jsx(Button,{onClick:calculateAllProductProfits,disabled:isCalculating||!!formulaError,className:"flex items-center",children:isCalculating?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"Calculating..."}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Calculator,{size:16,className:"mr-1"}),"Calculate All Products"]})})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Apply the formula to all your products to see real profit calculations based on your database data."})]}),showResultsTable&&dataResults.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-4 border-t pt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold",children:"Profit Analysis Results"}),jsxRuntimeExports.jsxs(Button,{variant:"secondary",onClick:exportToCSV,className:"flex items-center",children:[jsxRuntimeExports.jsx(Download,{size:16,className:"mr-1"})," Export CSV"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-3 rounded border border-blue-100",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-blue-700 font-medium",children:"Average Profit"}),jsxRuntimeExports.jsxs("div",{className:"text-xl font-bold",children:["$",profitStats.avg.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-red-50 p-3 rounded border border-red-100",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-red-700 font-medium",children:"Minimum Profit"}),jsxRuntimeExports.jsxs("div",{className:"text-xl font-bold",children:["$",profitStats.min.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-green-50 p-3 rounded border border-green-100",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-green-700 font-medium",children:"Maximum Profit"}),jsxRuntimeExports.jsxs("div",{className:"text-xl font-bold",children:["$",profitStats.max.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-purple-50 p-3 rounded border border-purple-100",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-purple-700 font-medium",children:"Total Profit"}),jsxRuntimeExports.jsxs("div",{className:"text-xl font-bold",children:["$",profitStats.total.toFixed(2)]})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded border overflow-x-auto max-h-96",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 border-b sticky top-0",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsxs("th",{className:`px-4 py-2 text-left text-sm font-medium text-gray-500 cursor-pointer ${sortField==="productTitle"?"bg-gray-100":""}`,onClick:()=>handleSort("productTitle"),children:["Product",sortField==="productTitle"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:sortDirection==="asc"?"":""})]}),jsxRuntimeExports.jsxs("th",{className:`px-4 py-2 text-left text-sm font-medium text-gray-500 cursor-pointer ${sortField==="salePrice"?"bg-gray-100":""}`,onClick:()=>handleSort("salePrice"),children:["Sale Price",sortField==="salePrice"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:sortDirection==="asc"?"":""})]}),jsxRuntimeExports.jsxs("th",{className:`px-4 py-2 text-left text-sm font-medium text-gray-500 cursor-pointer ${sortField==="amazonFee"?"bg-gray-100":""}`,onClick:()=>handleSort("amazonFee"),children:["Amazon Fee",sortField==="amazonFee"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:sortDirection==="asc"?"":""})]}),jsxRuntimeExports.jsxs("th",{className:`px-4 py-2 text-left text-sm font-medium text-gray-500 cursor-pointer ${sortField==="supplierCost"?"bg-gray-100":""}`,onClick:()=>handleSort("supplierCost"),children:["Supplier Cost",sortField==="supplierCost"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:sortDirection==="asc"?"":""})]}),Object.keys(((et=dataResults[0])==null?void 0:et.customValues)||{}).map(_e=>jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:_e},_e)),jsxRuntimeExports.jsxs("th",{className:`px-4 py-2 text-left text-sm font-medium text-gray-500 cursor-pointer ${sortField==="profit"?"bg-gray-100":""}`,onClick:()=>handleSort("profit"),children:["Profit",sortField==="profit"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:sortDirection==="asc"?"":""})]}),jsxRuntimeExports.jsxs("th",{className:`px-4 py-2 text-left text-sm font-medium text-gray-500 cursor-pointer ${sortField==="profitMargin"?"bg-gray-100":""}`,onClick:()=>handleSort("profitMargin"),children:["Margin %",sortField==="profitMargin"&&jsxRuntimeExports.jsx("span",{className:"ml-1",children:sortDirection==="asc"?"":""})]})]})}),jsxRuntimeExports.jsx("tbody",{children:sortedResults.map(_e=>jsxRuntimeExports.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:jsxRuntimeExports.jsx("div",{className:"truncate max-w-xs",children:_e.productTitle})}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-2 text-gray-900",children:["$",_e.salePrice.toFixed(2)]}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-2 text-red-600",children:["$",_e.amazonFee.toFixed(2)]}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-2 text-red-600",children:["$",_e.supplierCost.toFixed(2)]}),Object.values(_e.customValues).map((tt,st)=>jsxRuntimeExports.jsxs("td",{className:"px-4 py-2 text-gray-600",children:["$",tt.toFixed(2)]},st)),jsxRuntimeExports.jsxs("td",{className:`px-4 py-2 font-medium ${_e.profit>=0?"text-green-600":"text-red-600"}`,children:["$",_e.profit.toFixed(2)]}),jsxRuntimeExports.jsxs("td",{className:`px-4 py-2 font-medium ${_e.profitMargin>=0?"text-green-600":"text-red-600"}`,children:[_e.profitMargin.toFixed(1),"%"]})]},_e.productId))})]})}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["Showing ",sortedResults.length," products. Click column headers to sort."]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t pt-4 mt-6",children:[jsxRuntimeExports.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[jsxRuntimeExports.jsx(HelpCircle,{size:16,className:"mr-2 text-blue-600"}),"Formula Tips"]}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-6 text-sm text-gray-700 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Drag items to reorder them in your formula"}),jsxRuntimeExports.jsx("li",{children:"Click the X to remove an item from the formula"}),jsxRuntimeExports.jsx("li",{children:"Click the pencil icon to edit constant values"}),jsxRuntimeExports.jsx("li",{children:"Use parentheses to control the order of operations"}),jsxRuntimeExports.jsx("li",{children:"Save your formula to see it applied across all reports"})]})]})]})})},ProfitDistributionChart=()=>{const{products:et,supplierProducts:_e,getBestSupplierForProduct:tt}=useAppContext(),st=reactExports.useMemo(()=>{const it=[{label:"Loss",min:-1/0,max:0},{label:"0-10%",min:0,max:10},{label:"11-20%",min:10,max:20},{label:"21-30%",min:20,max:30},{label:"31-40%",min:30,max:40},{label:"Over 40%",min:40,max:1/0}],ot=it.map(()=>0);return et.forEach(at=>{const lt=tt(at.id);if(lt){const ut=(at.salePrice-at.amazonFee-lt.cost)/at.salePrice*100,dt=it.findIndex(ht=>ut>ht.min&&ut<=ht.max);dt!==-1&&ot[dt]++}}),{labels:it.map(at=>at.label),data:ot}},[et,tt]),rt={labels:st.labels,datasets:[{label:"Number of Products",data:st.data,backgroundColor:["rgba(239, 68, 68, 0.7)","rgba(249, 115, 22, 0.7)","rgba(234, 179, 8, 0.7)","rgba(132, 204, 22, 0.7)","rgba(34, 197, 94, 0.7)","rgba(16, 185, 129, 0.7)"],borderColor:["#ef4444","#f97316","#eab308","#84cc16","#22c55e","#10b981"],borderWidth:1}]},nt={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Products by Profit Margin Range",font:{size:14}}},scales:{y:{beginAtZero:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"}},x:{grid:{display:!1}}}};return jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Profit Margin Distribution"}),jsxRuntimeExports.jsx("div",{className:"h-[300px]",children:jsxRuntimeExports.jsx(Bar,{data:rt,options:nt})})]})},TopProfitableProducts=()=>{const{products:et,getBestSupplierForProduct:_e}=useAppContext(),tt=reactExports.useMemo(()=>et.map(rt=>{const nt=_e(rt.id);if(!nt)return null;const it=rt.salePrice-rt.amazonFee-nt.cost,ot=it/rt.salePrice*100,at=it*rt.unitsSold;return{id:rt.id,title:rt.title,margin:ot,profit:at}}).filter(rt=>rt!==null&&rt.margin>0).sort((rt,nt)=>nt.profit-rt.profit).slice(0,5),[et,_e]);return tt.length===0?jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Top 5 Most Profitable Products"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"No profitable products found."})]}):jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Top 5 Most Profitable Products"}),jsxRuntimeExports.jsx(Table,{headers:["Product","Profit Margin","Monthly Profit"],children:tt.map(st=>jsxRuntimeExports.jsxs("tr",{className:"border-t",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:st.title}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-2",children:[st.margin.toFixed(1),"%"]}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-2",children:["$",st.profit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]},st.id))})]})},BrandProfitAnalysis=()=>{const{products:et,suppliers:_e,supplierProducts:tt,getBestSupplierForProduct:st}=useAppContext(),rt=reactExports.useMemo(()=>{const nt=new Map;et.forEach(ot=>{const at=st(ot.id);if(!at)return;const lt=ot.salePrice-ot.amazonFee-at.cost,ct=lt/ot.salePrice*100,ut=lt*ot.unitsSold;if(ct<=0)return;nt.has(ot.brand)||nt.set(ot.brand,{products:[],totalMargin:0,totalProfit:0,supplierCounts:new Map,supplierProducts:new Map});const dt=nt.get(ot.brand);dt.products.push(ot.id),dt.totalMargin+=ct,dt.totalProfit+=ut;const ht=tt.filter(pt=>pt.product_id===ot.id).map(pt=>pt.supplier_id);ht.length>1&&dt.supplierProducts.set(ot.id,ht.length),ht.forEach(pt=>{const mt=dt.supplierCounts.get(pt)||0;dt.supplierCounts.set(pt,mt+1)})});const it=[];return nt.forEach((ot,at)=>{if(ot.products.length===0)return;let lt="",ct=0;ot.supplierCounts.forEach((ht,pt)=>{ht>ct&&(ct=ht,lt=pt)});const ut=_e.find(ht=>ht.id===lt),dt=ot.supplierProducts.size;it.push({brand:at,products:ot.products.length,avgMargin:ot.totalMargin/ot.products.length,monthlyProfit:ot.totalProfit,bestSupplier:(ut==null?void 0:ut.name)||"Unknown",multiSupplierProducts:dt})}),it.sort((ot,at)=>at.monthlyProfit-ot.monthlyProfit)},[et,_e,tt,st]);return rt.length===0?jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Profit Analysis by Brand"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"No brand profit data available."})]}):jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Profit Analysis by Brand"}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsx(Table,{headers:["Brand","Products","Avg. Profit Margin","Monthly Profit","Best Supplier","Multi-Supplier Products"],children:rt.map((nt,it)=>jsxRuntimeExports.jsxs("tr",{className:"border-t",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-2 font-medium",children:nt.brand}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:nt.products}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-2",children:[nt.avgMargin.toFixed(1),"%"]}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-2",children:["$",nt.monthlyProfit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:nt.bestSupplier}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2",children:nt.multiSupplierProducts})]},it))})})]})},ProfitAnalysis=()=>{const[et,_e]=reactExports.useState("formula");return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Profit Analysis"}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow-sm mb-6 border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap",children:[jsxRuntimeExports.jsxs("button",{className:`flex items-center px-6 py-3 font-medium transition-all rounded-tl-lg ${et==="formula"?"bg-blue-50 text-blue-700 border-b-2 border-blue-500":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>_e("formula"),children:[jsxRuntimeExports.jsx(Calculator,{size:18,className:`mr-2 ${et==="formula"?"text-blue-600":"text-gray-500"}`}),"Profit Formula"]}),jsxRuntimeExports.jsxs("button",{className:`flex items-center px-6 py-3 font-medium transition-all ${et==="distribution"?"bg-blue-50 text-blue-700 border-b-2 border-blue-500":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>_e("distribution"),children:[jsxRuntimeExports.jsx(BarChart,{size:18,className:`mr-2 ${et==="distribution"?"text-blue-600":"text-gray-500"}`}),"Profit Distribution"]}),jsxRuntimeExports.jsxs("button",{className:`flex items-center px-6 py-3 font-medium transition-all ${et==="by-brand"?"bg-blue-50 text-blue-700 border-b-2 border-blue-500":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>_e("by-brand"),children:[jsxRuntimeExports.jsx(BarChart3,{size:18,className:`mr-2 ${et==="by-brand"?"text-blue-600":"text-gray-500"}`}),"Analysis by Brand"]})]})}),jsxRuntimeExports.jsxs("div",{className:"transition-all duration-300 ease-in-out",children:[et==="formula"&&jsxRuntimeExports.jsx("div",{className:"animate-fadeIn",children:jsxRuntimeExports.jsx(ProfitFormulaEditor,{})}),et==="distribution"&&jsxRuntimeExports.jsx("div",{className:"animate-fadeIn",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[jsxRuntimeExports.jsx(ProfitDistributionChart,{}),jsxRuntimeExports.jsx(TopProfitableProducts,{})]})}),et==="by-brand"&&jsxRuntimeExports.jsx("div",{className:"animate-fadeIn",children:jsxRuntimeExports.jsx(BrandProfitAnalysis,{})})]})]})};function useSettings(){const[et,_e]=reactExports.useState({companyName:"Your Company",currency:"USD",dateFormat:"MM/DD/YYYY",defaultProductView:"list"}),[tt,st]=reactExports.useState({lowProfitAlert:!0,lowProfitThreshold:15,priceChangeAlert:!0,priceChangeThreshold:5,emailNotifications:!0,emailAddress:"user@example.com"}),[rt,nt]=reactExports.useState(!0),[it,ot]=reactExports.useState(null);reactExports.useEffect(()=>{at()},[]);async function at(){try{nt(!0);const{data:pt,error:mt}=await supabase.from("settings").select("value").eq("key","general").single();if(mt&&mt.code!=="PGRST116")throw mt;pt!=null&&pt.value&&_e(pt.value);const{data:gt,error:ft}=await supabase.from("settings").select("value").eq("key","notifications").single();if(ft&&ft.code!=="PGRST116")throw ft;gt!=null&&gt.value&&st(gt.value)}catch(pt){console.error("Error fetching settings:",pt),ot(pt instanceof Error?pt:new Error("Failed to load settings"))}finally{nt(!1)}}async function lt(pt){try{const{error:mt}=await supabase.from("settings").upsert({key:"general",value:pt,updated_at:new Date().toISOString()},{onConflict:"key"});if(mt)throw mt;return _e(pt),!0}catch(mt){throw console.error("Error saving general settings:",mt),mt instanceof Error?mt:new Error("Failed to save general settings")}}async function ct(pt){try{const{error:mt}=await supabase.from("settings").upsert({key:"notifications",value:pt,updated_at:new Date().toISOString()},{onConflict:"key"});if(mt)throw mt;return st(pt),!0}catch(mt){throw console.error("Error saving notification settings:",mt),mt instanceof Error?mt:new Error("Failed to save notification settings")}}async function ut(pt){try{let mt="",gt=`export-${pt}-${new Date().toISOString().split("T")[0]}.csv`;if(pt==="products"||pt==="all"){const{data:ft,error:xt}=await supabase.from("products").select("*");if(xt)throw xt;if(ft&&ft.length>0){if(pt==="products")mt=Papa.unparse(ft);else if(pt==="all"){const yt=Papa.unparse(ft);mt+=`# PRODUCTS
${yt}

`}}else pt==="products"&&(mt="No product data available")}if(pt==="suppliers"||pt==="all"){const{data:ft,error:xt}=await supabase.from("suppliers").select("*");if(xt)throw xt;if(ft&&ft.length>0){if(pt==="suppliers")mt=Papa.unparse(ft);else if(pt==="all"){const yt=Papa.unparse(ft);mt+=`# SUPPLIERS
${yt}

`}}else pt==="suppliers"&&(mt="No supplier data available");if(pt==="all"){const{data:yt,error:bt}=await supabase.from("supplier_products").select("*");if(bt)throw bt;if(yt&&yt.length>0){const St=Papa.unparse(yt);mt+=`# SUPPLIER_PRODUCTS
${St}

`}const{data:jt,error:Ct}=await supabase.from("custom_attributes").select("*");if(Ct)throw Ct;if(jt&&jt.length>0){const St=Papa.unparse(jt);mt+=`# CUSTOM_ATTRIBUTES
${St}

`}}}return{blob:new Blob([mt],{type:"text/csv"}),filename:gt}}catch(mt){throw console.error("Error exporting data:",mt),mt instanceof Error?mt:new Error("Failed to export data")}}async function dt(){try{const{error:pt}=await supabase.from("supplier_products").delete().neq("id","none");if(pt)throw pt;const{error:mt}=await supabase.from("products").delete().neq("id","none");if(mt)throw mt;return!0}catch(pt){throw console.error("Error clearing products:",pt),pt instanceof Error?pt:new Error("Failed to clear products")}}async function ht(){try{const{error:pt}=await supabase.from("supplier_products").delete().neq("id","none");if(pt)throw pt;const{error:mt}=await supabase.from("custom_attribute_values").delete().neq("id","none");if(mt)throw mt;return await Promise.all([supabase.from("products").delete().neq("id","none"),supabase.from("suppliers").delete().neq("id","none"),supabase.from("custom_attributes").delete().neq("id","none"),supabase.from("import_history").delete().neq("id","none")]),await supabase.from("settings").upsert([{key:"general",value:{companyName:"Your Company",currency:"USD",dateFormat:"MM/DD/YYYY",defaultProductView:"list"},updated_at:new Date().toISOString()},{key:"notifications",value:{lowProfitAlert:!0,lowProfitThreshold:15,priceChangeAlert:!0,priceChangeThreshold:5,emailNotifications:!0,emailAddress:"user@example.com"},updated_at:new Date().toISOString()}],{onConflict:"key"}),await at(),!0}catch(pt){throw console.error("Error resetting application:",pt),pt instanceof Error?pt:new Error("Failed to reset application")}}return{generalSettings:et,notificationSettings:tt,loading:rt,error:it,saveGeneralSettings:lt,saveNotificationSettings:ct,exportData:ut,clearProducts:dt,resetApplication:ht,refreshSettings:at}}const Settings=()=>{const{generalSettings:et,notificationSettings:_e,loading:tt,error:st,saveGeneralSettings:rt,saveNotificationSettings:nt,exportData:it,clearProducts:ot,resetApplication:at}=useSettings(),[lt,ct]=reactExports.useState({...et}),[ut,dt]=reactExports.useState({..._e}),[ht,pt]=reactExports.useState(!1),[mt,gt]=reactExports.useState(!1),[ft,xt]=reactExports.useState(!1),[yt,bt]=reactExports.useState(!1),[jt,Ct]=reactExports.useState(!1),[St,vt]=reactExports.useState(!1),[Et,Rt]=reactExports.useState(!1);reactExports.useEffect(()=>{ct({...et}),dt({..._e})},[et,_e]);const $t=wt=>{const{name:Tt,value:Bt}=wt.target;ct(Wt=>({...Wt,[Tt]:Bt}))},At=wt=>{const{name:Tt,value:Bt,type:Wt,checked:Mt}=wt.target;dt(qt=>({...qt,[Tt]:Wt==="checkbox"?Mt:Wt==="number"?parseInt(Bt):Bt}))},Xt=async()=>{try{pt(!0),await rt(lt),n.success("General settings saved successfully")}catch(wt){n.error(wt instanceof Error?wt.message:"Failed to save general settings")}finally{pt(!1)}},kt=async()=>{try{gt(!0),await nt(ut),n.success("Notification settings saved successfully")}catch(wt){n.error(wt instanceof Error?wt.message:"Failed to save notification settings")}finally{gt(!1)}},Zt=async wt=>{try{xt(!0);const{blob:Tt,filename:Bt}=await it(wt),Wt=URL.createObjectURL(Tt),Mt=document.createElement("a");Mt.href=Wt,Mt.download=Bt,document.body.appendChild(Mt),Mt.click(),document.body.removeChild(Mt),URL.revokeObjectURL(Wt),n.success(`${wt==="all"?"All data":`${wt.charAt(0).toUpperCase()+wt.slice(1)}`} exported successfully in CSV format`)}catch(Tt){n.error(Tt instanceof Error?Tt.message:"Failed to export data")}finally{xt(!1)}},Jt=async()=>{try{bt(!0),await ot(),n.success("All products cleared successfully"),Rt(!1)}catch(wt){n.error(wt instanceof Error?wt.message:"Failed to clear products")}finally{bt(!1)}},Yt=async()=>{try{Ct(!0),await at(),n.success("Application reset successfully"),vt(!1)}catch(wt){n.error(wt instanceof Error?wt.message:"Failed to reset application")}finally{Ct(!1)}};return tt?jsxRuntimeExports.jsx(LoadingOverlay,{message:"Loading settings..."}):st?jsxRuntimeExports.jsxs("div",{className:"p-6 bg-red-50 border border-red-200 rounded-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error Loading Settings"}),jsxRuntimeExports.jsx("p",{className:"text-red-600",children:st.message})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Settings"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 gap-6 mb-6",children:[jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4",children:"General Settings"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),jsxRuntimeExports.jsx("input",{type:"text",name:"companyName",className:"w-full border p-2 rounded",value:lt.companyName,onChange:$t})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),jsxRuntimeExports.jsxs("select",{name:"currency",className:"w-full border p-2 rounded",value:lt.currency,onChange:$t,children:[jsxRuntimeExports.jsx("option",{value:"USD",children:"USD ($)"}),jsxRuntimeExports.jsx("option",{value:"EUR",children:"EUR ()"}),jsxRuntimeExports.jsx("option",{value:"GBP",children:"GBP ()"}),jsxRuntimeExports.jsx("option",{value:"CAD",children:"CAD ($)"}),jsxRuntimeExports.jsx("option",{value:"AUD",children:"AUD ($)"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Format"}),jsxRuntimeExports.jsxs("select",{name:"dateFormat",className:"w-full border p-2 rounded",value:lt.dateFormat,onChange:$t,children:[jsxRuntimeExports.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),jsxRuntimeExports.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),jsxRuntimeExports.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Product View"}),jsxRuntimeExports.jsxs("select",{name:"defaultProductView",className:"w-full border p-2 rounded",value:lt.defaultProductView,onChange:$t,children:[jsxRuntimeExports.jsx("option",{value:"list",children:"List View"}),jsxRuntimeExports.jsx("option",{value:"grid",children:"Grid View"}),jsxRuntimeExports.jsx("option",{value:"detailed",children:"Detailed View"})]})]})]}),jsxRuntimeExports.jsxs(Button,{className:"flex items-center",onClick:Xt,disabled:ht,children:[jsxRuntimeExports.jsx(Save,{size:16,className:"mr-1"})," ",ht?"Saving...":"Save Settings"]})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Notification Settings"}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"lowProfitAlert",name:"lowProfitAlert",className:"h-4 w-4 text-blue-600 rounded",checked:ut.lowProfitAlert,onChange:At}),jsxRuntimeExports.jsx("label",{htmlFor:"lowProfitAlert",className:"ml-2 block text-sm text-gray-700",children:"Alert me when products have low profit margins"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center ml-6 mb-4",children:[jsxRuntimeExports.jsx("label",{htmlFor:"lowProfitThreshold",className:"block text-sm text-gray-700 mr-2",children:"Threshold:"}),jsxRuntimeExports.jsx("input",{type:"number",id:"lowProfitThreshold",name:"lowProfitThreshold",className:"border p-1 rounded w-16",value:ut.lowProfitThreshold,onChange:At,min:"0",max:"100"}),jsxRuntimeExports.jsx("span",{className:"ml-1 text-sm text-gray-700",children:"%"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"priceChangeAlert",name:"priceChangeAlert",className:"h-4 w-4 text-blue-600 rounded",checked:ut.priceChangeAlert,onChange:At}),jsxRuntimeExports.jsx("label",{htmlFor:"priceChangeAlert",className:"ml-2 block text-sm text-gray-700",children:"Alert me when Buy Box price changes significantly"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center ml-6 mb-4",children:[jsxRuntimeExports.jsx("label",{htmlFor:"priceChangeThreshold",className:"block text-sm text-gray-700 mr-2",children:"Threshold:"}),jsxRuntimeExports.jsx("input",{type:"number",id:"priceChangeThreshold",name:"priceChangeThreshold",className:"border p-1 rounded w-16",value:ut.priceChangeThreshold,onChange:At,min:"0",max:"100"}),jsxRuntimeExports.jsx("span",{className:"ml-1 text-sm text-gray-700",children:"%"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"emailNotifications",name:"emailNotifications",className:"h-4 w-4 text-blue-600 rounded",checked:ut.emailNotifications,onChange:At}),jsxRuntimeExports.jsx("label",{htmlFor:"emailNotifications",className:"ml-2 block text-sm text-gray-700",children:"Send notifications to my email"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center ml-6 mb-4",children:[jsxRuntimeExports.jsx("label",{htmlFor:"emailAddress",className:"block text-sm text-gray-700 mr-2",children:"Email:"}),jsxRuntimeExports.jsx("input",{type:"email",id:"emailAddress",name:"emailAddress",className:"border p-1 rounded w-64",value:ut.emailAddress,onChange:At})]})]}),jsxRuntimeExports.jsxs(Button,{className:"flex items-center",onClick:kt,disabled:mt,children:[jsxRuntimeExports.jsx(Save,{size:16,className:"mr-1"})," ",mt?"Saving...":"Save Notification Settings"]})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Data Management"}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg mb-2",children:"Import/Export"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Manage your data by exporting it for backup or importing from file."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:()=>Zt("products"),disabled:ft,className:"flex items-center",children:[jsxRuntimeExports.jsx(FileDown,{size:16,className:"mr-1"})," Export Products as CSV"]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>Zt("suppliers"),disabled:ft,className:"flex items-center",children:[jsxRuntimeExports.jsx(FileDown,{size:16,className:"mr-1"})," Export Suppliers as CSV"]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>Zt("all"),disabled:ft,className:"flex items-center",children:[jsxRuntimeExports.jsx(FileDown,{size:16,className:"mr-1"})," Export All Data as CSV"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t pt-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg mb-2 text-red-600",children:"Danger Zone"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"These actions cannot be undone. Please be certain."}),Et?jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 p-4 rounded-md mb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"text-red-500 mr-2 mt-0.5 flex-shrink-0",size:18}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-red-700 font-medium",children:"Are you sure you want to clear all products?"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600 mb-3",children:"This will delete all products and their supplier relationships. This action cannot be undone."}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx(Button,{variant:"danger",onClick:Jt,disabled:yt,children:yt?"Clearing...":"Yes, Clear All Products"}),jsxRuntimeExports.jsx(Button,{onClick:()=>Rt(!1),children:"Cancel"})]})]})]})}):jsxRuntimeExports.jsx(Button,{variant:"danger",onClick:()=>Rt(!0),className:"mr-2",children:"Clear All Products"}),St?jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 p-4 rounded-md",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"text-red-500 mr-2 mt-0.5 flex-shrink-0",size:18}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-red-700 font-medium",children:"Are you sure you want to reset the application?"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600 mb-3",children:"This will delete ALL data including products, suppliers, custom attributes, and import history. Settings will be reset to defaults. This action cannot be undone."}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx(Button,{variant:"danger",onClick:Yt,disabled:jt,children:jt?"Resetting...":"Yes, Reset Everything"}),jsxRuntimeExports.jsx(Button,{onClick:()=>vt(!1),children:"Cancel"})]})]})]})}):jsxRuntimeExports.jsx(Button,{variant:"danger",onClick:()=>vt(!0),children:"Reset Application"})]})]})]})]})},FORMULA_STORAGE_KEY="profit-formula-items",DEFAULT_FORMULA=[{id:"1",type:"field",value:"salePrice",displayValue:"Sale Price"},{id:"2",type:"operator",value:"-",displayValue:"-"},{id:"3",type:"field",value:"amazonFee",displayValue:"Amazon Fee"},{id:"4",type:"operator",value:"-",displayValue:"-"},{id:"5",type:"field",value:"supplierCost",displayValue:"Supplier Cost"}],ProfitFormulaContext=reactExports.createContext(void 0),ProfitFormulaProvider=({children})=>{const[formulaItems,setFormulaItems]=reactExports.useState(()=>{const et=localStorage.getItem(FORMULA_STORAGE_KEY);if(et)try{return JSON.parse(et)}catch(_e){console.error("Failed to parse saved formula",_e)}return DEFAULT_FORMULA}),[isSaved,setIsSaved]=reactExports.useState(!0);reactExports.useEffect(()=>{setIsSaved(!1)},[formulaItems]);const saveFormula=()=>{localStorage.setItem(FORMULA_STORAGE_KEY,JSON.stringify(formulaItems)),setIsSaved(!0)},resetFormula=()=>{window.confirm("Are you sure you want to reset the formula to default?")&&(setFormulaItems(DEFAULT_FORMULA),localStorage.setItem(FORMULA_STORAGE_KEY,JSON.stringify(DEFAULT_FORMULA)),setIsSaved(!0))},evaluateFormula=values=>{if(formulaItems.length===0)return 0;try{let formulaStr="";return formulaItems.forEach(et=>{et.type==="field"||et.type==="customAttribute"?formulaStr+=values[et.value]||0:(et.type==="operator"||et.type==="constant")&&(formulaStr+=et.value)}),eval(formulaStr)}catch(et){return console.error("Error evaluating formula:",et),0}};return jsxRuntimeExports.jsx(ProfitFormulaContext.Provider,{value:{formulaItems,setFormulaItems,isSaved,saveFormula,resetFormula,evaluateFormula},children})},useProfitFormula=()=>{const et=reactExports.useContext(ProfitFormulaContext);if(et===void 0)throw new Error("useProfitFormula must be used within a ProfitFormulaProvider");return et},SupplierComparison=({productId:et})=>{var it;const{getSuppliersForProduct:_e,suppliers:tt}=useAppContext(),st=_e(et);if(st.length===0)return jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-semibold mb-2",children:"Suppliers Comparison"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500 py-4 text-center bg-gray-50 rounded",children:"No suppliers found for this product."})]});const rt=[...st].sort((ot,at)=>ot.cost-at.cost),nt=(it=rt[0])==null?void 0:it.supplier_id;return jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-semibold mb-2",children:"Suppliers Comparison"}),jsxRuntimeExports.jsx("div",{className:"overflow-hidden rounded-md border border-gray-200",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"}),jsxRuntimeExports.jsx("th",{scope:"col",className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),jsxRuntimeExports.jsx("th",{scope:"col",className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MOQ"}),jsxRuntimeExports.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lead Time"}),jsxRuntimeExports.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Terms"}),jsxRuntimeExports.jsx("th",{scope:"col",className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Match"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:rt.map(ot=>{const at=tt.find(ct=>ct.id===ot.supplier_id),lt=ot.supplier_id===nt;return jsxRuntimeExports.jsxs("tr",{className:lt?"bg-green-50":"",children:[jsxRuntimeExports.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[lt&&jsxRuntimeExports.jsx("span",{className:"flex-shrink-0 w-2 h-2 bg-green-500 rounded-full mr-2"}),jsxRuntimeExports.jsx("span",{className:`${lt?"font-medium":""}`,children:(at==null?void 0:at.name)||"-"})]})}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-right font-medium",children:jsxRuntimeExports.jsxs("span",{className:lt?"text-green-600":"",children:["$",ot.cost.toFixed(2)]})}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:ot.moq||1}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ot.lead_time||"-"}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ot.payment_terms||"-"}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx(ProductMatchBadge$1,{matchMethod:ot.match_method})})})]},ot.id)})})]})})]})};Chart$1.register(CategoryScale,LinearScale,BarElement,plugin_title,plugin_tooltip,plugin_legend);const ProductDetail=()=>{var os,ls;const{id:et}=useParams(),_e=useNavigate(),{getProductById:tt,getSuppliersForProduct:st,getBestSupplierForProduct:rt,loading:nt,refreshData:it,getEntityAttributes:ot,setAttributeValue:at,updateProduct:lt}=useAppContext(),{formulaItems:ct,evaluateFormula:ut}=useProfitFormula(),[dt,ht]=reactExports.useState(!1),[pt,mt]=reactExports.useState(!1),[gt,ft]=reactExports.useState(null),[xt,yt]=reactExports.useState(!1),[bt,jt]=reactExports.useState(0),[Ct,St]=reactExports.useState(0),[vt,Et]=reactExports.useState(0),[Rt,$t]=reactExports.useState({perUnit:0,monthly:0,margin:0}),[At,Xt]=reactExports.useState(!1),kt=tt(et);reactExports.useEffect(()=>{kt&&(pt||!gt)&&ft({...kt,title:kt.title,ean:kt.ean,brand:kt.brand,mpn:kt.mpn||"",salePrice:kt.salePrice,buyBoxPrice:kt.buyBoxPrice,amazonFee:kt.amazonFee,unitsSold:kt.unitsSold,category:kt.category||""})},[kt,pt]),reactExports.useEffect(()=>{if(kt){jt(kt.salePrice),St(kt.amazonFee);const Qt=rt(kt.id);Qt&&Et(Qt.cost)}},[kt,rt]);const Zt=async()=>{try{ht(!0),await it()}catch(Qt){console.error("Error refreshing data:",Qt)}finally{ht(!1)}},Jt=()=>{if(isNaN(bt)||isNaN(Ct)||isNaN(vt)){alert("Please enter valid numbers for all fields");return}const Qt={salePrice:bt,amazonFee:Ct,supplierCost:vt,buyBoxPrice:(kt==null?void 0:kt.buyBoxPrice)||0,unitsSold:(kt==null?void 0:kt.unitsSold)||0};ot((kt==null?void 0:kt.id)||"","product").forEach(({attribute:ds,value:ps})=>{ds.type==="Number"&&(Qt[`attr_${ds.id}`]=typeof ps=="number"?ps:0)});const ns=ut(Qt),cs=kt?ns*kt.unitsSold:0,us=bt>0?ns/bt*100:0;$t({perUnit:ns,monthly:cs,margin:us})},Yt=(Qt,ts)=>{const ns=parseFloat(ts);Qt(isNaN(ns)?0:ns),At&&setTimeout(()=>Jt(),100)},wt=Qt=>{Qt.key==="Enter"&&Jt()},Tt=()=>{if(kt){jt(kt.salePrice),St(kt.amazonFee);const Qt=rt(kt.id);Qt&&Et(Qt.cost),$t({perUnit:0,monthly:0,margin:0})}},Bt=(Qt,ts)=>{ft(ns=>({...ns,[Qt]:ts}))},Wt=async()=>{if(gt)try{if(yt(!0),!gt.title||!gt.ean||!gt.brand){_t.error("Title, EAN, and Brand are required fields");return}if(isNaN(gt.salePrice)||isNaN(gt.amazonFee)||isNaN(gt.buyBoxPrice)||isNaN(gt.unitsSold)){_t.error("Price and quantity fields must be numbers");return}const Qt={...gt,salePrice:parseFloat(gt.salePrice),amazonFee:parseFloat(gt.amazonFee),buyBoxPrice:parseFloat(gt.buyBoxPrice),unitsSold:parseInt(gt.unitsSold)};await lt(Qt),await it(),_t.success("Product updated successfully"),mt(!1)}catch(Qt){console.error("Error updating product:",Qt),_t.error("Failed to update product")}finally{yt(!1)}},Mt=()=>{kt&&ft({...kt,title:kt.title,ean:kt.ean,brand:kt.brand,mpn:kt.mpn||"",salePrice:kt.salePrice,buyBoxPrice:kt.buyBoxPrice,amazonFee:kt.amazonFee,unitsSold:kt.unitsSold,category:kt.category||""}),mt(!1)};if(nt||dt||xt)return jsxRuntimeExports.jsx(LoadingOverlay,{message:xt?"Saving product data...":dt?"Refreshing product data...":"Loading product details..."});if(!kt)return jsxRuntimeExports.jsxs("div",{className:"text-center py-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Product Not Found"}),jsxRuntimeExports.jsx("p",{className:"mb-6",children:"The product you're looking for doesn't exist or has been removed."}),jsxRuntimeExports.jsxs(Button,{onClick:()=>_e("/products"),className:"flex items-center mx-auto",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16,className:"mr-2"})," Back to Products"]})]});const qt=st(kt.id),es=rt(kt.id),Ot=[...qt].sort((Qt,ts)=>Qt.cost-ts.cost),It=Ot.map(Qt=>{var ts;return((ts=Qt.suppliers)==null?void 0:ts.name)||"Unknown"}),zt=Ot.map(Qt=>Qt.cost),Nt={labels:It,datasets:[{label:"Cost per Unit ($)",data:zt,backgroundColor:It.map((Qt,ts)=>ts===0?"rgba(72, 187, 120, 0.7)":"rgba(49, 130, 206, 0.7)"),borderColor:It.map((Qt,ts)=>ts===0?"#48bb78":"#3182ce"),borderWidth:1}]},Lt={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"}},y:{grid:{display:!1}}}},Kt=kt.salePrice,Ut=kt.amazonFee,ss=es?es.cost:0,as={salePrice:Kt,amazonFee:Ut,supplierCost:ss,buyBoxPrice:kt.buyBoxPrice,unitsSold:kt.unitsSold},Dt=ot(kt.id,"product");Dt.forEach(({attribute:Qt,value:ts})=>{Qt.type==="Number"&&(as[`attr_${Qt.id}`]=typeof ts=="number"?ts:0)});const Gt=ut(as),Pt=Gt*kt.unitsSold,Vt=Kt>0?Gt/Kt*100:0,Ft=zt.length>1,Ht=Ft?Math.min(...zt):zt[0]||0,is=Ft?Math.max(...zt):zt[0]||0;return jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"mr-3",onClick:()=>_e("/products"),children:[jsxRuntimeExports.jsx(ArrowLeft,{size:14,className:"mr-1.5"})," Back"]}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold",children:kt.title})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-2",children:pt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",onClick:Mt,className:"flex items-center text-sm py-1.5",children:[jsxRuntimeExports.jsx(X$1,{size:14,className:"mr-1.5"})," Cancel"]}),jsxRuntimeExports.jsxs(Button,{onClick:Wt,className:"flex items-center text-sm py-1.5 bg-green-600 hover:bg-green-700",children:[jsxRuntimeExports.jsx(Save,{size:14,className:"mr-1.5"})," Save"]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",onClick:()=>mt(!0),className:"flex items-center text-sm py-1.5",children:[jsxRuntimeExports.jsx(Pen,{size:14,className:"mr-1.5"})," Edit"]}),jsxRuntimeExports.jsxs(Button,{onClick:Zt,className:"flex items-center text-sm py-1.5",children:[jsxRuntimeExports.jsx(RefreshCcw,{size:14,className:"mr-1.5"})," Refresh"]})]})})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-12 gap-3 mb-3",children:jsxRuntimeExports.jsx("div",{className:"col-span-12",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-start mb-2",children:pt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500 mr-1",children:"EAN:"}),jsxRuntimeExports.jsx("input",{type:"text",value:(gt==null?void 0:gt.ean)||"",onChange:Qt=>Bt("ean",Qt.target.value),className:"border p-1 rounded text-sm w-32"})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500 mr-1",children:"Brand:"}),jsxRuntimeExports.jsx("input",{type:"text",value:(gt==null?void 0:gt.brand)||"",onChange:Qt=>Bt("brand",Qt.target.value),className:"border p-1 rounded text-sm w-32"})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500 mr-1",children:"MPN:"}),jsxRuntimeExports.jsx("input",{type:"text",value:(gt==null?void 0:gt.mpn)||"",onChange:Qt=>Bt("mpn",Qt.target.value),className:"border p-1 rounded text-sm w-32"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500",children:["EAN: ",kt.ean]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500",children:["Brand: ",kt.brand]}),kt.mpn&&jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500",children:["MPN: ",kt.mpn]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:"Sale Price"}),pt?jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",value:(gt==null?void 0:gt.salePrice)||0,onChange:Qt=>Bt("salePrice",Qt.target.value),className:"border p-1 rounded text-sm w-full"}):jsxRuntimeExports.jsxs("div",{className:"text-base font-semibold",children:["$",kt.salePrice.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:"Units Sold"}),pt?jsxRuntimeExports.jsx("input",{type:"number",value:(gt==null?void 0:gt.unitsSold)||0,onChange:Qt=>Bt("unitsSold",Qt.target.value),className:"border p-1 rounded text-sm w-full"}):jsxRuntimeExports.jsx("div",{className:"text-base font-semibold",children:kt.unitsSold.toLocaleString()})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:"Buy Box"}),pt?jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",value:(gt==null?void 0:gt.buyBoxPrice)||0,onChange:Qt=>Bt("buyBoxPrice",Qt.target.value),className:"border p-1 rounded text-sm w-full"}):jsxRuntimeExports.jsxs("div",{className:"text-base font-semibold",children:["$",kt.buyBoxPrice.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:"Amazon Fee"}),pt?jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",value:(gt==null?void 0:gt.amazonFee)||0,onChange:Qt=>Bt("amazonFee",Qt.target.value),className:"border p-1 rounded text-sm w-full"}):jsxRuntimeExports.jsxs("div",{className:"text-base font-semibold",children:["$",kt.amazonFee.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:"Category"}),pt?jsxRuntimeExports.jsx("input",{type:"text",value:(gt==null?void 0:gt.category)||"",onChange:Qt=>Bt("category",Qt.target.value),className:"border p-1 rounded text-sm w-full"}):jsxRuntimeExports.jsx("div",{className:"text-base font-semibold truncate",children:kt.category||"N/A"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:"Rating"}),jsxRuntimeExports.jsxs("div",{className:"text-base font-semibold",children:[((os=kt.rating)==null?void 0:os.toFixed(1))||"N/A",kt.reviewCount?jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",kt.reviewCount,")"]}):""]})]})]})]})})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-12 gap-3 mb-3",children:jsxRuntimeExports.jsx("div",{className:"col-span-12",children:jsxRuntimeExports.jsx(SupplierComparison,{productId:kt.id})})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-12 gap-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"col-span-12 md:col-span-4",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Cost Comparison"}),qt.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-6 text-gray-500 h-[180px] flex items-center justify-center bg-gray-50 rounded",children:jsxRuntimeExports.jsx("span",{className:"text-xs",children:"No supplier data available to generate chart"})}):jsxRuntimeExports.jsx("div",{className:"h-[180px]",children:jsxRuntimeExports.jsx(Bar,{data:Nt,options:Lt})})]})}),jsxRuntimeExports.jsx("div",{className:"col-span-12 sm:col-span-4",children:jsxRuntimeExports.jsxs(Card,{className:"bg-blue-50 h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold",children:"Profit Analysis"}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-blue-700 flex items-center",children:[jsxRuntimeExports.jsx(Calculator,{size:12,className:"mr-1"}),"Using shared formula"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 rounded shadow-sm flex justify-between items-center",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600",children:"Margin:"}),jsxRuntimeExports.jsxs("div",{className:`text-sm font-semibold ${Vt>0?"text-green-600":"text-red-600"}`,children:[Vt.toFixed(1),"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 rounded shadow-sm flex justify-between items-center",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600",children:"Unit Profit:"}),jsxRuntimeExports.jsxs("div",{className:`text-sm font-semibold ${Gt>0?"text-black":"text-red-600"}`,children:["$",Gt.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 rounded shadow-sm flex justify-between items-center",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600",children:"Monthly:"}),jsxRuntimeExports.jsxs("div",{className:`text-sm font-semibold ${Pt>0?"text-black":"text-red-600"}`,children:["$",Pt.toFixed(2)]})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"col-span-12 sm:col-span-4",children:jsxRuntimeExports.jsxs(Card,{className:`${qt.length>0?"bg-green-50":"bg-gray-100"} h-full`,children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Multi-Supplier Product"}),qt.length>0?jsxRuntimeExports.jsxs("div",{className:"text-xs",children:[jsxRuntimeExports.jsxs("p",{className:"flex items-center mb-1.5",children:[jsxRuntimeExports.jsx(Check,{size:14,className:"text-green-600 mr-1 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[qt.length," supplier",qt.length!==1?"s":""," available"]})]}),Ft&&jsxRuntimeExports.jsxs("p",{className:"flex items-center mb-1.5",children:[jsxRuntimeExports.jsx(Check,{size:14,className:"text-green-600 mr-1 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Cost range:"})," $",Ht.toFixed(2)," - $",is.toFixed(2)]})]}),jsxRuntimeExports.jsxs("p",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Check,{size:14,className:"text-green-600 mr-1 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Best supplier:"})," ",((ls=es==null?void 0:es.suppliers)==null?void 0:ls.name)||"N/A"]})]})]}):jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600",children:jsxRuntimeExports.jsx("p",{children:"No suppliers available for this product."})})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-12 gap-3",children:[jsxRuntimeExports.jsx("div",{className:"col-span-12 md:col-span-6",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Custom Attributes"}),(()=>{const Qt=ot(kt.id,"product");return Qt.length===0?jsxRuntimeExports.jsx("div",{className:"text-gray-500 text-xs bg-gray-50 p-2 rounded",children:"No custom attributes defined. Add custom attributes in the Settings menu."}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:Qt.map(({attribute:ts,value:ns})=>{const cs=async ds=>{try{await at(ts.id,kt.id,ds)}catch(ps){console.error("Error updating attribute value:",ps)}};let us;switch(ts.type){case"Number":us=jsxRuntimeExports.jsx("input",{type:"number",value:ns!==null?ns:"",onChange:ds=>cs(Number(ds.target.value)),className:"border p-1 rounded w-full text-xs"});break;case"Date":us=jsxRuntimeExports.jsx("input",{type:"date",value:ns||"",onChange:ds=>cs(ds.target.value),className:"border p-1 rounded w-full text-xs"});break;case"Yes/No":us=jsxRuntimeExports.jsxs("select",{value:ns===!0?"true":"false",onChange:ds=>cs(ds.target.value==="true"),className:"border p-1 rounded w-full text-xs",children:[jsxRuntimeExports.jsx("option",{value:"false",children:"No"}),jsxRuntimeExports.jsx("option",{value:"true",children:"Yes"})]});break;default:us=jsxRuntimeExports.jsx("input",{type:"text",value:ns||"",onChange:ds=>cs(ds.target.value),className:"border p-1 rounded w-full text-xs"})}return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-0.5",children:jsxRuntimeExports.jsxs("label",{className:"text-xs font-medium text-gray-600",children:[ts.name,ts.required&&jsxRuntimeExports.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})}),us]},ts.id)})})})()]})}),jsxRuntimeExports.jsx("div",{className:"col-span-12 md:col-span-6",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold",children:"Profit Calculation"}),jsxRuntimeExports.jsxs(Button,{variant:"secondary",onClick:()=>_e("/profit-analysis"),className:"text-xs flex items-center text-blue-600",children:[jsxRuntimeExports.jsx(Calculator,{size:12,className:"mr-1"}),"Edit Formula"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[jsxRuntimeExports.jsx("table",{className:"w-full text-xs",children:jsxRuntimeExports.jsxs("tbody",{children:[ct.map((Qt,ts)=>{var us,ds,ps,ys,fs,hs;if(Qt.type==="operator")return null;let ns=0,cs="";if(Qt.type==="field")switch(Qt.value){case"salePrice":ns=kt.salePrice;break;case"amazonFee":ns=kt.amazonFee,cs=ts>0&&((us=ct[ts-1])==null?void 0:us.value)==="-"?"-":"";break;case"supplierCost":ns=ss,cs=ts>0&&((ds=ct[ts-1])==null?void 0:ds.value)==="-"?"-":"";break;case"buyBoxPrice":ns=kt.buyBoxPrice;break;case"unitsSold":ns=kt.unitsSold;break;default:ns=0}else if(Qt.type==="customAttribute"){const xs=Qt.value.replace("attr_",""),gs=Dt.find(bs=>bs.attribute.id===xs);ns=gs&&typeof gs.value=="number"?gs.value:0,cs=ts>0&&((ps=ct[ts-1])==null?void 0:ps.value)==="-"?"-":""}else Qt.type==="constant"&&(ns=parseFloat(Qt.value),cs=ts>0&&((ys=ct[ts-1])==null?void 0:ys.value)==="-"?"-":"");return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsxs("td",{className:"font-medium py-0.5",children:[Qt.displayValue||Qt.value,Qt.type==="field"&&Qt.value==="supplierCost"&&` (${((fs=es==null?void 0:es.suppliers)==null?void 0:fs.name)||"N/A"})`,":"]}),jsxRuntimeExports.jsxs("td",{className:"text-right",children:[cs,cs==="-"||ts>0&&["*","/"].includes((hs=ct[ts-1])==null?void 0:hs.value)?"":"$",typeof ns=="number"?Qt.value==="unitsSold"?ns.toLocaleString():ns.toFixed(2):ns]})]},Qt.id)}),jsxRuntimeExports.jsxs("tr",{className:"border-t",children:[jsxRuntimeExports.jsx("td",{className:"font-medium py-1",children:"Profit per Unit:"}),jsxRuntimeExports.jsxs("td",{className:`text-right font-bold ${Gt>0?"":"text-red-600"}`,children:["$",Gt.toFixed(2)]})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"font-medium py-0.5",children:"Monthly Units Sold:"}),jsxRuntimeExports.jsx("td",{className:"text-right",children:kt.unitsSold.toLocaleString()})]}),jsxRuntimeExports.jsxs("tr",{className:"border-t",children:[jsxRuntimeExports.jsx("td",{className:"font-medium py-1",children:"Monthly Profit:"}),jsxRuntimeExports.jsxs("td",{className:`text-right font-bold ${Pt>0?"text-green-600":"text-red-600"}`,children:["$",Pt.toFixed(2)]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-xs",children:"Custom Profit Calculator"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center text-xs cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:At,onChange:()=>Xt(!At),className:"mr-1 h-3 w-3"}),"Auto"]}),jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:Tt,className:"text-xs py-0.5 px-1.5",children:"Reset"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-1.5 rounded mb-1.5 border border-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-1.5",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Sale Price ($)"}),jsxRuntimeExports.jsx("input",{type:"number",value:bt||"",onChange:Qt=>Yt(jt,Qt.target.value),onKeyDown:wt,step:"0.01",min:"0",placeholder:"Sale Price",className:"border p-1 rounded w-full text-xs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Amazon Fee ($)"}),jsxRuntimeExports.jsx("input",{type:"number",value:Ct||"",onChange:Qt=>Yt(St,Qt.target.value),onKeyDown:wt,step:"0.01",min:"0",placeholder:"Amazon Fee",className:"border p-1 rounded w-full text-xs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Supplier Cost ($)"}),jsxRuntimeExports.jsx("input",{type:"number",value:vt||"",onChange:Qt=>Yt(Et,Qt.target.value),onKeyDown:wt,step:"0.01",min:"0",placeholder:"Supplier Cost",className:"border p-1 rounded w-full text-xs"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-1.5 flex justify-end",children:jsxRuntimeExports.jsx(Button,{onClick:Jt,disabled:At,className:`text-xs py-0.5 px-2 ${At?"opacity-50":""}`,children:"Calculate"})})]}),(Rt.perUnit!==0||Rt.monthly!==0||Rt.margin!==0)&&jsxRuntimeExports.jsxs("div",{className:"p-1.5 bg-blue-50 rounded border border-blue-100",children:[jsxRuntimeExports.jsx("h5",{className:"font-medium text-xs mb-1 text-blue-800",children:"Calculation Results"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-1.5 text-xs",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-gray-600",children:"Profit per Unit"}),jsxRuntimeExports.jsxs("div",{className:`font-semibold ${Rt.perUnit>0?"text-black":"text-red-600"}`,children:["$",Rt.perUnit.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-gray-600",children:"Monthly Profit"}),jsxRuntimeExports.jsxs("div",{className:`font-semibold ${Rt.monthly>0?"text-black":"text-red-600"}`,children:["$",Rt.monthly.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-gray-600",children:"Profit Margin"}),jsxRuntimeExports.jsxs("div",{className:`font-semibold ${Rt.margin>0?"text-green-600":"text-red-600"}`,children:[Rt.margin.toFixed(1),"%"]})]})]})]})]})]})]})})]})]})};function App(){return jsxRuntimeExports.jsx(AppProvider,{children:jsxRuntimeExports.jsxs(ProfitFormulaProvider,{children:[jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Dashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/import-data",element:jsxRuntimeExports.jsx(ImportData,{})}),jsxRuntimeExports.jsx(Route,{path:"/products",element:jsxRuntimeExports.jsx(Products,{})}),jsxRuntimeExports.jsx(Route,{path:"/products/:id",element:jsxRuntimeExports.jsx(ProductDetail,{})}),jsxRuntimeExports.jsx(Route,{path:"/suppliers",element:jsxRuntimeExports.jsx(Suppliers,{})}),jsxRuntimeExports.jsx(Route,{path:"/suppliers/:id",element:jsxRuntimeExports.jsx(SupplierDetail,{})}),jsxRuntimeExports.jsx(Route,{path:"/attributes",element:jsxRuntimeExports.jsx(CustomAttributes,{})}),jsxRuntimeExports.jsx(Route,{path:"/profit-analysis",element:jsxRuntimeExports.jsx(ProfitAnalysis,{})}),jsxRuntimeExports.jsx(Route,{path:"/settings",element:jsxRuntimeExports.jsx(Settings,{})})]})})}),jsxRuntimeExports.jsx(Ie,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{duration:4e3,iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})})}createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{getDefaultExportFromCjs as g};
